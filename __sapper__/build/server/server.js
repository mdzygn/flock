'use strict';

function _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }

var sirv = _interopDefault(require('sirv'));
var polka = _interopDefault(require('polka'));
var compression = _interopDefault(require('compression'));
var fs = _interopDefault(require('fs'));
var path$1 = _interopDefault(require('path'));
var EventEmitter = _interopDefault(require('eventemitter3'));
var Stream = _interopDefault(require('stream'));
var http = _interopDefault(require('http'));
var Url = _interopDefault(require('url'));
var https = _interopDefault(require('https'));
var zlib = _interopDefault(require('zlib'));
var bodyParser = _interopDefault(require('body-parser'));

const DEBUG = (!!"production".match(/development|staging/));

const MONGODB_URI = process.env.MONGODB_URI; // + '?retryWrites=false';
const MONGODB_DB = process.env.MONGODB_DB;

const MESSAGE_SYNC_DEBUG = false ;

const SITE = 'flockprojects.com';
const SITE_URL = 'https://flockprojects.com';

const FROM_EMAIL = 'hello@flockprojects.com'; // 'mattdhalford@gmail.com'; // 'support@flock-hub.herokuapp.com';


const config = {
    DEBUG,

    MESSAGE_SYNC_DEBUG,

    MONGODB_URI,
    MONGODB_DB,

    SITE,
    SITE_URL,

    FROM_EMAIL,
};

const mongo = require('mongodb');

const ObjectID = mongo.ObjectID;

let client = null;
let db = null;

async function init() {
    if (!client) {
        client = await mongo.MongoClient.connect(config.MONGODB_URI, { useUnifiedTopology:true });
        db = client.db(config.MONGODB_DB);
    }
    return { client, db };
}

function response(res, responseObject) {
    res.writeHead(200, {'Content-Type': 'application/json'});
    res.end(JSON.stringify(responseObject));
}

function errorResponse(res, errorObject, debugObject) {
    response(res, Object.assign({error: true}, errorObject, (DEBUG && debugObject) ? debugObject : null));
}

async function validateCredentials(db, options) {
    const userItem = await db.collection('users').findOne({ id: options.userId });

    // TODO: validate with sessions
    if (userItem && userItem.usercode === options.usercode) { // && (userItem.pass || options.setAccount)) {
        return true;
    } else {
        return false;
    }
}

function filterItemArrayDetails(items, itemDetails) {
    const filteredItems = [];
	if (items && items.length) {
		let newItem, sourceItem;
		for (var itemI = 0; itemI < items.length; itemI++) {
            sourceItem = items[itemI];
            newItem = filterItemDetails(sourceItem, itemDetails);
            filteredItems.push(newItem);
		}
    }
    return filteredItems;
}

function filterItemDetails(sourceItem, itemDetails) {
    const newItem = {};

    for (let key in itemDetails) {
        if (sourceItem[key] !== undefined) {
            newItem[key] = sourceItem[key];
        }
    }

    return newItem;
}

function generateId(length) {
    if (!length) {
        length = 8;
    }
    const chars = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';
    const idBase = new Array(length + 1).join('x');
    return idBase.replace(/x/g, function() {
        return chars[Math.floor(Math.random() * chars.length)];
    });
}

function getConversationUsersId(userIds) {
	const newUserIds = [...userIds];
	newUserIds.sort();
	const usersId = newUserIds.join('-');
	return usersId;
}

async function filterItemsByProjectAccess(items, userId, validLogin) {
	const projectIds = getItemIds(items, 'projectId');
	// const projectIds = [];
	// let item;
	// for (var itemI = 0; itemI < items.length; itemI++) {
	// 	item = items[itemI];
	// 	if (!projectIds.includes(item.projectId)) { // !(item.public && !item.archived) &&
	// 		projectIds.push(item.projectId);
	// 	}
	// }

	let projects = null;
	if (projectIds.length) {
		const projectsFilter = { "id": { "$in": projectIds } };
		projects = await db.collection('projects').find(projectsFilter).toArray();
		// console.log('projectIds', projectIds, projectId, id, projects.length);
	}

	let curProject;
	items = items.filter((item) => {
		curProject = projects.find(project => project.id === item.projectId);
		// console.log('curProject', curProject);
		if (curProject) {
			if (curProject.public && !curProject.archived) {
				// console.log('public');
				return true;
			} else if (userId && validLogin && curProject.team && curProject.team.includes(userId)) {
				// console.log('team');
				return true;
			} else {
				// console.log('not allowed');
				return false;
			}
		} else {
			return false;
		}
    });

    return items;
}

function getItemIds(items, propName) {
    const itemIds = [];
	let item;
	for (var itemI = 0; itemI < items.length; itemI++) {
		item = items[itemI];
		if (item[propName] && !itemIds.includes(item[propName])) { // !(item.public && !item.archived) &&
			itemIds.push(item[propName]);
		}
    }
    return itemIds;
}

async function loadUserItemProperties(items, options) {
    const itemIds = getItemIds(items, 'id');

    const userId = options && options.userId;
    const itemIdProp = options && options.itemIdProp;
    const collections = options && options.collections;

    // TODO: optimize

    if (itemIdProp && collections) {
        if (itemIds.length) {
            const userProjectFilter = { "userId": userId };
            userProjectFilter[itemIdProp] = { "$in": itemIds };

            let followedProjectIds = null;
            let likedProjectIds = null;

            if (collections.follows) {
                followedProjectIds = {};
                const follows = await db.collection(collections.follows).find(userProjectFilter).toArray(); // {userId: userId}
                for (var followI = 0; followI < follows.length; followI++) {
                    followedProjectIds[follows[followI][itemIdProp]] = follows[followI];
                }
            }

            if (collections.likes) {
                likedProjectIds = {};
                const likes = await db.collection(collections.likes).find(userProjectFilter).toArray();
                for (var likeI = 0; likeI < likes.length; likeI++) {
                    likedProjectIds[likes[likeI][itemIdProp]] = true;
                }
            }

            let item, followItem;
            for (var itemI = 0; itemI < items.length; itemI++) {
                item = items[itemI];

                if (collections.likes) {
                    item.liked = !!likedProjectIds[item.id];
                }

                if (collections.follows) {
                    followItem = followedProjectIds[item.id];
                    item.following = !!followItem;
                    if (item.following) {
                        item.followTime = followItem.createdAt;
                    }
                }
            }
        }
    }
}

async function getProjectLikeFollowCounts(projects) {
    // const projectIds = getItemIds(projects, 'id');
    // console.log('projectIds', projects.length, projectIds);

    // create aggregate queries to tally number of likes and follows for each project

    const aggregateCountFacet = {};
    const aggregateCountProject = {};
    const aggregateCountQuery = [
        { "$facet": aggregateCountFacet },
        { "$project": aggregateCountProject }
    ];

    let project;
    for (var projectI = 0; projectI < projects.length; projectI++) {
        project = projects[projectI];

        aggregateCountFacet[project.id] = [
            { "$match" : { "projectId": project.id}},
            { "$count": "totalCount" },
        ];
        aggregateCountProject[project.id] = { "$arrayElemAt": ["$" + project.id + ".totalCount", 0] };
    }

    const projectLikesCounts = await await db.collection('likes').aggregate(aggregateCountQuery).toArray();
    const projectFollowsCounts = await await db.collection('follows').aggregate(aggregateCountQuery).toArray();

    // console.log('aggregateLikesQuery', JSON.stringify(aggregateLikesQuery, 2));
    // console.log('projectLikesCounts', projectLikesCounts);

    // console.log('*** update like and follow counts');

    for (var projectI = 0; projectI < projects.length; projectI++) {
        project = projects[projectI];

        project.likeCount = projectLikesCounts[0][project.id] || 0;
        project.followCount = projectFollowsCounts[0][project.id] || 0;

        // console.log(project.id, project.title, ' - ', project.prevLikeCount, project.followCount, project.prevFollowCount, project.likeCount);
    }
}

function catchMongoError(res, error, action) {
    // console.log('mongo error', error);
    const duplicateKey = error.errmsg && error.errmsg.includes('duplicate key');
    // console.log('duplicateKey', duplicateKey);
    errorResponse(res, {duplicateKey}, {errorMsg: duplicateKey ? 'duplicate id for new item' : 'mongo error', action, errorObject: error});
}

async function post(req, res, next) {
	const { db } = await init();

	const options = req.body;

	if (!await validateCredentials(db, options)) {
		errorResponse(res, {invalid: true}, {errorMsg: 'invalid credentials'});
		return;
	}

	const userId = options && options.userId;
    const ids = options && options.ids;

	if (userId && ids) {
		const viewedAtTime = (new Date()).getTime();

        const notificationsFilter = {
            viewed: { $ne: true },
            userId,
            id: { $in: ids },
		};
		const newValues = {
			viewed: true,
			viewedAt: viewedAtTime,
		};

		const notificationUpdateResult = await db.collection('notifications').updateMany(notificationsFilter, { $set: newValues });
		if (notificationUpdateResult) {
			response(res, {success: true});
		} else {
			errorResponse(res, {}, {errorMsg: 'can\'t update notification(s)', errorObject: notificationUpdateResult});
		}
	} else {
		errorResponse(res, {}, {errorMsg: 'userId or notification ids not defined'});
	}
}

var route_0 = /*#__PURE__*/Object.freeze({
    __proto__: null,
    post: post
});

async function post$1(req, res, next) {
	const { db } = await init();

	const options = req.body;

	if (!await validateCredentials(db, options)) {
		errorResponse(res, {invalid: true}, {errorMsg: 'invalid credentials'});
		return;
	}

	const userId = options && options.userId;
    const conversationId = options && options.id;

	if (userId && conversationId) {
		const viewedAtTime = (new Date()).getTime();

        const conversationsFilter = {
            id: conversationId,
            "users.id": userId,
		};
		const newValues = {
			"users.$.viewedAt" : viewedAtTime,
		};

		const conversationUpdateResult = await db.collection('conversations').updateMany(conversationsFilter, { $set: newValues });
		if (conversationUpdateResult) {
			response(res, {success: true});
		} else {
			errorResponse(res, {}, {errorMsg: 'can\'t update conversation(s)', errorObject: conversationUpdateResult});
		}
	} else {
		errorResponse(res, {}, {errorMsg: 'userId or conversation id not defined'});
	}
}

var route_1 = /*#__PURE__*/Object.freeze({
    __proto__: null,
    post: post$1
});

var sendgrid = require('sendgrid')(process.env.SENDGRID_API_KEY);

// console.log('process.env.SENDGRID_API_KEY', process.env.SENDGRID_API_KEY);

function sendMail(options) {
    if (options) {
        if (!options.toEmail) {
            return Promise.reject(new Error('sendMail no toEmail supplied'));
        }
        if (!options.fromEmail) {
            return Promise.reject(new Error('sendMail no fromEmail supplied'));
        }
        if (!options.subject) {
            return Promise.reject(new Error('sendMail no subject supplied'));
        }
        if (!options.bodyText) {
            return Promise.reject(new Error('sendMail no bodyText supplied'));
        }

        var request = sendgrid.emptyRequest({
            method: 'POST',
            path: '/v3/mail/send',
            body: {
                personalizations: [
                    {
                        to: [
                        {
                            email: options.toEmail,
                        },
                        ],
                        subject: options.subject, // 'Hello World from the SendGrid Node.js Library!',
                    },
                ],
                from: {
                    email: options.fromEmail,  // 'test@example.com',
                },
                content: [
                    {
                        // type: 'text/plain',
                        type: 'text/html',
                        value: options.bodyText, // 'Hello, Email!',
                    },
                ],
            },
        });

        // console.log('body', {
        //     personalizations: [
        //         {
        //             to: [
        //             {
        //                 email: options.toEmail,
        //             },
        //             ],
        //             subject: options.subject, // 'Hello World from the SendGrid Node.js Library!',
        //         },
        //     ],
        //     from: {
        //         email: options.fromEmail,  // 'test@example.com',
        //     },
        //     content: [
        //         {
        //             type: 'text/plain',
        //             value: options.bodyText, // 'Hello, Email!',
        //         },
        //     ],
        // });
        // console.log('request', request);
        // console.log('sendgrid', sendgrid);

        return sendgrid.API(request)
            .then(response => {
                console.log('statusCode', response.statusCode);
                console.log('body', response.body);
                console.log('headers', response.headers);
                return {success: true};
            })
            .catch(error => {
                //error is an instance of SendGridError
                //The full response is attached to error.response
                console.log('error headers', error.response.statusCode);
                return {error: true, errorObject: error};
            });
    } else {
        return Promise.reject(new Error('sendMail no options supplied'));
    }
}

const locale = {
	PASSWORD_RESET_EMAIL: {
        SUBJECT: 'Flock Account',
        BODY: 'Your Flock password has been reset.<br/><br/>Your temporary password is: [USERCODE]<br/><br/>After you log in, you will be prompted to change your password.<br/><br/>Log in here: <a href="[SITE_URL]">[SITE]</a>.',
    },
	PASSWORD_RESET_UNREGISTERED_EMAIL: {
		SUBJECT: 'Flock Account',
        BODY: 'Someone has requested a password reset for this email address, however this email address is not yet registered.<br/><br/>Sign up here at <a href="[SITE_URL]">[SITE]</a>.',
    },
};

async function post$2(req, res, next) {
	const { db } = await init();

	const options = req.body;
    let email = options.email;

	email = email.toLowerCase().trim();

	if (email) {
        let user = await db.collection('users').findOne({ email });
        let newUsercode = '';
        let sendResult = null;
        let emailOptions = {
            toEmail: email,
            fromEmail: config.FROM_EMAIL,
        };

		if (user) {
            newUsercode = generateId(8);
            const details = {
                pass: '',
                usercode: newUsercode,
                resetPass: true,
            };

            const result = await db.collection('users').updateOne({ email }, { $set: details } );

            if (result) {
                emailOptions.subject = locale.PASSWORD_RESET_EMAIL.SUBJECT;
                emailOptions.bodyText = locale.PASSWORD_RESET_EMAIL.BODY
                    .split('[USERCODE]').join(newUsercode)
                    .split('[SITE]').join(config.SITE)
                    .split('[SITE_URL]').join(config.SITE_URL);

                console.log('send email', emailOptions);

                sendResult = await sendMail(emailOptions).then(sendResponse => {
                        if (sendResponse.success) {
                            console.log('send response', sendResponse);
                            response(res, {success: true}); // TODO: for temp debug return: usercode: newUsercode
                        } else {
                            console.log('error response', sendResponse);
                            errorResponse(res, {}, {errorMsg: 'can\'t send email', errorStatus: sendResponse.errorObject && sendResponse.errorObject.response && sendResponse.errorObject.response.statusCode});
                        }
                    })
                    .catch(error => {
                        console.log('error', error);
                        errorResponse(res, {}, {errorMsg: 'can\'t send email', errorStatus: error && error.response && error.response.statusCode});
                    });
            } else {
                errorResponse(res, {}, {errorMsg: 'can\'t update user details'});
                // response(res, {error: true});
            }
		} else {
            emailOptions.subject = locale.PASSWORD_RESET_UNREGISTERED_EMAIL.SUBJECT;

            emailOptions.bodyText = locale.PASSWORD_RESET_UNREGISTERED_EMAIL.BODY
                .split('[SITE]').join(config.SITE)
                .split('[SITE_URL]').join(config.SITE_URL);
            // emailOptions.bodyText = 'Someone has requested a password reset for this email address<br/>However this email address is not yet registered.<br/>Sign up here: ' + Config.SITE_URL;

            console.log('send general', emailOptions);

            sendResult = await sendMail(emailOptions).then(sendResponse => {
                    if (sendResponse.success) {
                        console.log('send general response', sendResponse);
                        response(res, {success: true}); // TODO: temp debug
                    } else {
                        console.log('error response', sendResponse);
                        errorResponse(res, {}, {errorMsg: 'can\'t send email', errorStatus: sendResponse.errorObject && sendResponse.errorObject.response && sendResponse.errorObject.response.statusCode});
                    }
                })
                .catch(error => {
                    console.log('error', error);
                    errorResponse(res, {}, {errorMsg: 'can\'t send email', errorStatus: error && error.response && error.response.statusCode});
                });
        }
	} else {
		response(res, {invalid: true}); // no user specified
	}
}

var route_2 = /*#__PURE__*/Object.freeze({
    __proto__: null,
    post: post$2
});

async function post$3(req, res, next) {
	const { db } = await init();

    const options = req.body;

	if (!options.userId) {
		response(res, {conversations: []});
		return
	}

	if (!await validateCredentials(db, options)) {
		errorResponse(res, {invalid: true}, {errorMsg: 'invalid credentials'});
		return;
    }

	const userId = options && options.userId;
	const conversationId = options && options.id;
	const usersId = options && options.usersId;

	const getUnviewed = options && options.getUnviewed;
	let loadedAt = options && options.loadedAt;

	if (!userId) {
		errorResponse(res, {}, {errorMsg: 'userId not set'});
		return;
	}
	if (!userId && !conversationId && !usersId) {
		errorResponse(res, {}, {errorMsg: 'conversationId or usersId not set'});
		return;
    }

	const getConversationsFilter = {};
	getConversationsFilter.userIds = userId; // userId contained in userIds

	if (conversationId) {
		getConversationsFilter.id = conversationId;
	} else if (usersId) {
		getConversationsFilter.usersId = usersId;
	}
	// if (getUnviewed) {
	// 	getConversationsFilter['users.id'] = userId;
	// 	getConversationsFilter['$expr'] = {$gt: ["$lastMessageAt", "$users.$.loadedAt"]};
	// 	// getConversationsFilter['$expr'] = {$gt: ["$lastMessageAt", "$createdAt"]};
	// 	// getConversationsFilter['$where'] = 'this.lastMessageAt > this.users.$.loadedAt';
	// 	// getConversationsFilter['$where'] = 'this.users.$.loadedAt >= this.lastMessageAt';
	// 	// getConversationsFilter.viewed = {$ne: true};
	// 	// // getConversationsFilter['users.id']: details.userId,
	// 	// getConversationsFilter['users.' + userId + '.loadedAt'] : details.createdAt,
	// }
	if (loadedAt) {
		getConversationsFilter.lastMessageAt = {$gt: loadedAt};
		// getConversationsFilter.loadedAt = {"$exists": false};
		// getConversationsFilter.loadedAt = { "$or" : [  {"$exists": false}, {$gt: loadedAt} ] };
	}

	const sort = {
		lastMessageAt: 1
		// createdAt: 1
	};

	let conversations = await db.collection('conversations').find(getConversationsFilter).sort(sort).toArray();

	let curUser;
	conversations = conversations.filter((conversation) => {
		curUser = conversation.users.find((user) => user.id === userId);
		conversation.viewed = curUser ? (conversation.lastSenderId === userId || curUser.viewedAt >= conversation.lastMessageAt) : true;

		// TODO: optimize - only select unviewed in the first place if required
		return getUnviewed ? !conversation.viewed : true;
	});

	let loadedTime;

	if (conversations && conversations.length) {
		const conversationIds = conversations.map((conversation) => conversation.id);

		const updateConversationsFilter = JSON.parse(JSON.stringify(getConversationsFilter));
		// const updateConversationsFilter = getConversationsFilter;

		updateConversationsFilter.id = { $in: conversationIds };
		updateConversationsFilter["users.id"] = userId;

		loadedTime = (new Date()).getTime();
		const newValues = {
			"users.$.loadedAt" : loadedTime,
		};

		// update loaded at time only for current user
		db.collection('conversations').updateMany(updateConversationsFilter, { $set: newValues });
		// const conversationUpdateResult = db.collection('conversations').updateMany(getConversationsFilter, { $set: newValues });
	}

    // conversations.sort((a,b) => a.createdAt - b.createdAt ); // sort by reversed created time

	// let curUser;
	// conversations.forEach((conversation) => {
	// 	curUser = conversation.users.find((user) => user.id === userId);
	// 	conversation.viewed = curUser ? curUser.viewedAt >= conversation.lastMessageAt : true;
	// 	// console.log(conversation.lastMessageText + ', ' + curUser.id + ', ' + conversation.viewed + ', ' + curUser.viewedAt + ' < ' + conversation.lastMessageAt);
	// });
	// conversations = conversations.filter((conversation) => {
	// 	return !conversation.disabled;
	// });

	if (conversations) {
		const result = {conversations};
		if (loadedTime) {
			result.loadedAt = loadedTime;
		}
		response(res, result);
	} else {
		errorResponse(res, {}, {errorMsg: 'error loading conversations'});
	}
}

var route_3 = /*#__PURE__*/Object.freeze({
    __proto__: null,
    post: post$3
});

async function post$4(req, res, next) {
	const { db } = await init();

    const options = req.body;

	if (!options.userId) {
		response(res, {notifications: []});
		return
	}

	if (!await validateCredentials(db, options)) {
		errorResponse(res, {invalid: true}, {errorMsg: 'invalid credentials'});
		return;
    }

	const userId = options && options.userId;
	const getUnviewed = options && options.getUnviewed;
	let loadedAt = options && options.loadedAt;

	if (!userId) {
		errorResponse(res, {}, {errorMsg: 'userId not set'});
		return;
    }

	const filter = {};
	filter.userId = userId;

	if (getUnviewed) {
		filter.viewed = {$ne: true};
	}
	if (loadedAt) {
		filter.loadedAt = {"$exists": false};
		// filter.loadedAt = { "$or" : [  {"$exists": false}, {$gt: loadedAt} ] };
	}

	// filter.indirect = {$ne: true}; // need to return so can show notification areas

	const sort = {
		createdAt: 1
	};

	let notifications = await db.collection('notifications').find(filter).sort(sort).toArray();

	let loadedTime = null;
	if (notifications && notifications.length) {
		const notificationIds = notifications.map((notification) => notification.id);
		filter.id = { $in: notificationIds };

		loadedTime = (new Date()).getTime();
		const newValues = {
			loadedAt: loadedTime,
		};
		const notificationUpdateResult = db.collection('notifications').updateMany(filter, { $set: newValues });
	}

    // notifications.sort((a,b) => a.createdAt - b.createdAt ); // sort by reversed created time

	// notifications = notifications.filter((notification) => {
	// 	return !notification.disabled;
	// });

	if (notifications) {
		const result = {notifications};
		if (loadedTime) {
			result.loadedAt = loadedTime;
		}
		response(res, result);
	} else {
		response(res, {error: true});
	}
}

var route_4 = /*#__PURE__*/Object.freeze({
    __proto__: null,
    post: post$4
});

async function post$5(req, res, next) {
	const { db } = await init();

	const options = req.body;

	if (!await validateCredentials(db, options)) {
		response(res, {invalid: true});
		return;
	}

	if (options.userId && options.projectId) {
		let projectUpdateResult = await db.collection('projects').updateOne({ id: options.projectId }, { $inc: { followCount: -1 } });

		if (projectUpdateResult) {
			const details = {};
			details.userId = options.userId;
			details.projectId = options.projectId;

			const result = await db.collection('follows').deleteMany(details);

			let userUpdateResult = await db.collection('users').updateOne({ id: options.userId }, { $inc: { followsCount: -1 } });
			if (userUpdateResult) {
				response(res, {success: true});
			} else {
				response(res, {error: true});
			}
		} else {
			response(res, {error: true});
		}
	} else {
		response(res, {error: true});
	}
}

var route_5 = /*#__PURE__*/Object.freeze({
    __proto__: null,
    post: post$5
});

async function post$6(req, res, next) {
	const { db } = await init();

	const options = req.body;

	if (!await validateCredentials(db, options)) {
		response(res, {invalid: true});
		return;
	}

	if (options.userId && options.projectId) {
		const projectUpdateResult = await db.collection('projects').updateOne({ id: options.projectId }, { $inc: { followCount: 1 } });

		if (projectUpdateResult) {
			const details = {};
			details.userId = options.userId;
			details.projectId = options.projectId;
			details.createdAt = (new Date()).getTime();

			const result = await db.collection('follows').insertOne(details);

			if (result) {
				const userUpdateResult = await db.collection('users').updateOne({ id: options.userId }, { $inc: { followsCount: 1 } });
				if (userUpdateResult) {
					response(res, {success: true});
				} else {
					response(res, {error: true});
				}
			}  else {
				response(res, {error: true});
			}
		} else {
			response(res, {error: true});
		}
	} else {
		response(res, {error: true});
	}
}

var route_6 = /*#__PURE__*/Object.freeze({
    __proto__: null,
    post: post$6
});

const aws = require('aws-sdk');
const path = require('path');

aws.config.region = 'us-west-2';
// aws.config.accessKeyId = process.env.AWS_CONTENT_ACCESS_KEY_ID;
// aws.config.secretAccessKey = process.env.AWS_CONTENT_ACCESS_KEY;
// aws.config.update({limits: {fileSize: 1000000, files: config.MAX_FILE_COUNT || 6}

const S3_BUCKET = process.env.S3_CONTENT_BUCKET;

// const fileType= 'image/jpeg';

async function post$7(req, res, next) {
	const s3 = new aws.S3();

	// aws.config.aws_access_key_id = process.env.AWS_CONTENT_ACCESS_KEY_ID;
	// aws.config.aws_secret_access_key = process.env.AWS_CONTENT_ACCESS_KEY;

	const options = req.body;

	const uploadType = options.uploadType;
	const itemId = options.itemId;
	const itemIndex = options.itemIndex;

	const fileType = options.fileType;

	let fileExtension;
	switch (fileType) {
		case 'image/jpeg':
			fileExtension = '.jpg';
			break;
		case 'image/gif':
			fileExtension = '.gif';
			break;
		case 'image/png':
			fileExtension = '.png';
			break;
		default:
			errorResponse(res, {}, {errorMsg: 'invalid file-type'});
			return;
	}

	// const fileName = req.query['file-name'];
	// const fileType = req.query['file-type'];

	// const uploadType = req.query['upload-type'];
	// const itemId = req.query['item-id'];
	// const itemIndex = req.query['item-index'];

	const folderIndentifier = 'content/';

	let folder = '';

	// TODO: validate itemId
	// TODO: validate itemIndex

	let newItemFilename = itemId;
	let newItemThumbFilename = null;

	let allowedFileType = null;

	if (uploadType === 'projectHeader') {
		allowedFileType = 'image/jpeg';
		folder = 'projects/';
		newItemFilename += '-header';
		// newItemThumbFilename = newItemFilename + '-thumb';
	} else if (uploadType === 'projectDetail') {
		// allowedFileType = 'image/jpeg';
		folder = 'projects/';
		newItemFilename += '-detail-' + itemIndex;
	} else if (uploadType === 'userProfile') {
		folder = 'users/';
		newItemFilename += '-profile';
		// newItemThumbFilename = newItemFilename + '-thumb';
	} else if (uploadType === 'userCover') {
		allowedFileType = 'image/jpeg';
		folder = 'users/';
		newItemFilename += '-cover';
	} else if (uploadType === 'post') {
		folder = 'posts/';
	} else if (uploadType === 'message') {
		folder = 'messages/';
	} else {
		errorResponse(res, {}, {errorMsg: 'invalid upload-type'});
		return;
	}

	if (allowedFileType && fileType !== allowedFileType) {
		errorResponse(res, {}, {errorMsg: 'invalid file-type'});
		return;
	}

	// const extension = path.extname(fileName);
	const extension = fileExtension;

	newItemThumbFilename = newItemFilename + '-thumb';
	newItemFilename += extension;

	const s3Params = {
		Bucket: S3_BUCKET,
		Key: folder + newItemFilename,
		Expires: 60,
		ContentType: fileType,
		ACL: 'public-read'
	};
	let s3ThumbParams;

	if (newItemThumbFilename) {
		newItemThumbFilename += extension; // extension;

		s3ThumbParams = {
			Bucket: S3_BUCKET,
			Key: folder + newItemThumbFilename,
			Expires: 60,
			ContentType: fileType,
			ACL: 'public-read'
		};
	}

	const cacheBuster = '?c=' + Math.floor(Math.random() * 9999999);

	s3.getSignedUrl('putObject', s3Params, (err, data) => {
		if (err) {
			console.error('putObject error', err);
			errorResponse(res, {}, {errorMsg: 'image putObject error'});
			return;
		}

		const returnData = {
			signedRequest: data,
			url: folderIndentifier + folder + newItemFilename + cacheBuster,
			// url: `https://${S3_BUCKET}.${aws.config.region}.s3.amazonaws.com/${fileName}`
		};
		if (newItemThumbFilename) {
			s3.getSignedUrl('putObject', s3ThumbParams, (err, data) => {
				if (err) {
					console.error('putObject error', err);
					errorResponse(res, {}, {errorMsg: 'image thumb putObject error'});
					return;
				}

				returnData.thumbSignedRequest = data,
				returnData.thumbUrl = folderIndentifier + folder + newItemThumbFilename + cacheBuster;

				response(res, returnData);
			});
		} else {
			response(res, returnData);
		}
	});

	// sharp(file)
	//     .rotate()
	//     .resize(config.UPLOAD_MAX_WIDTH, config.UPLOAD_MAX_HEIGHT, {
	//         fit: 'contain'
	//     })
	//     .toBuffer()
	//     .then(async (buffer) => {
	//         await tick();
	//         getSignedRequest(buffer);
	//     });
}

var route_7 = /*#__PURE__*/Object.freeze({
    __proto__: null,
    post: post$7
});

async function post$8(req, res, next) {
	const { db } = await init();

	const options = req.body;

	if (!await validateCredentials(db, options)) {
		errorResponse(res, {invalid: true}, {errorMsg: 'invalid credentials'});
		return;
	}

	if (options.userId && options.projectId) {
		let projectUpdateResult = await db.collection('projects').updateOne({ id: options.projectId }, { $inc: { likeCount: -1 } });

		if (projectUpdateResult) {
			const details = {};
			details.userId = options.userId;
			details.projectId = options.projectId;

			const likeUpdateResult = await db.collection('likes').deleteMany(details);
			if (likeUpdateResult) {
				let userUpdateResult = await db.collection('users').updateOne({ id: options.userId }, { $inc: { likesCount: -1 } });
				if (userUpdateResult) {
					response(res, {success: true});
				} else {
					errorResponse(res, {}, {errorMsg: 'can\'t update user likes count'});
				}
			} else {
				errorResponse(res, {}, {errorMsg: 'can\'t update likes'});
			}
		} else {
			errorResponse(res, {}, {errorMsg: 'can\'t project like count'});
		}
	} else {
		errorResponse(res, {}, {errorMsg: 'userId or projectId not defined'});
	}
}

var route_8 = /*#__PURE__*/Object.freeze({
    __proto__: null,
    post: post$8
});

async function post$9(req, res, next) {
	const { db } = await init();

	const options = req.body;

	if (!await validateCredentials(db, options)) {
		response(res, {invalid: true});
		return;
	}

	let details = options.details;
	let userId = options.userId;

	const projectId = options.id;

    const curProject = await db.collection('projects').findOne({ id: projectId });
    if (curProject) {
		if (userId && curProject.team && curProject.team.includes(userId)) { // is allowed to edit project
			const isModification = options.isModification;

			const setProjectDetailsSchema = {
				slug: true,
				title: true,
				description: true,
				details: true,

				headerImage: true,

				public: true,
				archived: true,

				// createdAt: true,
				// lastActiveAt: true,
				// modifiedAt: true,

				// likeCount: true,
				// followCount: true,

				isNew: true,

				location: true,
				categories: true,
				tags: true,
				skills: true,
				links: true,
				team: true,
				posts: true,
				// ownerId: true,
			};

			details = filterItemDetails(details, setProjectDetailsSchema);

			details.lastActiveAt = (new Date()).getTime();
			if (isModification) {
				details.modifiedAt = details.lastActiveAt;
			}

			//TODO: check allowed to modify project, isOwner, !archive, !deleted

			const result = await db.collection('projects').updateOne({ id: projectId }, { $set: details } );

			if (result) {
				response(res, {success: true});
			} else {
				response(res, {error: true});
			}
		} else {
			response(res, {error: true, invalidUser: true});
		}
	} else {
		response(res, {error: true});
	}
}

var route_9 = /*#__PURE__*/Object.freeze({
    __proto__: null,
    post: post$9
});

async function post$a(req, res, next) {
	const { db } = await init();

	const options = req.body;

	const validLogin = await validateCredentials(db, options);

	const id = options && options.id;
	const projectId = options && options.projectId;
	const userId = options && options.userId;

	const filter = {};
	filter.disabled = {$ne: true};
	if (id) {
		filter.id = id;
	}
	if (projectId) {
		filter.projectId = projectId;
	}

	if (!(id || projectId)) {
		errorResponse(res, {}, {errorMsg: 'id or projectId not supplied'});
		return;
	}

	let channels = await db.collection('channels').find(filter).toArray();

	channels = await filterItemsByProjectAccess(channels, userId, validLogin);

	// const channels = []; // to test returning no channels

	if (channels) {
		response(res, channels);
	} else {
		response(res, {error: true});
	}
}

var route_10 = /*#__PURE__*/Object.freeze({
    __proto__: null,
    post: post$a
});

async function post$b(req, res, next) {
    const { db, client } = await init();

	const options = req.body;

	if (!options.userId) {
		response(res, {messages: []});
		return
	}

	if (!await validateCredentials(db, options)) {
		errorResponse(res, {invalid: true}, {errorMsg: 'invalid credentials'});
		return;
    }

	const conversationId = options && options.conversationId;
	const getUnloaded = options && options.getUnloaded;
	const preload = options && options.preload;
	const userId = options && options.userId;
	// let loadedAt = options && options.loadedAt;

	if (!conversationId) {
		errorResponse(res, {}, {errorMsg: 'conversationId not set'});
		return;
	}

	const curConversation = await db.collection('conversations').findOne({ id: conversationId });
	if (!curConversation) {
		errorResponse(res, {}, {errorMsg: 'conversation not found'});
		return;
	}
	if (!curConversation.userIds.includes(userId)) {
		errorResponse(res, {}, {errorMsg: 'conversation doesn\'t include user'});
		return;
	}

	const getMessagesFilter = {};
	getMessagesFilter.conversationId = conversationId;

	if (getUnloaded) {
		getMessagesFilter.userId = { "$ne": userId };
		getMessagesFilter['loaded'] = {
			"$not": { $in: [userId] }
				// "$elemMatch": {
				// 	userId: true,
				// }
			// }
		};
	}

	const sort = {
		createdAt: 1
	};

	let messages = null;

	let messageUpdateAction = null;
	let messageUpdateFilter = null;

	let viewedAtTime = null;

	// if (!preload) {
	// 	viewedAtTime = (new Date()).getTime();

	// 	const conversationsFilter = {
	// 		id: conversationId,
	// 		"users.id": userId,
	// 	};
	// 	const newValues = {
	// 		"users.$.viewedAt" : viewedAtTime,
	// 	};

	// 	// console.log('getMessages ' + conversationId + ' ' + userId + ' viewedAtTime: ' + viewedAtTime);

	// 	// const conversationUpdateResult = await db.collection('conversations').updateMany(conversationsFilter, { $set: newValues });
	// 	// if (!conversationUpdateResult) {
	// 	// 	errorResponse(res, {}, {errorMsg: 'can\'t update conversation(s)', errorObject: conversationUpdateResult});
	// 	// }
	// }

	// const session = client.startSession();
	// const transactionOptions = {
	// 	readPreference: 'primary',
	// 	readConcern: { level: 'local' },
	// 	writeConcern: { w: 'majority' }
	// };

	// try {
	// 	let abortError = null;

	// 	const transactionResults = await session.withTransaction(async () => {
	// 		try {

			const conversationsFilter = {
				id: conversationId,
				"users.id": userId,
			};
			const conversationUpdateValues = {};
			// const conversationUpdateValues = {
			// 	"users.$.viewedAt" : viewedAtTime,
			// };

			messageUpdateFilter = getMessagesFilter;
			messageUpdateAction = {
				'$addToSet': { loaded: userId },
			};
			if (!preload) {
				viewedAtTime = (new Date()).getTime();
			}

			conversationUpdateValues["users.$.viewedAt"] = viewedAtTime;

			// if (messages && messages.length) {
				// 	const messageSet = messages.filter((message) => message.userId !== userId);
				// 	const messageIds = messageSet.map((message) => message.id);

				// messageUpdateFilter = JSON.parse(JSON.stringify(getMessagesFilter));
				// messageUpdateFilter.id = { $in: messageIds };

				// messageUpdateFilter = getMessagesFilter;

				// messageUpdateAction = {
				// 	'$addToSet': { loaded: userId },
				// };

				// console.log('getMessages ' + requestId + ' update messages: ' + conversationId + ' ' + userId);
				// db.collection('messages').updateMany(messageUpdateFilter, messageUpdateAction, { session });

				// console.log('update messages: ' + conversationId + ' ' + userId + ' ' + messages.length + ' ' + id);
				// const messageUpdateResult = await db.collection('messages').updateMany(messageUpdateFilter, messageUpdateAction);
				// if (!messageUpdateResult) {
				// 	abortError = {errorMsg: 'error updating message load states'};
				// 	await session.abortTransaction();
				// 	return;
				// }
			// }

			if (!preload) {

				db.collection('conversations').updateMany(conversationsFilter, { $set: conversationUpdateValues }); // , { session }
				// const conversationUpdateResult = await db.collection('conversations').updateMany(conversationsFilter, { $set: conversationUpdateValues });
				// if (!conversationUpdateResult) {
				// 	abortError = {errorMsg: 'error updating conversation viewed state'};
				// 	await session.abortTransaction();
				// 	return;
				// }
			}
			messages = await db.collection('messages').find(getMessagesFilter).sort(sort).toArray(); // , { session }

			if (messages && messages.length) {
				const messageSet = messages.filter((message) => message.userId !== userId);
				const messageIds = messageSet.map((message) => message.id);

				messageUpdateFilter = JSON.parse(JSON.stringify(getMessagesFilter));
				messageUpdateFilter.id = { $in: messageIds };
				db.collection('messages').updateMany(messageUpdateFilter, messageUpdateAction); // , { session }
			}

			if (!messages) {
				// abortError = {errorMsg: 'error getting messages'};
				errorResponse(res, {}, abortError || {errorMsg: 'error getting messages'});
				// await session.abortTransaction();
				return;
			}

			// } catch (e) {
			// 	console.log('error', e);
			// 	return;
			// }

	// 	}, transactionOptions);

	// 	console.log('transactionResults', transactionResults)

	// 	if (!transactionResults) {
	// 		errorResponse(res, {}, abortError || {errorMsg: 'transaction aborted getting messages'});
	// 		return;
	// 	}
	// } catch (e) {
	// 	errorResponse(res, {}, {errorMsg: 'unexpected error getting messages', errorObject: e});
	// 	return;
	// } finally {
	// 	await session.endSession();
	// }

	// let loadedTime = null;
	// if (messages && messages.length) {
	// 	const messageIds = messages.map((message) => message.id);
	// 	filter.id = { $in: messageIds };

	// 	loadedTime = (new Date()).getTime();
	// 	const newValues = {
	// 		loadedAt: loadedTime,
    //     };
	// 	// const messageUpdateResult = db.collection('messages').updateMany(filter, { $set: newValues });
	// }

    // messages.sort((a,b) => a.createdAt - b.createdAt ); // sort by reversed created time

	// messages = messages.filter((messages) => {
	// 	return !messages.disabled;
	// });

	if (messages) {
		const result = {messages};
		if (viewedAtTime) {
			result.viewedAt = viewedAtTime;
		}
		// if (loadedTime) {
		// 	result.loadedAt = loadedTime;
		// }
		response(res, result);
	} else {
		response(res, {error: true});
	}
}

var route_11 = /*#__PURE__*/Object.freeze({
    __proto__: null,
    post: post$b
});

async function post$c(req, res, next) {
	const { db } = await init();

	const options = req.body;

	const validLogin = await validateCredentials(db, options);

	const userId = (options && options.userId) || null;
	const projectId = options && options.id;
	const getCounts = options && options.getCounts; // TODO: to remove

	const projectsFilter = {};
	if (projectId) {
		projectsFilter.id = projectId;
	}

	let projects = await db.collection('projects').find(projectsFilter).toArray();

	projects = projects.filter((project) => {
		return (project.public && !project.archived && !project.disabled) || (userId && validLogin && project.team && project.team.includes(userId));
	});

	if (projects.length && userId) {
		projects.forEach((project) => {
			if (project.skills && project.skills instanceof Array) { // TODO: remove convertion once all converted
				project.skills = project.skills.join(', ');
			}
			// project.prevLikeCount = project.likeCount;
			// project.prevFollowCount = project.followCount;

			delete project.likeCount;
			delete project.followCount;
		});

		if (getCounts) {
			await getProjectLikeFollowCounts(projects);
		} else if (projectId) {
			const existingProject = projects.find(project => project.id === projectId);
			if (existingProject && existingProject.team && existingProject.team.includes(userId)) {
				await getProjectLikeFollowCounts([existingProject]);
			}
		}

		await loadUserItemProperties(projects, {
			userId,
			itemIdProp: 'projectId',
			collections: {
				follows: 'follows',
				likes: 'likes',
			},
		});
	}

	if (projects) {
		response(res, projects);
	} else {
		response(res, {error: true});
	}
}

var route_12 = /*#__PURE__*/Object.freeze({
    __proto__: null,
    post: post$c
});

async function post$d(req, res, next) {
	const { db } = await init();

	const options = req.body;

	if (!await validateCredentials(db, options)) {
		errorResponse(res, {invalid: true}, {errorMsg: 'invalid credentials'});
		return;
	}

	if (options.userId && options.projectId) {
		const projectUpdateResult = await db.collection('projects').updateOne({ id: options.projectId }, { $inc: { likeCount: 1 } });
		if (projectUpdateResult) {
			const details = {};
			details.userId = options.userId;
			details.projectId = options.projectId;
			details.createdAt = (new Date()).getTime();

			const likeUpdateResult = await db.collection('likes').insertOne(details);
			if (likeUpdateResult) {
				const userUpdateResult = await db.collection('users').updateOne({ id: options.userId }, { $inc: { likesCount: 1 } });
				if (userUpdateResult) {
					response(res, {success: true});
				} else {
					errorResponse(res, {}, {errorMsg: 'can\'t update user likes count'});
				}
			} else {
				errorResponse(res, {}, {errorMsg: 'can\'t update likes'});
			}
		} else {
			errorResponse(res, {}, {errorMsg: 'can\'t project like count'});
		}
	} else {
		errorResponse(res, {}, {errorMsg: 'userId or projectId not defined'});
	}
}

var route_13 = /*#__PURE__*/Object.freeze({
    __proto__: null,
    post: post$d
});

const MAX_PREVIEW_TEXT_LENGTH = 40;

async function post$e(req, res, next) {
	const { db } = await init();

	const options = req.body;

	if (!await validateCredentials(db, options)) {
		response(res, {invalid: true});
		return;
	}

	let details = options.details;
	let newConversation = details.newConversation;

	// console.log('api addMessage', details);

	if (details && (details.message || details.image)) {

		const targetUserIds = details.targetUserIds;
        if (newConversation && !targetUserIds) {
            errorResponse(res, {}, {errorMsg: 'targetUserIds not supplied for newConversation'});
            return;
		}

		const addMessageSchema = {
			id: true,

			userId: true,
            conversationId: true,

			// projectId: true,

			message: true,
            image: true,
		};

		details = filterItemDetails(details, addMessageSchema);

		details.createdAt = (new Date()).getTime();
		details.modifiedAt = details.createdAt;

		const requestId = Math.floor(Math.random() * 99999);

        if (!details.userId) {
            errorResponse(res, {}, {errorMsg: 'no userId specified with message'});
            return;
        }
        if (!details.conversationId && !newConversation) {
            errorResponse(res, {}, {errorMsg: 'no conversationId or newConversation specified with message'});
            return;
		}

		const curUser = await db.collection('users').findOne({ id: details.userId });
		if (!curUser) {
            errorResponse(res, {}, {errorMsg: 'user not found'});
            return;
		}

		let curConversation = null;
		let curConversationUserItem = null;

		let conversationId = details.conversationId;
		let addedConversation = null;
		let loadedConversation = null;

		let userIds = null;
		let usersId = null;

		let existingConversationFilter = {};

		if (newConversation) {
			// TODO: populate
			userIds = [details.userId, ...targetUserIds];
			userIds.sort();
			usersId = getConversationUsersId(userIds);

			existingConversationFilter.userIds = details.userId;
			existingConversationFilter.usersId = usersId;

			// console.log('use existing?', existingConversationFilter);

			let exisitingConversation = await db.collection('conversations').findOne(existingConversationFilter); // TODO: doesn't always work sometimes someone else does the same and it doesn't work
			// console.log('exisitingConversation:', exisitingConversation);
			if (exisitingConversation) {
				newConversation = false;

				loadedConversation = exisitingConversation;
				conversationId = exisitingConversation.id;
				// console.log('use existing conversation', exisitingConversation.id);
			}
		}

		if (!newConversation) {
			curConversation = await db.collection('conversations').findOne({ id: conversationId });
			if (!curConversation) {
				errorResponse(res, {}, {errorMsg: 'conversation not found'});
				return;
			}
			if (!curConversation.userIds.includes(details.userId)) {
				errorResponse(res, {}, {errorMsg: 'conversation doesn\'t include user'});
				return;
			}
			curConversationUserItem = curConversation.users.find((item) => item.id === details.userId);
			if (!curConversationUserItem) {
				errorResponse(res, {}, {errorMsg: 'conversation doesn\'t include user data'});
				return;
			}
		}

		let lastMessageText = details.message;
		if (lastMessageText && lastMessageText.length > MAX_PREVIEW_TEXT_LENGTH) {
			lastMessageText = lastMessageText.substring(0, MAX_PREVIEW_TEXT_LENGTH);
		}

		if (newConversation) {
			if (!details.conversationId) {
				errorResponse(res, {}, {errorMsg: 'new conversationId not specified with message'});
				return;
			}
			// newConversationId = generateId(10);

			const usersFilter = {
				id: { $in: userIds },
			};
			const userResults = await db.collection('users').find(usersFilter).toArray();

			const users = userResults.map((curUser) => {
				const userItem = {
					id: curUser.id,
					loadedAt: 0,
					viewedAt: 0,
					username: curUser.username,
					avatarImage: curUser.avatarImage,
					name: curUser.name || curUser.fullName,
				};
				if (curUser.id === details.userId) {
					userItem.loadedAt = details.createdAt;
					userItem.viewedAt = details.createdAt;
				}
				if (!curUser.avatarImage) {
					userItem.style = curUser.style;
				}
				return userItem;
			});

			const conversationDetails = {
				id: conversationId,
				createdAt: details.createdAt,
				lastMessageAt: details.createdAt,
				lastSenderId: details.userId,
				lastMessageText,

				usersId,
				userIds,
				users,
			};

			// console.log('newConversation', conversationDetails);

			let addConversationResult;
			try {
				addConversationResult = await db.collection('conversations').insertOne(conversationDetails);
			} catch (error) {
				const duplicateKey = error.errmsg && error.errmsg.includes('duplicate key');
				if (duplicateKey) { // TODO: this shouldn't happen ensure existing conversation check above can work
					let exisitingConversation = await db.collection('conversations').findOne(existingConversationFilter);
					if (exisitingConversation) {
						newConversation = false;

						loadedConversation = exisitingConversation;
						conversationId = exisitingConversation.id;
						// console.log('use existing conversation', exisitingConversation.id);
					}
				}

				if (newConversation) {
					catchMongoError(res, error, 'addConversation');
					return;
				}
			}

			if (newConversation) {
				if (!addConversationResult) {
					errorResponse(res, {}, {errorMsg: 'conversation could not be added'});
					return;
				} else {
					addedConversation = conversationDetails;
				}
			}
		}

		details.createdAt = (new Date()).getTime();
		details.modifiedAt = details.createdAt;

		const updateConversationFilter = {
			id: conversationId,
			"users.id": details.userId,
		};
		let updateConversationProps = null;

		if (!newConversation) {
			updateConversationProps = {
				lastMessageAt: details.createdAt,
				lastSenderId: details.userId,
				lastMessageText,
				// "users.$.loadedAt" : details.createdAt,
				// "users.$.viewedAt" : details.createdAt,
				"users.$.username" : curUser.username,
				"users.$.avatarImage" : curUser.avatarImage,
				"users.$.name" : curUser.name || curUser.fullName,
			};
			if (!curUser.avatarImage) {
				updateConversationProps["users.$.style"] = curUser.style;
			} else if (curConversationUserItem && curConversationUserItem.style) {
				updateConversationProps["users.$.style"] = null;
			}

			db.collection('conversations').updateOne(updateConversationFilter, {$set: updateConversationProps});

			// let updateConversationResult = await db.collection('conversations').updateOne(updateConversationFilter, {$set: updateConversationProps});
			// if (!updateConversationResult) {
			// 	errorResponse(res, {addedMessage: true}, {errorMsg: 'error updating conversation'});
			// }
		} else {
			updateConversationProps = {
				lastMessageAt: details.createdAt,
			};

			db.collection('conversations').updateOne(updateConversationFilter, {$set: updateConversationProps});
		}

		// db.bar.update({user_id : 123456 , "items.item_name" : "my_item_two" }, {$inc : {"items.$.price" : 1} }, false, true);
		// db.bar.update({user_id : 123456 }, {$addToSet : {"items" : {'item_name' : "my_item_two" , 'price' : 1 }} }, false, true);

		// console.log('newConversation', newConversation, 'newConversationId', newConversationId);

		const returnResult = {success: true};
		if (newConversation) {
			returnResult.newConversation = true;
			returnResult.conversation = addedConversation;
		} else if (loadedConversation) {
			returnResult.newConversation = true;
			returnResult.conversation = loadedConversation;
		}

		details.conversationId = conversationId;
		returnResult.conversationId = conversationId;

		returnResult.message = details;

		let addMessageResult;
		try {
			if (MESSAGE_SYNC_DEBUG) console.log('addMessage ' + requestId + ' add message ' + conversationId);

			addMessageResult = await db.collection('messages').insertOne(details);
		} catch (error) {
			catchMongoError(res, error, 'addMessage');
			return;
		}

		if (addMessageResult) {
			response(res, returnResult);
		} else {
			errorResponse(res, {}, {errorMsg: 'error adding message'});
		}
	} else {
		errorResponse(res, {}, {errorMsg: 'message or image not provided'});
	}
}

var route_14 = /*#__PURE__*/Object.freeze({
    __proto__: null,
    post: post$e
});

var projectDefaultChannels = [
	{
		title: "Announcements",
		description: "",
		teamOnly: true,
		sortIndex: 0,
		postCount: 0,
		sortByCreated: true
	},
	{
		title: "General",
		description: "",
		sortIndex: 1,
		postCount: 0
	},
	{
		title: "Resources",
		disabled: true,
		description: "",
		teamOnly: true,
		sortIndex: 2,
		postCount: 0
	},
	{
		title: "Workshop",
		description: "",
		teamOnly: true,
		sortIndex: 3,
		postCount: 0
	},
	{
		title: "Questions",
		description: "",
		sortIndex: 4,
		postCount: 0
	},
	{
		title: "Issues",
		disabled: true,
		description: "",
		teamOnly: true,
		sortIndex: 5,
		postCount: 0
	},
	{
		title: "Ideas",
		description: "",
		sortIndex: 6,
		postCount: 0
	},
	{
		title: "Inspiration",
		description: "",
		sortIndex: 7,
		postCount: 0
	},
	{
		title: "Random",
		description: "",
		sortIndex: 8,
		postCount: 0
	},
	{
		title: "Suggestions",
		description: "",
		disabled: true,
		sortIndex: 9,
		postCount: 0
	}
];

async function post$f(req, res, next) {
	const { db } = await init();

	const options = req.body;

	if (!await validateCredentials(db, options)) {
		response(res, {invalid: true});
		return;
	}

	let details = options.details;

	if (details && details.id) {

		const projectDetails = {
			id: true,

			ownerId: true,

			slug: true,
			title: true,
			description: true,
			details: true,

			headerImage: true,

			public: true,

			createdAt: true,
			lastActiveAt: true,
			modifiedAt: true,

			// likeCount: true,
			// followCount: true,

			isNew: true,

			location: true,
			tags: true,
			skills: true,
			links: true,
			team: true,
			posts: true,
		};

		details = filterItemDetails(details, projectDetails);

		details.likeCount = 0;
		details.followCount = 0;

		details.createdAt = (new Date()).getTime();
		details.modifiedAt = details.createdAt;
		details.lastActiveAt = details.createdAt;

		const result = await db.collection('projects').insertOne(details);

		if (result) {
			let channelAddFailed = false;
			let defaultChannel, channelDetails;
			for (var channelI = 0; channelI < projectDefaultChannels.length; channelI++) {
				defaultChannel = projectDefaultChannels[channelI];
				if (!defaultChannel.disabled) {
					channelDetails = Object.assign({}, defaultChannel);

					channelDetails.id = generateId(10);

					channelDetails.projectId = details.id;
					channelDetails.userId = options.userId;

					channelDetails.createdAt = (new Date()).getTime();
					channelDetails.modifiedAt = channelDetails.createdAt;
					channelDetails.lastActiveAt = channelDetails.createdAt;

					const channelResult = await db.collection('channels').insertOne(channelDetails);
					if (!channelResult) {
						channelAddFailed = true;
						break;
					}
				}
			}

			if (!channelAddFailed) {
				// console.log('details.userId', options.userId, 'details.id', details.id);
				const userUpdateResult = await db.collection('users').updateOne({ id: options.userId }, { $push: { projects: details.id } });

				if (userUpdateResult) {
					response(res, {success: true});
				} else {
					response(res, {error: true});
				}
			} else {
				response(res, {error: true});
			}
		} else {
			response(res, {error: true});
		}
	} else {
		response(res, {error: true});
	}
}

var route_15 = /*#__PURE__*/Object.freeze({
    __proto__: null,
    post: post$f
});

async function post$g(req, res, next) {
	const { db } = await init();

	const options = req.body;

	if (!await validateCredentials(db, options)) {
		errorResponse(res, {invalid: true}, {errorMsg: 'invalid credentials'});
		return;
	}

	const unfollow = options.unfollow;

	if (options.userId && options.postId) {
		const details = {};
		details.userId = options.userId;
		details.postId = options.postId;

		let followUpdateResult;
		if (unfollow) {
			followUpdateResult = await db.collection('postFollows').deleteMany(details);
		} else {
			details.createdAt = (new Date()).getTime();
			followUpdateResult = await db.collection('postFollows').insertOne(details);
		}

		if (followUpdateResult) {
			const postUpdateResult = await db.collection('posts').updateOne({ id: options.postId }, { $inc: { followCount: unfollow ? -1 : 1 } });
			if (postUpdateResult) {
				response(res, {success: true});
			} else {
				errorResponse(res, {}, {errorMsg: 'can\'t post follow count'});
			}
		} else {
			errorResponse(res, {}, {errorMsg: 'can\'t update post follows'});
		}
	} else {
		errorResponse(res, {}, {errorMsg: 'userId or postId not defined'});
	}
}

var route_16 = /*#__PURE__*/Object.freeze({
    __proto__: null,
    post: post$g
});

async function post$h(req, res, next) {
	const { db } = await init();

	const options = req.body;

	if (!await validateCredentials(db, options)) {
		errorResponse(res, {invalid: true}, {errorMsg: 'invalid credentials'});
		return;
	}

	if (options.userId && options.postId) {
		let postUpdateResult = await db.collection('posts').updateOne({ id: options.postId }, { $inc: { likeCount: -1 } });

		if (postUpdateResult) {
			const details = {};
			details.userId = options.userId;
			details.postId = options.postId;

			const likeUpdateResult = await db.collection('postLikes').deleteMany(details);
			if (likeUpdateResult) {
				let userUpdateResult = await db.collection('users').updateOne({ id: options.userId }, { $inc: { likesCount: -1 } });
				if (userUpdateResult) {
					response(res, {success: true});
				} else {
					errorResponse(res, {}, {errorMsg: 'can\'t update user likes count'});
				}
			} else {
				errorResponse(res, {}, {errorMsg: 'can\'t update likes'});
			}
		} else {
			errorResponse(res, {}, {errorMsg: 'can\'t post like count'});
		}
	} else {
		errorResponse(res, {}, {errorMsg: 'userId or postId not defined'});
	}
}

var route_17 = /*#__PURE__*/Object.freeze({
    __proto__: null,
    post: post$h
});

async function post$i(req, res, next) {
	const { db } = await init();

	const options = req.body;

	if (!await validateCredentials(db, options)) {
		response(res, {invalid: true});
		return;
	}

	let details = options.details;
	let userId = options.userId;

	const postId = options.id;

    const curPost = await db.collection('posts').findOne({ id: postId });
    if (curPost) {
		if (userId && curPost.userId && curPost.userId === userId) { // is allowed to edit post
			const setPostDetailsSchema = {
                title: true,
                message: true,
				image: true,
			};

			details = filterItemDetails(details, setPostDetailsSchema);

			details.edited = true;
			details.lastActiveAt = (new Date()).getTime();
			details.editedAt = details.lastActiveAt;
			details.modifiedAt = details.lastActiveAt;

			//TODO: check allowed to modify post, isOwner, !archive, !deleted

			const result = await db.collection('posts').updateOne({ id: postId }, { $set: details } );

			if (result) {
				response(res, {success: true});
			} else {
				response(res, {error: true});
			}
		} else {
			response(res, {error: true, invalidUser: true});
		}
	} else {
		response(res, {error: true});
	}
}

var route_18 = /*#__PURE__*/Object.freeze({
    __proto__: null,
    post: post$i
});

const bcrypt = require('bcryptjs');

async function post$j(req, res, next) {
	const { db } = await init();

    const options = req.body;

    let details = options.details;
    let resetPass = details.resetPass;
    delete details.resetPass;

    if ((details.username || resetPass) && details.pass) {
        options.setAccount = true;
    }

	if (!await validateCredentials(db, options)) { // after setAccount set to ensure that is validated
		errorResponse(res, {invalid: true}, {errorMsg: 'invalid credentials'});
		return;
	}

    const userId = (options && options.userId) || null;

    const curUser = await db.collection('users').findOne({ id: userId });
    if (curUser) {
        if (options.setAccount) {
            if (resetPass && !curUser.resetPass) {
                errorResponse(res, {invalid: true}, {errorMsg: 'not resetting password'});
                return;
            }
            if (!resetPass && curUser.resetPass) {
                errorResponse(res, {invalid: true}, {errorMsg: 'resetting password'});
                return;
            }

            if (!resetPass) {
                details.username = details.username.toLowerCase().trim();

                // reference USER_NAME_MIN_LENGTH, USER_NAME_MAX_LENGTH
                const usernameValid = details.username.length >= 3 && details.username.length <= 16 && details.username.match(/^(?!.*\.\.)(?!.*__)(?!.*\._)(?!.*_\.)(?!.*\.$)(?!\..*$)[a-z0-9._]+$/); // lowercase only
                // const usernameValid = details.username.match(/^(?=.{4,16}$)(?![_.])(?!.*[_.]{2})[a-z0-9._]+(?<![_.])$/); // lowercase only
                // const usernameValid = details.username.match(/^(?=.{4,16}$)(?![_.])(?!.*[_.]{2})[a-zA-Z0-9._]+(?<![_.])$/i);
                if (!usernameValid) {
                    errorResponse(res, {invalid: true}, {errorMsg: 'invalid username'});
                    return;
                }
            }

            if (!curUser.pass) {
                const exisitingUser = await db.collection('users').findOne({ username: { $regex : new RegExp('^' + details.username + '$', 'i') } });
                if (exisitingUser && exisitingUser.id !== userId) {
                    errorResponse(res, {invalid: true, errorType: 'username_exists'}, {errorMsg: 'username exists'});
                    // response(res, {invalid: true, errorType: 'username_exists'});
                } else {
                    const pass = details.pass;

                    const userDetailSchema = {
                        username: !resetPass, // true,
                    };

                    details = filterItemDetails(details, userDetailSchema);

                    if (resetPass) {
                        details.resetPass = false;
                    }

                    // console.log('set details', details, 'resetPass', resetPass);

                    bcrypt.hash(pass, 10, async (err, hash) => {
                        if (!err) {
                            details.pass = hash;

                            const result = await db.collection('users').updateOne({ id: userId }, { $set: details } );

                            if (result) {
                                response(res, {success: true});
                            } else {
                                errorResponse(res, {}, {errorMsg: 'can\'t update user details'});
                                // response(res, {error: true});
                            }
                        } else {
                            errorResponse(res, {}, {errorMsg: 'error making hash'});
                            // response(res, {error: true});
                        }
                    });
                }
            } else {
                errorResponse(res, {}, {errorMsg: 'account details already set'});
                // response(res, {error: true});
            }
        } else {
            const setUserDetailSchema = {
                username: true,

                name: true,
                bio: true,

                avatarImage: true,
                coverImage: true,

                skills: true,
                location: true,
                style: true,
            };

            details = filterItemDetails(details, setUserDetailSchema);

            const result = await db.collection('users').updateOne({ id: userId }, { $set: details } );

            if (result) {
                response(res, {success: true});
            } else {
                errorResponse(res, {}, {errorMsg: 'can\'t update user details'});
                // response(res, {error: true});
            }
        }
    } else {
        errorResponse(res, {}, {errorMsg: 'user not found'});
        // response(res, {error: true});
    }
}

var route_19 = /*#__PURE__*/Object.freeze({
    __proto__: null,
    post: post$j
});

async function post$k(req, res, next) {
	const { db } = await init();

	const options = req.body;
	const validLogin = await validateCredentials(db, options);

	const userId = options && options.userId;

	const type = options && options.type;

	const id = options && options.id;
	const channelId = options && options.channelId;
	const threadId = options && options.threadId;
	const getFollowState = options && options.getFollowState;

	const filter = {};
	if (type) {
		filter.type = type;
	}
	if (id) {
		filter.id = id;
	}
	if (threadId) {
		filter.threadId = threadId;
	}
	if (channelId) {
		filter.channelId = channelId;
	}

	if (!(id || threadId || channelId)) {
		errorResponse(res, {}, {errorMsg: 'post id, threadId or channelId not set'});
		return;
	}
	if ((threadId || channelId) && !type) {
		errorResponse(res, {}, {errorMsg: 'type not set'});
		return;
	}

	let posts = await db.collection('posts').find(filter).toArray();

	posts = await filterItemsByProjectAccess(posts, userId, validLogin);

	posts = posts.filter((post) => {
		return !post.disabled;
	});

	if (posts.length && userId) {
		const postSettings = {
			userId,
			itemIdProp: 'postId',
			collections: {
				likes: 'postLikes',
			},
		};
		if (getFollowState) {
			postSettings.collections.follows ='postFollows';
		}
		await loadUserItemProperties(posts, postSettings);
	}

	// const posts = []; // to test returning no posts

	if (posts) {
		response(res, posts);
	} else {
		response(res, {error: true});
	}
}

var route_20 = /*#__PURE__*/Object.freeze({
    __proto__: null,
    post: post$k
});

async function post$l(req, res, next) {
	const { db } = await init();

	const options = req.body;
	const id = options && options.id;
	const ids = options && options.ids;

	const usersFilter = {};
	if (id) {
		usersFilter.id = id;
	} else if (ids) {
		usersFilter.id = { $in: ids };
	}

	const userResults = await db.collection('users').find(usersFilter).toArray();

	const userDetails = {
                id: true,

                username: true,

                name: true,
                // fullName: true,
                // firstName: true,
                // lastName: true,

                bio: true,

                skills: true,

                postsCount: true,
                likesCount: true,
                followsCount: true,

                avatarImage: true,
                coverImage: true,

                style: true,

                connected: true,
                requestedConnection: true,

                location: true,

                projects: true,

                set: true,

                resetPass: true,
        };

        for (let user, userI = 0; userI < userResults.length; userI++) {
                user = userResults[userI];
                if (!user.pass) {
                        user.set = false;
                }

                if (!user.name) {
                        user.name = user.fullName;
                }

                if (!user.resetPass) {
                        delete user.resetPass;
                }
        }


	const users = filterItemArrayDetails(userResults, userDetails);

	// console.log('filtered users', users);

	// const users = []; // to test returning no users

	if (users) {
		response(res, users);
	} else {
		response(res, {error: true});
	}
}

var route_21 = /*#__PURE__*/Object.freeze({
    __proto__: null,
    post: post$l
});

async function post$m(req, res, next) {
	const { db } = await init();

	const options = req.body;

	if (!await validateCredentials(db, options)) {
		errorResponse(res, {invalid: true}, {errorMsg: 'invalid credentials'});
		return;
	}

	if (options.userId && options.postId) {
		const postUpdateResult = await db.collection('posts').updateOne({ id: options.postId }, { $inc: { likeCount: 1 } });
		if (postUpdateResult) {
			const details = {};
			details.userId = options.userId;
			details.postId = options.postId;
			details.createdAt = (new Date()).getTime();

			const likeUpdateResult = await db.collection('postLikes').insertOne(details);

			if (likeUpdateResult) {
				const userUpdateResult = await db.collection('users').updateOne({ id: options.userId }, { $inc: { likesCount: 1 } });
				if (userUpdateResult) {
					response(res, {success: true});
				} else {
					errorResponse(res, {}, {errorMsg: 'can\'t update user likes count'});
				}
			} else {
				errorResponse(res, {}, {errorMsg: 'can\'t update post likes'});
			}
		} else {
			errorResponse(res, {}, {errorMsg: 'can\'t post like count'});
		}
	} else {
		errorResponse(res, {}, {errorMsg: 'userId or postId not defined'});
	}
}

var route_22 = /*#__PURE__*/Object.freeze({
    __proto__: null,
    post: post$m
});

const NotificationTypes = {
        CHANNEL_ADDED: 'channelAdded',
        CHANNEL_ARCHIVED: 'channelArchived',
            // CHANNEL_REMOVED: 'channelArchived',
        CHANNEL_RENAMED: 'channelRenamed',
        CHANNEL_DESCRIPTION_UPDATED: 'channelDescriptionUpdated',
    POST_ADDED: 'postAdded',
        POST_EDITED: 'postEdited', // moderation
        POST_REMOVED: 'postRemoved', // moderation
        POST_LIKED: 'postLiked',
        PROJECT_ARCHIVED: 'projectArchived',
            // PROJECT_REMOVED: 'projectRemoved',
        PROJECT_FOLLOWED: 'projectFollowed',
        PROJECT_LIKED: 'projectLiked',
        PROJECT_NEW_MESSAGE: 'projectNewMessage',
        PROJECT_MEMBER_ADDED: 'projectMemberAdded',
            // PROJECT_MEMBER_REMOVED: 'projectMemberRemoved',
        PROJECT_RENAMED: 'projectRenamed',
        PROJECT_DESCRIPTION_UPDATED: 'projectDescriptionUpdated',
        PROJECT_HEADER_UPDATED: 'projectHeaderUpdated',
        PROJECT_DETAILS_UPDATED: 'projectDetailsUpdated',
        PROJECT_LOCATION_UPDATED: 'projectLocationUpdated',
        PROJECT_TAGS_UPDATED: 'projectTagsUpdated',
        PROJECT_SKILLS_UPDATED: 'projectSkillsUpdated',
        PROJECT_VISIBILITY_UPDATED: 'projectVisibilityUpdated',
        PROFILE_FOLLOWED: 'profileFollowed',
            // PROFILE_IMAGE_UPDATED: 'profileImageUpdated',
            // PROFILE_COVER_UPDATED: 'profileCoverUpdated',
            // PROFILE_SKILLS_UPDATED: 'profileSkillsUpdated',
            // PROFILE_BIO_UPDATED: 'profileBioUpdated',
};

const MAX_NOTIFICATION_TEXT_LENGTH = 24;
const INCLUDE_ACTOR = false;

async function createNotification(db, details, data, res, completedData) {
    if (DEBUG) {
        if (!details.type) {
            errorResponse(res, completedData, {errorMsg: 'createNotification - "type" parameter missing'});
            return -1;
            // throw new Error('"type" parameter missing in call to createNotification', details);
        }
        if (!details.actors) {
            errorResponse(res, completedData, {errorMsg: 'createNotification - "actors" parameter missing'});
            return -1;
            // throw new Error('"actors" parameter missing in call to createNotification', details);
        }
    }

    details.createdAt = (new Date()).getTime();


    // const postTitle = data && data.postTitle;

    let getProjectDetails = false;
    let sendToProjectMembers = false;
    let sendToProjectFollowers = false;
    let getActorDetails = false;
    let getThreadTitle = false;
    let sendToThreadOwner = false;
    let sendToThreadFollowers = false;
    let getChannelTitle = false;

    let threadOwnerId = null; // get thread owner


    switch (details.type) {
        case NotificationTypes.POST_ADDED:
            details.isUserAction = true;
            sendToProjectMembers = true;
            sendToProjectFollowers = true;

            getProjectDetails = true;
            getActorDetails = true;
            if (details.threadId) {
                sendToThreadOwner = true;
                sendToThreadFollowers = true;

                getThreadTitle = true;
            } else {
                getChannelTitle = true;
            }
            break;
    }

    let projectTitle = null; // set from project
    let threadTitle = null;
    let channelTitle = null; // 'Questions'; // set from channel

    // details.actors.forEach((actor) => {
    //     actor.username =
    //     actor.name =
    //     actor.avatarImage =
    //     actor.style =  // user style if no avatarImage set
    // });

    // if sendToProjectMembers  // add to users and set projectMembers
    // if sendToProjectFollowers  // add to users
    // add one for each member and follower of project
    // const users = [{
    //     id: 'YRVQ6vOE',
    //     thumb: 'Test User',
    //     isTeamMember: true,
    // }]

    if (getProjectDetails || sendToProjectMembers || sendToProjectFollowers) {
        if (DEBUG) {
            if (!details.projectId) {
                errorResponse(res, completedData, {errorMsg: 'createNotification - "projectId" parameter missing'});
                return -1;
                // throw new Error('"projectId" parameter missing in call to createNotification', details);
            }
        }
    }
    if (sendToThreadOwner || sendToThreadFollowers) {
        if (DEBUG) {
            if (!details.threadId) {
                errorResponse(res, completedData, {errorMsg: 'createNotification - "threadId" parameter missing'});
                return -1;
                // throw new Error('"projectId" parameter missing in call to createNotification', details);
            }
        }
    }

    let targetUserIds = [];
    let projectMembers = [];
    let projectFollowers = [];
    let threadFollowers = [];
    // projectMembers = ['YRVQ6vOE'];

    if (getProjectDetails || sendToProjectMembers) {
        const projectFilter = { id: details.projectId };
        const projectResult = await db.collection('projects').findOne(projectFilter);

        if (projectResult) {
            if (getProjectDetails) {
                projectTitle = projectResult.title;
                projectMembers = projectResult.team;
            }

            if (sendToProjectMembers) {
                targetUserIds = [...targetUserIds, ...projectMembers];
            }
        } else {
            errorResponse(res, completedData, {errorMsg: 'createNotification - project not found'});
            return -1;
        }
    }

    if (sendToProjectFollowers) {
        const userProjectFilter = { "projectId": details.projectId };

        const followsResult = await db.collection('follows').find(userProjectFilter).toArray();
        if (followsResult) {
            projectFollowers = followsResult.map((follow) => follow.userId);

            projectFollowers.forEach((follower) => {
                if (!targetUserIds.includes(follower)) {
                    targetUserIds.push(follower);
                }
            });

            // console.log('curProjectFollowers', curProjectFollowers);
        } else {
            errorResponse(res, completedData, {errorMsg: 'createNotification - project not found'});
            return -1;
        }
    }

    if (sendToThreadOwner) {
        const threadFilter = { id: details.threadId };
        const threadResult = await db.collection('posts').findOne(threadFilter);

        if (threadResult) {
            threadOwnerId = threadResult.userId;

            if (!targetUserIds.includes(threadOwnerId)) {
                targetUserIds.push(threadOwnerId);
            }
        } else {
            errorResponse(res, completedData, {errorMsg: 'createNotification - thread not found'});
            return -1;
        }
    }

    if (sendToThreadFollowers) {
        const userPostFilter = { "postId": details.threadId };

        const threadFollowsResult = await db.collection('postFollows').find(userPostFilter).toArray();
        if (threadFollowsResult) {
            threadFollowers = threadFollowsResult.map((follow) => follow.userId);

            threadFollowers.forEach((follower) => {
                if (!targetUserIds.includes(follower)) {
                    targetUserIds.push(follower);
                }
            });

            // console.log('curThreadFollowers', curThreadFollowers);
        } else {
            errorResponse(res, completedData, {errorMsg: 'createNotification - thread not found'});
            return -1;
        }
    }

    const origActorsList = JSON.parse(JSON.stringify(details.actors));
    let actorIds = [];
    if (getActorDetails) {
        actorIds = details.actors.map((actor) => actor.id);
        const usersFilter = { id: { $in: actorIds } };
        const actorResults = await db.collection('users').find(usersFilter).toArray();

        if (actorResults) {
            details.actors = actorResults.map((actor) => {
                const newActor = {
                    id: actor.id,
                    username: actor.username,
                    avatarImage: actor.avatarImage,
                    name: actor.name || actor.fullName,
                };
                if (!actor.avatarImage) {
                    newActor.style = actor.style;
                }
                return newActor;
            });
        } else {
            errorResponse(res, completedData, {errorMsg: 'createNotification - actors not found'});
            return -1;
        }
    }

    if (getThreadTitle) {
        const threadFilter = { id: details.threadId };
        const threadResult = await db.collection('posts').findOne(threadFilter);

        if (threadResult) {
            threadTitle = threadResult.title || threadResult.message;
            if (threadTitle && threadTitle.length > MAX_NOTIFICATION_TEXT_LENGTH) {
                threadTitle = threadTitle.substring(0, MAX_NOTIFICATION_TEXT_LENGTH);
            }
        } else {
            errorResponse(res, completedData, {errorMsg: 'createNotification - thread post not found'});
            return -1;
        }
    }

    if (getThreadTitle && !threadTitle) {
        getChannelTitle = true;
    }

    if (getChannelTitle) {
        const channelFilter = { id: details.channelId };
        const channelResult = await db.collection('channels').findOne(channelFilter);

        if (channelResult) {
            channelTitle = channelResult.title;
        } else {
            errorResponse(res, completedData, {errorMsg: 'createNotification - channel not found'});
            return -1;
        }
    }

    var allResults = [];

    let curUserId;
    let curDetails;
    let isThreadOwner;
    let isThreadFollower;

    for (let userI = 0; userI < targetUserIds.length; userI++) {
        curUserId = targetUserIds[userI];

        // console.log(actorIds, curUserId);
        if (!actorIds.includes(curUserId) || INCLUDE_ACTOR) {
            curDetails = JSON.parse(JSON.stringify(details));
            curDetails.userId = curUserId;

            const isProjectMember = projectMembers.includes(curUserId);
            const isProjectFollower = projectFollowers.includes(curUserId);

            // console.log('projectFollowers', projectFollowers, curUserId)

            if (isProjectMember) {
                curDetails.isProjectMember = true;
            }
            if (isProjectFollower) {
                curDetails.isProjectFollower = true;
            }

            curDetails.id = generateId(16);

            // curDetails.message = null;

            switch (curDetails.type) {
                case NotificationTypes.POST_ADDED:
                    if (curDetails.threadId) {
                        isThreadOwner = (curUserId === threadOwnerId);
                        isThreadFollower = threadFollowers.includes(curUserId);

                        if (!isThreadOwner && !isProjectMember && !isThreadFollower) {
                            curDetails.indirect = true;
                            // continue; // skip if not thread owner or not member of project?
                        }
                    } else if (curDetails.channelId) {
                        if (!isProjectMember) {
                            curDetails.indirect = true;
                            // continue; // skip if not thread owner or not member of project?
                        }
                    }
                    // if (curDetails.threadId) {
                    //     isThreadOwner = (curUserId === threadOwnerId);
                    //     if (isThreadOwner || isProjectMember) {
                    //         if (threadTitle) {
                    //             curDetails.message = 'replied to "' + threadTitle + '"';
                    //         } else if (channelTitle) {
                    //             curDetails.message = 'replied to a post in #' + channelTitle + '';
                    //         } else {
                    //             curDetails.message = 'replied to a post';
                    //         }
                    //     } else {
                    //         curDetails.indirect = true;
                    //         // continue; // skip if not thread owner or not member of project
                    //     }
                    // } else if (curDetails.channelId) {
                    //     if (channelTitle) {
                    //         curDetails.message = 'added a post to #' + channelTitle + '';
                    //     } else {
                    //         curDetails.message = 'added a post';
                    //     }
                    // } else {
                    //     curDetails.message = 'posted an update';
                    // }

                    break;
            }

            if (!curDetails.indirect) {
                if (projectTitle) {
                    curDetails.projectTitle = projectTitle;
                }
                if (threadTitle) {
                    curDetails.threadTitle = threadTitle;
                }
                if (channelTitle) {
                    curDetails.channelTitle = channelTitle;
                }
            } else {
                curDetails.actors = origActorsList;
            }

            // if (DEBUG && !curDetails.message && !curDetails.indirect) {
            //     throw new Error('no message set in createNotification', curDetails);
            // }

            const curResult = db.collection('notifications').insertOne(curDetails);
            allResults.push(curResult);
        }
    }

    const result = await Promise.all(allResults).then((values) => {
        let failed = false;

        let lastResult = true;
        values.forEach((curResult, index) => {
            // console.log('result ' + index, curResult);
            if (!curResult) {
                failed = true;
            }
            lastResult = curResult;
        });
        if (failed) {
            return null;
        } else {
            return lastResult;
        }
    });

    return result;
}

async function post$n(req, res, next) {
	const { db } = await init();

	const options = req.body;

	if (!await validateCredentials(db, options)) {
		response(res, {invalid: true});
		return;
	}

	let details = options.details;

	if (details && (details.id || details.message)) {

		const postDetails = {
			id: true,

			userId: true,
			channelId: true,
			projectId: true,
			threadId: true,

			type: true,

			title: true,
			message: true,
			image: true,
		};

		details = filterItemDetails(details, postDetails);

		details.createdAt = (new Date()).getTime();
		details.modifiedAt = details.createdAt;
		details.lastActiveAt = details.createdAt;

		let result;

		try {
			result = await db.collection('posts').insertOne(details);
		} catch (error) {
			catchMongoError(res, error);
			return;
		}

		if (result) {
			let updateParentCountResult;
			switch (details.type) {
				case 'thread':
					updateParentCountResult = await db.collection('channels').updateOne({ id: details.channelId }, {
						$set: { lastActiveAt: details.lastActiveAt },
						$inc: { postCount: 1 },
					});
					break;
				case 'threadPost':
					updateParentCountResult = await db.collection('posts').updateOne({ id: details.threadId }, {
						$set: { lastActiveAt: details.lastActiveAt },
						$inc: { postCount: 1 },
					});
					break;
			}

			if (updateParentCountResult) {
				const userUpdateResult = await db.collection('users').updateOne({ id: details.userId }, { $inc: { postsCount: 1 } });

				if (userUpdateResult) {
					const projectUpdateResult = await db.collection('projects').updateOne({ id: details.projectId }, { $set: { lastActiveAt: details.lastActiveAt }, $inc: { postsCount: 1 } });

					if (projectUpdateResult) {

						const notificationResult = await createNotification(db, {
							type: NotificationTypes.POST_ADDED,
							actors: [{id: details.userId}],

							projectId: details.projectId,

							postId: details.id,
							threadId: details.threadId,
							channelId: details.channelId,
						}, {
							postTitle: details.title,
						}, res, {addedPost: true});
						if (notificationResult === -1) {
							return;
						}

						if (config.DEBUG) {
							if (notificationResult) {
								response(res, {success: true});
							} else {
								errorResponse(res, {addedPost: true}, {errorMsg: 'error creating addPost notification', result: notificationResult});
							}
						} else {
							errorResponse(res, {addedPost: true});
						}
					} else {
						errorResponse(res, {addedPost: true});
					}
				} else {
					errorResponse(res, {addedPost: true});
				}
			} else {
				errorResponse(res, {addedPost: true});
			}
		} else {
			errorResponse(res, {});
		}
	} else {
		errorResponse(res, {});
	}
}

var route_23 = /*#__PURE__*/Object.freeze({
    __proto__: null,
    post: post$n
});

async function post$o(req, res, next) {
	const { db } = await init();

	const options = req.body;
	let details = options.details;

	if (details && details.usercode) { // details.username &&

		const userDetails = {
			id: true,

			// username: true,
			usercode: true,

			name: true,
			fullName: true,
			firstName: true,
			lastName: true,

			email: true,

			bio: true,

			skills: true,

			avatarImage: true,
			coverImage: true,

			style: true,

			location: true,
		};

		details = filterItemDetails(details, userDetails);

		// TODO: validate username
		// TODO: validate usercode
		// TODO: validate email

		// console.log('filtered user details', details);

		details.email = details.email.toLowerCase().trim();

		const exisitingEmail = await db.collection('users').findOne({ email: { $regex : new RegExp('^' + details.email + '$', 'i') }  });
		if (exisitingEmail) {
			response(res, {invalid: true, errorType: 'email_exists'});
		} else {
			// const exisitingUser = await db.collection('users').findOne({ username: details.username });
			// if (exisitingUser) {
			// 	response(res, {invalid: true, errorType: 'username_exists'});
			// } else {
				details.createdAt = (new Date()).getTime();
				details.modifiedAt = details.createdAt;
				details.lastActiveAt = details.createdAt;

				const result = await db.collection('users').insertOne(details);

				if (result) {
					response(res, {success: true});
				} else {
					response(res, {error: true});
				}
			// }
		}
	} else {
		response(res, {error: true});
	}
}

var route_24 = /*#__PURE__*/Object.freeze({
    __proto__: null,
    post: post$o
});

const bcrypt$1 = require('bcryptjs');


async function post$p(req, res, next) {
	const { db } = await init();

	const options = req.body;
	let username = options.username;
	const pass = options.pass; // TODO check pass

	username = username.toLowerCase().trim();

	if (username) {
		let user = await db.collection('users').findOne({ username: username });
		if (!user) {
			user = await db.collection('users').findOne({ email: username });
		}

		if (user) {
			let passValid = false;
			if (user.pass) {
				passValid = bcrypt$1.compareSync(pass, user.pass);
			} else {
				passValid = pass === user.usercode;
			}
			if (passValid) {
				const userDetailsSchema = {
					id: true,

					username: true,

					usercode: true, // return so can login and authorise

					name: true,
					// fullName: true,
					// firstName: true,
					// lastName: true,

					bio: true,

					skills: true,

					postsCount: true,
					likesCount: true,
					followsCount: true,

					avatarImage: true,
					coverImage: true,

					style: true,

					connected: true,
					requestedConnection: true,

					location: true,

					set: true,

					resetPass: true,
				};

				if (!user.pass) {
					user.set = false;
				}

                if (!user.name) {
					user.name = user.fullName;
				}

                if (!user.resetPass) {
                	delete user.resetPass;
                }

				const userDetails = filterItemDetails(user, userDetailsSchema);

				response(res, userDetails);
			} else {
				response(res, {invalid: true}); // pass not valid
			}
		} else {
			response(res, {invalid: true}); // no user found
		}
	} else {
		response(res, {invalid: true}); // no user specified
	}
}

var route_25 = /*#__PURE__*/Object.freeze({
    __proto__: null,
    post: post$p
});

function noop() { }
function run(fn) {
    return fn();
}
function blank_object() {
    return Object.create(null);
}
function run_all(fns) {
    fns.forEach(run);
}
function safe_not_equal(a, b) {
    return a != a ? b == b : a !== b || ((a && typeof a === 'object') || typeof a === 'function');
}
function subscribe(store, ...callbacks) {
    if (store == null) {
        return noop;
    }
    const unsub = store.subscribe(...callbacks);
    return unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;
}
function get_store_value(store) {
    let value;
    subscribe(store, _ => value = _)();
    return value;
}
function null_to_empty(value) {
    return value == null ? '' : value;
}
function custom_event(type, detail) {
    const e = document.createEvent('CustomEvent');
    e.initCustomEvent(type, false, false, detail);
    return e;
}

let current_component;
function set_current_component(component) {
    current_component = component;
}
function get_current_component() {
    if (!current_component)
        throw new Error(`Function called outside component initialization`);
    return current_component;
}
function onMount(fn) {
    get_current_component().$$.on_mount.push(fn);
}
function afterUpdate(fn) {
    get_current_component().$$.after_update.push(fn);
}
function onDestroy(fn) {
    get_current_component().$$.on_destroy.push(fn);
}
function createEventDispatcher() {
    const component = get_current_component();
    return (type, detail) => {
        const callbacks = component.$$.callbacks[type];
        if (callbacks) {
            // TODO are there situations where events could be dispatched
            // in a server (non-DOM) environment?
            const event = custom_event(type, detail);
            callbacks.slice().forEach(fn => {
                fn.call(component, event);
            });
        }
    };
}
function setContext(key, context) {
    get_current_component().$$.context.set(key, context);
}
function getContext(key) {
    return get_current_component().$$.context.get(key);
}

const dirty_components = [];
const binding_callbacks = [];
const render_callbacks = [];
const flush_callbacks = [];
const resolved_promise = Promise.resolve();
let update_scheduled = false;
function schedule_update() {
    if (!update_scheduled) {
        update_scheduled = true;
        resolved_promise.then(flush);
    }
}
function tick() {
    schedule_update();
    return resolved_promise;
}
function add_render_callback(fn) {
    render_callbacks.push(fn);
}
let flushing = false;
const seen_callbacks = new Set();
function flush() {
    if (flushing)
        return;
    flushing = true;
    do {
        // first, call beforeUpdate functions
        // and update components
        for (let i = 0; i < dirty_components.length; i += 1) {
            const component = dirty_components[i];
            set_current_component(component);
            update(component.$$);
        }
        dirty_components.length = 0;
        while (binding_callbacks.length)
            binding_callbacks.pop()();
        // then, once components are updated, call
        // afterUpdate functions. This may cause
        // subsequent updates...
        for (let i = 0; i < render_callbacks.length; i += 1) {
            const callback = render_callbacks[i];
            if (!seen_callbacks.has(callback)) {
                // ...so guard against infinite loops
                seen_callbacks.add(callback);
                callback();
            }
        }
        render_callbacks.length = 0;
    } while (dirty_components.length);
    while (flush_callbacks.length) {
        flush_callbacks.pop()();
    }
    update_scheduled = false;
    flushing = false;
    seen_callbacks.clear();
}
function update($$) {
    if ($$.fragment !== null) {
        $$.update();
        run_all($$.before_update);
        const dirty = $$.dirty;
        $$.dirty = [-1];
        $$.fragment && $$.fragment.p($$.ctx, dirty);
        $$.after_update.forEach(add_render_callback);
    }
}
const escaped = {
    '"': '&quot;',
    "'": '&#39;',
    '&': '&amp;',
    '<': '&lt;',
    '>': '&gt;'
};
function escape(html) {
    return String(html).replace(/["'&<>]/g, match => escaped[match]);
}
function each(items, fn) {
    let str = '';
    for (let i = 0; i < items.length; i += 1) {
        str += fn(items[i], i);
    }
    return str;
}
const missing_component = {
    $$render: () => ''
};
function validate_component(component, name) {
    if (!component || !component.$$render) {
        if (name === 'svelte:component')
            name += ' this={...}';
        throw new Error(`<${name}> is not a valid SSR component. You may need to review your build config to ensure that dependencies are compiled, rather than imported as pre-compiled modules`);
    }
    return component;
}
let on_destroy;
function create_ssr_component(fn) {
    function $$render(result, props, bindings, slots) {
        const parent_component = current_component;
        const $$ = {
            on_destroy,
            context: new Map(parent_component ? parent_component.$$.context : []),
            // these will be immediately discarded
            on_mount: [],
            before_update: [],
            after_update: [],
            callbacks: blank_object()
        };
        set_current_component({ $$ });
        const html = fn(result, props, bindings, slots);
        set_current_component(parent_component);
        return html;
    }
    return {
        render: (props = {}, options = {}) => {
            on_destroy = [];
            const result = { title: '', head: '', css: new Set() };
            const html = $$render(result, props, {}, options);
            run_all(on_destroy);
            return {
                html,
                css: {
                    code: Array.from(result.css).map(css => css.code).join('\n'),
                    map: null // TODO
                },
                head: result.title + result.head
            };
        },
        $$render
    };
}
function add_attribute(name, value, boolean) {
    if (value == null || (boolean && !value))
        return '';
    return ` ${name}${value === true ? '' : `=${typeof value === 'string' ? JSON.stringify(escape(value)) : `"${value}"`}`}`;
}

const subscriber_queue = [];
/**
 * Create a `Writable` store that allows both updating and reading by subscription.
 * @param {*=}value initial value
 * @param {StartStopNotifier=}start start and stop notifications for subscriptions
 */
function writable$1(value, start = noop) {
    let stop;
    const subscribers = [];
    function set(new_value) {
        if (safe_not_equal(value, new_value)) {
            value = new_value;
            if (stop) { // store is ready
                const run_queue = !subscriber_queue.length;
                for (let i = 0; i < subscribers.length; i += 1) {
                    const s = subscribers[i];
                    s[1]();
                    subscriber_queue.push(s, value);
                }
                if (run_queue) {
                    for (let i = 0; i < subscriber_queue.length; i += 2) {
                        subscriber_queue[i][0](subscriber_queue[i + 1]);
                    }
                    subscriber_queue.length = 0;
                }
            }
        }
    }
    function update(fn) {
        set(fn(value));
    }
    function subscribe(run, invalidate = noop) {
        const subscriber = [run, invalidate];
        subscribers.push(subscriber);
        if (subscribers.length === 1) {
            stop = start(set) || noop;
        }
        run(value);
        return () => {
            const index = subscribers.indexOf(subscriber);
            if (index !== -1) {
                subscribers.splice(index, 1);
            }
            if (subscribers.length === 0) {
                stop();
                stop = null;
            }
        };
    }
    return { set, update, subscribe };
}

const CONTEXT_KEY = {};

const preload = () => ({});

const DEBUG$1 = (!!"production".match(/development|staging/));

const HOSTNAME = (typeof window !== 'undefined') ? window.location.hostname : 'localhost';
const LOCAL = (!!"production".match(/development/)) && (HOSTNAME === 'localhost' || HOSTNAME === '192.168.1.5');

const STAGING_TEST = (typeof window !== 'undefined' && window.location.search.includes('stage'));

const MAIN_USER = 'sl3p5oms';
const GENERAL_USER = 'bl20a8lm';

const SITE_CONTENT_URL = (!!"production".match(/development|staging/)) ? 'https://flock-hub-dev.s3-us-west-2.amazonaws.com/' : 'https://flock-hub.s3-us-west-2.amazonaws.com/';
const USER_CONTENT_URL = (!!"production".match(/development|staging/)) ? 'https://flock-hub-dev-content.s3-us-west-2.amazonaws.com/' : 'https://flock-hub-content.s3-us-west-2.amazonaws.com/';

const contentFolder = 'content/';
const projectContentFolder = 'content/projects/';
const projectHeaderImage = 'header.jpg';

const headerImageLibraryFolder = 'library/images/';
const headerImageLibraryThumbFolder = 'library/images/thumbs/';
const headerImageExtension = '.jpg';

const CONTENT_IDENTIFIER_PATH = 'content/';

const MOBILE_DEVICE_MAX_WIDTH = 768;
const MOBILE_DEVICE_MAX_HEIGHT = 480;

const MAX_ID_LENGTH = 12;

const MAX_PROJECT_DESCRIPTION_CHARS = 140;
const PROJECT_DESCRIPTION_CHARS_LOW = 20;

const MAX_PROFILE_DESCRIPTION_CHARS = 500;
const PROFILE_DESCRIPTION_CHARS_LOW = 50;

const INVALID_FIELD_DELAY = 600;
const UPDATE_CONTEXT_STRING_DELAY = 600;

const USER_NAME_MIN_LENGTH = 3;
const USER_NAME_MAX_LENGTH = 16;

const RETURN_PROJECT_HEADER_OFFSET = 75; // 100;

const UPLOAD_MAX_WIDTH = 1024;
const UPLOAD_MAX_HEIGHT = 4096;
const UPLOAD_THUMB_MAX_WIDTH = 350;
const UPLOAD_THUMB_MAX_HEIGHT = 350;

const PROFILE_UPLOAD_MAX_WIDTH = 512;
const PROFILE_UPLOAD_MAX_HEIGHT = 512;
const PROFILE_UPLOAD_THUMB_MAX_WIDTH = 128;
const PROFILE_UPLOAD_THUMB_MAX_HEIGHT = 128;

const MAX_PROJECT_PREVIEW_COUNT = 3;
const MAX_SKILL_TAG_COUNT = 10; // 8;

const SHOW_EDITED_MIN_TIME = 2 * 60;

const SPLASH_TIMEOUT = 3;

const FLOCK_PROJECT = 'hPS9cRq2';
const MAX_FLOCK_PROJECT_INDEX = 4;

const ITEM_VIEWED_DELAY = 0.33;
const REPLY_VIEWED_DELAY = 2;
const CONVERSATIION_VIEWED_DELAY = 0.5;

const POLL_CHECK_DURATION = 1;

const ACTIVE_INTERACTION_DELAY = 60; // 30;

const NOTIFICATION_POLL_DELAY_FOCUSED = 5; // 5; // 1; // 5;
const NOTIFICATION_POLL_DELAY = 10; // 20; // 3; // 20; // 15;
const NOTIFICATION_POLL_DELAY_IDLE = 3 * 60;

const CONVERSATION_POLL_DELAY_FOCUSED = 2; // 3; // 4; // 2;
const CONVERSATION_POLL_DELAY = 5; // 8;
const CONVERSATION_POLL_DELAY_IDLE = 60;

const CONVERSATION_MAX_PREVIEW_LENGTH = 32;

const DATE_SHOWN_MESSAGE_DATE_DIFF = 6 * 3600; // 3600 = seconds/hour

const MIN_AUTO_SCROLL_BOTTOM_DIST = 200;
const MIN_HIDE_MESSAGES_BOTTOM_DIST = 60;

const MAX_IMAGE_UPLOAD_SIZE = {
    'image/gif': 8,
    'image/png': 3,
    'image/jpeg': 2,
};

var config$1 = {
    DEBUG: DEBUG$1,

    STAGING_TEST,

    HOSTNAME,
    LOCAL,

    MAIN_USER,
    GENERAL_USER,

    SITE_CONTENT_URL,
    USER_CONTENT_URL,

    contentFolder,
    projectContentFolder,
    projectHeaderImage,

    headerImageLibraryFolder,
    headerImageLibraryThumbFolder,
    headerImageExtension,

    CONTENT_IDENTIFIER_PATH,

    MOBILE_DEVICE_MAX_WIDTH,
    MOBILE_DEVICE_MAX_HEIGHT,

    MAX_ID_LENGTH,

    MAX_PROJECT_DESCRIPTION_CHARS,
    PROJECT_DESCRIPTION_CHARS_LOW,

    MAX_PROFILE_DESCRIPTION_CHARS,
    PROFILE_DESCRIPTION_CHARS_LOW,

    INVALID_FIELD_DELAY,
    UPDATE_CONTEXT_STRING_DELAY,

    USER_NAME_MIN_LENGTH,
    USER_NAME_MAX_LENGTH,

    RETURN_PROJECT_HEADER_OFFSET,

    MAX_PROJECT_PREVIEW_COUNT,
    MAX_SKILL_TAG_COUNT,

    SPLASH_TIMEOUT,

    UPLOAD_MAX_WIDTH,
    UPLOAD_MAX_HEIGHT,
    UPLOAD_THUMB_MAX_WIDTH,
    UPLOAD_THUMB_MAX_HEIGHT,

    PROFILE_UPLOAD_MAX_WIDTH,
    PROFILE_UPLOAD_MAX_HEIGHT,
    PROFILE_UPLOAD_THUMB_MAX_WIDTH,
    PROFILE_UPLOAD_THUMB_MAX_HEIGHT,

    FLOCK_PROJECT,
    MAX_FLOCK_PROJECT_INDEX,

    SHOW_EDITED_MIN_TIME,

    MAX_IMAGE_UPLOAD_SIZE,

    ITEM_VIEWED_DELAY,
    REPLY_VIEWED_DELAY,
    CONVERSATIION_VIEWED_DELAY,

    ACTIVE_INTERACTION_DELAY,

    POLL_CHECK_DURATION,

    NOTIFICATION_POLL_DELAY_FOCUSED,
    NOTIFICATION_POLL_DELAY,
    NOTIFICATION_POLL_DELAY_IDLE,

    CONVERSATION_POLL_DELAY_FOCUSED,
    CONVERSATION_POLL_DELAY,
    CONVERSATION_POLL_DELAY_IDLE,

    CONVERSATION_MAX_PREVIEW_LENGTH,

    DATE_SHOWN_MESSAGE_DATE_DIFF,

    MIN_AUTO_SCROLL_BOTTOM_DIST,
    MIN_HIDE_MESSAGES_BOTTOM_DIST,
};

/* src\components\GoogleAnalytics.svelte generated by Svelte v3.23.0 */
const productionUrl = "flock-hub.";

const GoogleAnalytics = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let $page;
	const { page } = stores$1();
	$page = get_store_value(page);
	$page = get_store_value(page);

	 {
		{
			if (typeof window !== "undefined") {
				if (window.location.href.includes(productionUrl) && typeof gtag !== "undefined") {
					gtag("config", "G-Y1CKT7L852", { page_path: $page.path });
				}
			}
		}
	}

	return ``;
});

const sections = [
	{
		segment: undefined,
		id: 'home',
		label: 'Home',
		main: true,
		darkBg: true,
		beta: true,
		betaHidden: true,
	},
	{
		segment: 'discover',
		label: 'Discover Projects',
		main: true,
		darkBg: true,
	},
	{
		segment: 'projects',
		iconId: 'following',
		label: 'My Projects',
		main: true,
	},
	{
		segment: 'activity',
		label: 'Activity',
		main: true,
		// beta: true,
	},
	{
		segment: 'messages',
		label: 'Messages',
		main: true,
	},

	{
		segment: 'contacts',
		label: 'Connections',
		showBack: true,
		parentPath: './',
	},
	{
		segment: 'profile',
		label: '',
		darkBg: true,
		showBack: true,
		parentPath: './',
		// parentPath: 'messages',
	},
	{
		segment: 'explore',
		path: '/discover.*',
		mainSection: 'discover',
		label: 'Discover Projects',
		darkBg: true,
	},
	{
		segment: 'explore',
		path: '/explore.*',
		mainSection: 'discover',
		label: 'Explore',
		darkBg: true,
	},

	{
		path: '/projects/archive',
		id: 'projectArchive',
		label: 'Archived Projects',
		showBack: true,
		parentPath: 'projects',
	},
	{
		path: '/projects/new',
		id: 'newProject',
		label: 'New Project',
		showBack: true,
		parentPath: 'projects',
	},
	{
		path: '/projects/.+/messages',
		id: 'projectMessages',
		label: 'Messages',
		showBack: true,
		parentPath: 'projects/[project]',
	},
	{
		path: '/projects/.+/followers',
		id: 'projectFollowers',
		label: 'Followers',
		showBack: true,
		parentPath: 'projects/[project]',
	},
	{
		path: '/projects/.+/details',
		id: 'create',
		label: 'Details',
		showBack: true,
		parentPath: 'projects/[project]',
		// parentPath: 'projects/m62lsp2o/populate',
	},
	// {
	// 	path: '/projects/.+/populate',
	// 	id: 'project',
	// 	label: 'World Creator',
	// 	darkBg: true,
	// 	// showBack: true,
	// 	parentPath: 'projects',
	// },
	// {
	// 	path: '/projects/.+/.+',
	// 	id: 'project',
	// 	label: 'World Creator',
	// 	darkBg: true,
	// 	showBack: true,
	// 	// parentPath: 'projects',
	// },
	{
		path: '/projects/.+',
		id: 'project',
		label: '',
		darkBg: true,
		isProjectView: true,
		// showBack: true,
		useLastPreProjectPath: true,
		parentPath: 'projects',
		// parentPath: 'discover',
	},

	{
		path: '/channels/.+',
		id: 'channel',
		label: '',
		darkBg: true,
		// showBack: true,
		parentPath: 'projects/[project]',
	},
	{
		path: '/posts/new',
		id: 'new_post',
		label: '',
		showBack: true,
		parentPath: 'projects/[project]',
	},
	{
		path: '/posts/.+/edit',
		id: 'edit_post',
		label: '',
		showBack: true,
		parentPath: 'channels/[channel]',
	},
	{
		path: '/posts/.+',
		id: 'posts',
		label: '',
		// showBack: true,
		parentPath: 'channels/[channel]',
		darkBg: true,
	},

	{
		path: '/messages/group',
		id: 'message_group_view',
		label: 'Messages',
		showBack: true,
		// parentPath: 'projects/m62lsp2o',
		parentPath: 'projects',
	},
	{
		path: '/messages/.+',
		id: 'message_view',
		label: '', // 'Conversation', // 'Mia',
		showBack: true,
		parentPath: 'messages',
	},
	{
		path: '/profile/.+/likes',
		id: 'profile_view',
		label: 'Likes',
		darkBg: true,
		showBack: true,
		parentPath: 'profile/[profile]',
		// parentPath: 'messages',
	},
	{
		path: '/profile/.+/edit',
		id: 'profile_edit',
		label: 'Likes',
		showBack: true,
		parentPath: 'profile/[profile]',
	},
	{
		path: '/profile/.+',
		id: 'profile_view',
		label: '', // 'Sasha Holmer',
		darkBg: true,
		showBack: true,
		// parentPath: 'messages',
		parentPath: './',
	},
];

const getMainSections = () => {
	return sections.filter(section => section.main);
};

const getIdForSection = (section) => {
	return section.id || section.segment;
};

const getIconForSection = (section) => {
	return section.iconId || getIdForSection(section);
};

const getPathForSection = (section) => {
	if (section.id === 'home') {
		return '/';
	}
	const sectionId = getIdForSection(section);
	return section.path || '/' + sectionId;
};
const getMainSectionForRoute = (segment, path) => {
	let section = getSectionByPath(path);
	if (!section || !section.mainSection) {
		section = getSectionBySegment(segment);
	}
	return getMainSectionForSection(section);
};
const getMainSectionForSection = (section) => {
	if (section) {
		if (section.mainSection !== undefined) {
			return section.mainSection;
		} else {
			return section.segment;
		}
	} else {
		return null;
	}
};

const isDarkBgForPath = (path) => {
	const section = getSectionByPath(path);
	return (section && section.darkBg) || false;
};

const getSectionByPath = (path, appState) => {
	if (appState && path === '/discover' && appState.viewMode === 'explore') {
		path = '/explore';
	}
	if (appState && /\/messages\/.+/.test(path) && appState.viewingGroupConversation) {
		path = '/messages/group';
	}
	if (appState && /\/profile\/.+/.test(path) && !/\/profile\/.+\/.+/.test(path) && appState.viewingOwnProfile) {
		path = '/profile';
	}

	return sections.find(item => {
		let sectionPath = getPathForSection(item);
		return new RegExp('^' + sectionPath + '\/?$').test(path)
	});
};

const getSectionBySegment = (segment) => {
	return sections.find(item => item.segment === segment);
};

function createModel(props, options, modelId, baseModel) {
    const persist = options && options.persist;

    let localStorage = null;

    if (persist) {
        localStorage = typeof window !== 'undefined' ? window.localStorage : null;
    }

    const model = baseModel || {};

    const _modelValues = loadState();

    let value;
    for (let key in props) {
        if (props.hasOwnProperty(key)) {
            value = props[key];

            if (_modelValues[key] === undefined) {
                _modelValues[key] = value;
            }

            model[key] = writable$1(_modelValues[key]);
        }
    }    if (persist) {
        for (let key in props) {
            if (props.hasOwnProperty(key)) {
                model[key].subscribe(val => {
                    _modelValues[key] = val;
                    saveModelState();
                });
            }
        }    }

    function saveModelState() {
        if (localStorage) {
            const appStateString = JSON.stringify(_modelValues);
            // if (DEBUG) console.log('save appState', appStateString);

            localStorage.setItem(modelId, appStateString);
        }
    }

    function loadState() {
        let appState = {};
        if (persist && localStorage) {
            try {
                const appStateString = localStorage.getItem(modelId);

                // if (DEBUG) console.log('load appState', appStateString);

                if (appStateString) {
                    appState = JSON.parse(appStateString);
                }
            } catch (e) {
                if (DEBUG$1) console.warn('error loading app state', e);
            }
        }
        return appState;
    }

    return model;
}

// import { init } from 'svelte/internal';

const AppModel = new EventEmitter();
// export default AppModel;

const appModel = createModel({
    projectId: null,
    channelId: null,
    postId: null,
    conversationId: null,
    profileId: null,
    userId: null, // 'bl20a8lm', // default user

    username: null,
    usercode: null,

    postType: null,

    viewMode: 'discover',
    locationMode: 'global',
    exploreZoomed: false,

    showBetaFeatures: false,
    showProjectCounts: false,

    profileDisplayingAllProjects: false,

    projectReturnView: false,
    projectShowingInfo: false,
    editingProjectMode: 'edit',

    displayingAllMyProjects: false,
    displayingAllFollowingProjects: false,

    postsAnchorToBottom: false,

    draftPosts: {},

    projectsSearchString: '',
    projectsArchiveSearchString: '',
    discoverSearchString: '',
    discoverFilterString: '',

    newConversation: false,
    newConversationUserIds: [],

}, {persist: true}, 'appState', AppModel);

const curPath = writable$1(null);
const prevPath = writable$1(null);

const lastPreProjectPath = writable$1(null);

const projectId = appModel.projectId;
const channelId = appModel.channelId;
const postId = appModel.postId;
const conversationId = appModel.conversationId;
const profileId = appModel.profileId;
const userId = appModel.userId;

const draftPosts = appModel.draftPosts;

const loggingIn = writable$1(false);

const signInRequired = writable$1(false);

const showBetaFeatures = appModel.showBetaFeatures;
const showProjectCounts = appModel.showProjectCounts;

const project = writable$1(null);
const conversation = writable$1(null);
const viewedUser = writable$1(null);
const user = writable$1(null);
const channel = writable$1(null);
const post$q = writable$1(null);

const postType = appModel.postType;

const username = appModel.username;
const usercode = appModel.usercode;

const postsAnchorToBottom = appModel.postsAnchorToBottom;

const targetProject = writable$1(null);
const targetUser = writable$1(null);
const targetPost = writable$1(null);

const savingPost = writable$1(false);
const savingPostId = writable$1(null);

const newMessage = appModel.newMessage;

const viewMode = appModel.viewMode;
const locationMode = appModel.locationMode;
const exploreZoomed = appModel.exploreZoomed;

const curMenu = writable$1(null);
const curPrompt = writable$1(null);

const scrollRegionProperties = writable$1({});
// const scrollRegionProperties = writable({});
// export const scrollRegionReset = writable(null);
// const scrollRegionProperties = appModel.scrollRegionProperties;

const profileDisplayingAllProjects = appModel.profileDisplayingAllProjects;

const projectReturnView = appModel.projectReturnView;
const projectShowingInfo = appModel.projectShowingInfo;
const editingProjectMode = appModel.editingProjectMode;

const projectsSearchString = appModel.projectsSearchString;
const projectsArchiveSearchString = appModel.projectsArchiveSearchString;
const discoverSearchString = appModel.discoverSearchString;
const discoverFilterString = appModel.discoverFilterString;

const displayingAllMyProjects = appModel.displayingAllMyProjects;
const displayingAllFollowingProjects = appModel.displayingAllFollowingProjects;

const logInFormValidated = writable$1(false);
const signUpFormValidated = writable$1(false);
const setAccountFormValidated = writable$1(false);
const forgotPasswordFormValidated = writable$1(false);

const dontAllowOverlayClose = writable$1(false);
const newUsername = writable$1(null);

const newConversation = appModel.newConversation;
const newConversationUserIds = appModel.newConversationUserIds;
const conversationGroupId = writable$1(null);

const savingConversationId = writable$1(null);

const debugOutput = writable$1('');

initApp();

function initApp() {
    checkDomain();

    //TODO: implement for reload and all svelte route navigation
    // if (typeof window !== 'undefined') {
    //     window.onbeforeunload = function(){
    //         return unsavedChanges;
    //     };
    // }
}

function checkDomain() {
    if (typeof window !== 'undefined' && !config$1.LOCAL) {
        if (!get_store_value(userId) || !get_store_value(usercode)) {
            // restore when can upload to flockprojects.com
            /* if (!config.STAGING_TEST && location.href.indexOf("flock-hub.herokuapp.com") !== -1) {
                let newUrl = location.href;
                if (location.protocol.indexOf("https") === -1 && location.protocol.indexOf("http") !== -1) {
                    newUrl = newUrl.replace("http", "https");
                }
                newUrl = newUrl.replace("flock-hub.herokuapp.com", "flockprojects.com");
                location.href = newUrl;
            } else */
            if (location.protocol.indexOf("https") === -1 && location.protocol.indexOf("http") !== -1) {
                location.href = location.href.replace("http", "https");
            }
        }
    }
}

function getScrollRegionProperties(id) {
    if (!id) {
        return null;
    }
    let curScrollRegionProperties = get_store_value(scrollRegionProperties);
    if (!curScrollRegionProperties[id]) {
        curScrollRegionProperties[id] = {
            scrollTop: 0,
        };
        scrollRegionProperties.set(curScrollRegionProperties);
    }
    curScrollRegionProperties = get_store_value(scrollRegionProperties);
    return curScrollRegionProperties[id];
}

function resetScrollRegionPosition(id) {
    if (!id) {
        return null;
    }
    let curScrollRegionProperties = get_store_value(scrollRegionProperties);
    if (curScrollRegionProperties[id]) {
        curScrollRegionProperties[id].inited = false;
        scrollRegionProperties.set(curScrollRegionProperties);
    }
}

function getIsCurrentUser(targetUserId) {
    const curUserId = get_store_value(userId);
	return (targetUserId === curUserId);
}

function getIsProjectTeamMember(project) {
    const curUserId = get_store_value(userId);
	return (project && curUserId && project.team && project.team.includes(curUserId));
}

function checkParams(query) {
    if (query.beta !== undefined) {
        showBetaFeatures.set(true);
    } else if (query.xbeta !== undefined) {
        showBetaFeatures.set(false);
    }

    showProjectCounts.set((query.counts !== undefined));
}

// not correct on initial site load for moment
function isUserLoaded(user, userId, loggingIn) {
    return !loggingIn && (!userId || (user && user.loaded));
}

function isProjectLoaded(project, projectId) {
    return project && project.id === projectId;
}

function getContentImage(imageUrl, thumb) {
	if (imageUrl) {
		const contextIndex = imageUrl.indexOf(config$1.CONTENT_IDENTIFIER_PATH);
		if (contextIndex === 0) {
            let imagePath = imageUrl.substr(config$1.CONTENT_IDENTIFIER_PATH.length);
            const extensionIndex = imagePath.lastIndexOf('.');
            if (thumb && extensionIndex !== -1) {
                imagePath = imagePath.substr(0, extensionIndex) + '-thumb' + imagePath.substr(extensionIndex);
            }
			return config$1.USER_CONTENT_URL + imagePath;
		}
	}
	return null;
}

function getHeaderImage(imageUrl, thumb) {
	if (imageUrl) {
		const contextIndex = imageUrl.indexOf(config$1.CONTENT_IDENTIFIER_PATH);
		if (contextIndex === 0) {
            return getContentImage(imageUrl, thumb);
		} else {
			return config$1.SITE_CONTENT_URL + (thumb ? config$1.headerImageLibraryThumbFolder : config$1.headerImageLibraryFolder) + imageUrl + config$1.headerImageExtension;
		}
	}
	return null;
}


function saveDraftPost(curPostType, draftId, editPost, draftPost) {
    const curPost = getDraftPost(curPostType, draftId, editPost, true);

    // console.log('saveDraftPost', curPostType, draftId, editPost, JSON.parse(JSON.stringify(curPost)));

    curPost.id = draftId;

    Object.assign(curPost, draftPost);

    const curDraftPosts = get_store_value(draftPosts);
    draftPosts.set(curDraftPosts);

    // ^^ console.log('draftPosts', curDraftPosts);

    return curPost;
}

function getDraftPost(curPostType, draftId, editPost, create, remove) {
    // console.log('getDraftPost', curPostType, draftId, editPost);

    const curDraftPosts = get_store_value(draftPosts);
    if (!curDraftPosts) {
        curDraftPosts = {};
    }

    let postArray = null;
    if (editPost) {
        postArray = curDraftPosts.posts;
        if (!postArray && create) {
            postArray = curDraftPosts.posts = [];
        }
    } else {
        switch (curPostType) {
            case 'thread':
                postArray = curDraftPosts.channels;
                if (!postArray && create) {
                    postArray = curDraftPosts.channels = [];
                }
                break;
            default:
                postArray = curDraftPosts.threads;
                if (!postArray && create) {
                    postArray = curDraftPosts.threads = [];
                }
                break;
        }
    }

    let curDraft = null;
    if (postArray) {
        // console.log('getDraftPost', [...postArray]);

        curDraft = postArray.find(match => match.id === draftId);
        if (remove) {
            postArray.splice(postArray.indexOf(curDraft), 1);
            // console.log('clear getDraftPost', [...postArray]);

            draftPosts.set(get_store_value(draftPosts));
            // ^^ console.log('draftPosts', curDraftPosts);

            return;
        } else {
            if (!curDraft && create) {
                curDraft = {};
                postArray.push(curDraft);
            }
        }
    }

    return curDraft;
}

function clearDraftPost(curPostType, draftId, editPost) {
    // console.log('clearDraftPost', curPostType, draftId, editPost);

    getDraftPost(curPostType, draftId, editPost, false, true);
}

function triggerNewThreadPost() {
    AppModel.emit('newThreadPost');
}

function triggerFollowPost(postId) {
    AppModel.emit('followPost', postId);
}

/* src\components\ScrollView.svelte generated by Svelte v3.23.0 */

const css = {
	code: ".content.svelte-j97uab{position:absolute;top:0;left:0;width:100%;height:100%;overflow:hidden}.scrollView.svelte-j97uab{position:absolute;top:0;bottom:0;width:100%;overflow:hidden;overflow-y:scroll;-ms-overflow-style:none}.scrollView.svelte-j97uab::-webkit-scrollbar{display:none}.scrollHeader.svelte-j97uab{position:absolute;width:100%;box-shadow:0 2px 3px 0 rgba(0,0,0,0.1)}.scrollHeader.shadowHidden.svelte-j97uab{box-shadow:initial}",
	map: "{\"version\":3,\"file\":\"ScrollView.svelte\",\"sources\":[\"ScrollView.svelte\"],\"sourcesContent\":[\"<svelte:window bind:innerWidth=\\\"{windowWidth}\\\" />\\r\\n\\r\\n<script>\\r\\n    import { scrollRegionProperties, getScrollRegionProperties } from '../models/appModel';\\r\\n\\r\\n    import { onMount, onDestroy, tick } from 'svelte'; // afterUpdate\\r\\n\\r\\n    export let anchorToBottom = false;\\r\\n    export let headerStartHidden = false;\\r\\n    export let headerHideOffset = 0;\\r\\n    export let headerResetOnShow = false;\\r\\n    export let hideHeaderShadowAtTop = false\\r\\n    export let headerHiddenOffset = 0;\\r\\n    export let hideShadowMargin = 1;\\r\\n    export let bottomOffset = 0;\\r\\n    export let disabledMinHeight = false;\\r\\n    export let onScroll = null;\\r\\n\\r\\n    export let className = '';\\r\\n\\r\\n    export let id = null;\\r\\n    let regionProps = null;\\r\\n    $: {\\r\\n        regionProps = getScrollRegionProperties(id);\\r\\n    }\\r\\n\\r\\n    $: minHeightStyle = (minScrollContentHeight && !disabledMinHeight) ? 'min-height: ' + minScrollContentHeight + 'px' : '';\\r\\n\\r\\n    let hasScrollHeader = ($$props.$$slots && $$props.$$slots.scrollHeader) || false;\\r\\n\\r\\n    let windowWidth;\\r\\n    let minScrollContentHeight = 0;\\r\\n\\r\\n    $: {\\r\\n        //listen to window resize\\r\\n        if (hasScrollHeader && scrollHeader && windowWidth) {\\r\\n            scrollHeaderHeight = scrollHeader.offsetHeight;\\r\\n        }\\r\\n\\r\\n        const headerHideAmount = headerHideOffset; // headerHiddenOffset ? headerHiddenOffset : headerHideOffset;\\r\\n        minScrollContentHeight = (scrollRegion && scrollRegion.offsetHeight && scrollRegion.offsetHeight + headerHideAmount) || 0;\\r\\n    }\\r\\n\\r\\n    export let scrollRegion = null;\\r\\n    let curScrollHeaderPosition = 0;\\r\\n    let scrollHeaderOffset = 0;\\r\\n    let scrollHeader;\\r\\n    let scrollHeaderHeight = 0;\\r\\n\\r\\n    let shadowHidden = false;\\r\\n\\r\\n    function updateScroll() {\\r\\n        if (!regionProps || !scrollRegion) {\\r\\n            return;\\r\\n        }\\r\\n\\r\\n        regionProps.scrollTop = scrollRegion.scrollTop;\\r\\n\\r\\n        // if (headerStartHidden && !anchorToBottom) {\\r\\n        //     regionProps.scrollTop = Math.max(regionProps.scrollTop, scrollHeaderHeight);\\r\\n        // }\\r\\n\\r\\n        if (hasScrollHeader && scrollHeader) {\\r\\n            scrollHeaderHeight = scrollHeader.offsetHeight;\\r\\n            curScrollHeaderPosition = Math.min(regionProps.scrollTop, Math.max(regionProps.scrollTop - scrollHeaderHeight, curScrollHeaderPosition));\\r\\n            scrollHeaderOffset = curScrollHeaderPosition - regionProps.scrollTop;\\r\\n\\r\\n            // console.log('curScrollHeaderPosition: ' + curScrollHeaderPosition + ', scrollHeaderOffset: ' + scrollHeaderOffset);\\r\\n        }\\r\\n\\r\\n        if (onScroll) {\\r\\n            onScroll();\\r\\n        }\\r\\n    }\\r\\n\\r\\n    $: {\\r\\n        curScrollHeaderPosition;\\r\\n\\r\\n        if (hideHeaderShadowAtTop) {\\r\\n            if (regionProps.scrollTop <= hideShadowMargin) {\\r\\n                shadowHidden = true;\\r\\n            } else {\\r\\n                shadowHidden = false;\\r\\n            }\\r\\n        }\\r\\n    }\\r\\n\\r\\n    let scrollUpdateInited = false;\\r\\n\\r\\n    const updateScrollPosition = async () => {\\r\\n        if (!regionProps) {\\r\\n            return;\\r\\n        }\\r\\n\\r\\n        await tick();\\r\\n\\r\\n        if (!regionProps || !scrollRegion) {\\r\\n            return;\\r\\n        }\\r\\n\\r\\n        if (!regionProps.inited) {\\r\\n            regionProps.inited = true;\\r\\n\\r\\n            if (anchorToBottom) {\\r\\n                // TODO: check scroll if region height changes (e.g. image load)\\r\\n                regionProps.scrollTop = scrollRegion.scrollHeight;\\r\\n            } else {\\r\\n                regionProps.scrollTop = 0;\\r\\n            }\\r\\n            updateHeaderScrollPosition(true);\\r\\n        }\\r\\n        // console.log(id + ' regionProps.scrollTop: ' + regionProps.scrollTop + ' ' + anchorToBottom);\\r\\n\\r\\n        const curScrollRegion = scrollRegion;\\r\\n\\r\\n        // delay incase full height not yet loaded\\r\\n        // TODO: check scroll if region height changes (e.g. image load)\\r\\n        setTimeout(() => {\\r\\n            if (regionProps) {\\r\\n                curScrollRegion.scrollTo(0, regionProps.scrollTop);\\r\\n                updateHeaderScrollPosition();\\r\\n            }\\r\\n        }, 2);\\r\\n        setTimeout(() => {\\r\\n            if (regionProps) {\\r\\n                curScrollRegion.scrollTo(0, regionProps.scrollTop);\\r\\n                if (hasScrollHeader && scrollHeader) {\\r\\n                    scrollHeaderHeight = scrollHeader.offsetHeight;\\r\\n                }\\r\\n                updateHeaderScrollPosition();\\r\\n            }\\r\\n        }, 10);\\r\\n        setTimeout(() => {\\r\\n            if (regionProps) {\\r\\n                curScrollRegion.scrollTo(0, regionProps.scrollTop);\\r\\n                updateHeaderScrollPosition();\\r\\n            }\\r\\n        }, 50);\\r\\n        setTimeout(() => {\\r\\n            if (regionProps) {\\r\\n                curScrollRegion.scrollTo(0, regionProps.scrollTop);\\r\\n                if (hasScrollHeader && scrollHeader) {\\r\\n                    scrollHeaderHeight = scrollHeader.offsetHeight;\\r\\n                }\\r\\n                updateHeaderScrollPosition();\\r\\n            }\\r\\n        }, 100);\\r\\n\\r\\n        // console.log('load scroll \\\"' + id + '\\\": ' + regionProps.scrollTop);\\r\\n\\r\\n        updateHeaderScrollPosition();\\r\\n\\r\\n        scrollRegion.scrollTo(0, regionProps.scrollTop);\\r\\n    }\\r\\n\\r\\n    function updateHeaderScrollPosition(allowHeaderPositionReset) {\\r\\n        if (hasScrollHeader && scrollHeader) {\\r\\n            scrollHeaderHeight = scrollHeader.offsetHeight;\\r\\n\\r\\n            if (headerResetOnShow && !headerStartHidden) {\\r\\n                curScrollHeaderPosition = regionProps.scrollTop;\\r\\n            } else {\\r\\n                if (allowHeaderPositionReset) {\\r\\n                    if (headerStartHidden && !anchorToBottom) {\\r\\n                        const headerHideAmount = headerHiddenOffset ? headerHiddenOffset : scrollHeaderHeight;\\r\\n                        if (regionProps.scrollTop < 30) {\\r\\n                            regionProps.scrollTop = headerHideAmount;\\r\\n                        }\\r\\n                        curScrollHeaderPosition = (curScrollHeaderPosition - regionProps.scrollTop) - headerHideAmount;\\r\\n                        curScrollHeaderPosition = Math.min(regionProps.scrollTop, Math.max(regionProps.scrollTop - headerHideAmount, curScrollHeaderPosition));\\r\\n                        // console.log('regionProps.scrollTop: ' + regionProps.scrollTop + ' curScrollHeaderPosition: ' + curScrollHeaderPosition);\\r\\n                        if (headerHideOffset) {\\r\\n                            regionProps.scrollTop += headerHideOffset;\\r\\n                        }\\r\\n                        scrollRegion.scrollTo(0, regionProps.scrollTop);\\r\\n                    } else {\\r\\n                        curScrollHeaderPosition = regionProps.scrollTop;\\r\\n                    }\\r\\n                }\\r\\n            }\\r\\n\\r\\n            scrollHeaderOffset = curScrollHeaderPosition - regionProps.scrollTop;\\r\\n            // console.log('scrollHeaderOffset: ' + scrollHeaderOffset);\\r\\n        }\\r\\n    }\\r\\n\\r\\n    onMount(() => {\\r\\n        scrollRegion.addEventListener('scroll', updateScroll);\\r\\n        updateScrollPosition();\\r\\n    });\\r\\n\\r\\n    const scrollRegionResetUnsubscribe = scrollRegionProperties.subscribe(event => {\\r\\n        if (scrollUpdateInited) {\\r\\n            updateScrollPosition();\\r\\n        } else {\\r\\n            scrollUpdateInited = true;\\r\\n        }\\r\\n    });\\r\\n\\r\\n\\tonDestroy(() => {\\r\\n        scrollRegionResetUnsubscribe();\\r\\n        if (scrollRegion) {\\r\\n            scrollRegion.removeEventListener('scroll', updateScroll);\\r\\n        }\\r\\n    });\\r\\n\\r\\n    // causes export 500 on index error\\r\\n\\t// onDestroy(() => {\\r\\n    //     scrollRegion.removeEventListener('scroll', updateScroll);\\r\\n\\t// });\\r\\n</script>\\r\\n\\r\\n\\r\\n{#if hasScrollHeader}\\r\\n    <div class=\\\"content {className}\\\" style=\\\"bottom: {bottomOffset}px\\\">\\r\\n        <div class=\\\"scrollView\\\" bind:this=\\\"{scrollRegion}\\\" style=\\\"padding-top: {scrollHeaderHeight}px\\\">\\r\\n            <div class=\\\"scrollContent\\\" style=\\\"{minHeightStyle}\\\">\\r\\n                <slot></slot>\\r\\n            </div>\\r\\n        </div>\\r\\n        <div class=\\\"scrollHeader\\\" class:shadowHidden=\\\"{shadowHidden}\\\" style=\\\"top: {scrollHeaderOffset}px\\\" bind:this=\\\"{scrollHeader}\\\">\\r\\n            <slot name=\\\"scrollHeader\\\"></slot>\\r\\n        </div>\\r\\n    </div>\\r\\n{:else}\\r\\n    <div class=\\\"scrollView {className}\\\" bind:this=\\\"{scrollRegion}\\\" style=\\\"bottom: {bottomOffset}px\\\">\\r\\n        <div class=\\\"scrollContent\\\" style=\\\"{minHeightStyle}\\\">\\r\\n            <slot></slot>\\r\\n        </div>\\r\\n    </div>\\r\\n{/if}\\r\\n\\r\\n<style>\\r\\n    .content {\\r\\n        position: absolute;\\r\\n        top: 0;\\r\\n        left: 0;\\r\\n        width: 100%;\\r\\n        height: 100%;\\r\\n        overflow: hidden;\\r\\n    }\\r\\n\\r\\n    .scrollView {\\r\\n        position: absolute;\\r\\n        top: 0;\\r\\n        bottom: 0;\\r\\n\\r\\n        width: 100%;\\r\\n\\r\\n        overflow: hidden;\\r\\n        overflow-y: scroll;\\r\\n\\r\\n        -ms-overflow-style: none; /* Hide scrollbar for IE and Edge */\\r\\n    }\\r\\n    .scrollView::-webkit-scrollbar { /* Hide scrollbar for Chrome, Safari and Opera */\\r\\n        display: none;\\r\\n    }\\r\\n\\r\\n    .scrollHeader {\\r\\n        position: absolute;\\r\\n        width: 100%;\\r\\n\\r\\n        box-shadow: 0 2px 3px 0 rgba(0,0,0,0.1);\\r\\n\\r\\n        /* transition-property: box-shadow;\\r\\n        transition-duration: 0.33s; */\\r\\n    }\\r\\n\\r\\n    .scrollHeader.shadowHidden {\\r\\n        box-shadow: initial;\\r\\n    }\\r\\n\\r\\n</style>\"],\"names\":[],\"mappings\":\"AAyOI,QAAQ,cAAC,CAAC,AACN,QAAQ,CAAE,QAAQ,CAClB,GAAG,CAAE,CAAC,CACN,IAAI,CAAE,CAAC,CACP,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,QAAQ,CAAE,MAAM,AACpB,CAAC,AAED,WAAW,cAAC,CAAC,AACT,QAAQ,CAAE,QAAQ,CAClB,GAAG,CAAE,CAAC,CACN,MAAM,CAAE,CAAC,CAET,KAAK,CAAE,IAAI,CAEX,QAAQ,CAAE,MAAM,CAChB,UAAU,CAAE,MAAM,CAElB,kBAAkB,CAAE,IAAI,AAC5B,CAAC,AACD,yBAAW,mBAAmB,AAAC,CAAC,AAC5B,OAAO,CAAE,IAAI,AACjB,CAAC,AAED,aAAa,cAAC,CAAC,AACX,QAAQ,CAAE,QAAQ,CAClB,KAAK,CAAE,IAAI,CAEX,UAAU,CAAE,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,AAI3C,CAAC,AAED,aAAa,aAAa,cAAC,CAAC,AACxB,UAAU,CAAE,OAAO,AACvB,CAAC\"}"
};

const ScrollView = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let { anchorToBottom = false } = $$props;
	let { headerStartHidden = false } = $$props;
	let { headerHideOffset = 0 } = $$props;
	let { headerResetOnShow = false } = $$props;
	let { hideHeaderShadowAtTop = false } = $$props;
	let { headerHiddenOffset = 0 } = $$props;
	let { hideShadowMargin = 1 } = $$props;
	let { bottomOffset = 0 } = $$props;
	let { disabledMinHeight = false } = $$props;
	let { onScroll = null } = $$props;
	let { className = "" } = $$props;
	let { id = null } = $$props;
	let regionProps = null;
	let hasScrollHeader = $$props.$$slots && $$props.$$slots.scrollHeader || false;
	let windowWidth;
	let minScrollContentHeight = 0;
	let { scrollRegion = null } = $$props;
	let curScrollHeaderPosition = 0;
	let scrollHeaderOffset = 0;
	let scrollHeader;
	let scrollHeaderHeight = 0;
	let shadowHidden = false;

	function updateScroll() {
		if (!regionProps || !scrollRegion) {
			return;
		}

		regionProps.scrollTop = scrollRegion.scrollTop;

		// if (headerStartHidden && !anchorToBottom) {
		//     regionProps.scrollTop = Math.max(regionProps.scrollTop, scrollHeaderHeight);
		// }
		if (hasScrollHeader && scrollHeader) {
			scrollHeaderHeight = scrollHeader.offsetHeight;
			curScrollHeaderPosition = Math.min(regionProps.scrollTop, Math.max(regionProps.scrollTop - scrollHeaderHeight, curScrollHeaderPosition));
			scrollHeaderOffset = curScrollHeaderPosition - regionProps.scrollTop;
		} // console.log('curScrollHeaderPosition: ' + curScrollHeaderPosition + ', scrollHeaderOffset: ' + scrollHeaderOffset);

		if (onScroll) {
			onScroll();
		}
	}

	let scrollUpdateInited = false;

	const updateScrollPosition = async () => {
		if (!regionProps) {
			return;
		}

		await tick();

		if (!regionProps || !scrollRegion) {
			return;
		}

		if (!regionProps.inited) {
			regionProps.inited = true;

			if (anchorToBottom) {
				// TODO: check scroll if region height changes (e.g. image load)
				regionProps.scrollTop = scrollRegion.scrollHeight;
			} else {
				regionProps.scrollTop = 0;
			}

			updateHeaderScrollPosition(true);
		}

		// console.log(id + ' regionProps.scrollTop: ' + regionProps.scrollTop + ' ' + anchorToBottom);
		const curScrollRegion = scrollRegion;

		// delay incase full height not yet loaded
		// TODO: check scroll if region height changes (e.g. image load)
		setTimeout(
			() => {
				if (regionProps) {
					curScrollRegion.scrollTo(0, regionProps.scrollTop);
					updateHeaderScrollPosition();
				}
			},
			2
		);

		setTimeout(
			() => {
				if (regionProps) {
					curScrollRegion.scrollTo(0, regionProps.scrollTop);

					if (hasScrollHeader && scrollHeader) {
						scrollHeaderHeight = scrollHeader.offsetHeight;
					}

					updateHeaderScrollPosition();
				}
			},
			10
		);

		setTimeout(
			() => {
				if (regionProps) {
					curScrollRegion.scrollTo(0, regionProps.scrollTop);
					updateHeaderScrollPosition();
				}
			},
			50
		);

		setTimeout(
			() => {
				if (regionProps) {
					curScrollRegion.scrollTo(0, regionProps.scrollTop);

					if (hasScrollHeader && scrollHeader) {
						scrollHeaderHeight = scrollHeader.offsetHeight;
					}

					updateHeaderScrollPosition();
				}
			},
			100
		);

		// console.log('load scroll "' + id + '": ' + regionProps.scrollTop);
		updateHeaderScrollPosition();

		scrollRegion.scrollTo(0, regionProps.scrollTop);
	};

	function updateHeaderScrollPosition(allowHeaderPositionReset) {
		if (hasScrollHeader && scrollHeader) {
			scrollHeaderHeight = scrollHeader.offsetHeight;

			if (headerResetOnShow && !headerStartHidden) {
				curScrollHeaderPosition = regionProps.scrollTop;
			} else {
				if (allowHeaderPositionReset) {
					if (headerStartHidden && !anchorToBottom) {
						const headerHideAmount = headerHiddenOffset
						? headerHiddenOffset
						: scrollHeaderHeight;

						if (regionProps.scrollTop < 30) {
							regionProps.scrollTop = headerHideAmount;
						}

						curScrollHeaderPosition = curScrollHeaderPosition - regionProps.scrollTop - headerHideAmount;
						curScrollHeaderPosition = Math.min(regionProps.scrollTop, Math.max(regionProps.scrollTop - headerHideAmount, curScrollHeaderPosition));

						// console.log('regionProps.scrollTop: ' + regionProps.scrollTop + ' curScrollHeaderPosition: ' + curScrollHeaderPosition);
						if (headerHideOffset) {
							regionProps.scrollTop += headerHideOffset;
						}

						scrollRegion.scrollTo(0, regionProps.scrollTop);
					} else {
						curScrollHeaderPosition = regionProps.scrollTop;
					}
				}
			}

			scrollHeaderOffset = curScrollHeaderPosition - regionProps.scrollTop;
		} // console.log('scrollHeaderOffset: ' + scrollHeaderOffset);
	}

	onMount(() => {
		scrollRegion.addEventListener("scroll", updateScroll);
		updateScrollPosition();
	});

	const scrollRegionResetUnsubscribe = scrollRegionProperties.subscribe(event => {
		if (scrollUpdateInited) {
			updateScrollPosition();
		} else {
			scrollUpdateInited = true;
		}
	});

	onDestroy(() => {
		scrollRegionResetUnsubscribe();

		if (scrollRegion) {
			scrollRegion.removeEventListener("scroll", updateScroll);
		}
	});

	if ($$props.anchorToBottom === void 0 && $$bindings.anchorToBottom && anchorToBottom !== void 0) $$bindings.anchorToBottom(anchorToBottom);
	if ($$props.headerStartHidden === void 0 && $$bindings.headerStartHidden && headerStartHidden !== void 0) $$bindings.headerStartHidden(headerStartHidden);
	if ($$props.headerHideOffset === void 0 && $$bindings.headerHideOffset && headerHideOffset !== void 0) $$bindings.headerHideOffset(headerHideOffset);
	if ($$props.headerResetOnShow === void 0 && $$bindings.headerResetOnShow && headerResetOnShow !== void 0) $$bindings.headerResetOnShow(headerResetOnShow);
	if ($$props.hideHeaderShadowAtTop === void 0 && $$bindings.hideHeaderShadowAtTop && hideHeaderShadowAtTop !== void 0) $$bindings.hideHeaderShadowAtTop(hideHeaderShadowAtTop);
	if ($$props.headerHiddenOffset === void 0 && $$bindings.headerHiddenOffset && headerHiddenOffset !== void 0) $$bindings.headerHiddenOffset(headerHiddenOffset);
	if ($$props.hideShadowMargin === void 0 && $$bindings.hideShadowMargin && hideShadowMargin !== void 0) $$bindings.hideShadowMargin(hideShadowMargin);
	if ($$props.bottomOffset === void 0 && $$bindings.bottomOffset && bottomOffset !== void 0) $$bindings.bottomOffset(bottomOffset);
	if ($$props.disabledMinHeight === void 0 && $$bindings.disabledMinHeight && disabledMinHeight !== void 0) $$bindings.disabledMinHeight(disabledMinHeight);
	if ($$props.onScroll === void 0 && $$bindings.onScroll && onScroll !== void 0) $$bindings.onScroll(onScroll);
	if ($$props.className === void 0 && $$bindings.className && className !== void 0) $$bindings.className(className);
	if ($$props.id === void 0 && $$bindings.id && id !== void 0) $$bindings.id(id);
	if ($$props.scrollRegion === void 0 && $$bindings.scrollRegion && scrollRegion !== void 0) $$bindings.scrollRegion(scrollRegion);
	$$result.css.add(css);

	 {
		{
			regionProps = getScrollRegionProperties(id);
		}
	}

	 {
		{
			//listen to window resize
			if (hasScrollHeader && scrollHeader && windowWidth) {
				scrollHeaderHeight = scrollHeader.offsetHeight;
			}

			const headerHideAmount = headerHideOffset; // headerHiddenOffset ? headerHiddenOffset : headerHideOffset;
			minScrollContentHeight = scrollRegion && scrollRegion.offsetHeight && scrollRegion.offsetHeight + headerHideAmount || 0;
		}
	}

	let minHeightStyle = minScrollContentHeight && !disabledMinHeight
	? "min-height: " + minScrollContentHeight + "px"
	: "";

	 {
		{

			if (hideHeaderShadowAtTop) {
				if (regionProps.scrollTop <= hideShadowMargin) {
					shadowHidden = true;
				} else {
					shadowHidden = false;
				}
			}
		}
	}

	return `




${hasScrollHeader
	? `<div class="${"content " + escape(className) + " svelte-j97uab"}" style="${"bottom: " + escape(bottomOffset) + "px"}"><div class="${"scrollView svelte-j97uab"}" style="${"padding-top: " + escape(scrollHeaderHeight) + "px"}"${add_attribute("this", scrollRegion, 1)}><div class="${"scrollContent"}"${add_attribute("style", minHeightStyle, 0)}>${$$slots.default ? $$slots.default({}) : ``}</div></div>
        <div class="${["scrollHeader svelte-j97uab", shadowHidden ? "shadowHidden" : ""].join(" ").trim()}" style="${"top: " + escape(scrollHeaderOffset) + "px"}"${add_attribute("this", scrollHeader, 1)}>${$$slots.scrollHeader ? $$slots.scrollHeader({}) : ``}</div></div>`
	: `<div class="${"scrollView " + escape(className) + " svelte-j97uab"}" style="${"bottom: " + escape(bottomOffset) + "px"}"${add_attribute("this", scrollRegion, 1)}><div class="${"scrollContent"}"${add_attribute("style", minHeightStyle, 0)}>${$$slots.default ? $$slots.default({}) : ``}</div></div>`}`;
});

const locale$1 = {
	HOME_INTRO: {
		TITLE: 'Bringing creative, innovative and inspirational projects to life', // 'A platform to bring creative and innovative projects to life', // 'Welcome to Flock',
		HEADER_TEXT: 'Share and discover projects around the world to grow your community, build your team and turn your ideas into reality.', // 'Share and discover projects around the world to grow your community, find the perfect team and turn your ideas and dreams into reality.', // 'Share and discover projects around the world to build your community, find your team and realize your ideas', // 'Share and discover inspirational projects around the world, grow your team and community and realize your ideas.', // 'Share, discover and collaborate on inspirational projects around the world.',
		// INTRO_TEXT: 'Your platform for building communities and teams around creative and innovative projects.',
		// HEADER_TEXT: 'Discover and share creative and innovative projects to bring them to life.',
		// INTRO_TEXT: 'Build you community and find your team by sharing your projects, allowing others to follow, support and start getting involved to make your dreams a reality!',
		SIGN_UP: 'sign up', // 'create account',
		SIGN_IN: 'sign in',
		LEARN_MORE: 'learn more',
		DISCOVER: 'or discover projects',
	},
	GENERAL: {
		SHOW_MORE: 'show more',
		UPLOAD_IMAGE: 'upload',
		SEARCH_PLACEHOLDER: 'search',
		NEW_POST: 'new post',
	},
	HEADER: {
		SIGN_IN: 'sign in',
		SIGN_UP: 'sign up',
	},
	DISCOVER: {
		NO_PROJECTS: 'no projects found',
	},
	FOLLOWING_PROJECTS: {
		BUTTON_ARCHIVED_PROJECTS: 'archived projects',
	},
	NEW_PROJECT: {
		TITLE: 'project name',
		// TITLE_NOTE: 'your project will be private until you share it',
		DESCRIPTION: 'project summary',
		DESCRIPTION_NOTE: 'keep it brief, you can add detail later',
		// DESCRIPTION_NOTE: 'keep your summary as short and to the point as possible,<br/>you have the opportunity to go into more detail later',
		// DESCRIPTION_NOTE: 'keep your summary as concise as possible, you can go into detail later',
		HEADER_IMAGE: 'project header image',
		PRIVACY_NOTE: 'your project will start private, you can make it public later',
		CONFIRM: 'next',
		DETAILS_2_CONFIRM: 'finish',
		// DETAILS_3_CONFIRM: 'finish',
	},
	EDIT_PROJECT_DETAILS: {
		OVERVIEW_HEADING: 'Project Overview',
		CATEGORIES: 'project category',
		CATEGORIES_TIP: 'select at least one',
		TAGS: 'tags',
		TAGS_TIP: 'project keywords, separated by commas',
		SKILLS: 'seeking skills',
		SKILLS_TIP: 'talents and roles wanted, separated by commas',
		// TAGS_TIP: 'add at least 5 keywords/terms/categories for this project, separated by commas',
		LOCATION: 'location',
		LOCATION_TIP: 'if location specific, where is this project based?',
		DETAIL_1_LABEL: 'introduction',
		DETAIL_2_LABEL: 'why it matters',
		DETAIL_3_LABEL: 'how it works',
		DETAIL_4_LABEL: 'what\'s next',
		DETAIL_1_TIP: '<br/>overview and background of the project', // '<strong>what</strong> is the project',
		DETAIL_2_TIP: '<br/>what problem or need or is the project is addressing', // '<strong>why</strong> it matters',
		DETAIL_3_TIP: '<br/>more detail about the project and how people interact with it', // '<strong>how</strong> it works',
		DETAIL_4_TIP: '<br/>current project status, what you\'re looking for, how others can help',
		ADD_IMAGE: 'add image',
		REMOVE_IMAGE: 'remove image',
		CONFIRM: 'save',
		CANCEL: 'cancel',
	},
	EDIT_PROFILE: {
		NAME: 'name',
		BIO: 'bio',
		BIO_TIP: '- what do you like to do?', // '- what fuels your fire?',
		UPLOAD_PROFILE_IMAGE: 'upload image',
		COVER_IMAGE: 'cover image',
		SKILLS: 'skills',
		SKILLS_TIP: 'capabilities and interests, separated by commas',
		LOCATION: 'location',
		LOCATION_TIP: 'where are you based?',
		CONFIRM: 'save',
		CANCEL: 'cancel',
	},
	LOADING: {
		DEFAULT: 'loading...',
		DISCOVER: 'loading projects...',
		FOLLOWING: 'loading projects...',
		PROJECT: 'loading project...',
		PROFILE: 'loading profile...',
		PROJECTS_ITEMS: 'loading projects...',
		CHANNEL: 'loading channel...',
		CHANNELS: 'loading channels...',
		THREAD: 'loading post...',
		CHANNEL_ITEMS: 'loading posts...',
		THREAD_ITEMS: 'loading comments...',
		NOTIFICATIONS: 'loading activity...',
		CONVERSATIONS: 'loading messages...',
		MESSAGES: 'loading messages...',
	},
	CHANNEL: {
		NOT_FOUND: 'channel not found',
		NO_POSTS: 'this channel has no posts',
	},
	THREAD: {
		NOT_FOUND: 'post not found',
		NO_POSTS: 'this post has no comments',
		REPLY: 'reply',
	},
	POST: {
		EDITED: 'edited'
	},
	PROJECT: {
		NOT_FOUND: 'project not found',
		GET_STARTED: 'get the conversations started',
		FOLLOWER_GET_STARTED: 'no posts yet - be the first!',
		CHANNELS_TITLE: 'Discussion Channels', // Discussions, Channels
		CHANNELS_FOLLOW_LINK: 'Follow',
		CHANNELS_FOLLOW: ' this project to view discussion channels and get involved.',
		CHANNELS_FOLLOW_ALL: ' this project to view all discussion channels and get involved.',
		POST_UPDATE: 'post update',
	},
	PROFILE: {
		NOT_FOUND: 'profile not found',
	},
	SIGN_UP: {
		FIRST_NAME: 'First name',
		LAST_NAME: 'Last name',
		EMAIL: 'Email',
	},
	SET_ACCOUNT: {
		USERNAME: 'set username',
		PASS: 'set password',
		PASS_REPEAT: 'confirm password',
	},
	LOG_IN: {
		USERNAME: 'username or email',
		PASS: 'password',
	},
	NEW_THREAD: {
		PAGE_TITLE: 'New Post',
		TITLE: 'title',
		TITLE_TIP: '(optional)',
		MESSAGE: 'message',
		CONFIRM: 'Post',
		EDIT_NOTE: 'your draft will be saved here<br/>you can also edit later after posting',
		EDITING_NOTE: 'your draft edits will be saved here',
		REST_ACTION: 'Reset',
		REST_NOTE: ' your changes',
		ADD_IMAGE: 'add image',
		REMOVE_IMAGE: 'remove image',
	},
	NEW_THREAD_POST: {
		PAGE_TITLE: 'Reply',
	},
	EDIT_THREAD: {
		PAGE_TITLE: 'Edit Post',
		CONFIRM: 'Save',
	},
	REPLY_THREAD: {
		PAGE_TITLE: 'Reply',
		CONFIRM: 'Reply',
	},
	EDIT_THREAD_POST: {
		PAGE_TITLE: 'Edit Reply',
	},
	CHANNEL_DESCRIPTIONS: {
		ANNOUNCEMENTS: 'Project announcements and news from the team',
		// About and FAQs - About the world creation platform and Frequently Asked Questions
		// RESOURCES: 'Community resources and links',
		// Questions and Answers - General questions or queries on how to use the app
		GENERAL: 'General project discussion',
		WORKSHOP: 'Work in progress, project developments,<br/>and calls for feedback',
		QUESTIONS: 'Questions about the project', // 'Questions from the community',
		// Current Features Discussion - Discussion of current features and functionality
		// ISSUES: 'Issues and bugs',
		ISSUES: 'Issues, bugs and problems',
		IDEAS: 'Ideas, suggestions and requests for the project', // recommendations
		INSPIRATION: 'Inspirational references and links',
		RANDOM: 'Off-topic discussions and links',
		SUGGESTIONS: 'Suggestions to improve the project community',
	},
	NOTIFICATIONS: {
		NO_NOTIFICATIONS: 'no recent activity yet',
	},
	NOTIFICATION: {
		PROJECT_PREFIX: 'on ',
	},
	CONVERSATIONS: {
		NO_CONVERSATIONS: 'no conversations yet',
	},
	CONVERSATION: {
		NO_MESSAGES: 'no messages',
		MESSAGES_ADDED: 'new messages added',
	},
};

const promptIds = {
    PROJECT_ARCHIVE: 'PROJECT_ARCHIVE',
    PROJECT_ARCHIVED: 'PROJECT_ARCHIVED',
    PROJECT_UNARCHIVED: 'PROJECT_UNARCHIVED',

    SHARE_PROJECT: 'SHARE_PROJECT',
    SHARE_PROFILE: 'SHARE_PROFILE',
    SHARE_POST: 'SHARE_POST',
    SHARE_PROJECT_COMPLETE: 'SHARE_PROJECT_COMPLETE',
    SHARE_PROFILE_COMPLETE: 'SHARE_PROFILE_COMPLETE',
    SHARE_POST_COMPLETE: 'SHARE_POST_COMPLETE',

    MAKE_PUBLIC: 'MAKE_PUBLIC',
    MAKE_PRIVATE: 'MAKE_PRIVATE',
    MAKE_PUBLIC_COMPLETE: 'MAKE_PUBLIC_COMPLETE',
    MAKE_PUBLIC_COMPLETE_COPIED: 'MAKE_PUBLIC_COMPLETE_COPIED',
    MAKE_PRIVATE_COMPLETE: 'MAKE_PRIVATE_COMPLETE',

    SIGN_UP: 'SIGN_UP',
    LOG_IN: 'LOG_IN',
    LOG_IN_ERROR: 'LOG_IN_ERROR',

    USERNAME_EXISTS: 'USERNAME_EXISTS',
    SIGN_UP_EMAIL_EXISTS: 'SIGN_UP_EMAIL_EXISTS',
    LOGGED_OUT: 'LOGGED_OUT',
    ADD_PROJECT_ERROR: 'ADD_PROJECT_ERROR',
    SET_ACCOUNT: 'SET_ACCOUNT',
    RESET_PASSWORD: 'RESET_PASSWORD',
    ACCOUNT_READY: 'ACCOUNT_READY',
    FORGOT_PASSWORD: 'FORGOT_PASSWORD',
    FORGOT_PASSWORD_RESET: 'FORGOT_PASSWORD_RESET',
    PASSWORD_RESET: 'PASSWORD_RESET',

    INVALID_IMAGE_TYPE_JPG_PNG: 'INVALID_IMAGE_TYPE_JPG_PNG',
    INVALID_IMAGE_FILESIZE_TOO_LARGE: 'INVALID_IMAGE_FILESIZE_TOO_LARGE',
};

const DEBUG$2 = (!!"production".match(/development|staging/));

const hostname = (typeof window !== 'undefined') ? window.location.hostname : 'localhost';

const base = (!!"production".match(/development/)) ? 'http://' + hostname + ':3000' : ''; // 'http://192.168.1.5:3000' //'http://localhost:3000' //'https://flock-hub.herokuapp.com';
const folder = 'api';

const API_PATH = base + '/' + folder;

function send(path, options) {
	const fetch =  require('node-fetch').default;

	const opts = { method: 'POST', headers: {} };

	if (options) {
		opts.headers['Content-Type'] = 'application/json';
		opts.body = JSON.stringify(options);
	}

	// TODO: use authorization token
	// opts.headers['Authorization'] = `Token ${token}`;

	return fetch(`${API_PATH}/${path}`, opts)
	  	.then(r => {
			if (r.status >= 200 && r.status < 300) {
				return r;
			  } else {
				var error = new Error(r.statusText || r.status);
				error.response = r;
				return Promise.reject(error);
			  }
		})
		.then(r => r.text())
		.then(json => {
			try {
				return JSON.parse(json);
			} catch (error) {
				error.response = json;
				return Promise.reject(error);
			}
		})/*.then(result => {
			if (DEBUG && result && result.error) {
				console.error('API Error: ', result);
				// return Promise.reject(result);
			}
			return result;
		});*/
}

function addOptions(curOptions, newOptions) {
	// curOptions = curOptions || {};
	curOptions = curOptions ? Object.assign({}, curOptions) : {};
	Object.assign(curOptions, newOptions);
	return curOptions;
}

function addCredentials(curOptions) {
	curOptions = curOptions || {};
	curOptions = addOptions(curOptions, {
		userId: get_store_value(userId),
		usercode: get_store_value(usercode),
	});
	return curOptions;
}

/*** Projects ***/

// options = { limit: number, cursor: string, sort: {} }
function getProjects(options) {
	options = addCredentials(options);
	// options = addOptions(options, {
	// 	userId: get(userId),
	// });

	return send('getProjects', options).then(result => {
		if (DEBUG$2 && result && result.error) {
			console.error('API Error - getProjects: ', result);
		}
		return result;
		// return Promise.reject(error); // TODO: prevent followups being called
	});
}

// options = { details: {} }
function addProject(options) {
	options = addCredentials(options);
	return send('addProject', options).then(result => {
		if (DEBUG$2 && result && result.error) {
			console.error('API Error - addProject: ', result);
		}
		return result;
		// return Promise.reject(error); // TODO: prevent followups being called
	});
}

// options = { id: string, details: {} }
function updateProject(options) {
	options = addCredentials(options);
	return send('updateProject', options).then(result => {
		if (DEBUG$2 && result && result.error) {
			console.error('API Error - updateProject: ', result);
		}
		return result;
		// return Promise.reject(error); // TODO: prevent followups being called
	});
}

// options = { details: { userId: id, projectId: id } }
function followProject(options) {
	options = addCredentials(options);
	return send('followProject', options).then(result => {
		if (DEBUG$2 && result && result.error) {
			console.error('API Error - followProject: ', result);
		}
		return result;
		// return Promise.reject(error); // TODO: prevent followups being called
	});
}
// options = { details: { userId: id, projectId: id } }
function unfollowProject(options) {
	options = addCredentials(options);
	return send('unfollowProject', options).then(result => {
		if (DEBUG$2 && result && result.error) {
			console.error('API Error - unfollowProject: ', result);
		}
		return result;
		// return Promise.reject(error); // TODO: prevent followups being called
	});
}

// options = { details: { userId: id, projectId: id } }
function likeProject(options) {
	options = addCredentials(options);
	return send('likeProject', options).then(result => {
		if (DEBUG$2 && result && result.error) {
			console.error('API Error - likeProject: ', result);
		}
		return result;
		// return Promise.reject(error); // TODO: prevent followups being called
	});
}
// options = { details: { userId: id, projectId: id } }
function unlikeProject(options) {
	options = addCredentials(options);
	return send('unlikeProject', options).then(result => {
		if (DEBUG$2 && result && result.error) {
			console.error('API Error - unlikeProject: ', result);
		}
		return result;
		// return Promise.reject(error); // TODO: prevent followups being called
	});
}


/*** Users ***/

// options = { details: {} }
function login(options) {
	return send('login', options).then(result => {
		if (DEBUG$2 && result && result.error) {
			console.error('API Error - login: ', result);
		}
		return result;
		// return Promise.reject(error); // TODO: prevent followups being called
	});
}

// options = { limit: number, cursor: string, sort: {} }
function getUsers(options) {
	options = addCredentials(options);
	// options = addOptions(options, {
	// 	userId: get(userId),
	// });

	return send('getUsers', options).then(result => {
		if (DEBUG$2 && result && result.error) {
			console.error('API Error - getUsers: ', result);
		}
		return result;
		// return Promise.reject(error); // TODO: prevent followups being called
	});
}

// options = { details: {} }
function addUser(options) {
	return send('addUser', options).then(result => {
		if (DEBUG$2 && result && result.error) {
			console.error('API Error - addUser: ', result);
		}
		return result;
		// return Promise.reject(error); // TODO: prevent followups being called
	});
}

// options = { id: string, details: {} }
function updateUser(options) {
	options = addCredentials(options);
	return send('updateUser', options).then(result => {
		if (DEBUG$2 && result && result.error) {
			console.error('API Error - updateUser: ', result);
		}
		return result;
		// return Promise.reject(error); // TODO: prevent followups being called
	});
}

/*** Channels ***/

// options = { limit: number, cursor: string, sort: {} }
function getChannels(options) {
	if (DEBUG$2 && !options || (!options.id && !options.projectId)) {
		throw new Error('id or projectId not specified on getChannels ', options);
	}

	options = addCredentials(options);
	// options = addOptions(options, {
	// 	userId: get(userId),
	// });

	return send('getChannels', options).then(result => {
		if (DEBUG$2 && result && result.error) {
			console.error('API Error - getChannels: ', result);
		}
		return result;
		// return Promise.reject(error); // TODO: prevent followups being called
	});
}

/*** Posts ***/

// options = { limit: number, cursor: string, sort: {} }
function getPosts(options) {
	options = addCredentials(options);
	// options = addOptions(options, {
	// 	userId: get(userId),
	// });

	return send('getPosts', options).then(result => {
		if (DEBUG$2 && result && result.error) {
			console.error('API Error - getPosts: ', result);
		}
		return result;
		// return Promise.reject(error); // TODO: prevent followups being called
	});
}

// options = { details: {} }
function addPost(options) {
	options = addCredentials(options);
	return send('addPost', options).then(result => {
		if (DEBUG$2 && result && result.error) {
			console.error('API Error - addPost: ', result);
		}
		return result;
		// return Promise.reject(error); // TODO: prevent followups being called
	});
}

// options = { details: {} }
function updatePost(options) {
	options = addCredentials(options);
	return send('updatePost', options).then(result => {
		if (DEBUG$2 && result && result.error) {
			console.error('API Error - updatePost: ', result);
		}
		return result;
		// return Promise.reject(error); // TODO: prevent followups being called
	});
}

// options = { details: { userId: id, postId: id } }
function likePost(options) {
	options = addCredentials(options);
	return send('likePost', options).then(result => {
		if (DEBUG$2 && result && result.error) {
			console.error('API Error - likePost: ', result);
		}
		return result;
		// return Promise.reject(error); // TODO: prevent followups being called
	});
}
// options = { details: { userId: id, postId: id } }
function unlikePost(options) {
	options = addCredentials(options);
	return send('unlikePost', options).then(result => {
		if (DEBUG$2 && result && result.error) {
			console.error('API Error - unlikePost: ', result);
		}
		return result;
		// return Promise.reject(error); // TODO: prevent followups being called
	});
}
// options = { details: { userId: id, postId: id, unfollow: boolean } }
function followPost(options) {
	options = addCredentials(options);
	return send('followPost', options).then(result => {
		if (DEBUG$2 && result && result.error) {
			console.error('API Error - followPost: ', result);
		}
		return result;
		// return Promise.reject(error); // TODO: prevent followups being called
	});
}

/*** Upload ***/

// options = { details: { uploadType: string, itemId: id, itemIndex: number } }
function requestUpload(options) {
	options = addCredentials(options);
	return send('requestUpload', options).then(result => {
		if (DEBUG$2 && result && result.error) {
			console.error('API Error - requestUpload: ', result);
		}
		return result;
		// return Promise.reject(error); // TODO: prevent followups being called
	});
}

/*** Notifications ***/

// options = { userId: id, getUnviewed: boolean, loadedAt: date }
function getNotifications(options) {
	options = addCredentials(options);
	return send('getNotifications', options).then(result => {
		if (DEBUG$2 && result && result.error) {
			console.error('API Error - getNotifications: ', result);
		}
		return result;
		// return Promise.reject(error); // TODO: prevent followups being called
	});
}

// options = { userId: id, ids: [id] }
function updateNotifications(options) {
	options = addCredentials(options);
	return send('updateNotifications', options).then(result => {
		if (DEBUG$2 && result && result.error) {
			console.error('API Error - updateNotifications: ', result);
		}
		return result;
		// return Promise.reject(error); // TODO: prevent followups being called
	});
}


/*** Conversations ***/

// options = { userId: id, getUnviewed: boolean, loadedAt: date }
function getConversations(options) {
	options = addCredentials(options);
	return send('getConversations', options).then(result => {
		if (DEBUG$2 && result && result.error) {
			console.error('API Error - getConversations: ', result, options);
		}
		return result;
		// return Promise.reject(error); // TODO: prevent followups being called
	});
}

// // options = { conversationId: id, userId: id }
// function updateConversation(options) {
// 	options = addCredentials(options);
// 	return send('updateConversation', options).then(result => {
// 		if (DEBUG && result && result.error) {
// 			console.error('API Error - updateConversation: ', result, options);
// 		}
// 		return result;
// 		// return Promise.reject(error); // TODO: prevent followups being called
// 	});
// }

/*** Messages ***/

// options = { conversationId: id }
function getMessages(options) {
	options = addCredentials(options);
	return send('getMessages', options).then(result => {
		if (DEBUG$2 && result && result.error) {
			console.error('API Error - getMessages: ', result, options);
		}
		return result;
		// return Promise.reject(error); // TODO: prevent followups being called
	});
}

// options = { id: id, userId: id, conversationId: id  }
function addMessage(options) {
	options = addCredentials(options);
	return send('addMessage', options).then(result => {
		if (DEBUG$2 && result && result.error) {
			console.error('API Error - addMessage: ', result, options);
		}
		return result;
		// return Promise.reject(error); // TODO: prevent followups being called
	});
}


// options = { email: email address }
function sendPasswordReset(options) {
	return send('sendPasswordReset', options).then(result => {
		if (DEBUG$2 && result && result.error) {
			console.error('API Error - sendPasswordReset: ', result, options);
		}
		return result;
		// return Promise.reject(error); // TODO: prevent followups being called
	});
}


const api = {
	getProjects,
	addProject,
	updateProject,

	followProject,
	unfollowProject,

	likeProject,
	unlikeProject,


	login,

	getUsers,
	addUser,
	updateUser,

	getChannels,

	getPosts,
	addPost,
	updatePost,

	likePost,
	unlikePost,
	followPost,

	getNotifications,
	updateNotifications,

	getConversations,
	// updateConversation,

	getMessages,
	addMessage,

	requestUpload,

	sendPasswordReset,
};

const delayedTimeouts = {};

function generateId$1(length) {
    if (!length) {
        length = 8;
    }
    const chars = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';
    const idBase = new Array(length + 1).join('x');
    return idBase.replace(/x/g, function() {
        return chars[Math.floor(Math.random() * chars.length)];
    });
}

function getFormattedText(text) {
    return text ? text.replace(/<br\/>/g, '\r\n') : text;
}

function getLinkFormattedText(text) {
    const urlLinkRegex = /(<a href=")?(?:https?:\/\/|www)(?:[-A-Za-z0-9+&@#\/%?=~_|$!:.,;]+\.)+[-A-Za-z0-9+&@#\/%=_$]+/ig;
    // const urlLinkRegex = /(<a href=")?(?:https?:\/\/)?(?:(?:www)[-A-Za-z0-9+&@#\/%?=~_|$!:.,;]+\.)+[-A-Za-z0-9+&@#\/%?=~_|$!]+/ig;
    // const urlLinkRegex = /(<a href=")?(?:https?:\/\/)?(?:[-A-Za-z0-9+&@#\/%?=~_|$!:.,;]+\.)+[-A-Za-z0-9+&@#\/%?=~_|$!]{2,8}/ig;
    text = text.replace(urlLinkRegex, function ( fullMatch, aTagMatch ) {
        if(/^https?:\/\/.+/i.test(fullMatch)) {
            return aTagMatch ? fullMatch : '<a href="'+fullMatch+'" target="_blank" onClick="event && event.stopPropagation()">'+fullMatch+'</a>';
        } else {
            return aTagMatch ? fullMatch : '<a href="http://'+fullMatch+'" target="_blank" onClick="event && event.stopPropagation()">'+fullMatch+'</a>';
        }
    });

    const mailLinkRegex = /(<a href="(?:mailto:)?)?[\w.]+@[a-zA-Z_-]+?(?:\.[a-zA-Z]{2,8})+/ig;
    // const mailLinkRegex = /(<a href=")?(?:mailto:)?[\w.]+@[a-zA-Z_-]+?(?:\.[a-zA-Z]{2,8})+/ig;
    text = text.replace(mailLinkRegex, function ( fullMatch, aTagMatch ) {
        return aTagMatch ? fullMatch : '<a href="mailto:'+fullMatch+'" onClick="event && event.stopPropagation()">'+fullMatch+'</a>';
    });

    return text;
}

function stripLinks(text) {
    text = text.replace(/<\/?a(?:(?= )[^>]*)?>/ig, '');
    return text;
}

function getDisplayText(text, options) {
    if (text) {
        if (!options || !options.disallowLinks) {
            text = getLinkFormattedText(text);
        }
        if (options && options.disallowLinks) {
            text = stripLinks(text);
        }
        if (options && options.collapseBreaks) {
            text = text.replace(/\r?\n/g, '&nbsp;&nbsp;');
            text = text.replace(/<br\/>/g, '&nbsp;&nbsp;');
        } else {
            text = text.replace(/\r?\n/g, '<br/>');
        }
    }
    return text;
}

function copyToClipboard(string) {
    const textArea = document.createElement('textarea');
    textArea.style.top = 0;
    textArea.style.display = 'absolute';
    textArea.style.visible = 'hidden';
    textArea.value = string;

    document.body.appendChild(textArea);

    textArea.select();
    try {
        document.execCommand('copy');
    } catch (err) {}

    document.body.removeChild(textArea);
}


function formatAsId(string, maxLength, spaceReplaceString) {
    let newString = '';
    if (string) {
        newString = string.toLowerCase();
        newString = newString.replace(/\s+/g,'');
        newString = newString.replace(/[^a-z0-9]+/g,'');

        if (maxLength && newString.length > maxLength) {
            newString = newString.substr(0, maxLength);
        }
    }
    return newString;
}

function shuffle(array) {
    let sourceArray = [...array];

    const newArray = [];
    let index;
    while (sourceArray.length > 0) {
        index = Math.floor(Math.random() * sourceArray.length);
        newArray.push(sourceArray.splice(index, 1)[0]);
    }

    return newArray;
}

function getDateAge(date) {
    const dateAge = {};

    const curDate = new Date(date);

    var age = Date.now() - curDate;
    // var ageDate = new Date(ageDifMs);
    // return Math.abs(ageDate.getUTCFullYear() - 1970);

    dateAge.seconds = age / 1000;
    dateAge.mins = dateAge.seconds / 60;
    dateAge.hours = dateAge.mins / 60;
    dateAge.days = dateAge.hours / 24;
    dateAge.weeks = dateAge.days / 7;
    dateAge.months = dateAge.weeks / 4;
    dateAge.years = dateAge.months / 12;

    return dateAge;
}

function getDateAgeString(date, options) {
    if (!date) { return null; }

    const dateAge = getDateAge(date);

    const allowLessThanMinute = options ? options.allowLessThanMinute : true;

    let ageString = '';

    if (dateAge.years > 1.66) {
        ageString = Math.round(dateAge.years) + ' years';
    } else if (dateAge.years > 1) {
        ageString = '1 year';

    } else if (dateAge.months > 1.66) {
        ageString = Math.round(dateAge.months) + ' months';
    } else if (dateAge.months > 1) {
        ageString = '1 month';

    } else if (dateAge.weeks > 1.66) {
        ageString = Math.round(dateAge.weeks) + ' weeks';
    } else if (dateAge.weeks > 1) {
        ageString = '1 week';

    } else if (dateAge.days > 1.66) {
        ageString = Math.round(dateAge.days) + ' days';
    } else if (dateAge.days > 0.66) {
        ageString = '1 day';

    } else if (dateAge.hours > 1.66) {
        ageString = Math.round(dateAge.hours) + ' hours';
    } else if (dateAge.hours > 0.66) {
        ageString = '1 hour';

    } else if (dateAge.mins > 1.66) {
        ageString = Math.round(dateAge.mins) + ' mins';
    } else if (dateAge.mins > 1 || !allowLessThanMinute) {
        ageString = '1 min';
    } else {
        ageString = 'less than a minute';
    }
    // } else {
    //     ageString = '1 min';
    // }
    ageString += ' ago';

    return ageString;
}

function secondsDiff(date1, date2) {
    if (date1 && date2) {
        return (date2 - date1) / 1000;
    }
    return 0;
}

function getDateString(date, format) {
    if (!date) { return null; }
    if (!format) {
        format = 'd MMM h:mmtt';
    }

    const curDate = new Date(date);
    return formatDate(curDate, format);
}

function formatDate(date, format, utc) {
    var MMMM = ["\x00", "January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
    var MMM = ["\x01", "Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
    var dddd = ["\x02", "Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
    var ddd = ["\x03", "Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];

    function ii(i, len) {
        var s = i + "";
        len = len || 2;
        while (s.length < len) s = "0" + s;
        return s;
    }

    var y = utc ? date.getUTCFullYear() : date.getFullYear();
    format = format.replace(/(^|[^\\])yyyy+/g, "$1" + y);
    format = format.replace(/(^|[^\\])yy/g, "$1" + y.toString().substr(2, 2));
    format = format.replace(/(^|[^\\])y/g, "$1" + y);

    var M = (utc ? date.getUTCMonth() : date.getMonth()) + 1;
    format = format.replace(/(^|[^\\])MMMM+/g, "$1" + MMMM[0]);
    format = format.replace(/(^|[^\\])MMM/g, "$1" + MMM[0]);
    format = format.replace(/(^|[^\\])MM/g, "$1" + ii(M));
    format = format.replace(/(^|[^\\])M/g, "$1" + M);

    var d = utc ? date.getUTCDate() : date.getDate();
    format = format.replace(/(^|[^\\])dddd+/g, "$1" + dddd[0]);
    format = format.replace(/(^|[^\\])ddd/g, "$1" + ddd[0]);
    format = format.replace(/(^|[^\\])dd/g, "$1" + ii(d));
    format = format.replace(/(^|[^\\])d/g, "$1" + d);

    var H = utc ? date.getUTCHours() : date.getHours();
    format = format.replace(/(^|[^\\])HH+/g, "$1" + ii(H));
    format = format.replace(/(^|[^\\])H/g, "$1" + H);

    var h = H > 12 ? H - 12 : H == 0 ? 12 : H;
    format = format.replace(/(^|[^\\])hh+/g, "$1" + ii(h));
    format = format.replace(/(^|[^\\])h/g, "$1" + h);

    var m = utc ? date.getUTCMinutes() : date.getMinutes();
    format = format.replace(/(^|[^\\])mm+/g, "$1" + ii(m));
    format = format.replace(/(^|[^\\])m/g, "$1" + m);

    var s = utc ? date.getUTCSeconds() : date.getSeconds();
    format = format.replace(/(^|[^\\])ss+/g, "$1" + ii(s));
    format = format.replace(/(^|[^\\])s/g, "$1" + s);

    var f = utc ? date.getUTCMilliseconds() : date.getMilliseconds();
    format = format.replace(/(^|[^\\])fff+/g, "$1" + ii(f, 3));
    f = Math.round(f / 10);
    format = format.replace(/(^|[^\\])ff/g, "$1" + ii(f));
    f = Math.round(f / 10);
    format = format.replace(/(^|[^\\])f/g, "$1" + f);

    var T = H < 12 ? "AM" : "PM";
    format = format.replace(/(^|[^\\])TT+/g, "$1" + T);
    format = format.replace(/(^|[^\\])T/g, "$1" + T.charAt(0));

    var t = T.toLowerCase();
    format = format.replace(/(^|[^\\])tt+/g, "$1" + t);
    format = format.replace(/(^|[^\\])t/g, "$1" + t.charAt(0));

    var tz = -date.getTimezoneOffset();
    var K = utc || !tz ? "Z" : tz > 0 ? "+" : "-";
    if (!utc) {
        tz = Math.abs(tz);
        var tzHrs = Math.floor(tz / 60);
        var tzMin = tz % 60;
        K += ii(tzHrs) + ":" + ii(tzMin);
    }
    format = format.replace(/(^|[^\\])K/g, "$1" + K);

    var day = (utc ? date.getUTCDay() : date.getDay()) + 1;
    format = format.replace(new RegExp(dddd[0], "g"), dddd[day]);
    format = format.replace(new RegExp(ddd[0], "g"), ddd[day]);

    format = format.replace(new RegExp(MMMM[0], "g"), MMMM[M]);
    format = format.replace(new RegExp(MMM[0], "g"), MMM[M]);

    format = format.replace(/\\(.)/g, "$1");

    return format;
}
function getMessageTime(date) {
    let dateString = '';
    if (date) {
        // dateDebugOffset.set(60 * 60 * 1000 * (12 + 24 + 8) + (4) * (60) * 1000);
        // date = (new Date()).getTime() - $dateDebugOffset;
        // console.log('date', date, getDateString(date));

        const dateAge = getDateAge(date);

        const DAY_MILLISECONDS = 24*60*60*1000;
        let todaysDate = (new Date()).setHours(0,0,0,0) / DAY_MILLISECONDS;
        let curDate = (new Date(date)).setHours(0,0,0,0) / DAY_MILLISECONDS;
        let dateDiff = todaysDate - curDate;
        // console.log('dateDiff', dateDiff);

        // if (dateAge.days < 1) {
        if (dateDiff < 1) {
            dateString = 'Today at ' + getDateString(date, 'h:mmtt');
        } else if (dateDiff < 2) {
            dateString = 'Yesterday at ' + getDateString(date, 'h:mmtt');
        } else if (dateAge.weeks < 1) {
            dateString = getDateString(date, 'dddd') + ' at ' + getDateString(date, 'h:mmtt');
        } else {
            dateString = getDateString(date, 'd MMM') + ' at ' + getDateString(date, 'h:mmtt');
        }
    }
    return dateString;
}

function validateEmail(email) {
    return email && email.match(/^[A-Z0-9._%+-]+@[A-Z0-9.-]{2,}\.[A-Z]{2,8}$/i);
}

function validateUserName(username) {
    // reference USER_NAME_MIN_LENGTH, USER_NAME_MAX_LENGTH
    return username && username.length >= 3 && username.length <= 16 && username.match(/^(?!.*\.\.)(?!.*__)(?!.*\._)(?!.*_\.)(?!.*\.$)(?!\..*$)[a-z0-9._]+$/); // lowercase only
    // return username && username.match(/^(?=.{4,16}$)(?![_.])(?!.*[_.]{2})[a-z0-9._]+(?<![_.])$/); // lowercase only
    // return username && username.match(/^(?=.{4,16}$)(?![_.])(?!.*[_.]{2})[a-zA-Z0-9._]+(?<![_.])$/i);
}


function delayedTimeout(id, callback, delay) {
    if (typeof window !== 'undefined') {
        if (delayedTimeouts[id]) {
            window.clearTimeout(delayedTimeouts[id]);
            delayedTimeouts[id] = null;
        }
        delayedTimeouts[id] = window.setTimeout(() => {
            callback();
        }, delay);
    }
}

function getSplitItems(items) {
    if (typeof items === 'string') {
        items = items.split(',').map((item) => item.trim());
    }
    return items;
}

function objectsMatch(objectA, objectB) {
    return JSON.stringify(objectA) === JSON.stringify(objectB);
    // Object.entries(k1).toString() === Object.entries(k2).toString();
}

function strCompare(stringA, stringB) {
    if (stringA && stringB) {
        return lineBreakUniform(stringA) === lineBreakUniform(stringB);
    } else {
        return stringA === stringB;
    }
}

function lineBreakUniform(string) {
    if (string) {
        return string.replace(/\r\n/g, '\n');
    } else {
        return string;
    }
}

function getEllipsisText(string, maxLength) {
    if (string.length > maxLength) {
        string = string.substring(0, maxLength) + '&hellip;';
    }
    return string;
}

function trim(text) {
    if (text && typeof text === 'string') {
        return text.trim();
    } else {
        return '';
    }
}

function gotoAnchor(anchorId) {
    if (typeof window !== 'undefined') {
        let newLocation = window.location.href;
        const hashLocation = newLocation.indexOf('#');
        if (hashLocation !== -1) {
            newLocation = newLocation.substr(0, hashLocation);
        }
        newLocation = newLocation + '#' + anchorId;

        window.location.href = newLocation;
    }
}

const loadingRequests = {};

function isLoading(id, options) {
	return !!getLoadingItem(id, options);
}
function getLoadingItem(id, options) {
	return loadingRequests[id] && loadingRequests[id].find(request => objectsMatch(request.options, options));
}
function setLoading(id, options, startCallback) {
	if (!loadingRequests[id]) {
		loadingRequests[id] = [];
	}
	loadingRequests[id].push({options});
	// console.log('add '+ loadingRequests[id].length, JSON.stringify(options));
	if (startCallback) {
		startCallback();
	}
}
function clearLoading(id, options, endCallback) {
	const matchItem = getLoadingItem(id, options);
	if (matchItem) {
		const matchId = loadingRequests[id].indexOf(matchItem);
		loadingRequests[id].splice(matchId, 1);

		// console.log('remove '+ loadingRequests[id].length);
		if (loadingRequests[id].length === 0) {
			// console.log('stopped loading');
			if (endCallback) {
				endCallback();
			}
		}
	}
}

const loadingRequestUtil = {
    isLoading,
    setLoading,
    clearLoading,
};

const ProjectModel = (projectData) => {
    let initData = {
        id: '',
        slug: '',

        title: '',
        description: '',

        details: null,

        public: false,

        headerImage: null,

        createdAt: 0,
        lastActiveAt: 0,

        modifiedAt: 0,

        // likeCount: 0,
        // followCount: 0,

        location: null,

        tags: '',
        skills: '',

        links: [],
        team: [],
        posts: [],
    };
    if (projectData) {
        initData = Object.assign(initData, projectData);
    }
    return writable$1(initData);
};

// import projectsData from '../data/projects.json';
// const projects = JSON.parse(JSON.stringify(projectsData));

const ProjectsModel = new EventEmitter();

let loadingProjects = writable$1(false);

let projectsUpdatedHandlers = [];
let tempProjectsUpdatedHandlers = [];

let projects = writable$1([]);
let myProjects = writable$1([]);
let archivedProjects = writable$1([]);
let followingProjects = writable$1([]);
let otherPublicProjects = writable$1([]);
let discoveryProjects = writable$1([]);

locationMode.subscribe(() => {
	updateDiscoveryProjects(true);
});

onProjectsUpdated(projectsUpdated);

// let projects = [];
// loadProjects();

function loadProjects(options) {
	if (!loadingRequestUtil.isLoading('projects', options)) {
		loadingRequestUtil.setLoading('projects', options, () => { loadingProjects.set(true); });
	// if (!get(loadingProjects)) {
	// 	loadingProjects.set(true);
		if (get_store_value(showProjectCounts)) {
			if (!options) options = {};
			options.getCounts = true;
		}
		api.getProjects(options).then(result => {
			mergeProjects(result);
			// loadingProjects.set(false);
			loadingRequestUtil.clearLoading('projects', options, () => { loadingProjects.set(false); });
		});
	}
}

function onProjectsUpdated(handler) {
	if (!projectsUpdatedHandlers.includes(handler)) {
		projectsUpdatedHandlers.push(handler);
	}
}

function onTempProjectsUpdated(handler) {
	if (!tempProjectsUpdatedHandlers.includes(handler)) {
		tempProjectsUpdatedHandlers.push(handler);
	}
}

projects.subscribe(() => {
	projectsUpdatedHandlers.forEach(handler => {
		handler();
	});

	tempProjectsUpdatedHandlers.forEach(handler => {
		handler();
	});
	tempProjectsUpdatedHandlers.length = 0;
});

function mergeProjects(newProjects) {
	if (newProjects && newProjects.length) {
		const curProjects = get_store_value(projects);
		const currentProjectId = get_store_value(projectId);

		let curProject, newProjectData, curProjectId, newProject;
		for (var projectI = 0; projectI < newProjects.length; projectI++) {
			newProjectData = newProjects[projectI];
			curProjectId = newProjectData.id;
			curProject = curProjects.find(match => get_store_value(match).id === curProjectId);
			if (!curProject) {
				curProject = ProjectModel(newProjectData);
				curProjects.unshift(curProject);
				// console.log('add project: ', curProject, newProjectData);
			} else {
				// console.log('update existing project: ', curProject, newProjectData);
				newProject = get_store_value(curProject);
				newProject = Object.assign(newProject, newProjectData);
				curProject.set(newProject);
			}
			if (currentProjectId && curProjectId === currentProjectId) {
				project.set(newProject);
			}
		}
		// console.log('update projects: ', curProjects);

		projects.set(curProjects);
	}
}

function getProject(projectId) {
	return get_store_value(projects).find(item => get_store_value(item).id === projectId);
}

function getUserProjectsFromId(filteredProjects, projectIds, dontLoad, options) {
	loadProjects();

	let projectItems = [];

	const showArchived = !!(options && options.filterArchived);
	const showPrivate = !!(options && options.filterPrivate);

	const curProjects = get_store_value(projects);
	if (curProjects && curProjects.length) {
		if (projectIds) {
			projectItems = [];

			let projectModel, project, projectId;
			for (let index = 0; index < projectIds.length; index++) {
				projectId = projectIds[index];
				projectModel = getProject(projectId);
				project = get_store_value(projectModel);
				if (project) {
					if ((!project.archived || showArchived) && (project.public || showPrivate)) {
						projectItems.push(projectModel);
					}
				}
			}
		}
	} else if (!dontLoad) {
		onTempProjectsUpdated(() => {
			// const curProjects = get(projects);
			getUserProjectsFromId(filteredProjects, projectIds, true);
		});
	}

	projectItems.sort((a,b) => get_store_value(b).lastActiveAt - get_store_value(a).lastActiveAt);

	filteredProjects.set(projectItems);
}

function getFilteredProjects(projects, options) { // filteredProjects
	let searchString = (options && options.searchString) || null;
	if (searchString) {
		searchString = searchString.toLowerCase();
	}

	let filterString = (options && options.filterString) || null;
	if (filterString) {
		filterString = filterString.toLowerCase();
		if (filterString.indexOf('s') === filterString.length - 1) {
			filterString = filterString.substring(0, filterString.length - 1);
		}
	}

	let limit = (options && options.limit) || 0;

	const newFilteredProjects = [];

	let filteredCount = 0;
	let project, curProject;
	for (let index = 0; index < projects.length; index++) {
		project = projects[index];
		curProject = get_store_value(project);
		if (curProject && ((!searchString && !filterString) || projectSearchMatch(curProject, searchString, filterString))) {
			newFilteredProjects.push(project);

			filteredCount++;
			if (limit && filteredCount >= limit) {
				break;
			}
		}
	}

	return newFilteredProjects;
	// filteredProjects.set(newFilteredProjects);
}

function projectSearchMatch(project, searchString, filterString) {
	let filterMatched = true;
	if (filterString) {
		filterMatched = false;
		if (project.title && project.title.toLowerCase().includes(filterString)) filterMatched = true;
		if (project.description && project.description.toLowerCase().includes(filterString)) filterMatched = true;
		if (project.categories && project.categories.toLowerCase().includes(filterString)) filterMatched = true;
		if (project.tags && project.tags.toLowerCase().includes(filterString)) filterMatched = true;
	}
	if (filterMatched) {
		if (searchString) {
			if (project.title && project.title.toLowerCase().includes(searchString)) return true;
			if (project.description && project.description.toLowerCase().includes(searchString)) return true;
			if (project.categories && project.categories.toLowerCase().includes(searchString)) return true;
			if (project.tags && project.tags.toLowerCase().includes(searchString)) return true;
			if (project.skills && typeof project.skills === 'string' && project.skills.toLowerCase().includes(searchString)) return true;  // TODO: remove convertion once all converted
			// if (project.skills && (project.skills.toLowerCase ? project.skills.toLowerCase().includes(searchString) : project.skills.includes(searchString))) return true;
			if (project.location && project.location.toLowerCase().includes(searchString)) return true;
		} else {
			return true;
		}
	} else {
		return false;
	}
}

function getMyProjects() {
	updateMyProjects();
	loadProjects();
	return myProjects;
}

function getArchivedProjects() {
	updateArchivedProjects();
	loadProjects();
	return archivedProjects;
}

function getFollowingProjects() {
	updateFollowingProjects();
	loadProjects();
	return followingProjects;
}

function getDiscoveryProjects() { // options) {
	updateDiscoveryProjects(true);
	loadProjects();
	return discoveryProjects;
}

function updateMyProjects() {
	let newProjects = get_store_value(projects);
	if (newProjects) {
		newProjects = newProjects.filter(projectModel => {
			const project = get_store_value(projectModel);
			return getIsProjectTeamMember(project) && !project.archived;
		});
		newProjects.sort((a,b) => get_store_value(b).lastActiveAt - get_store_value(a).lastActiveAt); // sort by reversed updated time

		// console.log('updateMyProjects: ', newProjects);
		myProjects.set(newProjects);
	}
}
function updateFollowingProjects() {
	let newProjects = get_store_value(projects);
	if (newProjects) {
		newProjects = newProjects.filter(projectModel => {
			const project = get_store_value(projectModel);
			return project.following && !getIsProjectTeamMember(project) && !project.archived && project.public;
		});
		newProjects.sort((a,b) => get_store_value(b).followTime - get_store_value(a).followTime); // sort by reversed follow time

		// console.log('updateFollowingProjects: ', newProjects);
		followingProjects.set(newProjects);
	}
}
function updateOtherPublicProjects() {
	let newProjects = get_store_value(projects);
	if (newProjects) {
		newProjects = newProjects.filter(projectModel => {
			const project = get_store_value(projectModel);
			return !project.following && !project.archived && project.public; // include team projects for now
			// return !project.following && !getIsProjectTeamMember(project) && !project.archived && project.public;
		});
		newProjects.sort((a,b) => get_store_value(b).lastActiveAt - get_store_value(a).lastActiveAt); // sort by reversed updated time
		// console.log('updateOtherPublicProjects: ', newProjects);
		otherPublicProjects.set(newProjects);
	}
}
function updateArchivedProjects() {
	let newProjects = get_store_value(projects);
	if (newProjects) {
		newProjects = newProjects.filter(projectModel => {
			const project = get_store_value(projectModel);
			return getIsProjectTeamMember(project) && project.archived;
		});
		newProjects.sort((a,b) => get_store_value(b).lastActiveAt - get_store_value(a).lastActiveAt); // sort by reversed updated time
		// console.log('updateArchivedProjects: ', newProjects);
		archivedProjects.set(newProjects);
	}
}

function updateDiscoveryProjects(updateDependencies) {
	if (updateDependencies) {
		// updateMyPublicProjects();
		updateFollowingProjects();
		updateOtherPublicProjects();
	}
	// let sourceMyPublicProjects = get(myPublicProjects); // included my projects in other public projects for now
	// if (sourceMyPublicProjects) {
		let sourceOtherPublicProjects = get_store_value(otherPublicProjects);
		let sourceFollowingProjects = get_store_value(followingProjects);
		if (sourceFollowingProjects && sourceOtherPublicProjects) {
			// if (get(locationMode) !== 'local') {
			// 	sourceOtherPublicProjects = [...sourceOtherPublicProjects].reverse();
			// 	sourceMyPublicProjects = [...sourceMyPublicProjects].reverse();
			// 	sourceFollowingProjects = [...sourceFollowingProjects].reverse();
			// }

			let newProjects = [...sourceOtherPublicProjects, ...sourceFollowingProjects];
			// let newProjects = [...sourceOtherPublicProjects, ...sourceMyPublicProjects, ...sourceFollowingProjects];

			if (!get_store_value(showBetaFeatures)) { // if showing home intro and flock project within first 4 projects then move flock project further down list or remove
				const flockProject = newProjects.find(match => get_store_value(match).id === config$1.FLOCK_PROJECT);
				if (flockProject) {
					const flockProjectIndex = newProjects.indexOf(flockProject);
					if (flockProjectIndex < config$1.MAX_FLOCK_PROJECT_INDEX) {
						newProjects.splice(flockProjectIndex, 1);

						if (newProjects.length > config$1.MAX_FLOCK_PROJECT_INDEX) { // if more than 4 projects then add at the fourth position
							newProjects.splice(config$1.MAX_FLOCK_PROJECT_INDEX, 0, flockProject);
						}
					}
				}
			}

			// if (get(locationMode) === 'local') {
			// 	const testArrayCycleOffset = Math.min(4, newProjects.length - 1);
			// 	newProjects = newProjects.slice(testArrayCycleOffset, newProjects.length).concat(newProjects.slice(0, testArrayCycleOffset));
			// }

			// if (get(locationMode) === 'local') {
			// 	newProjects = newProjects.reverse();
			// }

			discoveryProjects.set(newProjects);
			// console.log('updateDiscoveryProjects: ', newProjects);
		}
	// }
}

function clearProjectStates() {
	const curProjects = get_store_value(projects);
	let project, projectModel;
	for (var projectI = 0; projectI < curProjects.length; projectI++) {
		projectModel = curProjects[projectI];
		project = get_store_value(projectModel);
		if (project) {
			delete project.liked;
			delete project.following;
			delete project.followTime;
			projectModel.set(project);
		}
	}
	projects.set(curProjects);
}

function updateProjectLists() {
	// TODO not to update all of these, only if on current view
	clearProjectStates();
	loadProjects();
	updateMyProjects();
	// getDiscoveryProjects();
	// getMyProjects();
	// getFollowingProjects();
	// getArchivedProjects();
}

function projectsUpdated() {
	// TODO not to update all of these, only if on current view
	updateMyProjects();
	updateFollowingProjects();
	updateOtherPublicProjects();
	// updateMyPublicProjects();
	updateDiscoveryProjects();
	updateArchivedProjects();
}

function getNewProjectId() {
    let projectId, trialIndex;
	do { projectId = generateId$1(); } while (getProject(projectId) && trialIndex < 99);
	return projectId;
}

function addProject$1(projectDetails) {
    // let projectId, trialIndex;
	// do { projectId = generateId(); } while (getProject(projectId) && trialIndex < 99);
	// if (trialIndex === 99) { return null; }

	const newProjectModel = ProjectModel();
	const newProject = get_store_value(newProjectModel);

	const ownerId = get_store_value(userId);

	// newProject.id = projectId;
	newProject.id = projectDetails.id;

	newProject.ownerId = ownerId;
	newProject.team = [ownerId];

	newProject.headerImage = projectDetails.headerImage || null;
	newProject.title = projectDetails.title || '';
	newProject.description = projectDetails.description || '';

	newProject.createdAt = (new Date()).getTime(); // use for initial sort values
	newProject.modifiedAt = newProject.createdAt;
	newProject.lastActiveAt = newProject.createdAt;

	newProject.isNew = true;
	newProject.hasCreated = true;

	newProject.followCount = 0;
	newProject.likeCount = 0;

	// newProject.followCount++;
	// newProject.likeCount++;

	// not to send
	// newProject.liked = true;
	// newProject.following = true;

	api.addProject({details: newProject}).then(result => {
		if (!result || result.error || result.invalid) {
			// showPrompt(promptIds.ADD_PROJECT_ERROR);
			removeProjectModel(newProjectModel);
		} else {
			ProjectsModel.emit('projectAdded');
		}
		// newProject._id = result.insertedId;
	});

	const curProjects = get_store_value(projects);
	curProjects.unshift(newProjectModel);
	projects.set(curProjects);

	return newProjectModel;
}

function removeProjectModel(projectModel) {
	if (projectModel && get_store_value(projectModel)) {
		const curProjects = get_store_value(projects);
		const projectIndex = curProjects.indexOf(projectModel);

		curProjects.splice(projectIndex, 1);
		projects.set(curProjects);

		if (get_store_value(project) && get_store_value(project).id === get_store_value(projectModel).id) {
			project.set(null);
		}
		projectModel.set(null);
	}
}

function updateProject$1(project, projectDetails, nonModification) {
	const isModification = !nonModification;

	api.updateProject({id: project.id, details: projectDetails, isModification});

	Object.assign(project, projectDetails);

	project.lastActiveAt = (new Date()).getTime();
	if (isModification) {
		project.modifiedAt = project.lastActiveAt;
	}
}


function setLikeProject(targetProject, like) {
	if (like) {
		api.likeProject({userId: get_store_value(userId), projectId: targetProject.id});
	} else {
		api.unlikeProject({userId: get_store_value(userId), projectId: targetProject.id});
	}

	targetProject.liked = like;
	targetProject.likeCount = targetProject.likeCount + (like ? 1 : -1);

	const curUserDetails = get_store_value(user);
	if (curUserDetails) {
		curUserDetails.likesCount = curUserDetails.likesCount + (like ? 1 : -1);
		user.set(curUserDetails);
	}
}

function setFollowProject(targetProject, follow) {
	if (follow) {
		api.followProject({userId: get_store_value(userId), projectId: targetProject.id});
	} else {
		api.unfollowProject({userId: get_store_value(userId), projectId: targetProject.id});
	}

	targetProject.following = follow;
	targetProject.followCount = targetProject.followCount + (follow ? 1 : -1);
	targetProject.followTime = (new Date()).getTime();

	const curUserDetails = get_store_value(user);
	if (curUserDetails) {
		curUserDetails.followsCount = curUserDetails.followsCount + (follow ? 1 : -1);
		user.set(curUserDetails);
	}
}

function getProjectHeaderImage(project, thumb) {
	if (project) {
		if (project.headerImage) {
			return getHeaderImage(project.headerImage, thumb);
			// return config.contentFolder + project.headerImage;
			// return config.SITE_CONTENT_URL + (fullImage ? config.headerImageLibraryFolder : config.headerImageLibraryThumbFolder) + project.headerImage + config.headerImageExtension;
		} else {
			const headerImageId = project.slug || '_default';
			return config$1.projectContentFolder + headerImageId + '/' + config$1.projectHeaderImage;
		}
	}
	return null;
}

function getProjectHasDetails(project) {
	const projectDetails = project && project.details;
	if (projectDetails && (
		(projectDetails[0] && projectDetails[0].detail) ||
		(projectDetails[1] && projectDetails[1].detail) ||
		(projectDetails[2] && projectDetails[2].detail) ||
		(projectDetails[3] && projectDetails[3].detail)
	)) {
		return true;
	}
	return false;
}

var profileImageColors = [
	{
		profileTop: "#91d5ec",
		profileBottom: "#5994ab"
	},
	{
		profileTop: "#f9c35c",
		profileBottom: "#d88060"
	},
	{
		profileTop: "#9b99ec",
		profileBottom: "#6155a2"
	},
	{
		profileTop: "#ceaef1",
		profileBottom: "#795373"
	},
	{
		profileTop: "#f1aec1",
		profileBottom: "#b38098"
	},
	{
		profileTop: "#80e8a5",
		profileBottom: "#66886c"
	},
	{
		profileTop: "#f9e7be",
		profileBottom: "#a08064"
	},
	{
		profileTop: "#ade0aa",
		profileBottom: "#6b8e5f"
	},
	{
		profileTop: "#6787e2",
		profileBottom: "#35457d"
	},
	{
		profileTop: "#80e8d5",
		profileBottom: "#7bada1"
	},
	{
		profileTop: "#ece2bd",
		profileBottom: "#b5b17d"
	}
];

var coverImageColors = [
	{
		coverTop: "#bed9f1",
		coverBottom: "#7489a9"
	},
	{
		coverTop: "#cbe4c1",
		coverBottom: "#81947d"
	},
	{
		coverTop: "#fbc7ae",
		coverBottom: "#b37866"
	},
	{
		coverTop: "#fbc7ae",
		coverBottom: "#b37866"
	},
	{
		profileTop: "#f1aec1",
		profileBottom: "#b38098",
		coverTop: "#fbc7ae",
		coverBottom: "#b37866"
	},
	{
		coverTop: "#fbc7ae",
		coverBottom: "#b37866"
	},
	{
		coverTop: "#fbc7ae",
		coverBottom: "#b37866"
	},
	{
		coverTop: "#fbc7ae",
		coverBottom: "#b37866"
	},
	{
		coverTop: "#fbc7ae",
		coverBottom: "#b37866"
	},
	{
		coverTop: "#fbc7ae",
		coverBottom: "#b37866"
	},
	{
		coverTop: "#fbc7ae",
		coverBottom: "#b37866"
	}
];

const UserModel = (userData) => {
    let initData = {
        id: '',

        username: '',

        name: '',
        fullName: '',
        firstName: '',
        lastName: '',

        bio: '',

        skills: [],

        avatarImage: null,
        coverImage: null,

        style: {},

        connected: false, // TODO: move to connection
        requestedConnection: false, // TODO: move to connection

        location: null,

        // postsCount: 0,
        // likesCount: 0,
        // followsCount: 0,

        // projects: [],
    };
    if (userData) {
        initData = Object.assign(initData, userData);
    }
    return writable$1(initData);
};

let loadingUsers = writable$1(false);

let users = writable$1([]);

let usersUpdatedHandlers = [];

let storedUserModels = [];

// loadUsers();

function getUser(userId, dontCreate) {
	let curUser = get_store_value(users).find(item => get_store_value(item).id === userId);
	if (!curUser && !dontCreate) {
		curUser = UserModel( { id: userId } );

		const curUsers = get_store_value(users);
		curUsers.unshift(curUser);
		users.set(curUsers);
	}
	return curUser;
}

function loadUsers(options) {
	if (!loadingRequestUtil.isLoading('users', options)) {
		loadingRequestUtil.setLoading('users', options, () => { loadingUsers.set(true); });
		api.getUsers(options).then(result => {
			mergeUsers(result);
			loadingRequestUtil.clearLoading('users', options, () => { loadingUsers.set(false); });
		});
	}
}

function loadUsersOfItem(item) {
	if (item && item.userId) {
		loadUsers( { ids: [item.userId] } );
	}
}

function loadUsersOfItemModels(items) {
	const userItems = [];

	let item, itemModel;
	for (var itemI = 0; itemI < items.length; itemI++) {
		itemModel = items[itemI];
		item = get_store_value(itemModel);

		if (item && item.userId && !userItems.includes(item.userId)) {
			userItems.push(item.userId);
		}
	}
	if (userItems.length) {
		loadUsers( { ids: userItems } );
	}
}

function onUsersUpdated(handler) {
	if (!usersUpdatedHandlers.includes(handler)) {
		usersUpdatedHandlers.push(handler);
	}
}

users.subscribe(() => {
	usersUpdatedHandlers.forEach(handler => {
		handler();
	});
});

function mergeUsers(newUsers) {
	if (newUsers && newUsers.length) {
		const curUsers = get_store_value(users);

		const viewedProfileId = get_store_value(profileId);

		// let activeUserId = get(userId);

		let curUser, newUserData, curUserId, newUser;
		for (var userI = 0; userI < newUsers.length; userI++) {
			newUserData = newUsers[userI];
			newUserData.loaded = true;
			curUserId = newUserData.id;
			curUser = curUsers.find(match => get_store_value(match).id === curUserId);
			if (!curUser) {
				curUser = UserModel(newUserData);
				curUsers.unshift(curUser);
				// console.log('add user: ', curUser, newUserData);
			} else {
				// console.log('update existing user: ', curUser, newUserData);
				newUser = get_store_value(curUser);
				newUser = Object.assign(newUser, newUserData);
				curUser.set(newUser);
			}
			if (viewedProfileId && curUserId === viewedProfileId) {
				viewedUser.set(newUser);
			}
			// if (activeUserId && activeUserId === curUserId) {
			// 	user.set(newUser);
			// }
		}

		users.set(curUsers);
	}
}

function getNewUser() {
	const newUserModel = UserModel();
	const newUser = get_store_value(newUserModel);

	newUser.id = generateId$1();

	randomiseUserProfileImageColor(newUserModel);
	randomiseUserCoverImageColor(newUserModel);

	return newUserModel;
}

function getUserModelFromData(userDetails, updateDate) {
	let newUserModel;
	let curUserDetails;

	if (userDetails.id) {
		newUserModel = getUser(userDetails.id, true);
	}
	if (!newUserModel) {
		newUserModel = storedUserModels[userDetails.id];
		// console.log('use existing model ' + userDetails.id);
		// if (get(newUserModel)) {
		// 	console.log('date ' + get(newUserModel).lastUpdatedDate + ' < ' + updateDate);
		// }

		if (newUserModel && get_store_value(newUserModel) && get_store_value(newUserModel).lastUpdatedDate < updateDate) {
			// console.log('update model ' + get(newUserModel).lastUpdatedDate + ' > ' + updateDate);
			curUserDetails = get_store_value(newUserModel);
			curUserDetails.lastUpdatedDate;
			Object.assign(curUserDetails, JSON.parse(JSON.stringify(userDetails)));
			newUserModel.set(curUserDetails);
		}
	}
	if (!newUserModel) {
		curUserDetails = JSON.parse(JSON.stringify(userDetails));
		curUserDetails.lastUpdatedDate = updateDate;
		newUserModel = UserModel(curUserDetails);

		// console.log('create model ', curUserDetails);
		// console.log('curUserDetails', get(newUserModel), curUserDetails);

		storedUserModels[userDetails.id] = newUserModel;
	}
	return newUserModel;
}

function getUserClone(userModel) {
	const newUser = get_store_value(userModel);

	const userCloneModel = writable$1(null);
	if (newUser) {
		const userClone = JSON.parse(JSON.stringify(newUser));
		userCloneModel.set(userClone);
	}

	return userCloneModel;
}

function randomiseUserProfileImageColor(userModel) {
	const user = get_store_value(userModel);

	const curProfileImageColors = profileImageColors[Math.floor(Math.random() * profileImageColors.length)];

	user.style.profileTop = curProfileImageColors.profileTop;
	user.style.profileBottom = curProfileImageColors.profileBottom;

	userModel.set(user);
}

function randomiseUserCoverImageColor(userModel) {
	const user = get_store_value(userModel);

	const curCoverImageColors = coverImageColors[Math.floor(Math.random() * coverImageColors.length)];

	user.style.coverTop = curCoverImageColors.coverTop;
	user.style.coverBottom = curCoverImageColors.coverBottom;

	userModel.set(user);
}

// export function addUser(newUserModel) {
// 	const newUser = get(newUserModel);

// 	newUser.createdAt = (new Date()).getTime(); // use for initial sort values
// 	newUser.modifiedAt = newUser.createdAt;
// 	newUser.lastActiveAt = newUser.createdAt;

// 	api.addUser({details: newUser}).then(result => {
// 		// newUser._id = result.insertedId;

// 		// TODO: use added item
// 		mergeUsers([newUser]);
// 		setUser(newUser.id);
// 	});

// 	// const curUsers = get(users);
// 	// curUsers.unshift(newUserModel);
// 	// users.set(curUsers);

// 	return newUserModel;
// }

function getProfileCoverImage(user) {
	if (user && user.coverImage) {
		return getHeaderImage(user.coverImage);
		// return (config.SITE_CONTENT_URL + config.headerImageLibraryFolder + user.coverImage + config.headerImageExtension);
	}
	return null;
}

const ChannelModel = (channelData) => {
    let initData = {
        id: '',

        title: '',
        description: null,

        projectId: '',
        userId: '',

        createdAt: 0,
    };
    if (channelData) {
        initData = Object.assign(initData, channelData);
    }
    return writable$1(initData);
};

let loadingChannels = writable$1(false);

let channelsUpdatedHandlers = [];
// let tempChannelsUpdatedHandlers = [];

let curChannelFilterOptions = null;

let channels = writable$1(null);

let filteredChannels = writable$1(null);

const primaryChannelNames = [
	'announcements',
	'general',
];
const teamManagedChannelNames = [
	'announcements',
	'workshop',
];

onChannelsUpdated(channelsUpdated);

// import channelsData from '../data/channels.json';
// const channelItems = JSON.parse(JSON.stringify(channelsData));
// mergeChannels(channelItems);

function loadChannels(options) {
	if (!loadingRequestUtil.isLoading('channels', options)) {
		loadingRequestUtil.setLoading('channels', options, () => { loadingChannels.set(true); });
	// if (!get(loadingChannels)) {
	// 	loadingChannels.set(true);
		api.getChannels(options).then(result => {
			mergeChannels(result);
			// loadingChannels.set(false);
			loadingRequestUtil.clearLoading('channels', options, () => { loadingChannels.set(false); });
		});
	}
}

function onChannelsUpdated(handler) {
	if (!channelsUpdatedHandlers.includes(handler)) {
		channelsUpdatedHandlers.push(handler);
	}

	//TODO: temp to focus channel set
		// channelsUpdatedHandlers.forEach(handler => {
		// 	handler();
		// });
}

// export function onTempChannelsUpdated(handler) {
// 	if (!tempChannelsUpdatedHandlers.includes(handler)) {
// 		tempChannelsUpdatedHandlers.push(handler);
// 	}
// }

channels.subscribe(() => {
	channelsUpdatedHandlers.forEach(handler => {
		handler();
	});

	// tempChannelsUpdatedHandlers.forEach(handler => {
	// 	handler();
	// });
	// tempChannelsUpdatedHandlers.length = 0;
});

function mergeChannels(newChannels) {
	if (newChannels && newChannels.length) {
		let curChannels = get_store_value(channels);

		if (!curChannels) {
			curChannels = [];
		}

		let curChannel, newChannelData, channelId, newChannel;
		for (var channelI = 0; channelI < newChannels.length; channelI++) {
			newChannelData = newChannels[channelI];
			channelId = newChannelData.id;
			curChannel = curChannels.find(match => get_store_value(match).id === channelId);
			if (!curChannel) {
				curChannel = ChannelModel(newChannelData);
				curChannels.push(curChannel);
				// curChannels.unshift(curChannel);
				// console.log('add channel: ', curChannel, newChannelData);
			} else {
				// console.log('update existing channel: ', curChannel, newChannelData);
				newChannel = get_store_value(curChannel);
				newChannel = Object.assign(newChannel, newChannelData);
				curChannel.set(newChannel);
			}
		}
		// console.log('update channels: ', curChannels);

		channels.set(curChannels);
	}
}

function getChannels$1(options) {
	if (options.id || options.projectId) {
		curChannelFilterOptions = options;

		if (curChannelFilterOptions && options && (curChannelFilterOptions.projectId !== options.projectId)) {
			clearFilteredChannels();
		}
		filterCurrentChannels();

		loadChannels(curChannelFilterOptions);

		// console.log(get(filteredChannels));
	}

	return filteredChannels;
}

function channelsUpdated() {
	filterCurrentChannels();
}

function clearFilteredChannels() {
	const curFilteredChannels = get_store_value(filteredChannels);
	curFilteredChannels.length = 0;
	filteredChannels.set(curFilteredChannels);
}

function filterCurrentChannels() {
	const projectId = curChannelFilterOptions && curChannelFilterOptions.projectId;

	let newFilteredChannels = get_store_value(channels);
	if (newFilteredChannels) {
		if (projectId) {
			newFilteredChannels = newFilteredChannels.filter(channelModel => {
				const channel = get_store_value(channelModel);
				// console.log(channel.title + ', ' + channel.channelId + ', ' + channel.type);
				return channel.projectId === projectId;
			});
		}
		newFilteredChannels.sort((a,b) => get_store_value(a).sortIndex - get_store_value(b).sortIndex); // sort by reversed created time
		// newFilteredChannels.sort((a,b) => get(b).createdAt - get(a).createdAt); // sort by reversed created time
	}
	filteredChannels.set(newFilteredChannels);
}

// 	const projectId = options && options.projectId;

// 	if (projectId) {
// 		const newFilteredChannels = get(channels).filter(channelModel => {
// 			const channel = get(channelModel);
// 			return (channel.projectId === projectId);
// 		});
// 		filteredChannels.set(newFilteredChannels);
// 		return filteredChannels;
// 	} else {
// 		return channels;
// 	}
// }

function getChannel(channelId) {
	const curChannels = get_store_value(channels);
	if (curChannels) {
		return get_store_value(channels).find(item => get_store_value(item).id === channelId);
	} else {
		return null;
	}
}

function getIsPrimaryChannel(channel) {
	return primaryChannelNames && primaryChannelNames.includes(channel.title.toLowerCase());
}

function getIsTeamManagedChannel(channel) {
	return teamManagedChannelNames && teamManagedChannelNames.includes(channel.title.toLowerCase());
}

function getChannelDefaultDescription(channel) {
	return locale$1.CHANNEL_DESCRIPTIONS[channel.title.toUpperCase()] || null;
}

// export function addChannel(channelDetails) {
//     let channelId, trialIndex;
// 	do { channelId = generateId(); } while (getChannel(channelId) && trialIndex < 99);
// 	if (trialIndex === 99) { return null; }

// 	const newChannelModel = ChannelModel();
// 	const newChannel = get(newChannelModel);

// 	const ownerId = get(userId);

// 	newChannel.id = channelId;

// 	newChannel.headerImage = channelDetails.headerImage || null;
// 	newChannel.title = channelDetails.title || '';
// 	newChannel.description = channelDetails.description || '';

// 	newChannel.createdAt = (new Date()).getTime(); // use for initial sort values
// 	newChannel.modifiedAt = newChannel.createdAt;
// 	newChannel.lastActiveAt = newChannel.createdAt;

// 	newChannel.ownerId = ownerId;
// 	newChannel.team = [ownerId];

// 	newChannel.isNew = true;
// 	newChannel.hasCreated = true;

// 	newChannel.followCount++;
// 	newChannel.likeCount++;

// 	api.addChannel({details: newChannel}).then(result => {
// 		if (!result || result.error || result.invalid) {
// 			// showPrompt(promptIds.ADD_PROJECT_ERROR);
// 			removeChannelModel(newChannelModel);
// 		}
// 		// newChannel._id = result.insertedId;
// 	});

// 	const curChannels = get(channels);
// 	curChannels.unshift(newChannelModel);
// 	channels.set(curChannels);

// 	return newChannelModel;
// }

const PostModel = (postData) => {
    let initData = {
        id: '',

        userId: '',
        channelId: '',
        projectId: '',

        type: '',

        title: '',
        message: null,
        // image: null,

        createdAt: 0,

        likeCount: 0,

        postCount: 0,
    };
    if (postData) {
        initData = Object.assign(initData, postData);
    }
    return writable$1(initData);
};

let loadingPosts = writable$1(false);

let postsUpdatedHandlers = [];
// let tempPostsUpdatedHandlers = [];

let curPostFilterOptions = null;

let posts = writable$1([]);

let filteredPosts = writable$1([]);

onPostsUpdated(postsUpdated);

// import postsData from '../data/posts.json';
// const postItems = JSON.parse(JSON.stringify(postsData));
// mergePosts(postItems);

function onPostsUpdated(handler) {
	if (!postsUpdatedHandlers.includes(handler)) {
		postsUpdatedHandlers.push(handler);
	}
}

posts.subscribe(() => {
	postsUpdatedHandlers.forEach(handler => {
		handler();
	});

	// tempProjectsUpdatedHandlers.forEach(handler => {
	// 	handler();
	// });
	// tempProjectsUpdatedHandlers.length = 0;
});

function loadPosts(options) {
	// if (!get(loadingPosts)) {
	// 	loadingPosts.set(true);
	if (!loadingRequestUtil.isLoading('posts', options)) {
		loadingRequestUtil.setLoading('posts', options, () => { loadingPosts.set(true); });
		api.getPosts(options).then(result => {
			mergePosts(result);
			// loadingPosts.set(false);
			loadingRequestUtil.clearLoading('posts', options, () => { loadingPosts.set(false); });
		});
	}
}

function mergePosts(newPosts) {
	if (newPosts && newPosts.length) {
		const curPosts = get_store_value(posts);

		// curPosts.length = 0; // TODO: temp clear posts

		const curSavingPostId = get_store_value(savingPostId);

		let curPost, newPostData, postId, newPost;
		for (var postI = 0; postI < newPosts.length; postI++) {
			newPostData = newPosts[postI];
			postId = newPostData.id;
			if (postId !== curSavingPostId) {
				curPost = curPosts.find(match => get_store_value(match).id === postId);
				if (!curPost) {
					curPost = PostModel(newPostData);
					// curPosts.push(curPost);
					curPosts.unshift(curPost);
					// console.log('add post: ', curPost, newPostData);
				} else {
					// console.log('update existing post: ', curPost, newPostData);
					newPost = get_store_value(curPost);
					newPost = Object.assign(newPost, newPostData);
					curPost.set(newPost);
				}
			}
		}
		// console.log('update posts: ', curPosts);

		posts.set(curPosts);
	}
}

function getPosts$1(options) {
	if (options.threadId || options.channelId) {
		if (curPostFilterOptions && options && (
			curPostFilterOptions.type !== options.type ||
			curPostFilterOptions.channelId !== options.channelId ||
			curPostFilterOptions.threadId !== options.threadId
		)) {
			clearFilteredPosts();
		}

		curPostFilterOptions = JSON.parse(JSON.stringify(options));

		filterCurrentPosts();

		loadPosts(curPostFilterOptions);

		// console.log(get(filteredPosts));
	}

	return filteredPosts;
}

function postsUpdated() {
	filterCurrentPosts();
}

function clearFilteredPosts() {
	const curFilteredPosts = get_store_value(filteredPosts);
	curFilteredPosts.length = 0;
	filteredPosts.set(curFilteredPosts);
}

function filterCurrentPosts() {
	const channelId = curPostFilterOptions && curPostFilterOptions.channelId;
	const threadId = curPostFilterOptions && curPostFilterOptions.threadId;
	const type = curPostFilterOptions && curPostFilterOptions.type;
	const sortByCreated = (curPostFilterOptions && curPostFilterOptions.sortByCreated) || false;

	let newFilteredPosts = get_store_value(posts);
	if (channelId || type) {
		newFilteredPosts = newFilteredPosts.filter(postModel => {
			const post = get_store_value(postModel);
			// console.log(post.title + ', ' + post.channelId + ', ' + post.type);
			return (!type || post.type === type) && (!channelId || post.channelId === channelId) && (!threadId || post.threadId === threadId);
		});
	}
	switch (type) {
		case 'thread':
			if (sortByCreated) {
				newFilteredPosts.sort((a,b) => get_store_value(b).createdAt - get_store_value(a).createdAt ); // sort by reversed created time
			} else {
				newFilteredPosts.sort((a,b) => get_store_value(b).lastActiveAt - get_store_value(a).lastActiveAt); // sort by reversed created time
			}
			break;
		case 'threadPost':
			newFilteredPosts.sort((a,b) => get_store_value(a).createdAt - get_store_value(b).createdAt ); // sort by reversed created time
			break;
	}
	filteredPosts.set(newFilteredPosts);
}

function getPost(postId) {
	return get_store_value(posts).find(item => get_store_value(item).id === postId);
}

function addPost$1(postDetails) {
    // let postId, trialIndex;
	// do { postId = generateId(); } while (getPost(postId) && trialIndex < 99);
	// if (trialIndex === 99) { return null; }

	const newPostModel = PostModel();
	const newPost = get_store_value(newPostModel);

	const ownerId = get_store_value(userId);

	// newPost.id = postId;
	newPost.id = postDetails.id;

	newPost.type = postDetails.type;

	newPost.projectId = postDetails.projectId;
	newPost.channelId = postDetails.channelId;
	newPost.threadId = postDetails.threadId;

	newPost.title = postDetails.title || '';
	newPost.message = postDetails.message || '';

	if (postDetails.image) {
		newPost.image = postDetails.image;
	}

	newPost.userId = ownerId;

	newPost.createdAt = (new Date()).getTime(); // use for initial sort values
	newPost.modifiedAt = newPost.createdAt;
	newPost.lastActiveAt = newPost.createdAt;

	// console.log('newPost', newPost);

	savingPostId.set(newPost.id); // need to keep saving post so doesn't override on load
	savingPost.set(true);

	const result = api.addPost({details: newPost});
	result.then(result => {
		if (!result || result.error || result.invalid) ;
		savingPost.set(false);
		return result;
		// newPost._id = result.insertedId;
	});

	const curPosts = get_store_value(posts);
	curPosts.unshift(newPostModel);
	posts.set(curPosts);

	filterCurrentPosts();

	if (postDetails.threadId) {
		triggerFollowPost(postDetails.threadId);
	}

	return result; // newPostModel;
}

function updatePost$1(post, postDetails) {
	const curTime = (new Date()).getTime();
	if (secondsDiff(post.createdAt, curTime) > config$1.SHOW_EDITED_MIN_TIME) {
		postDetails.edited = true;
	}

	savingPostId.set(post.id); // need to keep saving post so doesn't override on load
	savingPost.set(true);
	const result = api.updatePost({id: post.id, details: postDetails});
	result.then(() => {
		savingPost.set(false);
		return result;
	});

	Object.assign(post, postDetails);

	post.lastActiveAt = (new Date()).getTime();
	post.editedAt = post.lastActiveAt;
	post.modifiedAt = post.lastActiveAt;

	return result;
}

function setLikePost(targetPost, like) {
	if (like) {
		api.likePost({userId: get_store_value(userId), postId: targetPost.id});
	} else {
		api.unlikePost({userId: get_store_value(userId), postId: targetPost.id});
	}

	targetPost.liked = like;
	targetPost.likeCount = (targetPost.likeCount || 0) + (like ? 1 : -1);

	const curUserDetails = get_store_value(user);
	if (curUserDetails) {
		curUserDetails.likesCount = curUserDetails.likesCount + (like ? 1 : -1);
		user.set(curUserDetails);
	}
}

function setFollowPost(targetPost, unfollow) {
	const follow = unfollow ? false : true;

	if (targetPost.following !== follow && targetPost.userId !== get_store_value(userId) && !getIsProjectTeamMember(get_store_value(project))) {
		api.followPost({userId: get_store_value(userId), postId: targetPost.id, unfollow});

		targetPost.following = follow;
		targetPost.followCount = (targetPost.likeCount || 0) + (unfollow ? 1 : -1);
		// targetPost.followTime = (new Date()).getTime();

		return true;
	}
	return false;
}

function getNewPostId() {
    let postId, trialIndex;
	do { postId = generateId$1(12); } while (getPost(postId) && trialIndex < 99);
	return postId;
}

const ConversationModel = (conversationData) => {
    let initData = {
        id: '',

        // isGroup: false,
        // title: '',

        // projectId: '',
        // projectTitle: '',

        createdAt: 0,

        lastMessageAt: 0,
        lastSenderId: 0,
        lastMessageText: 0,

        userIds: [],

        users: [],
    };

    if (conversationData) {
        initData = Object.assign(initData, conversationData);
    }
    return writable$1(initData);
};

// import { writable, get } from 'svelte/store';

// import EventEmitter from 'eventemitter3';

const PageInteractionUtil = {}; // new EventEmitter();

PageInteractionUtil.lastInteractionTime = (new Date()).getTime();

PageInteractionUtil.isActive = function() {
    const curTime = (new Date()).getTime();
    const lastActiveDuration = (curTime - PageInteractionUtil.lastInteractionTime) / 1000;
    const active = lastActiveDuration < config$1.ACTIVE_INTERACTION_DELAY;
    // console.log('active', active, 'lastActiveDuration', lastActiveDuration);
    return active;
};

// PageInteractionUtil.focused = writable(true);

PageInteractionUtil.init = function() {
	if (typeof window !== 'undefined') {
        window.addEventListener('mousemove', onInteraction);
        window.addEventListener('mousedown', onInteraction);
        window.addEventListener('mouseup', onInteraction);
        window.addEventListener('touchmove', onInteraction);
        window.addEventListener('touchstart', onInteraction);
        window.addEventListener('touchend', onInteraction);
        window.addEventListener('keyup', onInteraction);
        window.addEventListener('scroll', onInteraction);
        window.addEventListener('mousewheel', onInteraction);

        function onInteraction(event) {
            // console.log('onInteraction', event.type);

            PageInteractionUtil.lastInteractionTime = (new Date()).getTime();
        }
	}
};

PageInteractionUtil.init();

let loadingConversations = writable$1(false);

let curConversationFilterOptions = null;

let conversationsUpdatedHandlers = [];

let pollStarted = false;
let curPollConversationTimeout = null;

let conversationsLoadedAt = null;
let conversationLoadingTimeout = null;

let conversations = writable$1(null);

const ConversationsModel = new EventEmitter();

let conversationsUnviewedCount = writable$1(0);

userId.subscribe(updateConversations);
usercode.subscribe(updateConversations);

function updateConversations(options) {
	const isPoll = (options && options.isPoll) || false;
	if (get_store_value(userId) && get_store_value(usercode)) {
		if (!isPoll) {
			clearFilteredConversations();
		}

		const details = { userId: get_store_value(userId), getUnviewed: true };
		if (isPoll && conversationsLoadedAt) {
			details.loadedAt = conversationsLoadedAt;
		}
		getConversations$1(details);

		if (!pollStarted) {
			pollStarted = true;
			pollConversation();
		}
	} else {
		clearFilteredConversations();
		mergeConversations([]);
	}
}

let lastPollTime = (new Date()).getTime();
function pollConversation() {
	if (typeof window !== 'undefined') {
		// const curPollDelay = isMessagesPage() ? config.CONVERSATION_POLL_DELAY_FOCUSED : config.CONVERSATION_POLL_DELAY;
		let curPollDelay = config$1.CONVERSATION_POLL_DELAY;
		if (!PageInteractionUtil.isActive()) {
			curPollDelay = config$1.CONVERSATION_POLL_DELAY_IDLE;
		} else if (isMessagesPage()) {
			curPollDelay = config$1.CONVERSATION_POLL_DELAY_FOCUSED;
		}

		curPollConversationTimeout = window.setTimeout(() => {
			const curTime = (new Date()).getTime();
			const lastPollDuration = (curTime - lastPollTime) / 1000;
			const canPoll = lastPollDuration >= curPollDelay;
			// console.log('canPoll', canPoll, curPollDelay, lastPollDuration);

			// debugOutput.set(get(debugOutput) + '<br/>' + canPoll + ', ' + get(user) + ', ' + document.visibilityState);

			if (canPoll && get_store_value(user) && document.visibilityState !== 'hidden') {
				updateConversations({isPoll: true});
				lastPollTime = curTime;
			}
			pollConversation();
		}, config$1.POLL_CHECK_DURATION * 1000);
	}
}

function isMessagesPage() {
	const path = get_store_value(curPath);
	return !!(path && path.match(/messages/));
}

function isConversationPage() {
	const path = get_store_value(curPath);
	return !!(path && path.match(/messages\/.+/));
}

conversations.subscribe(() => {
	const curConversations = get_store_value(conversations) || [];
	const unviewedConversations = curConversations.filter(conversation => {
		const curConversation = get_store_value(conversation);
		if (!isConversationPage() || curConversation.id !== get_store_value(conversationId)) { // don't show notification dot if on current conversation with notification (as messages auto load)
			return curConversation ? !curConversation.viewed : false;
		} else {
			return false;
		}
		// const userConversationInfo = getUserConversationInfo(curConversation);
		// return userConversationInfo ? !userConversationInfo.viewed : false;
	});
	conversationsUnviewedCount.set(unviewedConversations.length);
});

function onConversationsUpdated(handler) {
	if (!conversationsUpdatedHandlers.includes(handler)) {
		conversationsUpdatedHandlers.push(handler);
	}
}

conversations.subscribe(() => {
	conversationsUpdatedHandlers.forEach(handler => {
		handler();
	});
});

function loadConversations(options, callback) {
    // const conversationItems = JSON.parse(JSON.stringify(conversationsTestData));
	// mergeConversations(conversationItems);

	const isInitialLoad = !options.getUnviewed;

	if (!loadingRequestUtil.isLoading('conversations', options)) {
		// console.log('loadConversations', options);
		loadingRequestUtil.setLoading('conversations', options, () => {
			if (typeof window !== 'undefined') { // delay timeout to ensure property updates correctly - TODO: shouldn't be needed
				conversationLoadingTimeout = window.setTimeout(() => {
					loadingConversations.set(true);
				}, 0);
			} else {
				loadingConversations.set(true);
			}
		});
		// debugOutput.set(get(debugOutput) + 'get conversation' + '<br/>');
		api.getConversations(options).then(result => {
			if (!result.error) {
				if (result.loadedAt) {
					conversationsLoadedAt = result.loadedAt;
				}
				//debugOutput.set(get(debugOutput) + 'result.conversations ' + result.conversations.length + ', ' + (result.conversations.length) + '<br/>');
				mergeConversations(result.conversations, isInitialLoad);
			}
			if (conversationLoadingTimeout !== null && typeof window !== 'undefined') {
				window.clearTimeout(conversationLoadingTimeout);
				conversationLoadingTimeout = null;
			}
			loadingRequestUtil.clearLoading('conversations', options, () => { loadingConversations.set(false); });
			if (callback) {
				callback(result);
			}
		});
	}
}

function mergeConversations(newConversations, isInitialLoad) {
	// console.log('newConversations', newConversations);

	const origConversations = get_store_value(conversations);
	const curConversations = origConversations || [];

	// debugOutput.set(get(debugOutput) + '<br/>newConversations ' + newConversations && newConversations.length);

	// console.log('mergeConversations count: ' + (newConversations && newConversations.length));

	if (newConversations && newConversations.length) {
		let curConversation, newConversationData, curConversationId, newConversation;
		for (var conversationI = 0; conversationI < newConversations.length; conversationI++) {
			newConversationData = newConversations[conversationI];
			curConversationId = newConversationData.id;
			if (curConversationId !== get_store_value(savingConversationId)) {
				curConversation = curConversations.find(match => get_store_value(match).id === curConversationId);

				// console.log('mergeConversation', curConversationId, 'exists', !!curConversation);

				if (!curConversation) {
					curConversation = ConversationModel(newConversationData);
					curConversations.unshift(curConversation);
				} else {
					newConversation = get_store_value(curConversation);
					// console.log('lastMessageText', newConversation.lastMessageText);

					newConversation.isNew = false;
					newConversation = Object.assign(newConversation, newConversationData);

					//debugOutput.set(get(debugOutput) + 'merge viewed: ' + newConversation.viewed + ' ' + newConversation.id + '<br/>');

					curConversation.set(newConversation);
				}

				if (!isInitialLoad) { // && curConversationId === get(conversationId)) { // && isConversationPage()) {
					// debugOutput.set(get(debugOutput) + '<br/>conversationUpdated ' + curConversationId);
					// console.log('conversation updated ' + curConversationId);
					ConversationsModel.emit('conversationUpdated', {conversationId: curConversationId});
				}
			}
		}

		curConversations.sort((a,b) => get_store_value(b).lastMessageAt - get_store_value(a).lastMessageAt ); // sort by reversed created time
		// curConversations.sort((a,b) => get(b).createdAt - get(a).createdAt ); // sort by reversed created time

		conversations.set(curConversations);
	} else if (!origConversations) {
		conversations.set(curConversations);
	}
}

function getConversations$1(options) {
    if (curConversationFilterOptions && options && (
        curConversationFilterOptions.userId !== options.userId
    )) {
        clearFilteredConversations();
    }

	curConversationFilterOptions = JSON.parse(JSON.stringify(options));


	// debugOutput.set(get(debugOutput) + 'getConversations' + JSON.stringify(curConversationFilterOptions) + '<br/>');

    if (curConversationFilterOptions.userId) {
        loadConversations(curConversationFilterOptions);
    }

	return conversations;
}

function getConversation(conversationId) {
	const curConversations = get_store_value(conversations);
	return curConversations && curConversations.find(item => get_store_value(item).id === conversationId);
}

function clearFilteredConversations() {
	// const curConversations = get(conversations);
	// if (curConversations) {
	// 	curConversations.length = 0;
	// }
	if (get_store_value(conversation)) {
		conversation.set(null);
	}
	const curConversations = null;
	conversations.set(curConversations);
}

// export function checkConversationSeen(details, force) {
// 	if (details.conversationId) {
// 		const curConversationModel = getConversation(details.conversationId);
// 		if (curConversationModel) {
// 			const curConversation = get(curConversationModel);
// 			//debugOutput.set(get(debugOutput) + 'viewed: ' + curConversation.viewed + ' ' + details.conversationId + ' ' + (curConversation.id === get(savingConversationId)) + '<br/>');
// 			if (!curConversation.viewed || force) {
// 				if (curConversation.id !== get(savingConversationId)) {
// 					curConversation.viewed = true;
// 					curConversationModel.set(curConversation);
// 					conversations.set(get(conversations));

// 					//debugOutput.set(get(debugOutput) + 'set viewed' + '<br/>');

// 					// debugOutput.set(get(debugOutput) + '<br/>checkConversationSeen ' + Math.floor(Math.random() * 999) + ': ' + curConversation.id);
// 					// console.log('curConversation set seen', curConversation.id);
// 					const result = api.updateConversation({id: details.conversationId});
// 				}
// 			}
// 		}
// 	}
// }

// export function setConversationSeenTimeout(details, delay) {
// 	let conversationSeenTimeout = null;
// 	if (typeof window !== 'undefined') {
// 		conversationSeenTimeout = window.setTimeout(() => {
// 			checkConversationSeen(details);
// 		}, (delay || config.CONVERSATIION_VIEWED_DELAY) * 1000);
// 	}

// 	// onDestroy(() => { // doesn't work here?
// 	// 	clearConversationSeenTimeout(conversationSeenTimeout);
// 	// });

// 	return conversationSeenTimeout;
// }

// export function clearConversationSeenTimeout(conversationSeenTimeout) {
// 	if (conversationSeenTimeout && typeof window !== 'undefined') {
// 		window.clearTimeout(conversationSeenTimeout);
// 	}
// }

function getConversationOtherUser(conversation) {
	let curUser = null;
	if (conversation.users) {
		curUser = conversation.users.find(userItem => userItem.id !== get_store_value(userId));
	}
	return curUser;
}

function getConversationUserById(conversation, userId) {
	let curUser = null;

	if (conversation.users) {
		curUser = conversation.users.find(userItem => userItem.id === userId);
	}
	// console.log('userId', userId, 'curUser', curUser);
	return curUser;
}

function removeConversation(conversationId) {
	let curConversation = getConversation(conversationId);
	// console.log('removeConversation', curConversation);
	if (curConversation) {
		const curConversations = get_store_value(conversations) || [];
		const conversationIndex = curConversations.indexOf(curConversation);
		// console.log('conversationIndex', conversationIndex);
		if (conversationIndex !== -1) {
			// console.log('removeConversation', conversationId);
			curConversations.splice(conversationIndex, 1);
			conversations.set(curConversations);
		}
	}
}

function addConversation(details) {
	const newConversationModel = ConversationModel();
	const newConversationItem = get_store_value(newConversationModel);

	// const ownerId = get(userId);

	newConversationItem.id = details.id;
	// newConversationItem.targetUserIds = details.targetUserIds;

	// console.log('addConversation', newConversationItem.id);

	newConversationItem.createdAt = (new Date()).getTime(); // use for initial sort values
	newConversationItem.lastMessageAt = newConversationItem.lastMessageAt;

	newConversationItem.viewed = true;
	newConversationItem.isNew = true;

	const curConversations = get_store_value(conversations) || [];
	curConversations.push(newConversationModel);
	conversations.set(curConversations);

	newConversation.set(false);

	ConversationsModel.emit('conversationAdded', {conversationId: details.id});
}

function updateConversationSeen(conversationId, details) {
	const viewedAt = details.viewedAt;
	// console.log('updateConversationSeen', conversationId, 'viewedAt', viewedAt);
	const conversationModel = getConversation(conversationId);
	if (conversationModel) {
		const curConversation = get_store_value(conversationModel);
		if (curConversation) {
			// curConversation.viewedAt = viewedAt; // is on user item so not relevant
			curConversation.viewed = true;
			conversationModel.set(curConversation);

			const curConversations = get_store_value(conversations) || [];
			conversations.set(curConversations);

			// console.log('updateConversationSeen: ', viewedAt);
		}
	}
}

function getNewConversationId() {
    let conversationId, trialIndex;
	do { conversationId = generateId$1(12); } while (getConversation(conversationId) && trialIndex < 99);
	return conversationId;
}

function getConversationUsersId$1(targetUserIds) {
	const userIds = [get_store_value(userId), ...targetUserIds];
	userIds.sort(); // .sort((a,b) => strCompare(a, b));
	const usersId = userIds.join('-');
	return usersId;
}

ConversationsModel.on('conversationAdded', onConversationAdded);

function loadProject(targetProjectId, options) {
    const path = get_store_value(curPath);
    if (!/\/projects\/.+/.test(path)) {
        lastPreProjectPath.set(path);
    }

    loadProjectItem(targetProjectId);

    if (gotoRoute('projects/' + targetProjectId)) {
        const showInfo = options && options.showInfo;
        projectShowingInfo.set(showInfo);
    }
    resetScrollRegionPosition('project');
}

function loadProjectItem(targetProjectId) {
    loadProjects({ id: targetProjectId });

    projectId.set(targetProjectId);
    setProject(targetProjectId);
}

function setProject(targetProjectId) {
    const curProjectModel = getProject(targetProjectId);
    const curProject = get_store_value(curProjectModel);

    project.set(curProject);
    projectReturnView.set(curProject && (curProject.following || getIsProjectTeamMember(curProject))); // curProject.isOwner
}

onProjectsUpdated(() => {
    // if project object not found but project id set then update project model
    if (!get_store_value(project) && get_store_value(projectId)) {
        const targetProjectId = get_store_value(projectId);
        setProject(targetProjectId);
    }
});
onChannelsUpdated(() => {
    // if channel object not found but channel id set then update channel model
    if (!get_store_value(channel) && get_store_value(channelId)) {
        const targetChannelId = get_store_value(channelId);
        setChannel(targetChannelId);
    }
});
onPostsUpdated(() => {
    // if channel object not found but channel id set then update channel model
    if (!get_store_value(post$q) && get_store_value(postId)) {
        const targetPostId = get_store_value(postId);
        setPost(targetPostId);
    }
});
onConversationsUpdated(() => {
    if (!get_store_value(conversation) && get_store_value(conversationId)) {
        const targetConversationId = get_store_value(conversationId);
        setConversation(targetConversationId);
    }
});

function onConversationAdded(event) {
    conversationId.set(event.conversationId);
    setConversation(event.conversationId);
}

function setViewedUser(targetProfileId, dontResetConversationGroup) {
    const curUserModel = getUser(targetProfileId);
    const curUser = get_store_value(curUserModel);

    if (!dontResetConversationGroup) {
        conversationGroupId.set(null); // ensure can reset viewed user when viewing conversation
    }

    loadUsers({ id: targetProfileId });
    viewedUser.set(curUser);
}

function setUser(targetUserId) {
    const curUserModel = getUser(targetUserId);
    const curUser = get_store_value(curUserModel);

    if (curUser) {
        userId.set(targetUserId);
        user.set(curUser);

        if (curUser && curUser.loaded && (!curUser.username || curUser.set === false)) {
            (async() => {
                await tick();
                console.log('curUser', curUser);
                if (curUser.resetPass) {
                    showPrompt(promptIds.RESET_PASSWORD);
                } else {
                    showPrompt(promptIds.SET_ACCOUNT);
                }
            })();
        }
    }
}

onUsersUpdated(() => {
    // if project object not found but project id set then update project model
    if (get_store_value(profileId) && (!get_store_value(viewedUser) || !get_store_value(viewedUser).loaded)) {
        const targetProfileId = get_store_value(profileId);
        setViewedUser(targetProfileId, true);
    }
    // if (get(userId) && (!get(user) || !get(user).loaded || get(user).id !== get(userId))) { // is already loaded, but still need to set user object
    if (get_store_value(userId)) { // force user object to update - to improve?
        setUser(get_store_value(userId));
    }
});

function loadProjectPost(targetProjectId) {
    loadProject(targetProjectId + '#post');
}

function newProject() {
    if (!checkLoggedIn()) { return; }

    goto('projects/new');
}
function editProjectDetails(options) {
    if (!checkLoggedIn()) { return; }

    editingProjectMode.set((options && options.editingProjectMode) || 'edit');
    // editingProject.set(options && options.editingProject);

    goto('projects/' + get_store_value(projectId) + '/details');
}

function editProfile() {
    if (!checkLoggedIn()) { return; }

    goto('profile/' + get_store_value(profileId) + '/edit');
}

function showLikes() {
    goto('profile/' + get_store_value(profileId) + '/likes');
    resetScrollRegionPosition('likes');
}

function loadChannel(targetChannelId) {
    loadChannelItem(targetChannelId);

    gotoRoute('channels/' + targetChannelId );
    resetScrollRegionPosition('channel');
}
function loadChannelItem(targetChannelId) {
    loadChannels( { id: targetChannelId } );

    channelId.set(targetChannelId);
    setChannel(targetChannelId);
}

function setChannel(targetChannelId) {
    const curChannelModel = getChannel(targetChannelId);
    const curChannel = get_store_value(curChannelModel);

    channel.set(curChannel);

    if (curChannel) {
        if ((!get_store_value(projectId) || !get_store_value(project) || get_store_value(projectId) !== curChannel.projectId) && curChannel.projectId) {
            loadProjectItem(curChannel.projectId);
        }
    }
}

function addAndSetConversation(conversation) {
    if (conversation && conversation.id) {
        mergeConversations([conversation]);
        setConversation(conversation.id);
    }
}

function loadPost(targetPostId, options) {
    loadPosts({ id: targetPostId, getFollowState: true });

    postId.set(targetPostId);
    setPost(targetPostId);

    postsAnchorToBottom.set(options && options.anchorToBottom);

    const path = get_store_value(curPath);
    if (!path || !path.match(/posts\/.+\/edit/)) {
        gotoRoute('posts/' + targetPostId );
        resetScrollRegionPosition('thread');
    }
}

function setPost(targetPostId) {
    const curPostModel = getPost(targetPostId);
    const curPost = get_store_value(curPostModel);

    post$q.set(curPost);

    if (curPost) {
        if ((!get_store_value(channelId) || !get_store_value(channel) || get_store_value(channelId) !== curPost.channelId) && curPost.channelId) {
            loadChannelItem(curPost.channelId);
        }
        if ((!get_store_value(projectId) || !get_store_value(project) || get_store_value(projectId) !== curPost.projectId) && curPost.projectId) {
            loadProjectItem(curPost.projectId);
        }
    }
}

function loadProfile(targetProfileId, options) {
    profileId.set(targetProfileId);

    setViewedUser(targetProfileId);
    // const curUserModel = getUser(targetProfileId);
    // const curUser = get(curUserModel);
    // viewedUser.set(curUser);

    if (gotoRoute('profile/' + targetProfileId)) {
        profileDisplayingAllProjects.set(false);
    }
    resetScrollRegionPosition('profile');
}

function getUserConversationId(targetConversationId) {
    let userId = null;
    if (targetConversationId.indexOf('u-') === 0) {
        userId = targetConversationId.substr(2);
    }
    return userId;
}

function getProjectConversationId(targetConversationId) {
    let projectId = null;
    if (targetConversationId.indexOf('p-') === 0) {
        projectId = targetConversationId.substr(2);
    }
    return projectId;
}

function targetConversationLoaded(result) {
    // console.log('conversationLoaded', result);
    if (result && !result.error) {
        if (result.conversations && result.conversations.length) {
            const conversation = result.conversations[0];
            if (conversation.id) {
                mergeConversations([conversation]);
                loadConversation(conversation.id, true);
            }
        } else if (get_store_value(userId)) {
            newConversation.set(true);
        }
    }
}
function loadConversation(targetConversationId, isRedirectedId, forceLoad) {
    // if (!checkLoggedIn()) { return; }

    newConversation.set(false);

    // console.log('loadConversation', targetConversationId);

    if (!isRedirectedId) {
        conversationGroupId.set(targetConversationId);
    }

    const conversationUserId = getUserConversationId(targetConversationId);
    if (conversationUserId) {
        clearConversation();

        const targetUserIds = [conversationUserId];
        newConversationUserIds.set(targetUserIds);

        setViewedUser(conversationUserId, true);

        const usersId = getConversationUsersId$1(targetUserIds);
        loadConversations({ usersId }, targetConversationLoaded);
        return;
    }

    const conversationProjectId = getProjectConversationId(targetConversationId);
    if (conversationProjectId) {
        loadConversations({ projectId: conversationProjectId }, targetConversationLoaded);
        return;
    }

    const curConversation = get_store_value(conversation);
    if (!curConversation || curConversation.id !== targetConversationId || forceLoad) {
        // debugOutput.set('loadConversation: ' + targetConversationId);
        // console.log('loadConversations');
        loadConversations({ id: targetConversationId }, (result) => {
			// debugOutput.set(get(debugOutput) + '<br/>loaded conversations ' + targetConversationId + ' ' + (result.conversations && result.conversations.length));
            if (!result.error && forceLoad) {
                setConversation(targetConversationId); // set conversation after new thread force reload to ensure header updated
            }
            return result;
        });
    }

    conversationId.set(targetConversationId);
    setConversation(targetConversationId);

    // const curConversation = conversations.find(item => item.id === targetConversationId);
    // conversation.set(curConversation);

    if (!isRedirectedId) {
        gotoRoute('messages/' + targetConversationId);
    }
    resetScrollRegionPosition('conversation');
}

function clearConversation() {
    conversationId.set(null);
    conversation.set(null);
}

function loadConversationByUser(userId) {
    gotoRoute('messages/u-' + userId);
    resetScrollRegionPosition('conversation');
}

function loadConversationByProject(projectId) {
    gotoRoute('messages/p-' + projectId);
    resetScrollRegionPosition('conversation');
}

function setConversation(targetConversationId) {
    const curConversationModel = getConversation(targetConversationId);
    const curConversation = get_store_value(curConversationModel);

    // console.log('setConversation', conversation, targetConversationId);
    conversation.set(curConversation);

    // debugOutput.set(get(debugOutput) + '<br/>setConversation ' + targetConversationId + ' ' + curConversation);

    if (curConversation) {
        if (curConversation.projectId && (!get_store_value(projectId) || !get_store_value(project) || get_store_value(projectId) !== curConversation.projectId)) {
            loadProjectItem(curConversation.projectId);
        }
    }
}

function messageUser(userId) {
    if (!checkLoggedIn()) { return; }

    loadConversationByUser(userId);
    // loadConversation('r70dp2bf');
}

function gotoRoute(newPath) {
    // console.log(getPagePath()+ ' !== /' + newPath + ' : ' + (getPagePath() !== '/' + newPath));
    if (getPagePath() !== '/' + newPath.split(' ').join('%20') && typeof window !== 'undefined') { //  && !/\/projects\/.*\/details/.test(get(curPath)) //  && !/\/channels\/.*\/post/.test(get(curPath))
        goto(newPath);
        return true;
    }
    return false;
}

function showProjectInfo() {
    projectShowingInfo.set(true);
}

function getPagePath() {
    return get_store_value(curPath);
}

function showMenu(menuId, options) {
    if (get_store_value(curMenu) !== menuId) {
        dontAllowOverlayClose.set(options && options.allowClose === false);

        hidePrompt();
        if (!menuId) { console.error('Menu undefined: ' + promptId); }
        curMenu.set(menuId);
    }
}

function showPrompt(promptId, options) {
    if (get_store_value(curPrompt) !== promptId) {
        dontAllowOverlayClose.set(options && options.allowClose === false);
        switch (promptId) {
            case promptIds.SIGN_UP:
                signInRequired.set(options && options.signInRequired);
                break;
        }

        hideMenu();
        if (promptId) {
            curPrompt.set(promptId);
        } else if (DEBUG$1) {
            throw new Error('Prompt undefined: ' + promptId);
        }
    }
}

function closeOverlay() {
    hideMenu();
    hidePrompt();
}

function hideMenu() {
    if (get_store_value(curMenu)) {
        curMenu.set(null);
    }
}
function hidePrompt() {
    if (get_store_value(curPrompt)) {
        curPrompt.set(null);
    }
}

function showShareProjectDialog(projectId) {
    const projectModel = getProject(projectId);
    const project = get_store_value(projectModel);

    targetProject.set(project);

    showPrompt(promptIds.SHARE_PROJECT);
}

function showSharePostDialog(postId) {
    const postModel = getPost(postId);
    const post = get_store_value(postModel);

    targetPost.set(post);

    showPrompt(promptIds.SHARE_POST);
}


function showTogglePublicDialog() {
    const curProject = get_store_value(project);
    if (curProject) {
        if (!curProject.public) {
            showPrompt(promptIds.MAKE_PUBLIC);
        } else {
            showPrompt(promptIds.MAKE_PRIVATE);
        }
    }
}

function login$1(details) {
    details.username = trim(details.username);
    username.set(details.username);

    loggingIn.set(true);

    api.login(details).then(result => {
        if (result && !result.invalid && !result.error) {
            const userInfo = result;
            if (userInfo.id) {
                mergeUsers([userInfo]);
                setUser(userInfo.id);

                username.set(userInfo.username);
                usercode.set(userInfo.usercode);

                updateProjectLists();
            }
        } else {
            showPrompt(promptIds.LOG_IN_ERROR);
        }
        loggingIn.set(false);
    });
}

async function logOut(dontDisplayMessage) {
    const curUser = get_store_value(user);
    if (curUser && get_store_value(viewedUser) && curUser.id === get_store_value(viewedUser).id) {
        viewedUser.set(get_store_value(viewedUser));
    }
    userId.set(null);
    user.set(null);

    usercode.set('');

    updateProjectLists();

    await tick();
    checkDomain();

    // if (!dontDisplayMessage) {
    //     await tick();
    //     showPrompt(promptIds.LOGGED_OUT);
    // }
}

function checkLoggedIn() {
    if (!get_store_value(user)) {
        if (!get_store_value(userId)) {
            showPrompt(promptIds.SIGN_UP, {signInRequired: true});
        }

        return false;
    }
    return true;
}

function loadCurrentUser() {
    if (get_store_value(userId) && !get_store_value(user) && !get_store_value(loadingUsers)) { // TODO: not to check if loading here?
        loadUsers( { id: get_store_value(userId) } );
    }
}
function loadCurrentProject() {
    if (get_store_value(projectId) && !get_store_value(project) && !get_store_value(loadingProjects)) { // TODO: not to check if loading here?
        loadProjects( { id: get_store_value(projectId) } );
    }
}

function loadCurrentChannel() {
    if (get_store_value(channelId) && !get_store_value(channel) && !get_store_value(loadingChannels)) { // TODO: not to check if loading here?
        loadChannels( { id: get_store_value(channelId) } );
    }
}

function editCurrentPost() {
    const curTargetPost = get_store_value(targetPost);
    if (curTargetPost) {
        editPost(curTargetPost.id);
    }
}

function loadCurrentPost() {
    if (get_store_value(postId) && !get_store_value(post$q) && !get_store_value(loadingPosts)) { // TODO: not to check if loading here?
        loadPosts( { id: get_store_value(postId) } );
    }
}

function loadCurrentConversation() {
    if (get_store_value(conversationId) && !get_store_value(conversation)) { // && !get(loadingConversations)) {
        loadConversations( { id: get_store_value(conversationId) } );
    }
}

function newThread() {
    postType.set('thread');

    goto('posts/new');
}

function newThreadPost() {
    postType.set('threadPost');
    triggerNewThreadPost();
    // goto('posts/new');
}

function editPost(postId) {
    goto('posts/' + postId + '/edit');
}


function copyProjectLink(projectId) {
    const url = location.protocol + '//' + location.host + '/projects/' + projectId;
    copyToClipboard(url);
}

function copyProfileLink(userId) {
    const url = location.protocol + '//' + location.host + '/profile/' + userId;
    copyToClipboard(url);
}

function copyPostLink(postId) {
    const url = location.protocol + '//' + location.host + '/posts/' + postId;
    copyToClipboard(url);
}

ProjectsModel.on('projectAdded', loadProjectChannels);

function loadProjectChannels() {
    loadChannels( { projectId: get_store_value(projectId) } );
}

function checkUpdateProject(targetProject) {
    const curProject = get_store_value(project);
    if (curProject && curProject.id === targetProject.id) {
        project.set(targetProject);
    }
}

function projectToggleFollowing(projectId) {
    if (!checkLoggedIn()) { return; }

    const targetProjectModel = getProject(projectId);
    const targetProject = get_store_value(targetProjectModel);
    if (targetProject) {
        setFollowProject(targetProject, !targetProject.following);
        // updateProject(targetProject, {
        //     following: !targetProject.following,
        //     followCount: targetProject.followCount + (!targetProject.following ? 1 : -1),
        // });

        targetProjectModel.set(targetProject);
        checkUpdateProject(targetProject);
    }
}

function projectToggleLiked(projectId) {
    if (!checkLoggedIn()) { return; }

    const targetProjectModel = getProject(projectId);
    const targetProject = get_store_value(targetProjectModel);

    if (targetProject) {
        setLikeProject(targetProject, !targetProject.liked);
        // updateProject(targetProject, {
        //     liked: !targetProject.liked,
        //     likeCount: targetProject.likeCount + (!targetProject.liked ? 1 : -1),
        // });
        targetProjectModel.set(targetProject);
        checkUpdateProject(targetProject);
    }
}

async function makePublic() {
    if (!checkLoggedIn()) { return; }

    const curProject = get_store_value(project);
    if (curProject) {
        updateProject$1(curProject, {
            public: true,
            isNew: false,
        });
        project.set(curProject);

        await tick();
        showPrompt(promptIds.MAKE_PUBLIC_COMPLETE);
    }
}

async function makePrivate() {
    if (!checkLoggedIn()) { return; }

    const curProject = get_store_value(project);
    if (curProject) {
        updateProject$1(curProject, {
            public: false,
        });
        project.set(curProject);

        await tick();
        showPrompt(promptIds.MAKE_PRIVATE_COMPLETE);
    }
}

// export async function togglePublic() {
//     const curProject = get(project);
//     if (curProject) {
//         const details = {
//             public: !curProject.public,
//         }
//         if (details.public) {
//             details.isNew = false;
//         }
//         updateProject(curProject, details);
//         project.set(curProject);
//     }
// }

function saveProjectDetails(projectDetails, options) {
    if (!checkLoggedIn()) { return; }

    const curProject = get_store_value(project);
    if (curProject) {
        updateProject$1(curProject, projectDetails);
        project.set(curProject);

        {
            goto('projects/' + curProject.id);
            if (options && options.showProjectInfo) {
                showProjectInfo();
            }
            resetScrollRegionPosition('project');
        }
    }
}

function createProject(projectDetails) {
    if (!checkLoggedIn()) { return; }

    if (projectDetails.headerImage) {
        projectDetails.headerImage = projectDetails.headerImage;
        // projectDetails.headerImage = 'resource/headers/' + projectDetails.headerImage + '.jpg';
    }

    const newProjectModel = addProject$1(projectDetails);
    const newProject = get_store_value(newProjectModel);

    if (newProject) {
        loadProject(newProject.id);
        editProjectDetails({editingProjectMode: 'details2'});
    }
}

function reportProject(projectId) {
    if (!checkLoggedIn()) { return; }

    const targetProjectModel = getProject(projectId);
    const targetProject = get_store_value(targetProjectModel);

    targetProject.reported = true;
    targetProjectModel.set(targetProject);
    checkUpdateProject(targetProject);

    // TODO: report project
}

async function archiveProject(projectId) {
    if (!checkLoggedIn()) { return; }

    const targetProjectModel = getProject(projectId);
    const targetProject = get_store_value(targetProjectModel);

    if (getIsProjectTeamMember(targetProject)) { // targetProject.isOwner) {
        const details = { archived: true };
        targetProject.archived = details.archived;
        targetProjectModel.set(targetProject);
        checkUpdateProject(targetProject);
        updateProject$1(targetProject, details, true);
        resetScrollRegionPosition('project');

        await tick();
        showPrompt(promptIds.PROJECT_ARCHIVED);
    }
}

async function unarchiveProject(projectId) {
    if (!checkLoggedIn()) { return; }

    const targetProjectModel = getProject(projectId);
    const targetProject = get_store_value(targetProjectModel);

    if (getIsProjectTeamMember(targetProject)) { // targetProject.isOwner) {
        const details = { archived: false };
        targetProject.archived = details.archived;
        targetProjectModel.set(targetProject);
        checkUpdateProject(targetProject);
        updateProject$1(targetProject, details, true);

        await tick();
        showPrompt(promptIds.PROJECT_UNARCHIVED);
    }
}

function checkUpdateUser(targetUser) {
    const curViewedUser = get_store_value(viewedUser);
    if (curViewedUser && curViewedUser.id === targetUser.id) {
        viewedUser.set(targetUser);
    }
}
function requestConnection(userId) {
    if (!checkLoggedIn()) { return; }

    const userModel = getUser(userId);
    const user = get_store_value(userModel);

    user.requestedConnection = true;
    checkUpdateUser(user);

    // TODO: request connection
}

function reportUser(userId) {
    if (!checkLoggedIn()) { return; }

    const userModel = getUser(userId);
    const user = get_store_value(userModel);

    user.reported = true;
    checkUpdateUser(user);

    // TODO: report user
}

function createUser(newUserModel) {
    const newUser = get_store_value(newUserModel);

    if (newUser) {
        newUser.usercode = generateId$1();

        addUser$1(newUserModel);
    }
}

function addUser$1(newUserModel) {
	const newUser = get_store_value(newUserModel);

    // newUser.usercode = ''; // test breaking

	newUser.createdAt = (new Date()).getTime(); // use for initial sort values
	newUser.modifiedAt = newUser.createdAt;
    newUser.lastActiveAt = newUser.createdAt;

    const newUserDetails = Object.assign({}, newUser);
    newUserDetails.username = '';

    newUserDetails.firstName = trim(newUserDetails.firstName);
    newUserDetails.lastName = trim(newUserDetails.lastName);


    const localUserDetails = Object.assign({}, newUser);
    delete localUserDetails.email;

    // TODO: use added item
    mergeUsers([localUserDetails]);
    setUser(newUser.id);


    showPrompt(promptIds.SET_ACCOUNT, {allowClose: false});

    loadingUsers.set(true);
	api.addUser({details: newUserDetails}).then(result => {
        if (result && !result.error) {
            if (!result.invalid) {
                // newUser._id = result.insertedId;

                // const localUserDetails = Object.assign({}, newUser);
                // delete localUserDetails.email;

                // // TODO: use added item
                // mergeUsers([localUserDetails]);
                // setUser(newUser.id);

                // username.set(newUser.username);
                usercode.set(newUser.usercode);

                // showPrompt(promptIds.SET_ACCOUNT);

                // goto('profile/' + newUser.id);
            } else {
                logOut();
                switch (result.errorType) {
                    case 'username_exists':
                        showPrompt(promptIds.USERNAME_EXISTS);
                        break;
                    case 'email_exists':
                        showPrompt(promptIds.SIGN_UP_EMAIL_EXISTS);
                        break;
                }
            }
        }
        loadingUsers.set(false);
	});

	// const curUsers = get(users);
	// curUsers.unshift(newUserModel);
	// users.set(curUsers);

	return newUserModel;
}

function setAccountDetails(userDetails, resetPass) {
    if (userDetails && userDetails.id) {
        const curUserId = userDetails.id;
        delete userDetails.id;

        if (resetPass) {
            delete userDetails.username;
        } else {
            userDetails.username = trim(userDetails.username);
        }

        const curUserModel = getUser(curUserId);
        if (curUserModel) {
            if (resetPass) {
                userDetails.resetPass = true;
            } else {
                const localUserDetails = Object.assign({}, userDetails);
                delete localUserDetails.pass;

                setUserDetails(curUserModel, localUserDetails);

                username.set(userDetails.username);
                newUsername.set(userDetails.username);
            }

            // console.log('userDetails.resetPass', userDetails.resetPass);

            // goto('profile/' + curUserId);

            api.updateUser({details: userDetails}).then(result => {
                if (result && !result.error && !result.invalid) {
                    const newDetails = {set: true};
                    if (resetPass) {
                        newDetails.resetPass = false;
                    }
                    console.log('newDetails', newDetails);

                    setUserDetails(curUserModel, newDetails);

                    if (resetPass) {
                        showPrompt(promptIds.PASSWORD_RESET);
                    } else {
                        showPrompt(promptIds.ACCOUNT_READY);
                    }

                    // goto('profile/' + curUserId);
                } else {
                    if (result.invalid) {
                        switch (result.errorType) {
                            case 'username_exists':
                                showPrompt(promptIds.USERNAME_EXISTS);

                                setUserDetails(curUserModel, {username: ''});
                                break;
                        }
                    }
                }
            });
        }
    }
}

function sendPasswordReset$1(email) {
    if (email) {
        api.sendPasswordReset({email}).then(result => {
            if (result && !result.error && !result.invalid) {
                showPrompt(promptIds.FORGOT_PASSWORD_RESET);
            }
        });
    }
}


function updateUser$1(userDetails) {
    if (userDetails && userDetails.id) {
        const curUserId = userDetails.id;
        delete userDetails.id;

        const curUserModel = getUser(curUserId);
        if (curUserModel) {
            const localUserDetails = Object.assign({}, userDetails);

            setUserDetails(curUserModel, localUserDetails);

            api.updateUser({details: userDetails}).then(result => {
                // if (result && !result.error && !result.invalid) {

                // }
            });
        }
    }
}

function setUserDetails(userModel, userDetails) {
    const curUser = get_store_value(userModel);

    if (curUser) {
        Object.assign(curUser, userDetails);
        userModel.set(curUser);

        if (get_store_value(viewedUser) && get_store_value(viewedUser).id == curUser.id) {
            viewedUser.set(curUser);
        }
        if (get_store_value(user) && get_store_value(user).id == curUser.id) {
            user.set(curUser);
        }
    }
}

function saveProfile(profileDetails, options) {
    if (!checkLoggedIn()) { return; }

    const curUser = get_store_value(user);
    if (curUser) {
        profileDetails.id = curUser.id;
        updateUser$1(profileDetails);

        user.set(curUser);

        goto('profile/' + curUser.id);
        resetScrollRegionPosition('profile');
    }
}

appModel.on('followPost', followPost$1);

function checkUpdatePost(targetPost) {
    const curPost = get_store_value(post$q);
    if (curPost && curPost.id === targetPost.id) {
        post$q.set(targetPost);
    }
}

function createPost(postDetails) {
    if (!checkLoggedIn()) { return; }

    const result = addPost$1(postDetails);

    switch (postDetails.type) {
        case 'thread':
            loadChannel(postDetails.channelId);
            break;
        case 'threadPost':
            loadPost(postDetails.threadId, { anchorToBottom: true });
            break;
    }
    return result;
}

function savePost(postDetails) {
    if (!checkLoggedIn()) { return; }

    const curPost = get_store_value(post$q);
    let result = null;
    if (curPost) {
        result = updatePost$1(curPost, postDetails);
        post$q.set(curPost);

        if (curPost.type === 'thread') {
            goto('posts/' + curPost.id);
        } else {
            goto('posts/' + curPost.threadId);
        }
        resetScrollRegionPosition('thread');
    }
    return result;
}

function postToggleLiked(postId) {
    if (!checkLoggedIn()) { return; }

    const targetPostModel = getPost(postId);
    const targetPost = get_store_value(targetPostModel);

    if (targetPost) {
        setLikePost(targetPost, !targetPost.liked);
        targetPostModel.set(targetPost);
        checkUpdatePost(targetPost);
    }
}

function followPost$1(postId, unfollow) {
    if (!checkLoggedIn()) { return; }

    const targetPostModel = getPost(postId);
    const targetPost = get_store_value(targetPostModel);
    if (targetPost) {
        const updated = setFollowPost(targetPost, unfollow);

        if (updated) {
            targetPostModel.set(targetPost);
            checkUpdatePost(targetPost);
        }
    }
}

const menuIds = {
    PROJECT_OWNER_MENU: 'PROJECT_OWNER_MENU',
    PROJECT_MENU: 'PROJECT_MENU',
    PROFILE_OWNER_MENU: 'PROFILE_OWNER_MENU',
    PROFILE_MENU: 'PROFILE_MENU',
    MAIN_OPTIONS: 'MAIN_OPTIONS',
    POST_OPTIONS: 'POST_OPTIONS',
    THREAD_POST_OPTIONS: 'THREAD_POST_OPTIONS',
};


const menus = {
    PROJECT_OWNER_MENU: {
        menuItems: [
            {
                label: 'Copy Project Link',
                condition: () => { const p = get_store_value(project); return !p.archived },
                action: () => { const p = get_store_value(project); p && p.id && copyProjectLink(p.id); },
            },
            {
                label: 'Edit Project',
                condition: () => { const p = get_store_value(project); return p && !p.archived },
                action: editProjectDetails,
            },
            {
                label: 'Make Private...',
                condition: () => { const p = get_store_value(project); return p && p.public && !p.archived },
                action: showTogglePublicDialog,
            },
            {
                label: 'Make Public...',
                condition: () => { const p = get_store_value(project); return p && !p.public && !p.archived },
                action: showTogglePublicDialog,
            },
            {
                label: 'Achive Project...',
                condition: () => { const p = get_store_value(project); return p && !p.archived },
                action: () => { showPrompt(promptIds.PROJECT_ARCHIVE); },
            },
            {
                label: 'Unarchive Project',
                condition: () => { const p = get_store_value(project); return p && p.archived },
                action: () => { const p = get_store_value(project); p && p.id && unarchiveProject(p.id); },
            },
        ],
    },
    PROJECT_MENU: {
        menuItems: [
            {
                label: 'Copy Project Link',
                action: () => { const p = get_store_value(project); p && p.id && copyProjectLink(p.id); },
            },
            {
                label: 'Follow Project',
                condition: () => { const p = get_store_value(project); return p && !p.following },
                action: () => { const p = get_store_value(project); p && p.id && projectToggleFollowing(p.id); },
            },
            {
                label: 'Unfollow Project',
                condition: () => { const p = get_store_value(project); return p && p.following },
                action: () => { const p = get_store_value(project); p && p.id && projectToggleFollowing(p.id); },
            },
            {
                label: () => { const p = get_store_value(project); return (p && !p.reported) ? 'Report Project' : 'Project Reported' },
                disabled: () => { const p = get_store_value(project); return p && p.reported },
                action: () => { const p = get_store_value(project); p && p.id && reportProject(p.id); },
                visible: () => { return get_store_value(showBetaFeatures) },
                disabled: true,
            },
        ],
    },
    PROFILE_OWNER_MENU: {
        menuItems: [
            {
                label: 'Copy Profle Link',
                action: () => { const u = get_store_value(viewedUser); u && u.id && copyProfileLink(u.id); },
            },
            {
                label: 'Edit Profile',
                action: editProfile,
            },
        ],
    },
    PROFILE_MENU: {
        menuItems: [
            {
                label: 'Copy Profle Link',
                action: () => { const u = get_store_value(viewedUser); u && u.id && copyProfileLink(u.id); },
            },
            {
                label: 'Send Message',
                action: () => { const u = get_store_value(viewedUser); u && u.id && messageUser(u.id); },
                visible: () => { return get_store_value(showBetaFeatures) },
            },
            {
                label: () => { const u = get_store_value(viewedUser); return (u && !u.requestedConnection) ? 'Send Connection Request' : 'Connection Request Sent' },
                disabled: () => { const u = get_store_value(viewedUser); return u && u.requestedConnection },
                action: () => { const u = get_store_value(viewedUser); u && u.id && requestConnection(u.id); },
                visible: () => { return get_store_value(showBetaFeatures) },
            },
            {
                label: () => { const u = get_store_value(viewedUser); return (u && !u.reported) ? 'Report User' : 'User Reported' },
                disabled: () => { const u = get_store_value(viewedUser); return u && u.reported },
                action: () => { const u = get_store_value(viewedUser); u && u.id && reportUser(u.id); },
                disabled: true,
                visible: () => { return get_store_value(showBetaFeatures) },
            },
        ],
    },
    MAIN_OPTIONS: {
        menuItems: [
            // {
            //     label: 'My Profile',
            //     action: () => { loadProfile(get(userId)) },
            // },
            {
                label: 'About Flock',
                action: () => { loadProject('hPS9cRq2'); },
            },
            {
                label: 'Log Out',
                action: logOut,
            },
            // {
            //     label: 'Feedback',
            //     action: () => { loadProject('hPS9cRq2') },
            // },
        ],
    },
    POST_OPTIONS: {
        menuItems: [
            {
                label: 'Edit Post',
                action: editCurrentPost,
            },
            {
                label: 'Remove Post',
                visible: () => { return get_store_value(showBetaFeatures) },
                disabled: true,
            },
            // {
            //     label: 'Report Post',
            //     visible: () => { return get(showBetaFeatures) },
            //     disabled: true,
            // },
        ],
    },
    THREAD_POST_OPTIONS: {
        menuItems: [
            {
                label: 'Edit Post',
                action: editCurrentPost,
                visible: () => {
                    const curPost = get_store_value(post$q);
                    const canEditPost = (curPost && curPost.userId && curPost.userId === get_store_value(userId)) || false;
                    return canEditPost;
                    // const curPost = get(post);
                    // return (curPost && curPost.userId && curPost.userId === get(userId)) || false;
                }
            },
            {
                label: 'Remove Post',
                visible: () => {
                    if (!get_store_value(showBetaFeatures)) {
                        return;
                    }
                    const curPost = get_store_value(post$q);
                    const canEditPost = (curPost && curPost.userId && curPost.userId === get_store_value(userId)) || false;
                    return canEditPost;
                    // const curPost = get(post);
                    // return (curPost && curPost.userId && curPost.userId === get(userId)) || false;
                    // return get(showBetaFeatures)
                },
                disabled: true,
            },
            {
                label: () => { const curPost = get_store_value(post$q); return !curPost.following ? 'Follow Post' : 'Unfollow Post' },
                action: () => { const curPost = get_store_value(post$q); !curPost.following ? followPost$1(curPost.id) : followPost$1(curPost.id, true); },
                visible: () => {
                    const curPost = get_store_value(post$q);
                    const curProject = get_store_value(project);
                    const isTeamMember = (curProject && getIsProjectTeamMember(curProject)) || false;
                    const canEditPost = (curPost && curPost.userId && curPost.userId === get_store_value(userId)) || false;
                    return !canEditPost && !isTeamMember;
                    // return (curPost && curPost.userId && curPost.userId !== get(userId)) || false;
                }
            },
            // {
            //     label: 'Report Post',
            //     visible: () => { return get(showBetaFeatures) },
            //     disabled: true,
            // },
        ],
    },
};

/* src\components\Button.svelte generated by Svelte v3.23.0 */

const css$1 = {
	code: ".button.svelte-l32gtw{text-decoration:none}.iconContainer.svelte-l32gtw{display:inline-block;vertical-align:middle}.iconInnerContainer.svelte-l32gtw{position:absolute;display:flex;align-items:center}.icon.svelte-l32gtw{position:absolute;transform:scale(0.5, 0.5);transform-origin:left}.activeButton.svelte-l32gtw{cursor:pointer}.disabled.svelte-l32gtw{cursor:initial;opacity:0.25}",
	map: "{\"version\":3,\"file\":\"Button.svelte\",\"sources\":[\"Button.svelte\"],\"sourcesContent\":[\"<script>\\r\\n    export let href = null;\\r\\n    export let onClick = null;\\r\\n\\r\\n    export let className = '';\\r\\n    export let disabled = false;\\r\\n\\r\\n    export let style = null;\\r\\n    export let buttonContentStyle = null;\\r\\n    export let iconStyle = null;\\r\\n\\r\\n    export let icon = null;\\r\\n\\r\\n    export let element = null;\\r\\n\\r\\n    // let hasSlots = $$props.$$slots;\\r\\n</script>\\r\\n\\r\\n{#if href && !disabled}\\r\\n    <a {href} bind:this=\\\"{element}\\\" class=\\\"button {className}\\\" class:disabled=\\\"{disabled}\\\" class:activeButton={!disabled &&  onClick} on:click={onClick} {style}>\\r\\n        <div class=\\\"buttonContent\\\" style=\\\"{buttonContentStyle}\\\">\\r\\n            <slot></slot>{#if icon}<div class=\\\"iconContainer\\\"><div class=\\\"iconInnerContainer\\\">\\r\\n                <img class=\\\"icon\\\" src=\\\"{icon}\\\" alt=\\\"read more\\\" {iconStyle} />\\r\\n            </div></div>{/if}\\r\\n        </div>\\r\\n    </a>\\r\\n{:else}\\r\\n    <div bind:this=\\\"{element}\\\" class=\\\"button {className}\\\" class:disabled=\\\"{disabled}\\\" class:activeButton={!disabled &&  onClick} on:click={!disabled ? onClick : null} {style}>\\r\\n        <div class=\\\"buttonContent\\\" style=\\\"{buttonContentStyle}\\\">\\r\\n            <slot></slot>{#if icon}<div class=\\\"iconContainer\\\"><div class=\\\"iconInnerContainer\\\">\\r\\n                <img class=\\\"icon\\\" src=\\\"{icon}\\\" alt=\\\"read more\\\" style=\\\"{iconStyle}\\\" />\\r\\n            </div></div>{/if}\\r\\n        </div>\\r\\n    </div>\\r\\n{/if}\\r\\n\\r\\n<style>\\r\\n    .button {\\r\\n        text-decoration: none;\\r\\n    }\\r\\n\\r\\n    .iconContainer {\\r\\n        display: inline-block;\\r\\n        vertical-align: middle;\\r\\n    }\\r\\n\\r\\n    .iconInnerContainer {\\r\\n        position: absolute;\\r\\n        display: flex;\\r\\n        align-items: center;\\r\\n        /* position: absolute; */\\r\\n    }\\r\\n\\r\\n    .icon {\\r\\n        position: absolute;\\r\\n        transform: scale(0.5, 0.5);\\r\\n        transform-origin: left;\\r\\n        /* vertical-align: middle;\\r\\n        width: 50%; */\\r\\n    }\\r\\n\\r\\n    .activeButton {\\r\\n        cursor: pointer;\\r\\n    }\\r\\n\\r\\n\\t.disabled {\\r\\n        cursor: initial;\\r\\n    \\topacity: 0.25;\\r\\n\\t}\\r\\n</style>\"],\"names\":[],\"mappings\":\"AAqCI,OAAO,cAAC,CAAC,AACL,eAAe,CAAE,IAAI,AACzB,CAAC,AAED,cAAc,cAAC,CAAC,AACZ,OAAO,CAAE,YAAY,CACrB,cAAc,CAAE,MAAM,AAC1B,CAAC,AAED,mBAAmB,cAAC,CAAC,AACjB,QAAQ,CAAE,QAAQ,CAClB,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,MAAM,AAEvB,CAAC,AAED,KAAK,cAAC,CAAC,AACH,QAAQ,CAAE,QAAQ,CAClB,SAAS,CAAE,MAAM,GAAG,CAAC,CAAC,GAAG,CAAC,CAC1B,gBAAgB,CAAE,IAAI,AAG1B,CAAC,AAED,aAAa,cAAC,CAAC,AACX,MAAM,CAAE,OAAO,AACnB,CAAC,AAEJ,SAAS,cAAC,CAAC,AACJ,MAAM,CAAE,OAAO,CAClB,OAAO,CAAE,IAAI,AACjB,CAAC\"}"
};

const Button = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let { href = null } = $$props;
	let { onClick = null } = $$props;
	let { className = "" } = $$props;
	let { disabled = false } = $$props;
	let { style = null } = $$props;
	let { buttonContentStyle = null } = $$props;
	let { iconStyle = null } = $$props;
	let { icon = null } = $$props;
	let { element = null } = $$props;
	if ($$props.href === void 0 && $$bindings.href && href !== void 0) $$bindings.href(href);
	if ($$props.onClick === void 0 && $$bindings.onClick && onClick !== void 0) $$bindings.onClick(onClick);
	if ($$props.className === void 0 && $$bindings.className && className !== void 0) $$bindings.className(className);
	if ($$props.disabled === void 0 && $$bindings.disabled && disabled !== void 0) $$bindings.disabled(disabled);
	if ($$props.style === void 0 && $$bindings.style && style !== void 0) $$bindings.style(style);
	if ($$props.buttonContentStyle === void 0 && $$bindings.buttonContentStyle && buttonContentStyle !== void 0) $$bindings.buttonContentStyle(buttonContentStyle);
	if ($$props.iconStyle === void 0 && $$bindings.iconStyle && iconStyle !== void 0) $$bindings.iconStyle(iconStyle);
	if ($$props.icon === void 0 && $$bindings.icon && icon !== void 0) $$bindings.icon(icon);
	if ($$props.element === void 0 && $$bindings.element && element !== void 0) $$bindings.element(element);
	$$result.css.add(css$1);

	return `${href && !disabled
	? `<a${add_attribute("href", href, 0)} class="${[
			"button " + escape(className) + " svelte-l32gtw",
			(disabled ? "disabled" : "") + " " + (!disabled && onClick ? "activeButton" : "")
		].join(" ").trim()}"${add_attribute("style", style, 0)}${add_attribute("this", element, 1)}><div class="${"buttonContent"}"${add_attribute("style", buttonContentStyle, 0)}>${$$slots.default ? $$slots.default({}) : ``}${icon
		? `<div class="${"iconContainer svelte-l32gtw"}"><div class="${"iconInnerContainer svelte-l32gtw"}"><img class="${"icon svelte-l32gtw"}"${add_attribute("src", icon, 0)} alt="${"read more"}"${add_attribute("iconStyle", iconStyle, 0)}></div></div>`
		: ``}</div></a>`
	: `<div class="${[
			"button " + escape(className) + " svelte-l32gtw",
			(disabled ? "disabled" : "") + " " + (!disabled && onClick ? "activeButton" : "")
		].join(" ").trim()}"${add_attribute("style", style, 0)}${add_attribute("this", element, 1)}><div class="${"buttonContent"}"${add_attribute("style", buttonContentStyle, 0)}>${$$slots.default ? $$slots.default({}) : ``}${icon
		? `<div class="${"iconContainer svelte-l32gtw"}"><div class="${"iconInnerContainer svelte-l32gtw"}"><img class="${"icon svelte-l32gtw"}"${add_attribute("src", icon, 0)} alt="${"read more"}"${add_attribute("style", iconStyle, 0)}></div></div>`
		: ``}</div></div>`}`;
});

const img = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAA0CAYAAACKJRg7AAAAt0lEQVRYR+2WsQ6CQBBEH6X8jsVVtrb4Q1b+kLa2VFP4O9IaEkyUcORybqJrlhbu5WZ2Z0KD8dMY8wjg54469zCltAWOwH4y4wqcJN1y5mQlT7Ae2MwOD8AuB10DnoEuc5OLpMPSuzXgfeF2T8Ygqf060FzyOGG7oYz+mK5NbQidR69GtnPJpmsTbTPfoKr6irYpC6Lz6JWJfP/KueRom9dxVpWD+c9StE1ZEJ1Hr0zkX7XNT0h+AOv7hDUudK+1AAAAAElFTkSuQmCC";

const img$1 = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADYAAAA2CAYAAACMRWrdAAABtUlEQVRoQ+3Y0U3DMBAGYJ+zQAeILG8AbBAmgBEYgRHoBKwAG5QJgAmACXCcBbqAbWSJSKgizTU+J5fKeb40/u5349ggzvSCM3WJAltbsiWxkhiTDpSpyCQI9DBKYuhWIQq11pfOuUcAaABgBwBbY8wn4lZ0yeyJRZT3/lUIsfkzyr2U8poSNytsANX7Iu7KGGPQsRwpnA02guqH+GytvVsNDIkSAPDetm2zChgW9YvZWmsf2MNOQYUQvqqqaowxe9awJVGxMVleHkujssA4oMhhXFCkME4oMhg3FAmMIyoZxhWVBNNab7z33wdf6f+urdSLL2YBn7yO1XXdSCnj9uPotQQqNbG4r/oYgwkhyPdaiGemfXkopXZCiBvEg2bHTZ6KERP/Z865NwC44IZLgnHGJcO44khgHHFkMG44UhgnHDmMCy4LjAMuG2xpXFbYBNyLtfYWsdiPlmSHnYJb1YFp31rk59c6DkwP58sIjuzcPmnbMjrJBwoGcKSoRWC9Vyl1H3ffIQTTdd3T1EYN3TfLy4N60JjfKzBMlzjVlMQ4pYEZS0kM0yVONSUxTmlgxnK2if0AG0pERvAWreEAAAAASUVORK5CYII=";

const img$2 = "data:image/png;base64,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";

/* src\routes\_components\AvatarIcon.svelte generated by Svelte v3.23.0 */

const css$2 = {
	code: ".avatarIcon.svelte-vbc684{box-sizing:border-box;height:36px;width:36px;border-radius:999px;background-color:#C8C8C8;overflow:hidden;border:1px solid #cacaca}.avatarIconImage.svelte-vbc684{width:100%;height:100%;background-size:cover}.button.svelte-vbc684{cursor:pointer}",
	map: "{\"version\":3,\"file\":\"AvatarIcon.svelte\",\"sources\":[\"AvatarIcon.svelte\"],\"sourcesContent\":[\"<script>\\n    // import { writable } from 'svelte/store';\\n\\n    import { getContentImage } from '../../models/appModel';\\n\\n    // import ProfileDefaultImage from \\\"../../assets/icons/profileDefault_small.png\\\";\\n    import ProfileDefaultImage from \\\"../../assets/icons/profileDefault.png\\\";\\n\\n    export let user = null; // writable({})\\n\\n    export let useThumb = false;\\n\\n    export let onClick = null;\\n\\n    let avatarImageSrc = ProfileDefaultImage;\\n\\n    $: thumbImageId = ($user && $user.username) || '_default';\\n    $: avatarImage = ($user && $user.avatarImage) || null;\\n\\n    $: {\\n        if (avatarImage) {\\n            avatarImageSrc = getContentImage(avatarImage, useThumb);\\n        } else {\\n            avatarImageSrc = ProfileDefaultImage;\\n        }\\n    }\\n    $: {\\n        if ($user && $user.avatarImageRawSrc) {\\n            avatarImageSrc = $user.avatarImageRawSrc;\\n        }\\n    }\\n\\n    // $: profileImageSrc = 'content/users/' + thumbImageId + '/thumb.jpg';\\n\\n    // $: profileImageSrc = ProfileDefaultImage;\\n\\n    $: userStyle = ($user && $user.style) || null;\\n    $: profileImageBgStyling = (!avatarImage && userStyle && userStyle.profileTop !== undefined) ? 'background-image: linear-gradient(' + userStyle.profileTop + ', ' + userStyle.profileBottom + ');' : '';\\n</script>\\n\\n<div class=\\\"avatarIcon\\\" style=\\\"{profileImageBgStyling}\\\" class:button=\\\"{onClick}\\\" on:click=\\\"{onClick}\\\">\\n    <div class=\\\"avatarIconImage\\\" style='background-image: url({avatarImageSrc})'></div>\\n</div>\\n\\n<style>\\n    .avatarIcon {\\n        box-sizing: border-box;\\n\\n        height: 36px;\\n        width: 36px;\\n\\n        border-radius: 999px;\\n\\n        background-color: #C8C8C8;\\n        /* background-size: cover; */\\n\\n        overflow: hidden;\\n\\n        border: 1px solid #cacaca;\\n    }\\n\\n    .avatarIconImage {\\n        width: 100%;\\n        height: 100%;\\n\\n        background-size: cover;\\n    }\\n\\n    .button {\\n        cursor: pointer;\\n    }\\n</style>\"],\"names\":[],\"mappings\":\"AA6CI,WAAW,cAAC,CAAC,AACT,UAAU,CAAE,UAAU,CAEtB,MAAM,CAAE,IAAI,CACZ,KAAK,CAAE,IAAI,CAEX,aAAa,CAAE,KAAK,CAEpB,gBAAgB,CAAE,OAAO,CAGzB,QAAQ,CAAE,MAAM,CAEhB,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,AAC7B,CAAC,AAED,gBAAgB,cAAC,CAAC,AACd,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CAEZ,eAAe,CAAE,KAAK,AAC1B,CAAC,AAED,OAAO,cAAC,CAAC,AACL,MAAM,CAAE,OAAO,AACnB,CAAC\"}"
};

const AvatarIcon = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let $user;
	let { user = null } = $$props; // writable({})
	$user = get_store_value(user);
	let { useThumb = false } = $$props;
	let { onClick = null } = $$props;
	let avatarImageSrc = img$2;
	if ($$props.user === void 0 && $$bindings.user && user !== void 0) $$bindings.user(user);
	if ($$props.useThumb === void 0 && $$bindings.useThumb && useThumb !== void 0) $$bindings.useThumb(useThumb);
	if ($$props.onClick === void 0 && $$bindings.onClick && onClick !== void 0) $$bindings.onClick(onClick);
	$$result.css.add(css$2);
	$user = get_store_value(user);
	let thumbImageId = $user && $user.username || "_default";
	let avatarImage = $user && $user.avatarImage || null;

	 {
		{
			if (avatarImage) {
				avatarImageSrc = getContentImage(avatarImage, useThumb);
			} else {
				avatarImageSrc = img$2;
			}
		}
	}

	 {
		{
			if ($user && $user.avatarImageRawSrc) {
				avatarImageSrc = $user.avatarImageRawSrc;
			}
		}
	}

	let userStyle = $user && $user.style || null;

	let profileImageBgStyling = !avatarImage && userStyle && userStyle.profileTop !== undefined
	? "background-image: linear-gradient(" + userStyle.profileTop + ", " + userStyle.profileBottom + ");"
	: "";

	return `<div class="${["avatarIcon svelte-vbc684", onClick ? "button" : ""].join(" ").trim()}"${add_attribute("style", profileImageBgStyling, 0)}><div class="${"avatarIconImage svelte-vbc684"}" style="${"background-image: url(" + escape(avatarImageSrc) + ")"}"></div>
</div>`;
});

/* src\routes\_components\HeaderBar.svelte generated by Svelte v3.23.0 */

const css$3 = {
	code: ".headerBar.svelte-sg9xl7.svelte-sg9xl7{position:absolute;top:0;left:0;width:100%;height:60px;background:#ffffff;box-shadow:0 2px 3px 0 rgba(0,0,0,0.12)}.header.svelte-sg9xl7.svelte-sg9xl7{font-size:2.1rem;font-weight:400;position:absolute;top:14px;left:20px;right:86px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.header.svelte-sg9xl7 a.svelte-sg9xl7{text-decoration:none}.header.loggedOut.svelte-sg9xl7.svelte-sg9xl7{right:140px}.header.hasBack.svelte-sg9xl7.svelte-sg9xl7{left:50px}.hasSuperHeader.svelte-sg9xl7 .header.svelte-sg9xl7{top:22px;font-size:2.0rem}.superHeader.svelte-sg9xl7.svelte-sg9xl7{font-size:1.2rem;position:absolute;top:8px;left:20px;right:140px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.superHeader.svelte-sg9xl7 a.svelte-sg9xl7{text-decoration:none;color:#aaaaaa}.superHeader.hasBack.svelte-sg9xl7.svelte-sg9xl7{left:50px}.logo.svelte-sg9xl7.svelte-sg9xl7{position:absolute;top:12px;left:15px}.logo.svelte-sg9xl7 img.svelte-sg9xl7{width:50%}.avatarIcon.svelte-sg9xl7.svelte-sg9xl7{position:absolute;top:11px;right:41px}.profileHeader.svelte-sg9xl7.svelte-sg9xl7{position:absolute;top:12px;left:20px;right:86px}.profileHeader.svelte-sg9xl7.svelte-sg9xl7 .avatarIcon{position:absolute}.profileHeader.hasBack.svelte-sg9xl7.svelte-sg9xl7{left:50px}.profileInfo.svelte-sg9xl7.svelte-sg9xl7{position:absolute;left:45px}.profileInfo.svelte-sg9xl7 .profileDisplayName.svelte-sg9xl7{font-size:1.6rem;font-weight:700;margin-top:-1px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.profileUsername.svelte-sg9xl7.svelte-sg9xl7{font-size:1.2rem;margin-top:-4px;color:#999999}.headerBar.svelte-sg9xl7.svelte-sg9xl7 .optionsButton{position:absolute;top:8px;right:0;width:28px;height:26px;padding:8px 3px}.headerBar.svelte-sg9xl7.svelte-sg9xl7 .optionsButton .icon{margin-top:1px;margin-left:5px}.button.svelte-sg9xl7.svelte-sg9xl7{cursor:pointer}.backButton.svelte-sg9xl7.svelte-sg9xl7{position:absolute;top:7px;left:5px;padding:10px;width:26px;height:26px;cursor:pointer}.hasSuperHeader.svelte-sg9xl7 .backButton.svelte-sg9xl7{top:13px}.signInButtonContainer.svelte-sg9xl7.svelte-sg9xl7{position:absolute;right:0}.headerBar.svelte-sg9xl7.svelte-sg9xl7 .signInButton{display:inline-block;float:right}.headerBar.svelte-sg9xl7.svelte-sg9xl7 .signInButton .buttonContent{margin:11px 0px;padding:6px 6px;margin-top:15px;font-size:1.3rem;font-weight:700}.headerBar.svelte-sg9xl7.svelte-sg9xl7 .signUpButton{display:inline-block;float:right}.headerBar.svelte-sg9xl7.svelte-sg9xl7 .signUpButton .buttonContent{margin:11px;margin-right:13px;margin-left:6px;margin-top:15px;padding:6px 11px;font-size:1.3rem;font-weight:700;background-color:#222222;border-radius:999px;color:#ffffff}",
	map: "{\"version\":3,\"file\":\"HeaderBar.svelte\",\"sources\":[\"HeaderBar.svelte\"],\"sourcesContent\":[\"<script>\\r\\n    import { get, writable } from 'svelte/store';\\r\\n    import { goto } from '@sapper/app';\\r\\n\\r\\n    import locale from '../../locale';\\r\\n    import promptIds from '../../config/promptIds';\\r\\n    import { menuIds } from '../../config/menus';\\r\\n\\r\\n    import config from '../../config';\\r\\n\\r\\n    import Button from '../../components/Button.svelte';\\r\\n\\r\\n\\timport OptionsMenuIcon from \\\"../../assets/icons/menu.png\\\";\\r\\n\\r\\n    import { getSectionByPath, getIdForSection } from \\\"../../models/sectionsModel\\\";\\r\\n\\r\\n    import { getUserModelFromData } from '../../models/usersModel';\\r\\n\\r\\n    // import { getNotifications } from \\\"../../models/notificationsModel\\\";\\r\\n\\r\\n    import {\\r\\n        prevPath,\\r\\n        viewMode,\\r\\n        projectId,\\r\\n        channelId,\\r\\n        project,\\r\\n        channel,\\r\\n        conversationGroupId,\\r\\n        conversation,\\r\\n        viewedUser,\\r\\n        newConversation,\\r\\n        user,\\r\\n        userId,\\r\\n        loggingIn,\\r\\n        lastPreProjectPath,\\r\\n        getIsCurrentUser,\\r\\n        showBetaFeatures,\\r\\n        goHome,\\r\\n    } from '../../models/appModel';\\r\\n\\r\\n    import  {\\r\\n        getConversationOtherUser,\\r\\n    } from '../../models/conversationsModel';\\r\\n\\r\\n    import {\\r\\n        loadProfile,\\r\\n        showMenu,\\r\\n        showPrompt,\\r\\n        loadCurrentUser,\\r\\n    } from '../../actions/appActions';\\r\\n\\r\\n    import BackIcon from \\\"../../assets/icons/back.png\\\";\\r\\n    import AvatarIcon from './AvatarIcon.svelte';\\r\\n\\r\\n    export let segment;\\r\\n    export let path;\\r\\n\\r\\n\\t// $: getNotifications({ userId: $userId, getUnviewed: true });\\r\\n\\r\\n    loadCurrentUser();\\r\\n\\r\\n    $: isCurrentUser = $user && getIsCurrentUser($viewedUser && $viewedUser.id);\\r\\n\\r\\n    $: appState = {\\r\\n        viewMode: $viewMode,\\r\\n        viewingOwnProfile: isCurrentUser,\\r\\n        // viewingOwnProfile: $viewedUser ? $viewedUser.isCurrentUser : false,\\r\\n    };\\r\\n\\r\\n    $: loggedIn = !!$user || $loggingIn;\\r\\n\\r\\n    $: curSection = getSectionByPath(path, appState);\\r\\n    $: isProjectView = curSection ? curSection.isProjectView : false;\\r\\n    $: parentPath = curSection ? curSection.parentPath : null;\\r\\n    $: showBack = curSection ? curSection.showBack : false;\\r\\n    $: isMyProfile = curSection ? (curSection.segment === 'profile') : false;\\r\\n    // $: sectionLabel = curSection ? curSection.label : '';\\r\\n\\r\\n\\r\\n    $: hasCreated = $project && $project.hasCreated;\\r\\n\\r\\n    let profileUser = writable(null);\\r\\n    $: profileUsername = ($profileUser && $profileUser.username && '@' + $profileUser.username) || '';\\r\\n\\r\\n    // $: console.log('profileUser', $profileUser);\\r\\n\\r\\n    let sectionLabel = '';\\r\\n    let hasSuperHeader = false;\\r\\n    let superHeaderLabel = '';\\r\\n    let headerLinkUrl = '';\\r\\n\\r\\n\\r\\n    $: {\\r\\n        $profileUser = null;\\r\\n        // console.log('reset profileUser', $profileUser);\\r\\n\\r\\n        if (/\\\\/projects\\\\/.+/.test(path) && !/\\\\/projects\\\\/new/.test(path) && !/\\\\/projects\\\\/archive/.test(path) && $project) {\\r\\n            sectionLabel = $project.title;\\r\\n        } else if (/\\\\/channels\\\\/.+/.test(path) && $channel) {\\r\\n            sectionLabel = '#'+$channel.title;\\r\\n        } else if (/\\\\/posts\\\\/.+/.test(path) && $channel) {\\r\\n            sectionLabel = '#'+$channel.title;\\r\\n        } else if (/\\\\/profile\\\\/.+/.test(path) && $user && $viewedUser) {//$viewedUser && !$viewedUser.isCurrentUser) {\\r\\n            if (isCurrentUser) {\\r\\n                sectionLabel = 'My Profile';\\r\\n            } else {\\r\\n                sectionLabel = $viewedUser.name;\\r\\n            }\\r\\n        } else if (/\\\\/messages\\\\/.+/.test(path) && $user && ($newConversation || ($conversation && $conversation.isNew) || ($conversationGroupId && $viewedUser && $conversationGroupId + 'u-'+$viewedUser.id) || ($conversation && (($conversation.project && $project) || ($conversation.users && $conversation.users.length))))) { // $conversation.user\\r\\n            // console.log('header, ', $conversation, $conversation.isNew);\\r\\n            if ($conversation && !$conversation.isNew) {\\r\\n                if ($conversation.project && $project) { // // temporary\\r\\n                    sectionLabel = $project.title;\\r\\n                } else {\\r\\n                    const curUserItem = getConversationOtherUser($conversation);\\r\\n                    if (curUserItem && curUserItem.name) {\\r\\n                        sectionLabel = curUserItem.name;\\r\\n                        $profileUser = get(getUserModelFromData(curUserItem));\\r\\n                        // console.log('getUserModelFromData profileUser', $profileUser);\\r\\n                    }\\r\\n                    // sectionLabel = $conversation.user ? $conversation.user.firstName : $conversation.project.name;\\r\\n                }\\r\\n            } else if ($viewedUser) { // $newConversation && // temporary\\r\\n                sectionLabel = $viewedUser.name;\\r\\n                $profileUser = $viewedUser;\\r\\n                // console.log('viewedUser profileUser', $profileUser);\\r\\n            }\\r\\n        } else {\\r\\n            sectionLabel = curSection ? curSection.label : '';\\r\\n        }\\r\\n\\r\\n        if (/\\\\/channels\\\\/.+/.test(path)) {\\r\\n            hasSuperHeader = true;\\r\\n            if ($project) {\\r\\n                superHeaderLabel = $project.title;\\r\\n            }\\r\\n            headerLinkUrl = '';\\r\\n        } else if (/\\\\/posts\\\\/.+/.test(path)) {\\r\\n            hasSuperHeader = true;\\r\\n            if ($project) {\\r\\n                superHeaderLabel = $project.title;\\r\\n            }\\r\\n            headerLinkUrl = 'channels/' + $channelId;\\r\\n        } else {\\r\\n            hasSuperHeader = false;\\r\\n            headerLinkUrl = '';\\r\\n        }\\r\\n    }\\r\\n\\r\\n    function goBack () {\\r\\n        if (isProjectView && hasCreated) {\\r\\n            goto('projects');\\r\\n        } else if (curSection && curSection.useLastPreProjectPath && $lastPreProjectPath) {\\r\\n            goto($lastPreProjectPath);\\r\\n        } else if (showBack && get(prevPath)) {\\r\\n            history.back();\\r\\n        } else if (parentPath) {\\r\\n            let match;\\r\\n            if (match = parentPath.match(/\\\\[project\\\\]/)) {\\r\\n                parentPath = parentPath.substr(0, match.index) + $projectId + parentPath.substr(match.index + match[0].length);\\r\\n            } else if (match = parentPath.match(/\\\\[channel\\\\]/)) {\\r\\n                parentPath = parentPath.substr(0, match.index) + $channelId + parentPath.substr(match.index + match[0].length);\\r\\n            }\\r\\n            goto(parentPath);\\r\\n        } /* else if (showBack) {\\r\\n            history.back();\\r\\n        }*/\\r\\n    }\\r\\n\\r\\n    function loadMyProfile() {\\r\\n        if (!isMyProfile) {\\r\\n            loadProfile($userId); // , {owner: true});\\r\\n        }\\r\\n    }\\r\\n\\r\\n    function loadViewedProfile() {\\r\\n        if ($profileUser && $profileUser.id) {\\r\\n            loadProfile($profileUser.id); // , {owner: true});\\r\\n        }\\r\\n    }\\r\\n\\r\\n    function signIn() {\\r\\n\\t\\tshowPrompt(promptIds.LOG_IN);\\r\\n        // setUser(config.GENERAL_USER);\\r\\n    }\\r\\n    function signUp() {\\r\\n\\t\\tshowPrompt(promptIds.SIGN_UP);\\r\\n    }\\r\\n\\r\\n    function showMainOptions() {\\r\\n\\t\\tshowMenu(menuIds.MAIN_OPTIONS);\\r\\n    }\\r\\n</script>\\r\\n\\r\\n<div class=\\\"headerBar\\\" class:hasSuperHeader=\\\"{hasSuperHeader}\\\">\\r\\n    {#if segment === undefined || (segment === 'discover' && !$showBetaFeatures)}\\r\\n        {#if $showBetaFeatures || segment === 'discover'}\\r\\n            <div class=\\\"logo\\\" class:button=\\\"{!$showBetaFeatures}\\\" on:click=\\\"{!$showBetaFeatures ? goHome : null}\\\">\\r\\n                <img src='assets/logo.png' alt=\\\"Flock\\\">\\r\\n            </div>\\r\\n        {/if}\\r\\n    {:else}\\r\\n        {#if hasSuperHeader}\\r\\n            <div class=\\\"superHeader\\\" class:hasBack=\\\"{showBack || parentPath}\\\"><a href=\\\"projects/{$projectId}\\\">{superHeaderLabel}</a></div>\\r\\n        {/if}\\r\\n        {#if $profileUser}\\r\\n            <div class=\\\"profileHeader button\\\" on:click=\\\"{loadViewedProfile}\\\" class:hasBack=\\\"{showBack || parentPath}\\\">\\r\\n                <AvatarIcon user=\\\"{profileUser}\\\" useThumb=\\\"{true}\\\" />\\r\\n                <div class=\\\"profileInfo\\\">\\r\\n                    <div class=\\\"profileDisplayName\\\">\\r\\n                        {sectionLabel}\\r\\n                    </div>\\r\\n                    <div class=\\\"profileUsername\\\">\\r\\n                        {profileUsername}\\r\\n                    </div>\\r\\n                </div>\\r\\n            </div>\\r\\n        {:else}\\r\\n            <div class=\\\"header\\\" class:loggedOut=\\\"{!loggedIn}\\\" class:hasBack=\\\"{showBack || parentPath}\\\">\\r\\n                {#if headerLinkUrl}\\r\\n                    <a href=\\\"{headerLinkUrl}\\\">{sectionLabel}</a>\\r\\n                {:else}\\r\\n                    {sectionLabel}\\r\\n                {/if}\\r\\n            </div>\\r\\n        {/if}\\r\\n        {#if showBack || parentPath}\\r\\n            <img class=\\\"backButton\\\" src=\\\"{BackIcon}\\\" alt=\\\"back\\\" on:click|preventDefault=\\\"{goBack}\\\" />\\r\\n        {/if}\\r\\n    {/if}\\r\\n    {#if loggedIn}\\r\\n        <Button className=\\\"optionsButton\\\" icon=\\\"{OptionsMenuIcon}\\\" onClick=\\\"{showMainOptions}\\\"></Button>\\r\\n        <div class=\\\"avatarIcon\\\" class:button=\\\"{!isMyProfile}\\\" on:click=\\\"{loadMyProfile}\\\">\\r\\n            <AvatarIcon user=\\\"{user}\\\" useThumb=\\\"{true}\\\" />\\r\\n        </div>\\r\\n    {:else}\\r\\n        <div class=\\\"signInButtonContainer\\\">\\r\\n            <Button className=\\\"signUpButton\\\" onClick=\\\"{signUp}\\\">{locale.HEADER.SIGN_UP}</Button>\\r\\n            <Button className=\\\"signInButton\\\" onClick=\\\"{signIn}\\\">{locale.HEADER.SIGN_IN}</Button>\\r\\n        </div>\\r\\n    {/if}\\r\\n</div>\\r\\n\\r\\n<style>\\r\\n    .headerBar {\\r\\n        position: absolute;\\r\\n        top: 0;\\r\\n        left: 0;\\r\\n\\r\\n        width: 100%;\\r\\n        height: 60px;\\r\\n\\r\\n        background: #ffffff;\\r\\n        box-shadow: 0 2px 3px 0 rgba(0,0,0,0.12);\\r\\n    }\\r\\n\\r\\n    .header {\\r\\n        font-size: 2.1rem;\\r\\n        font-weight: 400;\\r\\n\\r\\n        position: absolute;\\r\\n        top: 14px;\\r\\n\\r\\n        left: 20px;\\r\\n        right: 86px;\\r\\n\\r\\n        overflow: hidden;\\r\\n        white-space: nowrap;\\r\\n        text-overflow: ellipsis;\\r\\n    }\\r\\n    .header a {\\r\\n        text-decoration: none;\\r\\n    }\\r\\n    .header.loggedOut {\\r\\n        right: 140px;\\r\\n    }\\r\\n    .header.hasBack {\\r\\n        left: 50px;\\r\\n    }\\r\\n    .hasSuperHeader .header {\\r\\n        top: 22px;\\r\\n        font-size: 2.0rem;\\r\\n    }\\r\\n\\r\\n    .superHeader {\\r\\n        font-size: 1.2rem;\\r\\n\\r\\n        position: absolute;\\r\\n        top: 8px;\\r\\n        left: 20px;\\r\\n        right: 140px;\\r\\n\\r\\n        overflow: hidden;\\r\\n        white-space: nowrap;\\r\\n        text-overflow: ellipsis;\\r\\n    }\\r\\n    .superHeader a {\\r\\n        text-decoration: none;\\r\\n        color: #aaaaaa;\\r\\n    }\\r\\n    .superHeader.hasBack {\\r\\n        left: 50px;\\r\\n    }\\r\\n\\r\\n    .logo {\\r\\n        position: absolute;\\r\\n        top: 12px;\\r\\n        left: 15px;\\r\\n    }\\r\\n    .logo img {\\r\\n        width: 50%;\\r\\n    }\\r\\n\\r\\n    .avatarIcon {\\r\\n        position: absolute;\\r\\n        top: 11px;\\r\\n        /* right: 11px; */\\r\\n        right: 41px;\\r\\n    }\\r\\n\\r\\n    .profileHeader {\\r\\n        position: absolute;\\r\\n        top: 12px;\\r\\n\\r\\n        left: 20px;\\r\\n        right: 86px;\\r\\n    }\\r\\n\\r\\n    .profileHeader :global(.avatarIcon) {\\r\\n        position: absolute;\\r\\n    }\\r\\n\\r\\n    .profileHeader.hasBack {\\r\\n        left: 50px;\\r\\n    }\\r\\n\\r\\n    .profileInfo {\\r\\n        position: absolute;\\r\\n        left: 45px;\\r\\n    }\\r\\n\\r\\n    .profileInfo .profileDisplayName {\\r\\n        font-size: 1.6rem;\\r\\n        font-weight: 700;\\r\\n\\r\\n        margin-top: -1px;\\r\\n\\r\\n        overflow: hidden;\\r\\n        white-space: nowrap;\\r\\n        text-overflow: ellipsis;\\r\\n    }\\r\\n    .profileUsername {\\r\\n        font-size: 1.2rem;\\r\\n        margin-top: -4px;\\r\\n\\r\\n        color: #999999;\\r\\n    }\\r\\n\\r\\n    .headerBar :global(.optionsButton) {\\r\\n\\t\\tposition: absolute;\\r\\n\\r\\n    \\ttop: 8px;\\r\\n    \\tright: 0;\\r\\n\\r\\n\\t\\twidth: 28px;\\r\\n\\t\\theight: 26px;\\r\\n        padding: 8px 3px;\\r\\n\\t}\\r\\n    .headerBar :global(.optionsButton .icon) {\\r\\n\\t\\tmargin-top: 1px;\\r\\n        margin-left: 5px;\\r\\n\\t}\\r\\n\\r\\n    .button {\\r\\n        cursor: pointer;\\r\\n    }\\r\\n\\r\\n    .backButton {\\r\\n        position: absolute;\\r\\n        top: 7px;\\r\\n        left: 5px;\\r\\n        padding: 10px;\\r\\n\\r\\n        width: 26px;\\r\\n        height: 26px;\\r\\n\\r\\n        cursor: pointer;\\r\\n    }\\r\\n    .hasSuperHeader .backButton {\\r\\n        top: 13px;\\r\\n    }\\r\\n\\r\\n    .signInButtonContainer {\\r\\n        position: absolute;\\r\\n        right: 0;\\r\\n    }\\r\\n\\r\\n    .headerBar :global(.signInButton) {\\r\\n        display: inline-block;\\r\\n        float: right;\\r\\n    }\\r\\n    .headerBar :global(.signInButton .buttonContent) {\\r\\n        margin: 11px 0px;\\r\\n        padding: 6px 6px;\\r\\n        margin-top: 15px;\\r\\n\\r\\n        font-size: 1.3rem;\\r\\n        font-weight: 700;\\r\\n    }\\r\\n    .headerBar :global(.signUpButton) {\\r\\n        display: inline-block;\\r\\n        float: right;\\r\\n    }\\r\\n    .headerBar :global(.signUpButton .buttonContent) {\\r\\n        margin: 11px;\\r\\n        margin-right: 13px;\\r\\n        margin-left: 6px;\\r\\n        margin-top: 15px;\\r\\n\\r\\n        padding: 6px 11px;\\r\\n\\r\\n        font-size: 1.3rem;\\r\\n        font-weight: 700;\\r\\n\\r\\n        background-color: #222222;\\r\\n        border-radius: 999px;\\r\\n        color: #ffffff;\\r\\n    }\\r\\n</style>\"],\"names\":[],\"mappings\":\"AAoPI,UAAU,4BAAC,CAAC,AACR,QAAQ,CAAE,QAAQ,CAClB,GAAG,CAAE,CAAC,CACN,IAAI,CAAE,CAAC,CAEP,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CAEZ,UAAU,CAAE,OAAO,CACnB,UAAU,CAAE,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,AAC5C,CAAC,AAED,OAAO,4BAAC,CAAC,AACL,SAAS,CAAE,MAAM,CACjB,WAAW,CAAE,GAAG,CAEhB,QAAQ,CAAE,QAAQ,CAClB,GAAG,CAAE,IAAI,CAET,IAAI,CAAE,IAAI,CACV,KAAK,CAAE,IAAI,CAEX,QAAQ,CAAE,MAAM,CAChB,WAAW,CAAE,MAAM,CACnB,aAAa,CAAE,QAAQ,AAC3B,CAAC,AACD,qBAAO,CAAC,CAAC,cAAC,CAAC,AACP,eAAe,CAAE,IAAI,AACzB,CAAC,AACD,OAAO,UAAU,4BAAC,CAAC,AACf,KAAK,CAAE,KAAK,AAChB,CAAC,AACD,OAAO,QAAQ,4BAAC,CAAC,AACb,IAAI,CAAE,IAAI,AACd,CAAC,AACD,6BAAe,CAAC,OAAO,cAAC,CAAC,AACrB,GAAG,CAAE,IAAI,CACT,SAAS,CAAE,MAAM,AACrB,CAAC,AAED,YAAY,4BAAC,CAAC,AACV,SAAS,CAAE,MAAM,CAEjB,QAAQ,CAAE,QAAQ,CAClB,GAAG,CAAE,GAAG,CACR,IAAI,CAAE,IAAI,CACV,KAAK,CAAE,KAAK,CAEZ,QAAQ,CAAE,MAAM,CAChB,WAAW,CAAE,MAAM,CACnB,aAAa,CAAE,QAAQ,AAC3B,CAAC,AACD,0BAAY,CAAC,CAAC,cAAC,CAAC,AACZ,eAAe,CAAE,IAAI,CACrB,KAAK,CAAE,OAAO,AAClB,CAAC,AACD,YAAY,QAAQ,4BAAC,CAAC,AAClB,IAAI,CAAE,IAAI,AACd,CAAC,AAED,KAAK,4BAAC,CAAC,AACH,QAAQ,CAAE,QAAQ,CAClB,GAAG,CAAE,IAAI,CACT,IAAI,CAAE,IAAI,AACd,CAAC,AACD,mBAAK,CAAC,GAAG,cAAC,CAAC,AACP,KAAK,CAAE,GAAG,AACd,CAAC,AAED,WAAW,4BAAC,CAAC,AACT,QAAQ,CAAE,QAAQ,CAClB,GAAG,CAAE,IAAI,CAET,KAAK,CAAE,IAAI,AACf,CAAC,AAED,cAAc,4BAAC,CAAC,AACZ,QAAQ,CAAE,QAAQ,CAClB,GAAG,CAAE,IAAI,CAET,IAAI,CAAE,IAAI,CACV,KAAK,CAAE,IAAI,AACf,CAAC,AAED,0CAAc,CAAC,AAAQ,WAAW,AAAE,CAAC,AACjC,QAAQ,CAAE,QAAQ,AACtB,CAAC,AAED,cAAc,QAAQ,4BAAC,CAAC,AACpB,IAAI,CAAE,IAAI,AACd,CAAC,AAED,YAAY,4BAAC,CAAC,AACV,QAAQ,CAAE,QAAQ,CAClB,IAAI,CAAE,IAAI,AACd,CAAC,AAED,0BAAY,CAAC,mBAAmB,cAAC,CAAC,AAC9B,SAAS,CAAE,MAAM,CACjB,WAAW,CAAE,GAAG,CAEhB,UAAU,CAAE,IAAI,CAEhB,QAAQ,CAAE,MAAM,CAChB,WAAW,CAAE,MAAM,CACnB,aAAa,CAAE,QAAQ,AAC3B,CAAC,AACD,gBAAgB,4BAAC,CAAC,AACd,SAAS,CAAE,MAAM,CACjB,UAAU,CAAE,IAAI,CAEhB,KAAK,CAAE,OAAO,AAClB,CAAC,AAED,sCAAU,CAAC,AAAQ,cAAc,AAAE,CAAC,AACtC,QAAQ,CAAE,QAAQ,CAEf,GAAG,CAAE,GAAG,CACR,KAAK,CAAE,CAAC,CAEX,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACN,OAAO,CAAE,GAAG,CAAC,GAAG,AACvB,CAAC,AACE,sCAAU,CAAC,AAAQ,oBAAoB,AAAE,CAAC,AAC5C,UAAU,CAAE,GAAG,CACT,WAAW,CAAE,GAAG,AACvB,CAAC,AAEE,OAAO,4BAAC,CAAC,AACL,MAAM,CAAE,OAAO,AACnB,CAAC,AAED,WAAW,4BAAC,CAAC,AACT,QAAQ,CAAE,QAAQ,CAClB,GAAG,CAAE,GAAG,CACR,IAAI,CAAE,GAAG,CACT,OAAO,CAAE,IAAI,CAEb,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CAEZ,MAAM,CAAE,OAAO,AACnB,CAAC,AACD,6BAAe,CAAC,WAAW,cAAC,CAAC,AACzB,GAAG,CAAE,IAAI,AACb,CAAC,AAED,sBAAsB,4BAAC,CAAC,AACpB,QAAQ,CAAE,QAAQ,CAClB,KAAK,CAAE,CAAC,AACZ,CAAC,AAED,sCAAU,CAAC,AAAQ,aAAa,AAAE,CAAC,AAC/B,OAAO,CAAE,YAAY,CACrB,KAAK,CAAE,KAAK,AAChB,CAAC,AACD,sCAAU,CAAC,AAAQ,4BAA4B,AAAE,CAAC,AAC9C,MAAM,CAAE,IAAI,CAAC,GAAG,CAChB,OAAO,CAAE,GAAG,CAAC,GAAG,CAChB,UAAU,CAAE,IAAI,CAEhB,SAAS,CAAE,MAAM,CACjB,WAAW,CAAE,GAAG,AACpB,CAAC,AACD,sCAAU,CAAC,AAAQ,aAAa,AAAE,CAAC,AAC/B,OAAO,CAAE,YAAY,CACrB,KAAK,CAAE,KAAK,AAChB,CAAC,AACD,sCAAU,CAAC,AAAQ,4BAA4B,AAAE,CAAC,AAC9C,MAAM,CAAE,IAAI,CACZ,YAAY,CAAE,IAAI,CAClB,WAAW,CAAE,GAAG,CAChB,UAAU,CAAE,IAAI,CAEhB,OAAO,CAAE,GAAG,CAAC,IAAI,CAEjB,SAAS,CAAE,MAAM,CACjB,WAAW,CAAE,GAAG,CAEhB,gBAAgB,CAAE,OAAO,CACzB,aAAa,CAAE,KAAK,CACpB,KAAK,CAAE,OAAO,AAClB,CAAC\"}"
};

const HeaderBar = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let $user = get_store_value(user);
	let $viewedUser = get_store_value(viewedUser);
	let $viewMode = get_store_value(viewMode);
	let $loggingIn = get_store_value(loggingIn);
	let $project = get_store_value(project);
	let $profileUser;
	let $channel = get_store_value(channel);
	let $newConversation = get_store_value(newConversation);
	let $conversation = get_store_value(conversation);
	let $conversationGroupId = get_store_value(conversationGroupId);
	let $channelId = get_store_value(channelId);
	let $lastPreProjectPath = get_store_value(lastPreProjectPath);
	let $projectId = get_store_value(projectId);
	let $userId = get_store_value(userId);
	let $showBetaFeatures = get_store_value(showBetaFeatures);
	let { segment } = $$props;
	let { path } = $$props;

	// $: getNotifications({ userId: $userId, getUnviewed: true });
	loadCurrentUser();

	let profileUser = writable$1(null);
	$profileUser = get_store_value(profileUser);

	// $: console.log('profileUser', $profileUser);
	let sectionLabel = "";

	let hasSuperHeader = false;
	let superHeaderLabel = "";
	let headerLinkUrl = "";

	function signIn() {
		showPrompt(promptIds.LOG_IN);
	} // setUser(config.GENERAL_USER);

	function signUp() {
		showPrompt(promptIds.SIGN_UP);
	}

	function showMainOptions() {
		showMenu(menuIds.MAIN_OPTIONS);
	}

	if ($$props.segment === void 0 && $$bindings.segment && segment !== void 0) $$bindings.segment(segment);
	if ($$props.path === void 0 && $$bindings.path && path !== void 0) $$bindings.path(path);
	$$result.css.add(css$3);
	$profileUser = get_store_value(profileUser);
	let isCurrentUser = $user && getIsCurrentUser($viewedUser && $viewedUser.id);

	let appState = {
		viewMode: $viewMode,
		viewingOwnProfile: isCurrentUser
	}; // viewingOwnProfile: $viewedUser ? $viewedUser.isCurrentUser : false,

	let loggedIn = !!$user || $loggingIn;
	let curSection = getSectionByPath(path, appState);
	let isProjectView = curSection ? curSection.isProjectView : false;
	let parentPath = curSection ? curSection.parentPath : null;
	let showBack = curSection ? curSection.showBack : false;
	let isMyProfile = curSection ? curSection.segment === "profile" : false;
	let hasCreated = $project && $project.hasCreated;

	 {
		{
			$profileUser = null;

			// console.log('reset profileUser', $profileUser);
			if ((/\/projects\/.+/).test(path) && !(/\/projects\/new/).test(path) && !(/\/projects\/archive/).test(path) && $project) {
				sectionLabel = $project.title;
			} else if ((/\/channels\/.+/).test(path) && $channel) {
				sectionLabel = "#" + $channel.title;
			} else if ((/\/posts\/.+/).test(path) && $channel) {
				sectionLabel = "#" + $channel.title;
			} else if ((/\/profile\/.+/).test(path) && $user && $viewedUser) {
				//$viewedUser && !$viewedUser.isCurrentUser) {
				if (isCurrentUser) {
					sectionLabel = "My Profile";
				} else {
					sectionLabel = $viewedUser.name;
				}
			} else if ((/\/messages\/.+/).test(path) && $user && ($newConversation || $conversation && $conversation.isNew || $conversationGroupId && $viewedUser && $conversationGroupId + "u-" + $viewedUser.id || $conversation && ($conversation.project && $project || $conversation.users && $conversation.users.length))) {
				// $conversation.user
				// console.log('header, ', $conversation, $conversation.isNew);
				if ($conversation && !$conversation.isNew) {
					if ($conversation.project && $project) {
						// // temporary
						sectionLabel = $project.title;
					} else {
						const curUserItem = getConversationOtherUser($conversation);

						if (curUserItem && curUserItem.name) {
							sectionLabel = curUserItem.name;
							$profileUser = get_store_value(getUserModelFromData(curUserItem));
						} // console.log('getUserModelFromData profileUser', $profileUser);
					} // sectionLabel = $conversation.user ? $conversation.user.firstName : $conversation.project.name;
				} else if ($viewedUser) {
					// $newConversation && // temporary
					sectionLabel = $viewedUser.name;

					$profileUser = $viewedUser;
				} // console.log('viewedUser profileUser', $profileUser);
			} else {
				sectionLabel = curSection ? curSection.label : "";
			}

			if ((/\/channels\/.+/).test(path)) {
				hasSuperHeader = true;

				if ($project) {
					superHeaderLabel = $project.title;
				}

				headerLinkUrl = "";
			} else if ((/\/posts\/.+/).test(path)) {
				hasSuperHeader = true;

				if ($project) {
					superHeaderLabel = $project.title;
				}

				headerLinkUrl = "channels/" + $channelId;
			} else {
				hasSuperHeader = false;
				headerLinkUrl = "";
			}
		}
	}

	let profileUsername = $profileUser && $profileUser.username && "@" + $profileUser.username || "";

	return `<div class="${["headerBar svelte-sg9xl7", hasSuperHeader ? "hasSuperHeader" : ""].join(" ").trim()}">${segment === undefined || segment === "discover" && !$showBetaFeatures
	? `${$showBetaFeatures || segment === "discover"
		? `<div class="${["logo svelte-sg9xl7", !$showBetaFeatures ? "button" : ""].join(" ").trim()}"><img src="${"assets/logo.png"}" alt="${"Flock"}" class="${"svelte-sg9xl7"}"></div>`
		: ``}`
	: `${hasSuperHeader
		? `<div class="${["superHeader svelte-sg9xl7", showBack || parentPath ? "hasBack" : ""].join(" ").trim()}"><a href="${"projects/" + escape($projectId)}" class="${"svelte-sg9xl7"}">${escape(superHeaderLabel)}</a></div>`
		: ``}
        ${$profileUser
		? `<div class="${[
				"profileHeader button svelte-sg9xl7",
				showBack || parentPath ? "hasBack" : ""
			].join(" ").trim()}">${validate_component(AvatarIcon, "AvatarIcon").$$render($$result, { user: profileUser, useThumb: true }, {}, {})}
                <div class="${"profileInfo svelte-sg9xl7"}"><div class="${"profileDisplayName svelte-sg9xl7"}">${escape(sectionLabel)}</div>
                    <div class="${"profileUsername svelte-sg9xl7"}">${escape(profileUsername)}</div></div></div>`
		: `<div class="${[
				"header svelte-sg9xl7",
				(!loggedIn ? "loggedOut" : "") + " " + (showBack || parentPath ? "hasBack" : "")
			].join(" ").trim()}">${headerLinkUrl
			? `<a${add_attribute("href", headerLinkUrl, 0)} class="${"svelte-sg9xl7"}">${escape(sectionLabel)}</a>`
			: `${escape(sectionLabel)}`}</div>`}
        ${showBack || parentPath
		? `<img class="${"backButton svelte-sg9xl7"}"${add_attribute("src", img$1, 0)} alt="${"back"}">`
		: ``}`}
    ${loggedIn
	? `${validate_component(Button, "Button").$$render(
			$$result,
			{
				className: "optionsButton",
				icon: img,
				onClick: showMainOptions
			},
			{},
			{}
		)}
        <div class="${["avatarIcon svelte-sg9xl7", !isMyProfile ? "button" : ""].join(" ").trim()}">${validate_component(AvatarIcon, "AvatarIcon").$$render($$result, { user, useThumb: true }, {}, {})}</div>`
	: `<div class="${"signInButtonContainer svelte-sg9xl7"}">${validate_component(Button, "Button").$$render(
			$$result,
			{
				className: "signUpButton",
				onClick: signUp
			},
			{},
			{
				default: () => `${escape(locale$1.HEADER.SIGN_UP)}`
			}
		)}
            ${validate_component(Button, "Button").$$render(
			$$result,
			{
				className: "signInButton",
				onClick: signIn
			},
			{},
			{
				default: () => `${escape(locale$1.HEADER.SIGN_IN)}`
			}
		)}</div>`}
</div>`;
});

const img$3 = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFwAAABcCAYAAADj79JYAAAD+UlEQVR4Xu3d8bENMRQG8PMqQAWoABWgAypABagAFaACVPCoABWgAnRABcw3szuTyezd3XOSfDm5e/LXnXm79+T+7tkkm2Tvu5AoVIELarQIJgFOToIAD3CyADlcZHiAkwXI4SLDA5wsQA4XGR7gZAFyuMjwACcLkMNFhgf4qsADEXkhIreToz6KyCsR+U62M4UbKcPficjjlU/5RETemxSIJ40CvoU9k7lHHwF8CfuriHyZMv56lqCu0b2DL2F/SJqWqxP8rVHQPYNvYc/GQ6F7Bd+LPRy6R3At9lDo3sCt2MOgewIvxR4C3Qt4LWz36B7Aa2O7Ru8N3grbLXpP8NbYLtF7gbOw3aH3AGdju0Jng/fCdoPOBO+N7QKdBe4Fuzs6A9wbdlf01uBesbuhtwT3jt0FvRX4KNh09Bbgo2FT0WuDj4pNQ68JPjo2Bb0W+LlgN0evAf5MRF5n2xTSrQzEfU1VQ53aDXCnZFtdKfgNEfkmIqjcXM4Bey3TsYcR6KZSCp5n9zlhr6Gb3cwnTrXB5slHyVdd+n6mrCGchF27lzU+ZynQGxF5mlTkmoj8IQCwQ7gBz5sUZPzzM0PHXnRkN/qruZgT1XziFBmd5S8RubKSctjl+nCQL+GeiGCIm+LmHw07d3GcqZSCI2h+uS1VBE8ovDTVkHsSRlzp0xV59L/T35FkplIDHIHxZALa81OZPgr4vxXF31NyFT3aUgsc9cRliGxHhuD13aTyI4Ijm4GLJhEZXeVxlprgeXKk2TIieFFbfepKGQ0cV89Ss4XL3dyuJjhpkhwWHON89BFrndlshkcI307NgKVTOzQ4hpyfd0LnuGhv8XCVthwWvAR7Rkam48ZMUw4LjjE7njhOy6eNaVGMkPKn2e4rm5fDgv/M7vb2wuVzO9rZy0OCo3PEHZ+1acBoZX5YFq9vKtqUQ4JjngKd5Vy0Y3jcqKQ3XZqhb4BPvxShmYcJcCVaZLiiDUwPtd7aB3iAGwUWTtN0KNqokeEBvpkzMUpRdrgQjVGKEi06zc0LcfmAaMM7tuGaOY3IcGOGY0PQvDqjmdPoBZ7P4WB2EjOQVUvLYWG+DW7vokAPcCx6Y7NPuqrU5NfhWoLncMgUZPrW2iMWH9IPXjp5hVHLVkG8dAcw1kjXNgNtvd/Jv7cER9B8ftpS0VJwS8y98+/q924Njgotrd5oKoptclgc3lvypmzveTgOe1GwYK2Jp3l/2j9OwiWL9UU0M/kvaa5V2NJxoSlAM6KJ82NCxhXZdPcvI8NVGXDuBwc4+RsO8AAnC5DDRYYHOFmAHC4yPMDJAuRwkeEBThYgh4sMD3CyADlcZHiAkwXI4SLDA5wsQA73H48kN2xdq4z4AAAAAElFTkSuQmCC";

const img$4 = "data:image/png;base64,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";

const img$5 = "data:image/png;base64,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";

const img$6 = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFwAAABcCAYAAADj79JYAAAFkElEQVR4Xu2cgbEMQRCGWwSIABEgAkSACBABIkAEiAARIAJEgAgQASKgvqrrqta1dzt7u/PPnDdT9Yp6t29755uef7pneu+cjSYlcE5qbRizAVzsBAP4AC4mIDY3PHwAFxMQmxsePoCLCYjNDQ8fwMUExOaGhw/gYgJic8PDB3AxAbG54eEDuJiA2FxPHv7EzG6a2Ucz+25mb8QsJOZ6AP7czB5N9PaLmd3dwZfAUBhpDfypmeHZ+xrQb5nZLwUMhY2WwC+Y2c+CTj4zMwbmv2gtgd83s1eBooO9vNPxS7vP8O6L/wVts6ZnmllO4uCj6Wi7t+tmhrycfGvp4YegXjOzz4HuYzN7cfK0G3t4hoqkfDOzO2bGZ0hLbEgLXk7YSMhI6HhyraWHAwuI54+kBngGiX9PprUGjmzgzWvaOzN7cCqhYyvghIREKMjHVPs04blIDNdPzQjkhSSp+4W1BXBgf5jw7B+7hfH1jLeS/hPh3JjQeJKkrqG3AA5soMV2THLDPRgcj9d9Tegauhp4jr1/7+Af65XMFhbNq2H0kBfi9i63A5TAcxgIoy0SminoLKRoendNCTxLyZbJDNCZJVFekJbuQkYVcCIMkhpvRCFZx9d6I/djUL0BG+hdNRVw0vKHoee1vA/IMXq50ltGqgKOd3uqTviX0/atvDCvEy/3HG5sZW/xfRTAs5wcEwIu6RhRims5/8fLu2kK4FlbiR6IImq1LF9dyYoCeN6GraXfPoB5gNlnIUHqoimAHzpoqAXhT7gxW7mcLnXRWgDnuKx2Fohk3d4R7uqITgE8n13WlhQ4Z5u1143i2aMAnkM1habmioD3B7aCi2FtcaECOM/ZQlOjrPAMW+zbrGauAh4zQFVs3GWqrwKeIxVVbJxTfcX6cXAWqIBnb9typ/BQB7NdIhYGu3aUtPeZVMBb6Th2SXruBQJN98qVwOP0rrE9u8+rpvbKGQSiJXlTAs97HErbU6dNTaArO52TEXWYlu273Eg9XQk8L2AtIoYp6NIa9LMGfCrt53cy6GcROICp4ELDYxWXpLziLAInauHck336fJBd/eBZCbzloglgvBrAc8WjVbNgJXDlQQRQI+Ql8XbVM1cl8JzxbWmbg+oIGNkoaV93xUJ4vx88V03Ktuz0XAdjqcTaTrkOIxHAKi27oEQDneaHFN/3VGo6wz9cVMC3KJXAgx3wnA57JykWjYD3vaYikzsV8GOO2VyHHfLcDPLPvZgfDy6tyn2bToSqcal240Qnnr7gdVMa6zrsgJfqsMtE6cD4jMEZoiStlbvm++H5fNHLFqIOl4Rr3pGow/5FCCWQS2dM1S0HhYdnOcHbgV1aPRt1GMClMhFnDLZKFtbqB9wK4Pkwt8QbXYd9wSv5m7UzhoWz+rufCuB8gcGcHiMTDIwDLj0CQyYo+MGDa8+YkkGfvUYBPJZIxHAtAi71LGQhAp4bSLdHghPtzYKpdYECOJrrLz3RcTS9VIcBGgGX6HBmpSitKx4fBfCcxc0BiICXJDjuwewCxgEuvUcxtDUXKoDnKCWXSBy70UT5mmt+nDEtqryKx0ABHFlAo+NmP17voWGpDnunDpUfs69C1uitephXTHp3oQI4pua+22rquT3BIWKJL2Rx7VRywsDxZQlR5+fkaymv1dergPOgWcvzw3uC41ocI5epv+V3/mYDssSgxtnSVSG+d1YJHJtMeRY1ACExSzaa5gYsDiCzAxul8fxqzy29gRp46XPtu64E+tLQc+0zLfr7UwNO54h6kI/4mje/R5Ko7ur6K/dOEbh7FJKBZvNT8zXERR48d/EpA5/rW5efD+DiYRnAB3AxAbG54eEDuJiA2Nzw8AFcTEBsbnj4AC4mIDY3PHwAFxMQmxsePoCLCYjNDQ8XA/8LtuQqbFXHSbEAAAAASUVORK5CYII=";

const img$7 = "data:image/png;base64,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";

const img$8 = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFwAAABcCAYAAADj79JYAAADKElEQVR4Xu3c4ZUMQRQF4LsRkAEZWBEgAyJABGSACBABGSACRMBmQAZEwLn0nuNgZqpfv7r1aubWr/1RNa/667fV1dXVfQYXqcCZNJqDweDiJDC4wcUC4nDOcIOLBcThnOEGFwuIwznDDS4WEIdzhhtcLCAO5ww3+F6BuwCeADj/o9ZbAM8AfBbbhcLNlOGvADzYc5QPAbwOKQgbzQJ+CPuSrDz6DOCt2FOgVwdfi10evTJ4FLs0elXwrdhl0SuCZ2GXRK8Gno1dDr0SeC/sUuhVwHtjl0GvAK7CLoE+GlyNPRx9JPgo7KHoo8BHYw9DHwFeBXsIuhq8GrYcXQleFVuKrgKvji1DV4DPgi1B7w0+G3Z39J7gs2J3Re8FPjt2N/Qe4MeC3QU9G/zYsNPRM8GPFTsVPQv82LHT0DPAHwN4Lty8NDrUzS3b6raCXwfwCcDV0QrC+NzDSPRQ2Qp+atl9iRx2CzdcInPz5P3QqZ67Udgt3HDxegHg0dx2od6H3cINl256SFl5vraC82L5BcCVlXFnrv4RwO3oAWwFZ1y+lfAm2oHJ2n1f3r5gkoVKBjgD880EjufHnOlfl+Ta9GpLFjjROSdntvP9G/59K5QCdRoxm4n7YRk2U15nyQT/m+pHHbtQTzaN1bsiGnz3uTB4KE/jjQwetwu1NHiILd7o5MHfHVgW5QzpRtz3n5YnDX5nmZ4d8sxc2zlZ8JcAuGbTWngXeK218p56JwvODxc8XQHIG5WMmy6DN6IbvBFqVzVneCNg1q29wQ3eKPCfajOspTjDG8+vhxRneGOq/K7maWEjl6eFjVCeFm6E8hguHsO/JT1UHjVL4eokVyBTS89pYdY2uFHgXT7J1xOcm2XeJ6THCHBuieDOg/TSE5ydzVifHgHeuv6++oT0BmeHuLTK78VGyz0A/L5sa9kylHEvCjc1rYnX2q9f9RTgjMPNQXyIwGFmzcOByIWLQwHn4mviXCzI/I/kxb5bUYF3O4DZftjg4jNmcIOLBcThnOEGFwuIwznDDS4WEIdzhhtcLCAO5ww3uFhAHM4ZbnCxgDicM9zgYgFxuJ/yPKldCLlV6gAAAABJRU5ErkJggg==";

const img$9 = "data:image/png;base64,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";

const img$a = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFwAAABcCAYAAADj79JYAAAERElEQVR4Xu3cv88MQRzH8beEhESCClGI0OhQ+/UPSKiQKASFEhWVqOj4A/woUaFX+JXo0ImEIJEgkaAhQpCv3CaX89zz7M5+v5+buZur72ZuXvvZ2Zmd2V1E/UgFFklrq5VRwcUhqOAVXCwgrq4mvIKLBcTV1YRXcLGAuLqa8AouFhBXVxNewcUC4upqwiv4ggL7gWvAUuAqcGzBX2T0hRIT/hlYOWS4A3iUkem8f6U08BPAxZEWvQI2VfAYgZ/A4jmKPgDcjKnSt9SSEn4ZODqm+V+AVb40MaWVBD4u3Y3MSeBSDJNfqaWAz5fuRqOIlJcCvlC6i0l5CeBt0l1MyksAb5vuIlKeO3iXdBeR8tzBu6a7Qb8AnPEbW/iVlDN4SrobmV/AEj8mv5JyBk9Nd6NzJccbW7mC90l31inPFbxvurNNeY7gHunONuW5ga8HXoPrJtOs+vLcwO8Bu/zGBP9KshGL3S9/61xuUnE5gUeku0G5D+xOEnL+0aTAbV1yNbAPWAFsAJaPWVzwavJ34Megy/oK3AI+qhcuIsEngZp6cP4AdhA+Ae+Ax8AH4I53V9QXfDuwbXC62orLFkFSU1H7/M7utdsZ8gKwRWy71jxJWbzuCm797F1gHbCsTwum5Ld2Zjzocn3oCv4S2DglWJ7NaL2I3RX8PbDG859OQVmW8p1tu5eu4NZn2ynU9XdT4Dq2CZ0mVilwzVazWe/DLdmdt9qlgNuhtovn8xm+cBr2wZQxfCr4LKMnYxtaH/BZRO+F7QHeXElmYbhoN8EOpXQjw5fbvgkfLmua0W2Wudljmu8JbvjTiO6G7dmlDCfd7sLtnZKBtyt2FLiV67lMNqlj544dCV46ethTFd59+GgaLelHHIafypSHYUcnvEGyWwHXC0EPxVaBWz0loIdjK8FzR789WF8N77qi+/DRBuQ6ZJQ5yCoayEfsO/FIpezhWjX46FPEHlgeZcj2k6vBf2c6WpFtFFKC26LFG484BpRhe1DWBpT7X5FK8Lmek1e0sU0dsicmlOC5jlCaAyKxkFQyaNHTwc6sNombxHckj44rwXMdoTQHVzL5UYLbemDOn2fA1ug/qAK3DUQPoxvTs3zJyxFU4DmPUIaPU7hHeAWZT+lHT4rwKb4K3HMTaLNF2DbNHx954VjPXoXwKb4K/JvTtji7Z314ZKeqdVdnneDDp/gq8L4jlLmgR9PsAR8+xVeA22rPjcRzvQ20J3z4FF8Bfh443RE8BdoLPtQktPCEEYoHdF/40Cm+ArzNlD4COhU+dIqvAJ/vzRA2u9vT9vmYjt3SuK8vdHENneIrwOcaoRj0uQm/2HEcfOhIRQE+fFs2B+j5uhoLx6nIICjArYE2NLRPzi/ktRts4a/FVoE7db/lF1PBxcewgldwsYC4uprwCi4WEFdXE17BxQLi6mrCK7hYQFxdTXgFFwuIq6sJF4P/BRXFuV3PxgQxAAAAAElFTkSuQmCC";

const img$b = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFwAAABcCAYAAADj79JYAAAEHklEQVR4Xu2cjZENURCFz0aACBABIkAEiAARIAJEgAjYCBABIkAEiAARUF/tG8bUvH3z5s093WO7q7ZUrZnpud8927f7/syRyqwEjqzeypkKuFkEBbyAmwmY3ZXCC7iZgNldKbyAmwmY3ZXCC7iZgNldKbyAmwmY3ZXCC7iZgNldKbyAmwmY3WVS+GNJNyS9l/RV0rGZhcVdBuDPJD0cae0nSXc28C0wHE6igT+RhLK3GdBvSvrhgOHwEQn8vKTvExr5VBId819YJPB7kl5OoIi6L0y4bhWXRALfFU76AK9JIrys3iKBM1AyYE6xR5KeT7kw+zWRwK9K+rgHIEILKidtJGUkdVydRQIHFhDPzaQGeAZU/l2NRQNH4Sj9EHsj6f5aUsco4KSEZCi3DyHdu5fwQpGUfmCNAA7sdwsoe9hXhCeKpNTQI4ADmzmTFpYeuhv4Prn33A4hvJC3p5wOcALfNw2cC5z7GEiJ6enMCbxlKBkDSzxPlzK6gF+S9MUsN2ADPZW5gFOWPwho+eVsFakLOOpG5W57sWVxw/0ef/w5gEeEk66BZCyoPI05gJNzM2BGWaqw4gC+zzRsi05hnuVViwfPeaYDuKPYOa3tTOWyupTCzgLwVEt0DuBT1y5bKpCqk+oz3BzAnSX9NqBvF5wKPqjTHMB5wV8HveUyN6dYiHYBp8y+vgy32U9JUeq7gEdnKl0vhU9ouYBHFz8dcDIWCqGwuXIX8CxxnPcInSt3As8QxzulU3lSgdrNCTxqinYb1BDoTuAZCqAhfDt0J/AsA+cQunUPegE/wW+DXsD/6t2yvaKA/xtgmlejTuAZB82xDKbpCpETeJbyflfu3fRMkRM4KdjdXa1N8P8fGu59tH63MGqrxJw+bCbEZg8etDJyq8SZBL6WAbPrnGZCbPbggayYobs1R2oB96w+hk89cRzAdtRl00UKh8LXFE6abxpyAM8eTr5t9pFTJzQ/++kAzgcMCCtZ7OcGMGU8P9ZDWA7gGbZIfN4srXWQwzrfARwFXQlr4cmXKMIWjYftdgB3lPSECcYKFMxu3a6DUfahJ50X1YoDeKsshe1rY3G4H8JS7Zyl5xzAGTAZ/ed+xGCosNMgcpT8de+G5mnevvJ3AOed5kzNduka8Xd4IGusOKFj+VhC/yxRqvjtUngngl2xvEvXuljcz4nH7uV33ckG4jSd2k8/04UTN3D88SfPoAYgQgzzFsRhIO/Kh3d1WP+vm78OfKTJTprPiu0b2yZePwU6mQkD9a4OnOhy2ctcMXzJtwYm4ePi4KGEJHZ3pf7k3hqBd5wJGcRsflIcJ5miqjUDn9K+dNcUcHOXFPACbiZgdlcKL+BmAmZ3pfACbiZgdlcKL+BmAmZ3pfACbiZgdlcKL+BmAmZ3pXAz8N/HSKdd0XDkQAAAAABJRU5ErkJggg==";

const img$c = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFwAAABcCAYAAADj79JYAAAE4UlEQVR4Xu2cgdENMRDH96sAFaACVIAKUAEqQAWoABXwVYAKUAEqQAWogPnNXMxN5u69i/yzl7zZnXnzZj53yd0vm382m/XOLMyVwJlrb9GZBXBnJwjgAdyZgHN34eEB3JmAc3fh4QHcmYBzd+HhAdyZgHN34eEB3JmAc3fh4QHcmYBzd+HhAdyZgHN34eEBfBOB62Z22cz4zu27mfH5tKkl54tG8fArZnbHzO6a2a0CRl/M7KOZvZ++C25tc2nvwO+b2eMVTy4lgte/MbNXZvar9GbV9b0Cx5NfmBmerTZgvzSz5+qGt7TXG/CLZva2UDa2vOfSNXj8Q2+p6Qk4Xv3azIDuac88vb0X4A8m2J6g532h7Xh7c+sBOFrNwri3EdHcbr2g7g0c0ADvxQghgd7M9gS+t4ysQW0qL3sBZ4f4YYcFcqvnoueAl9tewD+LNjNyIFODxOo3phSBtI89gPem22tAm+i5N3Bi7G8dS0kOnwUU8DLzBs4m46ns6ds3JPdyb+A/B/LuNJxSL/cE3msYeGyenJsZzy4xT+Dvppy25MEdGyFiuaTqzxP4H9VD79COTFa8gHNKw0ZnVCN3zoJfbV7AR4m914ByPlpytLc6MF7AOWF5VO0e+zXAYcVVRfdewIlnbyoeeMc2JKwkjWyAEMAnSB7A2c6zYC7VkGwYq24uQVKQliprDfxUYAOZWLy6vKIl8FOCDXAJK0kjC3Ps1GB3D5xyB1n+oUo0NTf/UBUltfDwfFf5e6p0Giktmw8TtYnUzVRbC+AcMMxL1MhDsLrz91Gt2619noKdPyjQKTEe0TjfpG6l2tQeTrydcg5ICZ6eQilOwamGHc14D1n5nRI4cOeyQVnwvKJq1IxhtwcQeUZwaRqOKCuSHWaa1koPn0vG2jQc7ZjtqzoloQQ+T1Ct5Y/RQhafURZP6fGabPc0TZf5EVqu3/OFkniWovtR7J6ZcR4rMaWHz4Efi1tHOlDudtEsAU5Eg7RckLhN20aksrKXh4OI/Di6PwJ0mawogW9ZNHNfHCVqkcmKEvg8LCyZhiNAL3mfgwKnBJ6DK8k/sAtlIe1ZXiRF+krgxNgUayYrnYZoOtB7jdElKVolcEDn4V7ptphBI0XQa+68mld1A5lg5Zua/63JI2xkTeitlqWaV3UDGfA8BVt70o3M4PEMZK2+k27g+fiw3tAmv1BRYtW8qhvInnZecC/RvKl9pCb9dAeDcG0DJRJohKp8kLqlmpLU7hb4kvpCJfBcTiSr+gpYND6vZiV/k3Ie6UdqNozLv0sOwSdryPt1VQiklpM1WEsVAerBZQ0hVE0piC6TV8fkBA9CM3kJ5Kb0jJDjObw6/w2VJ1NVQIk373atSlIOyQmQ0yI1f1G0lVkB/LUSMvQ63b/0YzVqz24+ECrg+WkPteBMSQZiywEswOcezz2Hij8pzKHt0lnSHOixDlTAvcqRU1ERBf7VhZXH4LT4dxXwY//hFVAsPHzwSmJrZGZrbE2UwL3Dgk6DpwKOBODleXxMPiWBXnIYZCNFA7mE0B5hWPpu4XDubaqApwfHa1ncAAXoIad9y1FQA2/5rCfRdgB3HsYAHsCdCTh3Fx4ewJ0JOHcXHh7AnQk4dxceHsCdCTh3Fx4ewJ0JOHcXHh7AnQk4dxceHsCdCTh39xcAKM9d4SxyPgAAAABJRU5ErkJggg==";

/* src\routes\_components\NavIcon.svelte generated by Svelte v3.23.0 */

const css$4 = {
	code: "img.svelte-1iaoxa9{width:46px;height:46px}.navIcon.svelte-1iaoxa9{position:relative}.notificationDot.svelte-1iaoxa9{position:absolute;top:10px;left:22px;width:10px;height:10px;background-color:#DF3C3C;border-radius:999px}.navIcon.svelte-1iaoxa9 .notificationDot.navIcon-following{left:24px}.navIcon.svelte-1iaoxa9 .notificationDot.navIcon-messages{left:30px}",
	map: "{\"version\":3,\"file\":\"NavIcon.svelte\",\"sources\":[\"NavIcon.svelte\"],\"sourcesContent\":[\"<script>\\r\\n    import { writable } from 'svelte/store';\\r\\n\\r\\n    import NavHomeIcon from \\\"../../assets/icons/nav_home.png\\\";\\r\\n    import NavDiscoverIcon from \\\"../../assets/icons/nav_discover.png\\\";\\r\\n    import NavFollowingIcon from \\\"../../assets/icons/nav_following.png\\\";\\r\\n    import NavActivityIcon from \\\"../../assets/icons/nav_activity.png\\\";\\r\\n    import NavMessagesIcon from \\\"../../assets/icons/nav_messages.png\\\";\\r\\n\\r\\n    import NavHomeActiveIcon from \\\"../../assets/icons/nav_home_active.png\\\";\\r\\n    import NavDiscoverActiveIcon from \\\"../../assets/icons/nav_discover_active.png\\\";\\r\\n    import NavFollowingActiveIcon from \\\"../../assets/icons/nav_following_active.png\\\";\\r\\n    import NavActivityActiveIcon from \\\"../../assets/icons/nav_activity_active.png\\\";\\r\\n    import NavMessagesActiveIcon from \\\"../../assets/icons/nav_messages_active.png\\\";\\r\\n\\r\\n\\timport {\\r\\n\\t\\tshowBetaFeatures,\\r\\n    } from '../../models/appModel';\\r\\n\\r\\n    export let iconId = 'home';\\r\\n\\r\\n    export let notificationModel = writable(null);\\r\\n\\r\\n    let icons = {\\r\\n        'home': {icon: NavHomeIcon, activeIcon: NavHomeActiveIcon},\\r\\n        'discover': {icon: $showBetaFeatures ? NavDiscoverIcon : NavHomeIcon, activeIcon: $showBetaFeatures ? NavDiscoverActiveIcon : NavHomeActiveIcon},\\r\\n        'following': {icon: NavFollowingIcon, activeIcon: NavFollowingActiveIcon},\\r\\n        'activity': {icon: NavActivityIcon, activeIcon: NavActivityActiveIcon},\\r\\n        'messages': {icon: NavMessagesIcon, activeIcon: NavMessagesActiveIcon},\\r\\n    }\\r\\n\\r\\n    $: iconItem = icons[iconId];\\r\\n    $: iconSrc = (iconItem && iconItem.icon) || '';\\r\\n    $: iconActiveSrc = (iconItem && iconItem.activeIcon) || '';\\r\\n\\r\\n    export let active = false;\\r\\n    export let label = false;\\r\\n</script>\\r\\n\\r\\n<div class=\\\"navIcon\\\">\\r\\n    {#if active}\\r\\n        <img src='{iconActiveSrc}' alt='{label}' />\\r\\n    {:else}\\r\\n        <img src='{iconSrc}' alt='{label}' />\\r\\n    {/if}\\r\\n    {#if $notificationModel && $notificationModel > 0}\\r\\n        <div class=\\\"notificationDot navIcon-{iconId}\\\" />\\r\\n    {/if}\\r\\n</div>\\r\\n\\r\\n<style>\\r\\n    img {\\r\\n        width: 46px;\\r\\n        height: 46px;\\r\\n    }\\r\\n\\r\\n    .navIcon {\\r\\n        position: relative;\\r\\n    }\\r\\n\\r\\n    .notificationDot {\\r\\n        position: absolute;\\r\\n        top: 10px;\\r\\n        left: 22px;\\r\\n        width: 10px;\\r\\n        height: 10px;\\r\\n        background-color: #DF3C3C;\\r\\n        border-radius: 999px;\\r\\n    }\\r\\n\\r\\n    .navIcon :global(.notificationDot.navIcon-following) {\\r\\n        left: 24px;\\r\\n    }\\r\\n    .navIcon :global(.notificationDot.navIcon-messages) {\\r\\n        left: 30px;\\r\\n    }\\r\\n</style>\"],\"names\":[],\"mappings\":\"AAmDI,GAAG,eAAC,CAAC,AACD,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,AAChB,CAAC,AAED,QAAQ,eAAC,CAAC,AACN,QAAQ,CAAE,QAAQ,AACtB,CAAC,AAED,gBAAgB,eAAC,CAAC,AACd,QAAQ,CAAE,QAAQ,CAClB,GAAG,CAAE,IAAI,CACT,IAAI,CAAE,IAAI,CACV,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,gBAAgB,CAAE,OAAO,CACzB,aAAa,CAAE,KAAK,AACxB,CAAC,AAED,uBAAQ,CAAC,AAAQ,kCAAkC,AAAE,CAAC,AAClD,IAAI,CAAE,IAAI,AACd,CAAC,AACD,uBAAQ,CAAC,AAAQ,iCAAiC,AAAE,CAAC,AACjD,IAAI,CAAE,IAAI,AACd,CAAC\"}"
};

const NavIcon = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let $showBetaFeatures = get_store_value(showBetaFeatures);
	let $notificationModel;
	let { iconId = "home" } = $$props;
	let { notificationModel = writable$1(null) } = $$props;
	$notificationModel = get_store_value(notificationModel);

	let icons = {
		"home": {
			icon: img$3,
			activeIcon: img$8
		},
		"discover": {
			icon: $showBetaFeatures ? img$4 : img$3,
			activeIcon: $showBetaFeatures
			? img$9
			: img$8
		},
		"following": {
			icon: img$5,
			activeIcon: img$a
		},
		"activity": {
			icon: img$6,
			activeIcon: img$b
		},
		"messages": {
			icon: img$7,
			activeIcon: img$c
		}
	};

	let { active = false } = $$props;
	let { label = false } = $$props;
	if ($$props.iconId === void 0 && $$bindings.iconId && iconId !== void 0) $$bindings.iconId(iconId);
	if ($$props.notificationModel === void 0 && $$bindings.notificationModel && notificationModel !== void 0) $$bindings.notificationModel(notificationModel);
	if ($$props.active === void 0 && $$bindings.active && active !== void 0) $$bindings.active(active);
	if ($$props.label === void 0 && $$bindings.label && label !== void 0) $$bindings.label(label);
	$$result.css.add(css$4);
	$notificationModel = get_store_value(notificationModel);
	let iconItem = icons[iconId];
	let iconSrc = iconItem && iconItem.icon || "";
	let iconActiveSrc = iconItem && iconItem.activeIcon || "";

	return `<div class="${"navIcon svelte-1iaoxa9"}">${active
	? `<img${add_attribute("src", iconActiveSrc, 0)}${add_attribute("alt", label, 0)} class="${"svelte-1iaoxa9"}">`
	: `<img${add_attribute("src", iconSrc, 0)}${add_attribute("alt", label, 0)} class="${"svelte-1iaoxa9"}">`}
    ${$notificationModel && $notificationModel > 0
	? `<div class="${"notificationDot navIcon-" + escape(iconId) + " svelte-1iaoxa9"}"></div>`
	: ``}
</div>`;
});

const NotificationModel = (notificationData) => {
    let initData = {
        id: '',
        userId: '',

        type: '',
        isUserAction: true,

        title: '',
        thumb: null,
        message: null,

        createdAt: 0,

        // seen: false,
        viewed: false,

        actors: [],

        postId: '',
        threadId: '',
        channelId: '',

        projectId: '',
        projectName: '',
    };

    if (notificationData) {
        initData = Object.assign(initData, notificationData);
    }
    return writable$1(initData);
};

let loadingNotifications = writable$1(false);

let curNotificationFilterOptions = null;

let notificationsUpdatedHandlers = [];

let projectNotificationCounts = [];
let channelNotificationCounts = [];
let threadNotificationCounts = [];

let pollStarted$1 = false;
let curPollNotificationTimeout = null;

let notificationsLoadedAt = null;

let notifications = writable$1([]);

let notificationUnviewedCount = writable$1(0);
let projectsUnviewedCount = writable$1(0);

// $: getNotifications({ userId: $userId, getUnviewed: true });

userId.subscribe(updateNotifications$1);
usercode.subscribe(updateNotifications$1);

// WindowFocusUtil.focused.subscribe(onWindowFocusUpdated);

function updateNotifications$1(options) {
	const isPoll = (options && options.isPoll) || false;
	if (get_store_value(userId) && get_store_value(usercode)) {
		const details = { userId: get_store_value(userId), getUnviewed: true };
		if (isPoll && notificationsLoadedAt) {
			details.loadedAt = notificationsLoadedAt;
		}
		getNotifications$1(details);

		if (!pollStarted$1) {
			pollStarted$1 = true;
			pollNotification();
		}
	}
}

let lastPollTime$1 = (new Date()).getTime();
function pollNotification() {
	if (typeof window !== 'undefined') {
		// const curPollDelay = isActivityPage() ? config.NOTIFICATION_POLL_DELAY_FOCUSED : config.NOTIFICATION_POLL_DELAY;
		let curPollDelay = config$1.NOTIFICATION_POLL_DELAY;
		if (!PageInteractionUtil.isActive()) {
			curPollDelay = config$1.NOTIFICATION_POLL_DELAY_IDLE;
		} else if (isActivityPage()) {
			curPollDelay = config$1.NOTIFICATION_POLL_DELAY_FOCUSED;
		}

		curPollNotificationTimeout = window.setTimeout(() => {
			const curTime = (new Date()).getTime();
			const lastPollDuration = (curTime - lastPollTime$1) / 1000;
			const canPoll = lastPollDuration >= curPollDelay;
			// console.log('canPoll', canPoll, curPollDelay, lastPollDuration);
			if (canPoll && get_store_value(user) && document.visibilityState === 'visible') {
				updateNotifications$1();
				lastPollTime$1 = curTime;
			}
			pollNotification();
		}, config$1.POLL_CHECK_DURATION * 1000);
	}
}

// function onWindowFocusUpdated() {
// 	if (typeof window !== 'undefined') {
// 		if (get(WindowFocusUtil.focused)) {
// 			console.log('ready start polling');
// 			if (pollStarted) {
// 				console.log('start polling');
// 				pollNotification();
// 			}
// 		} else {
// 			console.log('stop polling: ', curPollNotificationTimeout);
// 			if (curPollNotificationTimeout !== null) {
// 				window.clearTimeout(curPollNotificationTimeout);
// 				console.log('clear timeout: ', curPollNotificationTimeout);
// 				curPollNotificationTimeout = null;
// 			}
// 		}
// 	}
// }


function isActivityPage() {
	const path = get_store_value(curPath);
	return !!(path && path.match(/activity/));
}

notifications.subscribe(() => {
	const unviewedNotifications = get_store_value(notifications).filter(notification => !get_store_value(notification).viewed && !get_store_value(notification).indirect);
	notificationUnviewedCount.set(unviewedNotifications.length);
	// console.log('notificationUnviewedCount', get(notificationUnviewedCount));

	const unviewedProjectNotifications = get_store_value(notifications).filter(notification => {
		// if (!get(notification).viewed) {
		// 	console.log('unviewed notification: ', get(notification));
		// }
		return !get_store_value(notification).viewed && (get_store_value(notification).isProjectFollower || get_store_value(notification).isProjectMember);
	});
	projectsUnviewedCount.set(unviewedProjectNotifications.length);

});

notifications.subscribe(() => {
	notificationsUpdatedHandlers.forEach(handler => {
		handler();
	});
});

function loadNotifications(options) {
	if (!loadingRequestUtil.isLoading('notifications', options)) {
		// console.log('loadNotifications', options);
		loadingRequestUtil.setLoading('notifications', options, () => { loadingNotifications.set(true); });
		api.getNotifications(options).then(result => {
			if (!result.error) {
				if (result.loadedAt) {
					notificationsLoadedAt = result.loadedAt;
				}
				mergeNotifications(result.notifications);
			}
			loadingRequestUtil.clearLoading('notifications', options, () => { loadingNotifications.set(false); });
		});
	}
}

function mergeNotifications(newNotifications) {
	// console.log('newNotifications', newNotifications);

	if (newNotifications && newNotifications.length) {
		const curNotifications = get_store_value(notifications);

		let curNotification, newNotificationData, notificationId, newNotification;
		for (var notificationI = 0; notificationI < newNotifications.length; notificationI++) {
			newNotificationData = newNotifications[notificationI];
			notificationId = newNotificationData.id;
            curNotification = curNotifications.find(match => get_store_value(match).id === notificationId);
            if (!curNotification) {
                curNotification = NotificationModel(newNotificationData);
                curNotifications.unshift(curNotification);
            } else {
                newNotification = get_store_value(curNotification);
                newNotification = Object.assign(newNotification, newNotificationData);
                curNotification.set(newNotification);
            }
		}

		curNotifications.sort((a,b) => get_store_value(b).createdAt - get_store_value(a).createdAt ); // sort by reversed created time

		notifications.set(curNotifications);
	}
}

function getNotifications$1(options) {
    if (curNotificationFilterOptions && options && (
        curNotificationFilterOptions.userId !== options.userId
    )) {
        clearFilteredNotifications();
    }

    curNotificationFilterOptions = JSON.parse(JSON.stringify(options));

    if (curNotificationFilterOptions.userId) {
        loadNotifications(curNotificationFilterOptions);
    }

	return notifications;
}

function getUnviewedProjectNotificationCount(projectId) {
	let curProjectNotificationCount = projectNotificationCounts[projectId];

	if (!curProjectNotificationCount) {
		// console.log('create count model');
		curProjectNotificationCount = writable$1(0);
		notifications.subscribe(() => {
			const unviewedNotifications = get_store_value(notifications).filter(notification => {
				const curNotification = get_store_value(notification);
				return (!curNotification.viewed && curNotification.type === NotificationTypes.POST_ADDED && curNotification.projectId === projectId);
			});
			curProjectNotificationCount.set(unviewedNotifications.length);

			// console.log('project ' + projectId + ' notification count: ' + unviewedNotifications.length);
		});
		projectNotificationCounts[projectId] = curProjectNotificationCount;
	}

	return curProjectNotificationCount;
}

function getUnviewedChannelNotificationCount(channelId) {
	let curChannelNotificationCount = channelNotificationCounts[channelId];

	if (!curChannelNotificationCount) {
		curChannelNotificationCount = writable$1(0);
		notifications.subscribe(() => {
			const unviewedNotifications = get_store_value(notifications).filter(notification => {
				const curNotification = get_store_value(notification);
				return (!curNotification.viewed && curNotification.type === NotificationTypes.POST_ADDED && curNotification.channelId === channelId);
			});
			curChannelNotificationCount.set(unviewedNotifications.length);
		});
		channelNotificationCounts[channelId] = curChannelNotificationCount;
	}

	return curChannelNotificationCount;
}

function getUnviewedThreadNotificationCount(threadId) {
	let curThreadNotificationCount = threadNotificationCounts[threadId];

	if (!curThreadNotificationCount) {
		curThreadNotificationCount = writable$1(0);
		notifications.subscribe(() => {
			const unviewedNotifications = get_store_value(notifications).filter(notification => {
				const curNotification = get_store_value(notification);
				return (!curNotification.viewed && curNotification.type === NotificationTypes.POST_ADDED && (curNotification.postId === threadId || curNotification.threadId === threadId));
			});
			curThreadNotificationCount.set(unviewedNotifications.length);
			// console.log('threadId', threadId, unviewedNotifications.length);
		});
		threadNotificationCounts[threadId] = curThreadNotificationCount;
	}

	return curThreadNotificationCount;
}

function clearFilteredNotifications() {
	const curNotifications = get_store_value(notifications);
	curNotifications.length = 0;
	notifications.set(curNotifications);
}

// export function getNotification(notificationId) {
// 	return get(notifications).find(item => get(item).id === notificationId);
// }

function checkNotificationSeen(details) {
	if (details.postId || details.threadId) {
		const postId = details.postId;
		const threadId = details.threadId;
		const notificationModels = get_store_value(notifications).filter(itemModel => {
			const item = get_store_value(itemModel);
			return !item.viewed && ((item.postId === postId) || (item.threadId === threadId));
		});

		const notificationsViewed = [];

		notificationModels.forEach((notificationModel) => {
			const notification = get_store_value(notificationModel);
			// console.log('notification before', JSON.parse(JSON.stringify(notification)));

			if (!notification.viewed) {
				notificationsViewed.push(notification.id);
				notification.viewed = true;
				notificationModel.set(notification);

				notifications.set(get_store_value(notifications));
			}
		});

		if (notificationsViewed.length) {
			// console.log('update notificationsViewed: ', notificationsViewed);
			const result = api.updateNotifications({ids: notificationsViewed});
			// if (config.DEBUG) {
			// 	result.then((result) => {
			// 		console.log('notifications updated: ', result);
			// 	});
			// }
		}
	}
}

function setNotificationSeenTimeout(details, delay) {
	let notificationSeenTimeout = null;
	if (typeof window !== 'undefined') {
		notificationSeenTimeout = window.setTimeout(() => {
			checkNotificationSeen(details);
		}, (delay || config$1.ITEM_VIEWED_DELAY) * 1000);
	}

	// onDestroy(() => { // doesn't work here?
	// 	clearNotificationSeenTimeout(notificationSeenTimeout);
	// });

	return notificationSeenTimeout;
}

function clearNotificationSeenTimeout(notificationSeenTimeout) {
	if (notificationSeenTimeout && typeof window !== 'undefined') {
		window.clearTimeout(notificationSeenTimeout);
	}
}

/* src\routes\_components\Nav.svelte generated by Svelte v3.23.0 */

const css$5 = {
	code: "nav.svelte-uunw45{box-sizing:border-box;font-weight:300;padding:0 10px;bottom:0;position:absolute;width:100%;height:76px;background:#ffffff;box-shadow:0 -2px 5px 0 rgba(0,0,0,0.15)}.button.svelte-uunw45{cursor:pointer;text-decoration:none;padding:10px 0;display:block;display:flex;align-items:center;justify-content:center}.disabled.svelte-uunw45{cursor:initial;opacity:0.2}ul.svelte-uunw45{margin:0;padding:0;display:flex;justify-content:space-between}ul.svelte-uunw45::after{content:'';display:block;clear:both}li.svelte-uunw45{display:block;float:left;flex:1}",
	map: "{\"version\":3,\"file\":\"Nav.svelte\",\"sources\":[\"Nav.svelte\"],\"sourcesContent\":[\"<script>\\r\\n\\timport { writable } from 'svelte/store';\\r\\n\\r\\n\\timport NavIcon from '../_components/NavIcon.svelte';\\r\\n\\r\\n\\timport { getMainSections, getIconForSection, getMainSectionForSegment, getMainSectionForRoute, getIdForSection } from '../../models/sectionsModel.js';\\r\\n\\r\\n\\timport { project, getIsProjectTeamMember, showBetaFeatures, user } from '../../models/appModel';\\r\\n\\r\\n\\timport { projectsUnviewedCount, notificationUnviewedCount } from '../../models/notificationsModel';\\r\\n\\timport { conversationsUnviewedCount } from '../../models/conversationsModel';\\r\\n\\r\\n\\timport { setNavSection } from '../../actions/appActions';\\r\\n\\r\\n\\texport let segment;\\r\\n\\texport let path;\\r\\n\\r\\n\\t$: isFollowing = $project && ($project.following || $user && getIsProjectTeamMember($project)); // $project.isOwner);\\r\\n\\r\\n\\tlet mainSections = getMainSections();\\r\\n\\r\\n\\tlet notificationModels = {\\r\\n\\t\\t'activity': notificationUnviewedCount,\\r\\n\\t\\t'projects': projectsUnviewedCount,\\r\\n\\t\\t'messages': conversationsUnviewedCount,\\r\\n\\t};\\r\\n\\r\\n\\texport let keyboardShown = false;\\r\\n\\r\\n\\tlet mainSection;\\r\\n\\r\\n\\t$: {\\r\\n\\t\\tmainSection = getMainSectionForRoute(segment, path);\\r\\n\\t\\tif (/\\\\/projects\\\\/.+/.test(path) && !isFollowing) {\\r\\n\\t\\t\\tmainSection = null; // don't select 'following' nav icon if not following or not owner of project\\r\\n\\t\\t} else if (/\\\\/channels\\\\/.+/.test(path) && isFollowing) {\\r\\n\\t\\t\\tmainSection = 'projects';\\r\\n\\t\\t} else if (/\\\\/posts\\\\/.+/.test(path) && isFollowing) {\\r\\n\\t\\t\\tmainSection = 'projects';\\r\\n\\t\\t}\\r\\n\\t\\t// if (mainSection === 'projects' && !isFollowing) {\\r\\n\\t\\t// \\tmainSection = null;\\r\\n\\t\\t// }\\r\\n\\t\\t// console.log('mainSection',mainSection);\\r\\n\\t}\\r\\n\\t// $: mainSection = getMainSectionForSegment(segment);\\r\\n\\t// export let path;\\r\\n\\r\\n\\tfunction selectSection() {\\r\\n\\r\\n\\t}\\r\\n</script>\\r\\n\\r\\n{#if !keyboardShown}\\r\\n\\t<nav>\\r\\n\\t\\t<ul>\\r\\n\\t\\t\\t{#each mainSections as section}\\r\\n\\t\\t\\t\\t{#if $showBetaFeatures || !section.betaHidden}\\r\\n\\t\\t\\t\\t\\t<li><div class=\\\"button\\\" class:disabled=\\\"{!$showBetaFeatures && section.beta}\\\" aria-current=\\\"{mainSection === section.segment ? 'page' : undefined}\\\" on:click=\\\"{($showBetaFeatures || !section.beta) ? () => setNavSection(section) : null}\\\" title=\\\"{section.label}\\\">\\r\\n\\t\\t\\t\\t\\t\\t<NavIcon iconId=\\\"{getIconForSection(section)}\\\" active=\\\"{mainSection === section.segment}\\\" label=\\\"{section.label}\\\" notificationModel=\\\"{notificationModels[getIdForSection(section)]}\\\" />\\r\\n\\t\\t\\t\\t\\t</div></li>\\r\\n\\t\\t\\t\\t{/if}\\r\\n\\t\\t\\t{/each}\\r\\n\\t\\t</ul>\\r\\n\\t</nav>\\r\\n{/if}\\r\\n\\r\\n<style>\\r\\n\\tnav {\\r\\n\\t\\tbox-sizing: border-box;\\r\\n\\r\\n\\t\\t/* border-bottom: 1px solid rgba(255,62,0,0.1); */\\r\\n\\t\\tfont-weight: 300;\\r\\n\\t\\tpadding: 0 10px;\\r\\n\\r\\n\\t\\tbottom: 0;\\r\\n\\t\\tposition: absolute;\\r\\n\\r\\n\\t\\twidth: 100%;\\r\\n    \\theight: 76px;\\r\\n\\r\\n\\t\\tbackground: #ffffff;\\r\\n\\t\\tbox-shadow: 0 -2px 5px 0 rgba(0,0,0,0.15);\\r\\n\\t}\\r\\n\\r\\n\\t.button {\\r\\n\\t\\tcursor: pointer;\\r\\n\\r\\n\\t\\ttext-decoration: none;\\r\\n    \\tpadding: 10px 0;\\r\\n\\t\\tdisplay: block;\\r\\n\\r\\n\\t\\tdisplay: flex;\\r\\n\\t\\talign-items: center;\\r\\n\\t\\tjustify-content: center;\\r\\n\\t}\\r\\n\\r\\n\\t.disabled {\\r\\n\\t\\tcursor: initial;\\r\\n\\t\\topacity: 0.2;\\r\\n\\t}\\r\\n\\r\\n\\tul {\\r\\n\\t\\tmargin: 0;\\r\\n\\t\\tpadding: 0;\\r\\n\\r\\n\\t\\tdisplay: flex;\\r\\n\\t\\tjustify-content: space-between;\\r\\n\\t}\\r\\n\\r\\n\\t/* clearfix */\\r\\n\\tul::after {\\r\\n\\t\\tcontent: '';\\r\\n\\t\\tdisplay: block;\\r\\n\\t\\tclear: both;\\r\\n\\t}\\r\\n\\r\\n\\tli {\\r\\n\\t\\tdisplay: block;\\r\\n\\t\\tfloat: left;\\r\\n\\r\\n  \\t\\tflex: 1;\\r\\n\\t}\\r\\n\\r\\n\\t/* [aria-current] {\\r\\n\\t\\tposition: relative;\\r\\n\\t\\tdisplay: inline-block;\\r\\n\\t}\\r\\n\\r\\n\\t[aria-current]::after {\\r\\n\\t\\tposition: absolute;\\r\\n\\t\\tcontent: '';\\r\\n\\t\\twidth: calc(100% - 1em);\\r\\n\\t\\theight: 2px;\\r\\n\\t\\tbackground-color: #333333;\\r\\n\\t\\tdisplay: block;\\r\\n\\t\\tbottom: -1px;\\r\\n\\t} */\\r\\n</style>\"],\"names\":[],\"mappings\":\"AAoEC,GAAG,cAAC,CAAC,AACJ,UAAU,CAAE,UAAU,CAGtB,WAAW,CAAE,GAAG,CAChB,OAAO,CAAE,CAAC,CAAC,IAAI,CAEf,MAAM,CAAE,CAAC,CACT,QAAQ,CAAE,QAAQ,CAElB,KAAK,CAAE,IAAI,CACR,MAAM,CAAE,IAAI,CAEf,UAAU,CAAE,OAAO,CACnB,UAAU,CAAE,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,AAC1C,CAAC,AAED,OAAO,cAAC,CAAC,AACR,MAAM,CAAE,OAAO,CAEf,eAAe,CAAE,IAAI,CAClB,OAAO,CAAE,IAAI,CAAC,CAAC,CAClB,OAAO,CAAE,KAAK,CAEd,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,MAAM,CACnB,eAAe,CAAE,MAAM,AACxB,CAAC,AAED,SAAS,cAAC,CAAC,AACV,MAAM,CAAE,OAAO,CACf,OAAO,CAAE,GAAG,AACb,CAAC,AAED,EAAE,cAAC,CAAC,AACH,MAAM,CAAE,CAAC,CACT,OAAO,CAAE,CAAC,CAEV,OAAO,CAAE,IAAI,CACb,eAAe,CAAE,aAAa,AAC/B,CAAC,AAGD,gBAAE,OAAO,AAAC,CAAC,AACV,OAAO,CAAE,EAAE,CACX,OAAO,CAAE,KAAK,CACd,KAAK,CAAE,IAAI,AACZ,CAAC,AAED,EAAE,cAAC,CAAC,AACH,OAAO,CAAE,KAAK,CACd,KAAK,CAAE,IAAI,CAET,IAAI,CAAE,CAAC,AACV,CAAC\"}"
};

const Nav = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let $project = get_store_value(project);
	let $user = get_store_value(user);
	let $showBetaFeatures = get_store_value(showBetaFeatures);
	let { segment } = $$props;
	let { path } = $$props;
	let mainSections = getMainSections();

	let notificationModels = {
		"activity": notificationUnviewedCount,
		"projects": projectsUnviewedCount,
		"messages": conversationsUnviewedCount
	};

	let { keyboardShown = false } = $$props;
	let mainSection;
	if ($$props.segment === void 0 && $$bindings.segment && segment !== void 0) $$bindings.segment(segment);
	if ($$props.path === void 0 && $$bindings.path && path !== void 0) $$bindings.path(path);
	if ($$props.keyboardShown === void 0 && $$bindings.keyboardShown && keyboardShown !== void 0) $$bindings.keyboardShown(keyboardShown);
	$$result.css.add(css$5);
	let isFollowing = $project && ($project.following || $user && getIsProjectTeamMember($project));

	 {
		{
			mainSection = getMainSectionForRoute(segment, path);

			if ((/\/projects\/.+/).test(path) && !isFollowing) {
				mainSection = null; // don't select 'following' nav icon if not following or not owner of project
			} else if ((/\/channels\/.+/).test(path) && isFollowing) {
				mainSection = "projects";
			} else if ((/\/posts\/.+/).test(path) && isFollowing) {
				mainSection = "projects";
			}
		} // if (mainSection === 'projects' && !isFollowing) {
	}

	return `${!keyboardShown
	? `<nav class="${"svelte-uunw45"}"><ul class="${"svelte-uunw45"}">${each(mainSections, section => `${$showBetaFeatures || !section.betaHidden
		? `<li class="${"svelte-uunw45"}"><div class="${[
				"button svelte-uunw45",
				!$showBetaFeatures && section.beta ? "disabled" : ""
			].join(" ").trim()}"${add_attribute("aria-current", mainSection === section.segment ? "page" : undefined, 0)}${add_attribute("title", section.label, 0)}>${validate_component(NavIcon, "NavIcon").$$render(
				$$result,
				{
					iconId: getIconForSection(section),
					active: mainSection === section.segment,
					label: section.label,
					notificationModel: notificationModels[getIdForSection(section)]
				},
				{},
				{}
			)}
					</div></li>`
		: ``}`)}</ul></nav>`
	: ``}`;
});

/* src\routes\_components\LogInPrompt.svelte generated by Svelte v3.23.0 */

const css$6 = {
	code: ".logInPrompt.svelte-bwurl3{display:flex;align-items:center;justify-content:center;flex-flow:wrap}.field.svelte-bwurl3{padding:0 16px;padding-top:20px;padding-bottom:10px}.label.svelte-bwurl3{font-size:1.3rem;padding-left:7px;color:#888888;text-align:left}input.svelte-bwurl3{border:none;outline:none;background:none;border-bottom:1px solid #cccccc;width:100%;box-sizing:border-box;font-size:1.5rem;color:#333333;padding:6px 7px}",
	map: "{\"version\":3,\"file\":\"LogInPrompt.svelte\",\"sources\":[\"LogInPrompt.svelte\"],\"sourcesContent\":[\"<script>\\r\\n    import locale from '../../locale';\\r\\n    import config from '../../config';\\r\\n\\r\\n\\timport { writable } from 'svelte/store';\\r\\n\\timport { createEventDispatcher } from 'svelte';\\r\\n    const dispatch = createEventDispatcher();\\r\\n\\r\\n    import { trim, testInputDefocus } from '../../utils';\\r\\n\\r\\n    import {\\r\\n        logInFormValidated,\\r\\n        username,\\r\\n        usercode,\\r\\n    } from '../../models/appModel';\\r\\n\\r\\n    export const details = writable({});\\r\\n\\r\\n    let usernameField;\\r\\n    let passField;\\r\\n\\r\\n    $details.username = $username;\\r\\n    $details.pass = ''; // $usercode;\\r\\n\\r\\n    $: {\\r\\n        if ($username) {\\r\\n            passField && passField.focus();\\r\\n        } else {\\r\\n            usernameField && usernameField.focus();\\r\\n        }\\r\\n    }\\r\\n\\r\\n    $: $logInFormValidated = !!(trim($details.username) && $details.pass);\\r\\n\\r\\n    $: {\\r\\n        $logInFormValidated;\\r\\n        dispatch('change');\\r\\n    }\\r\\n\\r\\n    function submit() {\\r\\n        if ($logInFormValidated) {\\r\\n            dispatch('confirm');\\r\\n        }\\r\\n    }\\r\\n\\r\\n    function randomiseProfileColor() {\\r\\n        randomiseUserProfileImageColor(newUser);\\r\\n    }\\r\\n</script>\\r\\n\\r\\n<div class=\\\"logInPrompt\\\">\\r\\n    <div class=\\\"field\\\">\\r\\n        <div class=\\\"label\\\">{locale.LOG_IN.USERNAME}</div>\\r\\n        <input bind:value=\\\"{$details.username}\\\" bind:this=\\\"{usernameField}\\\" on:keypress=\\\"{(e) => testInputDefocus(e, {target: passField})}\\\" />\\r\\n    </div>\\r\\n    <div class=\\\"field\\\">\\r\\n        <div class=\\\"label\\\">{locale.LOG_IN.PASS}</div>\\r\\n        <input type=\\\"password\\\" bind:value=\\\"{$details.pass}\\\" bind:this=\\\"{passField}\\\" on:keypress=\\\"{(e) => testInputDefocus(e, {action: submit})}\\\" />\\r\\n    </div>\\r\\n</div>\\r\\n\\r\\n<style>\\r\\n    .logInPrompt {\\r\\n        display:flex;\\r\\n        align-items: center;\\r\\n        justify-content: center;\\r\\n        flex-flow: wrap;\\r\\n    }\\r\\n\\r\\n\\t.field {\\r\\n    \\tpadding: 0 16px;\\r\\n        padding-top: 20px;\\r\\n        padding-bottom: 10px;\\r\\n\\t}\\r\\n\\r\\n\\t.label {\\r\\n\\t\\tfont-size: 1.3rem;\\r\\n    \\tpadding-left: 7px;\\r\\n\\t\\tcolor: #888888;\\r\\n\\r\\n        text-align: left;\\r\\n\\t}\\r\\n\\r\\n\\tinput {\\r\\n        border: none;\\r\\n        outline: none;\\r\\n        background: none;\\r\\n\\r\\n\\t\\tborder-bottom: 1px solid #cccccc;\\r\\n\\r\\n        width: 100%;\\r\\n        box-sizing: border-box;\\r\\n\\r\\n        font-size: 1.5rem;\\r\\n\\t\\tcolor: #333333;\\r\\n\\r\\n        padding: 6px 7px;\\r\\n        /* padding-left: 0; */\\r\\n\\t}\\r\\n</style>\"],\"names\":[],\"mappings\":\"AA8DI,YAAY,cAAC,CAAC,AACV,QAAQ,IAAI,CACZ,WAAW,CAAE,MAAM,CACnB,eAAe,CAAE,MAAM,CACvB,SAAS,CAAE,IAAI,AACnB,CAAC,AAEJ,MAAM,cAAC,CAAC,AACJ,OAAO,CAAE,CAAC,CAAC,IAAI,CACZ,WAAW,CAAE,IAAI,CACjB,cAAc,CAAE,IAAI,AAC3B,CAAC,AAED,MAAM,cAAC,CAAC,AACP,SAAS,CAAE,MAAM,CACd,YAAY,CAAE,GAAG,CACpB,KAAK,CAAE,OAAO,CAER,UAAU,CAAE,IAAI,AACvB,CAAC,AAED,KAAK,cAAC,CAAC,AACA,MAAM,CAAE,IAAI,CACZ,OAAO,CAAE,IAAI,CACb,UAAU,CAAE,IAAI,CAEtB,aAAa,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CAE1B,KAAK,CAAE,IAAI,CACX,UAAU,CAAE,UAAU,CAEtB,SAAS,CAAE,MAAM,CACvB,KAAK,CAAE,OAAO,CAER,OAAO,CAAE,GAAG,CAAC,GAAG,AAEvB,CAAC\"}"
};

const LogInPrompt = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let $details;
	let $username = get_store_value(username);
	let $logInFormValidated = get_store_value(logInFormValidated);
	const dispatch = createEventDispatcher();
	const details = writable$1({});
	$details = get_store_value(details);
	let usernameField;
	let passField;
	$details.username = $username;
	$details.pass = ""; // $usercode;

	if ($$props.details === void 0 && $$bindings.details && details !== void 0) $$bindings.details(details);
	$$result.css.add(css$6);
	$details = get_store_value(details);

	$logInFormValidated = !!(trim($details.username) && $details.pass);

	 {
		{
			dispatch("change");
		}
	}

	return `<div class="${"logInPrompt svelte-bwurl3"}"><div class="${"field svelte-bwurl3"}"><div class="${"label svelte-bwurl3"}">${escape(locale$1.LOG_IN.USERNAME)}</div>
        <input class="${"svelte-bwurl3"}"${add_attribute("value", $details.username, 1)}${add_attribute("this", usernameField, 1)}></div>
    <div class="${"field svelte-bwurl3"}"><div class="${"label svelte-bwurl3"}">${escape(locale$1.LOG_IN.PASS)}</div>
        <input type="${"password"}" class="${"svelte-bwurl3"}"${add_attribute("value", $details.pass, 1)}${add_attribute("this", passField, 1)}></div>
</div>`;
});

/* src\routes\_components\SignUpPrompt.svelte generated by Svelte v3.23.0 */

const css$7 = {
	code: ".signUpPrompt.svelte-62yrrh{display:flex;align-items:center;justify-content:center;flex-flow:wrap;padding-bottom:2px}.signUpPrompt.svelte-62yrrh .avatarIcon{width:80px;height:80px;border:4px solid #ffffff;box-sizing:content-box;overflow:initial;margin-top:0;margin-bottom:-4px}.signUpPrompt.svelte-62yrrh .avatarIconImage{border:1px solid #cacaca;border-radius:999px;overflow:hidden;box-sizing:border-box}.field.svelte-62yrrh{position:relative;padding:0 16px;padding-top:20px}.label.svelte-62yrrh{font-size:1.3rem;padding-left:7px;color:#888888;text-align:left}input.svelte-62yrrh{border:none;outline:none;background:none;border-bottom:1px solid #cccccc;width:100%;box-sizing:border-box;font-size:1.5rem;color:#333333;padding:6px 7px}.invalid.svelte-62yrrh{color:#DF3C3C}.errorLabel.svelte-62yrrh{position:absolute;right:20px;font-size:1.2rem;color:#DF3C3C}",
	map: "{\"version\":3,\"file\":\"SignUpPrompt.svelte\",\"sources\":[\"SignUpPrompt.svelte\"],\"sourcesContent\":[\"<script>\\r\\n    import locale from '../../locale';\\r\\n    import config from '../../config';\\r\\n\\r\\n\\timport { createEventDispatcher } from 'svelte';\\r\\n    const dispatch = createEventDispatcher();\\r\\n\\r\\n    import { trim, testInputDefocus, formatAsId, validateEmail, delayedTimeout } from '../../utils';\\r\\n\\r\\n    import { signUpFormValidated, newUsername } from '../../models/appModel';\\r\\n\\r\\n    import { getNewUser, randomiseUserProfileImageColor } from '../../models/usersModel';\\r\\n\\r\\n    import AvatarIcon from '../_components/AvatarIcon.svelte';\\r\\n\\r\\n    export const newUser = getNewUser();\\r\\n\\r\\n    let firstNameField;\\r\\n    let lastNameField;\\r\\n    let emailField;\\r\\n\\r\\n    $newUsername = '';\\r\\n\\r\\n    $: firstNameField && firstNameField.focus();\\r\\n\\r\\n    $: emailValidated = validateEmail(trim($newUser.email));\\r\\n    $: $signUpFormValidated = !!(trim($newUser.firstName) && emailValidated); //  && trim($newUser.lastName)\\r\\n    $: $newUser.fullName = trim($newUser.firstName) + ' ' + trim($newUser.lastName);\\r\\n    $: $newUser.name = trim($newUser.fullName);\\r\\n    // $: $newUser.username = formatAsId($newUser.firstName + $newUser.lastName.substr(0, Math.min(1, $newUser.lastName.length)), config.MAX_ID_LENGTH);\\r\\n\\r\\n    $: {\\r\\n        $signUpFormValidated;\\r\\n        dispatch('change');\\r\\n    }\\r\\n\\r\\n    $: { // prevent disallowed characters\\r\\n        if ($newUser.email) {\\r\\n            $newUser.email = $newUser.email.replace(/[^a-zA-Z0-9_/-@.]/g,'')\\r\\n        }\\r\\n    }\\r\\n\\r\\n    let emailFlagInvalid = false;\\r\\n    $: {\\r\\n        $newUser.email;\\r\\n\\r\\n        emailFlagInvalid = false;\\r\\n\\r\\n        delayedTimeout('email', () => {\\r\\n            emailFlagInvalid = $newUser.email && !emailValidated;\\r\\n        }, config.INVALID_FIELD_DELAY);\\r\\n    }\\r\\n\\r\\n    function submit() {\\r\\n        if ($signUpFormValidated) {\\r\\n            dispatch('confirm');\\r\\n        }\\r\\n    }\\r\\n\\r\\n    function randomiseProfileColor() {\\r\\n        randomiseUserProfileImageColor(newUser);\\r\\n    }\\r\\n</script>\\r\\n\\r\\n<div class=\\\"signUpPrompt\\\">\\r\\n    <AvatarIcon user=\\\"{newUser}\\\" onClick=\\\"{randomiseProfileColor}\\\"/>\\r\\n    <div class=\\\"field\\\">\\r\\n        <div class=\\\"label\\\">{locale.SIGN_UP.FIRST_NAME}</div>\\r\\n        <input type=\\\"text\\\" id=\\\"fname\\\" name=\\\"fname\\\" autocomplete=\\\"given-name\\\" autocapitalize=\\\"words\\\" bind:value=\\\"{$newUser.firstName}\\\" bind:this=\\\"{firstNameField}\\\" on:keypress=\\\"{(e) => testInputDefocus(e, {target: lastNameField})}\\\" />\\r\\n    </div>\\r\\n    <div class=\\\"field\\\">\\r\\n        <div class=\\\"label\\\">{locale.SIGN_UP.LAST_NAME}</div>\\r\\n        <input type=\\\"text\\\" id=\\\"lname\\\" name=\\\"lname\\\" autocomplete=\\\"family-name\\\" autocapitalize=\\\"words\\\" bind:value=\\\"{$newUser.lastName}\\\" bind:this=\\\"{lastNameField}\\\" on:keypress=\\\"{(e) => testInputDefocus(e, {target: emailField})}\\\" />\\r\\n    </div>\\r\\n    <div class=\\\"field\\\">\\r\\n        <div class=\\\"label\\\">{locale.SIGN_UP.EMAIL}</div>\\r\\n        <input type=\\\"text\\\" id=\\\"email\\\" name=\\\"email\\\" autocomplete=\\\"email\\\" class:invalid=\\\"{emailFlagInvalid}\\\" bind:value=\\\"{$newUser.email}\\\" bind:this=\\\"{emailField}\\\" on:keypress=\\\"{(e) => testInputDefocus(e, {action: submit})}\\\" />\\r\\n        {#if emailFlagInvalid}<div class=\\\"errorLabel\\\">invalid email</div>{/if}\\r\\n    </div>\\r\\n</div>\\r\\n\\r\\n<style>\\r\\n    .signUpPrompt {\\r\\n        display:flex;\\r\\n        align-items: center;\\r\\n        justify-content: center;\\r\\n        flex-flow: wrap;\\r\\n\\r\\n        padding-bottom: 2px;\\r\\n    }\\r\\n\\r\\n    .signUpPrompt :global(.avatarIcon) {\\r\\n        width: 80px;\\r\\n        height: 80px;\\r\\n        /* width: 98px;\\r\\n        height: 98px; */\\r\\n\\r\\n        border: 4px solid #ffffff;\\r\\n        box-sizing: content-box;\\r\\n        overflow: initial;\\r\\n\\r\\n        margin-top: 0;\\r\\n        margin-bottom: -4px;\\r\\n    }\\r\\n    .signUpPrompt :global(.avatarIconImage) {\\r\\n        border: 1px solid #cacaca;\\r\\n        border-radius: 999px;\\r\\n        overflow: hidden;\\r\\n        box-sizing: border-box;\\r\\n    }\\r\\n\\r\\n\\t.field {\\r\\n        position: relative;\\r\\n    \\tpadding: 0 16px;\\r\\n        padding-top: 20px;\\r\\n        /* padding-bottom: 10px; */\\r\\n\\t}\\r\\n\\r\\n\\t.label {\\r\\n\\t\\tfont-size: 1.3rem;\\r\\n    \\tpadding-left: 7px;\\r\\n\\t\\tcolor: #888888;\\r\\n\\r\\n        text-align: left;\\r\\n\\t}\\r\\n\\r\\n\\tinput {\\r\\n        border: none;\\r\\n        outline: none;\\r\\n        background: none;\\r\\n\\r\\n\\t\\tborder-bottom: 1px solid #cccccc;\\r\\n\\r\\n        width: 100%;\\r\\n        box-sizing: border-box;\\r\\n\\r\\n        font-size: 1.5rem;\\r\\n\\t\\tcolor: #333333;\\r\\n\\r\\n        padding: 6px 7px;\\r\\n        /* padding-left: 0; */\\r\\n\\t}\\r\\n\\r\\n    .invalid {\\r\\n        color: #DF3C3C;\\r\\n    }\\r\\n\\r\\n    .errorLabel {\\r\\n        position: absolute;\\r\\n        right: 20px;\\r\\n\\r\\n        font-size: 1.2rem;\\r\\n\\r\\n        color: #DF3C3C;\\r\\n    }\\r\\n</style>\"],\"names\":[],\"mappings\":\"AAkFI,aAAa,cAAC,CAAC,AACX,QAAQ,IAAI,CACZ,WAAW,CAAE,MAAM,CACnB,eAAe,CAAE,MAAM,CACvB,SAAS,CAAE,IAAI,CAEf,cAAc,CAAE,GAAG,AACvB,CAAC,AAED,2BAAa,CAAC,AAAQ,WAAW,AAAE,CAAC,AAChC,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CAIZ,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CACzB,UAAU,CAAE,WAAW,CACvB,QAAQ,CAAE,OAAO,CAEjB,UAAU,CAAE,CAAC,CACb,aAAa,CAAE,IAAI,AACvB,CAAC,AACD,2BAAa,CAAC,AAAQ,gBAAgB,AAAE,CAAC,AACrC,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CACzB,aAAa,CAAE,KAAK,CACpB,QAAQ,CAAE,MAAM,CAChB,UAAU,CAAE,UAAU,AAC1B,CAAC,AAEJ,MAAM,cAAC,CAAC,AACD,QAAQ,CAAE,QAAQ,CACrB,OAAO,CAAE,CAAC,CAAC,IAAI,CACZ,WAAW,CAAE,IAAI,AAExB,CAAC,AAED,MAAM,cAAC,CAAC,AACP,SAAS,CAAE,MAAM,CACd,YAAY,CAAE,GAAG,CACpB,KAAK,CAAE,OAAO,CAER,UAAU,CAAE,IAAI,AACvB,CAAC,AAED,KAAK,cAAC,CAAC,AACA,MAAM,CAAE,IAAI,CACZ,OAAO,CAAE,IAAI,CACb,UAAU,CAAE,IAAI,CAEtB,aAAa,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CAE1B,KAAK,CAAE,IAAI,CACX,UAAU,CAAE,UAAU,CAEtB,SAAS,CAAE,MAAM,CACvB,KAAK,CAAE,OAAO,CAER,OAAO,CAAE,GAAG,CAAC,GAAG,AAEvB,CAAC,AAEE,QAAQ,cAAC,CAAC,AACN,KAAK,CAAE,OAAO,AAClB,CAAC,AAED,WAAW,cAAC,CAAC,AACT,QAAQ,CAAE,QAAQ,CAClB,KAAK,CAAE,IAAI,CAEX,SAAS,CAAE,MAAM,CAEjB,KAAK,CAAE,OAAO,AAClB,CAAC\"}"
};

const SignUpPrompt = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let $newUsername = get_store_value(newUsername);
	let $newUser;
	let $signUpFormValidated = get_store_value(signUpFormValidated);
	const dispatch = createEventDispatcher();
	const newUser = getNewUser();
	$newUser = get_store_value(newUser);
	let firstNameField;
	let lastNameField;
	let emailField;
	$newUsername = "";
	let emailFlagInvalid = false;

	function randomiseProfileColor() {
		randomiseUserProfileImageColor(newUser);
	}

	if ($$props.newUser === void 0 && $$bindings.newUser && newUser !== void 0) $$bindings.newUser(newUser);
	$$result.css.add(css$7);
	$newUser = get_store_value(newUser);
	$newUser.fullName = trim($newUser.firstName) + " " + trim($newUser.lastName);
	$newUser.name = trim($newUser.fullName);

	 {
		{
			// prevent disallowed characters
			if ($newUser.email) {
				$newUser.email = $newUser.email.replace(/[^a-zA-Z0-9_/-@.]/g, "");
			}
		}
	}

	let emailValidated = validateEmail(trim($newUser.email));
	$signUpFormValidated = !!(trim($newUser.firstName) && emailValidated); //  && trim($newUser.lastName)

	 {
		{
			dispatch("change");
		}
	}

	 {
		{
			$newUser.email;
			emailFlagInvalid = false;

			delayedTimeout(
				"email",
				() => {
					emailFlagInvalid = $newUser.email && !emailValidated;
				},
				config$1.INVALID_FIELD_DELAY
			);
		}
	}

	return `<div class="${"signUpPrompt svelte-62yrrh"}">${validate_component(AvatarIcon, "AvatarIcon").$$render(
		$$result,
		{
			user: newUser,
			onClick: randomiseProfileColor
		},
		{},
		{}
	)}
    <div class="${"field svelte-62yrrh"}"><div class="${"label svelte-62yrrh"}">${escape(locale$1.SIGN_UP.FIRST_NAME)}</div>
        <input type="${"text"}" id="${"fname"}" name="${"fname"}" autocomplete="${"given-name"}" autocapitalize="${"words"}" class="${"svelte-62yrrh"}"${add_attribute("value", $newUser.firstName, 1)}${add_attribute("this", firstNameField, 1)}></div>
    <div class="${"field svelte-62yrrh"}"><div class="${"label svelte-62yrrh"}">${escape(locale$1.SIGN_UP.LAST_NAME)}</div>
        <input type="${"text"}" id="${"lname"}" name="${"lname"}" autocomplete="${"family-name"}" autocapitalize="${"words"}" class="${"svelte-62yrrh"}"${add_attribute("value", $newUser.lastName, 1)}${add_attribute("this", lastNameField, 1)}></div>
    <div class="${"field svelte-62yrrh"}"><div class="${"label svelte-62yrrh"}">${escape(locale$1.SIGN_UP.EMAIL)}</div>
        <input type="${"text"}" id="${"email"}" name="${"email"}" autocomplete="${"email"}" class="${["svelte-62yrrh", emailFlagInvalid ? "invalid" : ""].join(" ").trim()}"${add_attribute("value", $newUser.email, 1)}${add_attribute("this", emailField, 1)}>
        ${emailFlagInvalid
	? `<div class="${"errorLabel svelte-62yrrh"}">invalid email</div>`
	: ``}</div>
</div>`;
});

/* src\routes\_components\SetAccountPrompt.svelte generated by Svelte v3.23.0 */

const css$8 = {
	code: ".setAccountPrompt.svelte-5g93ot{display:flex;align-items:center;justify-content:center;flex-flow:wrap;padding-bottom:2px}.setAccountPrompt.svelte-5g93ot .avatarIcon{width:108px;height:108px;border:4px solid #ffffff;box-sizing:content-box;overflow:initial;margin-top:4px;margin-bottom:-4px}.setAccountPrompt.svelte-5g93ot .avatarIconImage{border:1px solid #cacaca;border-radius:999px;overflow:hidden;box-sizing:border-box}.field.svelte-5g93ot{position:relative;padding:0 16px;padding-top:20px}.hidden.svelte-5g93ot{visibility:hidden}.usernameField.svelte-5g93ot{padding-top:15px;padding-bottom:35px}.label.svelte-5g93ot{font-size:1.3rem;padding-left:7px;color:#888888;text-align:left}input.svelte-5g93ot{border:none;outline:none;background:none;border-bottom:1px solid #cccccc;width:100%;box-sizing:border-box;font-size:1.5rem;color:#333333;padding:6px 7px}.invalid.svelte-5g93ot{color:#DF3C3C}.errorLabel.svelte-5g93ot{position:absolute;right:20px;font-size:1.2rem;color:#DF3C3C}",
	map: "{\"version\":3,\"file\":\"SetAccountPrompt.svelte\",\"sources\":[\"SetAccountPrompt.svelte\"],\"sourcesContent\":[\"<script>\\r\\n    import locale from '../../locale';\\r\\n    import config from '../../config';\\r\\n\\r\\n\\timport { createEventDispatcher } from 'svelte';\\r\\n    const dispatch = createEventDispatcher();\\r\\n\\r\\n    import { trim, testInputDefocus, formatAsId, validateUserName, delayedTimeout } from '../../utils';\\r\\n\\r\\n    import {\\r\\n        setAccountFormValidated,\\r\\n        user,\\r\\n        userId,\\r\\n        newUsername,\\r\\n    } from '../../models/appModel';\\r\\n\\r\\n    import { getNewUser, randomiseUserProfileImageColor } from '../../models/usersModel';\\r\\n\\r\\n    import AvatarIcon from '../_components/AvatarIcon.svelte';\\r\\n\\r\\n    export let userDetails = {};\\r\\n\\r\\n    let usernameField;\\r\\n    let passField;\\r\\n    let passRepeatField;\\r\\n\\r\\n    // let username = $user.username;\\r\\n\\r\\n    $: usernameField && usernameField.focus();\\r\\n\\r\\n    //let username = $user.username || $newUsername || formatAsId($user.firstName + $user.lastName.substr(0, Math.min(1, $user.lastName.length)), config.MAX_ID_LENGTH);\\r\\n    let username = $user ? ($user.username || $newUsername || formatAsId($user.name, config.MAX_ID_LENGTH)) : '';\\r\\n    let pass = '';\\r\\n    let passRepeat = '';\\r\\n\\r\\n    $: resetPass = $user && $user.resetPass;\\r\\n\\r\\n\\t$: { // prevent disallowed characters\\r\\n\\t\\tusername = username.toLowerCase();\\r\\n\\t\\tusername = username.replace(/[^a-z0-9._]/g, ''); // lowercase only\\r\\n\\t\\t// username = username.replace(/[^a-zA-Z0-9._]/gi, '');\\r\\n    }\\r\\n\\r\\n    $: usernameValidated = validateUserName(trim(username));\\r\\n    $: usernameTooShort = username.length < config.USER_NAME_MIN_LENGTH;\\r\\n    $: usernameTooLong = username.length > config.USER_NAME_MAX_LENGTH;\\r\\n\\r\\n    $: passValidated = pass && passRepeat && pass === passRepeat;\\r\\n\\r\\n    $: $setAccountFormValidated = !!((usernameValidated || resetPass) && pass && passRepeat && passValidated);\\r\\n\\r\\n    $: {\\r\\n        userDetails.id = $userId;\\r\\n        userDetails.username = username;\\r\\n        userDetails.pass = pass\\r\\n    }\\r\\n\\r\\n    let passwordInvalid = false;\\r\\n    $: {\\r\\n        pass; passRepeat;\\r\\n\\r\\n        passwordInvalid = false;\\r\\n\\r\\n        delayedTimeout('pass', () => {\\r\\n            passwordInvalid = pass && passRepeat && !passValidated;\\r\\n        }, config.INVALID_FIELD_DELAY);\\r\\n    }\\r\\n\\r\\n    let usernameFlagInvalid = false;\\r\\n    let usernameFlagTooShort = false;\\r\\n    let usernameFlagTooLong = false;\\r\\n    $: {\\r\\n        username;\\r\\n\\r\\n        usernameFlagInvalid = false;\\r\\n        usernameFlagTooShort = false;\\r\\n        usernameFlagTooLong = false;\\r\\n\\r\\n        delayedTimeout('username', () => {\\r\\n            usernameFlagInvalid = trim(username) && !usernameValidated;\\r\\n            usernameFlagTooShort = trim(username) && usernameTooShort;\\r\\n            usernameFlagTooLong = trim(username) && usernameTooLong;\\r\\n        }, config.INVALID_FIELD_DELAY);\\r\\n    }\\r\\n\\r\\n    $: {\\r\\n        $setAccountFormValidated;\\r\\n        dispatch('change');\\r\\n    }\\r\\n\\r\\n    function submit() {\\r\\n        if ($setAccountFormValidated) {\\r\\n            dispatch('confirm');\\r\\n        }\\r\\n    }\\r\\n</script>\\r\\n\\r\\n<div class=\\\"setAccountPrompt\\\">\\r\\n    {#if !resetPass}\\r\\n        <div class=\\\"field usernameField\\\">\\r\\n            <div class=\\\"label\\\">{locale.SET_ACCOUNT.USERNAME}</div>\\r\\n            <input bind:value=\\\"{username}\\\" bind:this=\\\"{usernameField}\\\" class:invalid=\\\"{usernameFlagInvalid}\\\" on:keypress=\\\"{(e) => testInputDefocus(e, {target: passField})}\\\" />\\r\\n            {#if usernameFlagTooShort}<div class=\\\"errorLabel\\\">username too short</div>\\r\\n            {:else if usernameFlagTooLong}<div class=\\\"errorLabel\\\">username too long</div>\\r\\n            {:else if usernameFlagInvalid}<div class=\\\"errorLabel\\\">invalid username</div>{/if}\\r\\n            <!-- {:else if usernameExists}<div class=\\\"errorLabel\\\">username exists</div>{/if} -->\\r\\n        </div>\\r\\n    {/if}\\r\\n    <div class=\\\"field\\\">\\r\\n        <div class=\\\"label\\\">{locale.SET_ACCOUNT.PASS}</div>\\r\\n        <input type=\\\"password\\\" bind:value=\\\"{pass}\\\" bind:this=\\\"{passField}\\\" on:keypress=\\\"{(e) => testInputDefocus(e, {target: passRepeatField})}\\\" />\\r\\n    </div>\\r\\n    <div class=\\\"field\\\" class:hidden=\\\"{!pass}\\\">\\r\\n        <div class=\\\"label\\\">{locale.SET_ACCOUNT.PASS_REPEAT}</div>\\r\\n        <input type=\\\"password\\\" bind:value=\\\"{passRepeat}\\\" bind:this=\\\"{passRepeatField}\\\" class:invalid=\\\"{passwordInvalid}\\\" on:keypress=\\\"{(e) => testInputDefocus(e, {action: submit})}\\\" />\\r\\n        {#if passwordInvalid}<div class=\\\"errorLabel\\\">passwords don't match</div>{/if}\\r\\n    </div>\\r\\n</div>\\r\\n\\r\\n<style>\\r\\n    .setAccountPrompt {\\r\\n        display:flex;\\r\\n        align-items: center;\\r\\n        justify-content: center;\\r\\n        flex-flow: wrap;\\r\\n\\r\\n        padding-bottom: 2px;\\r\\n    }\\r\\n\\r\\n    .setAccountPrompt :global(.avatarIcon) {\\r\\n        width: 108px;\\r\\n        height: 108px;\\r\\n\\r\\n        border: 4px solid #ffffff;\\r\\n        box-sizing: content-box;\\r\\n        overflow: initial;\\r\\n\\r\\n        margin-top: 4px;\\r\\n        margin-bottom: -4px;\\r\\n    }\\r\\n    .setAccountPrompt :global(.avatarIconImage) {\\r\\n        border: 1px solid #cacaca;\\r\\n        border-radius: 999px;\\r\\n        overflow: hidden;\\r\\n        box-sizing: border-box;\\r\\n    }\\r\\n\\r\\n\\t.field {\\r\\n        position: relative;\\r\\n    \\tpadding: 0 16px;\\r\\n        padding-top: 20px;\\r\\n        /* padding-bottom: 10px; */\\r\\n\\t}\\r\\n\\r\\n    .hidden {\\r\\n        visibility: hidden;\\r\\n    }\\r\\n\\r\\n    .usernameField {\\r\\n        padding-top: 15px;\\r\\n        padding-bottom: 35px;\\r\\n    }\\r\\n\\r\\n\\t.label {\\r\\n\\t\\tfont-size: 1.3rem;\\r\\n    \\tpadding-left: 7px;\\r\\n\\t\\tcolor: #888888;\\r\\n\\r\\n        text-align: left;\\r\\n\\t}\\r\\n\\r\\n\\tinput {\\r\\n        border: none;\\r\\n        outline: none;\\r\\n        background: none;\\r\\n\\r\\n\\t\\tborder-bottom: 1px solid #cccccc;\\r\\n\\r\\n        width: 100%;\\r\\n        box-sizing: border-box;\\r\\n\\r\\n        font-size: 1.5rem;\\r\\n\\t\\tcolor: #333333;\\r\\n\\r\\n        padding: 6px 7px;\\r\\n        /* padding-left: 0; */\\r\\n\\t}\\r\\n\\r\\n    .invalid {\\r\\n        color: #DF3C3C;\\r\\n    }\\r\\n\\r\\n    .errorLabel {\\r\\n        position: absolute;\\r\\n        right: 20px;\\r\\n\\r\\n        font-size: 1.2rem;\\r\\n\\r\\n        color: #DF3C3C;\\r\\n    }\\r\\n</style>\"],\"names\":[],\"mappings\":\"AAwHI,iBAAiB,cAAC,CAAC,AACf,QAAQ,IAAI,CACZ,WAAW,CAAE,MAAM,CACnB,eAAe,CAAE,MAAM,CACvB,SAAS,CAAE,IAAI,CAEf,cAAc,CAAE,GAAG,AACvB,CAAC,AAED,+BAAiB,CAAC,AAAQ,WAAW,AAAE,CAAC,AACpC,KAAK,CAAE,KAAK,CACZ,MAAM,CAAE,KAAK,CAEb,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CACzB,UAAU,CAAE,WAAW,CACvB,QAAQ,CAAE,OAAO,CAEjB,UAAU,CAAE,GAAG,CACf,aAAa,CAAE,IAAI,AACvB,CAAC,AACD,+BAAiB,CAAC,AAAQ,gBAAgB,AAAE,CAAC,AACzC,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CACzB,aAAa,CAAE,KAAK,CACpB,QAAQ,CAAE,MAAM,CAChB,UAAU,CAAE,UAAU,AAC1B,CAAC,AAEJ,MAAM,cAAC,CAAC,AACD,QAAQ,CAAE,QAAQ,CACrB,OAAO,CAAE,CAAC,CAAC,IAAI,CACZ,WAAW,CAAE,IAAI,AAExB,CAAC,AAEE,OAAO,cAAC,CAAC,AACL,UAAU,CAAE,MAAM,AACtB,CAAC,AAED,cAAc,cAAC,CAAC,AACZ,WAAW,CAAE,IAAI,CACjB,cAAc,CAAE,IAAI,AACxB,CAAC,AAEJ,MAAM,cAAC,CAAC,AACP,SAAS,CAAE,MAAM,CACd,YAAY,CAAE,GAAG,CACpB,KAAK,CAAE,OAAO,CAER,UAAU,CAAE,IAAI,AACvB,CAAC,AAED,KAAK,cAAC,CAAC,AACA,MAAM,CAAE,IAAI,CACZ,OAAO,CAAE,IAAI,CACb,UAAU,CAAE,IAAI,CAEtB,aAAa,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CAE1B,KAAK,CAAE,IAAI,CACX,UAAU,CAAE,UAAU,CAEtB,SAAS,CAAE,MAAM,CACvB,KAAK,CAAE,OAAO,CAER,OAAO,CAAE,GAAG,CAAC,GAAG,AAEvB,CAAC,AAEE,QAAQ,cAAC,CAAC,AACN,KAAK,CAAE,OAAO,AAClB,CAAC,AAED,WAAW,cAAC,CAAC,AACT,QAAQ,CAAE,QAAQ,CAClB,KAAK,CAAE,IAAI,CAEX,SAAS,CAAE,MAAM,CAEjB,KAAK,CAAE,OAAO,AAClB,CAAC\"}"
};

const SetAccountPrompt = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let $user = get_store_value(user);
	let $newUsername = get_store_value(newUsername);
	let $setAccountFormValidated = get_store_value(setAccountFormValidated);
	let $userId = get_store_value(userId);
	const dispatch = createEventDispatcher();
	let { userDetails = {} } = $$props;
	let usernameField;
	let passField;
	let passRepeatField;

	//let username = $user.username || $newUsername || formatAsId($user.firstName + $user.lastName.substr(0, Math.min(1, $user.lastName.length)), config.MAX_ID_LENGTH);
	let username = $user
	? $user.username || $newUsername || formatAsId($user.name, config$1.MAX_ID_LENGTH)
	: "";

	let pass = "";
	let passRepeat = "";
	let passwordInvalid = false;
	let usernameFlagInvalid = false;
	let usernameFlagTooShort = false;
	let usernameFlagTooLong = false;

	if ($$props.userDetails === void 0 && $$bindings.userDetails && userDetails !== void 0) $$bindings.userDetails(userDetails);
	$$result.css.add(css$8);
	let resetPass = $user && $user.resetPass;

	 {
		{
			// prevent disallowed characters
			username = username.toLowerCase();

			username = username.replace(/[^a-z0-9._]/g, ""); // lowercase only
		} // username = username.replace(/[^a-zA-Z0-9._]/gi, '');
	}

	let usernameValidated = validateUserName(trim(username));
	let usernameTooShort = username.length < config$1.USER_NAME_MIN_LENGTH;
	let usernameTooLong = username.length > config$1.USER_NAME_MAX_LENGTH;
	let passValidated = pass  ;
	$setAccountFormValidated = !!((usernameValidated || resetPass) && pass && passRepeat && passValidated);

	 {
		{
			userDetails.id = $userId;
			userDetails.username = username;
			userDetails.pass = pass;
		}
	}

	 {
		{
			passwordInvalid = false;

			delayedTimeout(
				"pass",
				() => {
					passwordInvalid = pass  ;
				},
				config$1.INVALID_FIELD_DELAY
			);
		}
	}

	 {
		{
			usernameFlagInvalid = false;
			usernameFlagTooShort = false;
			usernameFlagTooLong = false;

			delayedTimeout(
				"username",
				() => {
					usernameFlagInvalid = trim(username) && !usernameValidated;
					usernameFlagTooShort = trim(username) && usernameTooShort;
					usernameFlagTooLong = trim(username) && usernameTooLong;
				},
				config$1.INVALID_FIELD_DELAY
			);
		}
	}

	 {
		{
			dispatch("change");
		}
	}

	return `<div class="${"setAccountPrompt svelte-5g93ot"}">${!resetPass
	? `<div class="${"field usernameField svelte-5g93ot"}"><div class="${"label svelte-5g93ot"}">${escape(locale$1.SET_ACCOUNT.USERNAME)}</div>
            <input class="${["svelte-5g93ot", usernameFlagInvalid ? "invalid" : ""].join(" ").trim()}"${add_attribute("value", username, 1)}${add_attribute("this", usernameField, 1)}>
            ${usernameFlagTooShort
		? `<div class="${"errorLabel svelte-5g93ot"}">username too short</div>`
		: `${usernameFlagTooLong
			? `<div class="${"errorLabel svelte-5g93ot"}">username too long</div>`
			: `${usernameFlagInvalid
				? `<div class="${"errorLabel svelte-5g93ot"}">invalid username</div>`
				: ``}`}`}
            </div>`
	: ``}
    <div class="${"field svelte-5g93ot"}"><div class="${"label svelte-5g93ot"}">${escape(locale$1.SET_ACCOUNT.PASS)}</div>
        <input type="${"password"}" class="${"svelte-5g93ot"}"${add_attribute("value", pass, 1)}${add_attribute("this", passField, 1)}></div>
    <div class="${["field svelte-5g93ot",  "hidden" ].join(" ").trim()}"><div class="${"label svelte-5g93ot"}">${escape(locale$1.SET_ACCOUNT.PASS_REPEAT)}</div>
        <input type="${"password"}" class="${["svelte-5g93ot", passwordInvalid ? "invalid" : ""].join(" ").trim()}"${add_attribute("value", passRepeat, 1)}${add_attribute("this", passRepeatField, 1)}>
        ${passwordInvalid
	? `<div class="${"errorLabel svelte-5g93ot"}">passwords don&#39;t match</div>`
	: ``}</div>
</div>`;
});

/* src\routes\_components\ForgotPasswordPrompt.svelte generated by Svelte v3.23.0 */

const css$9 = {
	code: ".forgotPasswordPrompt.svelte-31ptok{display:flex;align-items:center;justify-content:center;flex-flow:wrap;padding-bottom:2px}.field.svelte-31ptok{position:relative;padding:0 16px;padding-top:20px}.label.svelte-31ptok{font-size:1.3rem;padding-left:7px;color:#888888;text-align:left}input.svelte-31ptok{border:none;outline:none;background:none;border-bottom:1px solid #cccccc;width:100%;box-sizing:border-box;font-size:1.5rem;color:#333333;padding:6px 7px}.invalid.svelte-31ptok{color:#DF3C3C}.errorLabel.svelte-31ptok{position:absolute;right:20px;font-size:1.2rem;color:#DF3C3C}",
	map: "{\"version\":3,\"file\":\"ForgotPasswordPrompt.svelte\",\"sources\":[\"ForgotPasswordPrompt.svelte\"],\"sourcesContent\":[\"<script>\\r\\n    import locale from '../../locale';\\r\\n    import config from '../../config';\\r\\n\\r\\n\\timport { createEventDispatcher } from 'svelte';\\r\\n    const dispatch = createEventDispatcher();\\r\\n\\r\\n    import { trim, testInputDefocus, formatAsId, validateEmail, delayedTimeout } from '../../utils';\\r\\n\\r\\n    import { forgotPasswordFormValidated } from '../../models/appModel';\\r\\n\\r\\n    export let email = '';\\r\\n\\r\\n    let emailField;\\r\\n\\r\\n    $: emailField && emailField.focus();\\r\\n\\r\\n    $: emailValidated = validateEmail(trim(email));\\r\\n    $: $forgotPasswordFormValidated = emailValidated;\\r\\n\\r\\n    $: {\\r\\n        $forgotPasswordFormValidated;\\r\\n        dispatch('change');\\r\\n    }\\r\\n\\r\\n    function submit() {\\r\\n        if ($forgotPasswordFormValidated) {\\r\\n            dispatch('confirm');\\r\\n        }\\r\\n    }\\r\\n\\r\\n    $: { // prevent disallowed characters\\r\\n        if (email) {\\r\\n            email = email.replace(/[^a-zA-Z0-9_/-@.]/g,'')\\r\\n        }\\r\\n    }\\r\\n\\r\\n    let emailFlagInvalid = false;\\r\\n    $: {\\r\\n        email;\\r\\n\\r\\n        emailFlagInvalid = false;\\r\\n\\r\\n        delayedTimeout('email', () => {\\r\\n            emailFlagInvalid = email && !emailValidated;\\r\\n        }, config.INVALID_FIELD_DELAY);\\r\\n    }\\r\\n</script>\\r\\n\\r\\n<div class=\\\"forgotPasswordPrompt\\\">\\r\\n    <div class=\\\"field\\\">\\r\\n        <div class=\\\"label\\\">{locale.SIGN_UP.EMAIL}</div>\\r\\n        <input type=\\\"text\\\" id=\\\"email\\\" name=\\\"email\\\" autocomplete=\\\"email\\\" class:invalid=\\\"{emailFlagInvalid}\\\" bind:value=\\\"{email}\\\" bind:this=\\\"{emailField}\\\" on:keypress=\\\"{(e) => testInputDefocus(e, {action: submit})}\\\" />\\r\\n        {#if emailFlagInvalid}<div class=\\\"errorLabel\\\">invalid email</div>{/if}\\r\\n    </div>\\r\\n</div>\\r\\n\\r\\n<style>\\r\\n    .forgotPasswordPrompt {\\r\\n        display:flex;\\r\\n        align-items: center;\\r\\n        justify-content: center;\\r\\n        flex-flow: wrap;\\r\\n\\r\\n        padding-bottom: 2px;\\r\\n    }\\r\\n\\r\\n\\t.field {\\r\\n        position: relative;\\r\\n    \\tpadding: 0 16px;\\r\\n        padding-top: 20px;\\r\\n\\t}\\r\\n\\r\\n\\t.label {\\r\\n\\t\\tfont-size: 1.3rem;\\r\\n    \\tpadding-left: 7px;\\r\\n\\t\\tcolor: #888888;\\r\\n\\r\\n        text-align: left;\\r\\n\\t}\\r\\n\\r\\n\\tinput {\\r\\n        border: none;\\r\\n        outline: none;\\r\\n        background: none;\\r\\n\\r\\n\\t\\tborder-bottom: 1px solid #cccccc;\\r\\n\\r\\n        width: 100%;\\r\\n        box-sizing: border-box;\\r\\n\\r\\n        font-size: 1.5rem;\\r\\n\\t\\tcolor: #333333;\\r\\n\\r\\n        padding: 6px 7px;\\r\\n        /* padding-left: 0; */\\r\\n\\t}\\r\\n\\r\\n    .invalid {\\r\\n        color: #DF3C3C;\\r\\n    }\\r\\n\\r\\n    .errorLabel {\\r\\n        position: absolute;\\r\\n        right: 20px;\\r\\n\\r\\n        font-size: 1.2rem;\\r\\n\\r\\n        color: #DF3C3C;\\r\\n    }\\r\\n</style>\"],\"names\":[],\"mappings\":\"AA0DI,qBAAqB,cAAC,CAAC,AACnB,QAAQ,IAAI,CACZ,WAAW,CAAE,MAAM,CACnB,eAAe,CAAE,MAAM,CACvB,SAAS,CAAE,IAAI,CAEf,cAAc,CAAE,GAAG,AACvB,CAAC,AAEJ,MAAM,cAAC,CAAC,AACD,QAAQ,CAAE,QAAQ,CACrB,OAAO,CAAE,CAAC,CAAC,IAAI,CACZ,WAAW,CAAE,IAAI,AACxB,CAAC,AAED,MAAM,cAAC,CAAC,AACP,SAAS,CAAE,MAAM,CACd,YAAY,CAAE,GAAG,CACpB,KAAK,CAAE,OAAO,CAER,UAAU,CAAE,IAAI,AACvB,CAAC,AAED,KAAK,cAAC,CAAC,AACA,MAAM,CAAE,IAAI,CACZ,OAAO,CAAE,IAAI,CACb,UAAU,CAAE,IAAI,CAEtB,aAAa,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CAE1B,KAAK,CAAE,IAAI,CACX,UAAU,CAAE,UAAU,CAEtB,SAAS,CAAE,MAAM,CACvB,KAAK,CAAE,OAAO,CAER,OAAO,CAAE,GAAG,CAAC,GAAG,AAEvB,CAAC,AAEE,QAAQ,cAAC,CAAC,AACN,KAAK,CAAE,OAAO,AAClB,CAAC,AAED,WAAW,cAAC,CAAC,AACT,QAAQ,CAAE,QAAQ,CAClB,KAAK,CAAE,IAAI,CAEX,SAAS,CAAE,MAAM,CAEjB,KAAK,CAAE,OAAO,AAClB,CAAC\"}"
};

const ForgotPasswordPrompt = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let $forgotPasswordFormValidated = get_store_value(forgotPasswordFormValidated);
	const dispatch = createEventDispatcher();
	let { email = "" } = $$props;
	let emailField;

	let emailFlagInvalid = false;
	if ($$props.email === void 0 && $$bindings.email && email !== void 0) $$bindings.email(email);
	$$result.css.add(css$9);

	 {
		{
			// prevent disallowed characters
			if (email) {
				email = email.replace(/[^a-zA-Z0-9_/-@.]/g, "");
			}
		}
	}

	let emailValidated = validateEmail(trim(email));
	$forgotPasswordFormValidated = emailValidated;

	 {
		{
			dispatch("change");
		}
	}

	 {
		{
			emailFlagInvalid = false;

			delayedTimeout(
				"email",
				() => {
					emailFlagInvalid = email && !emailValidated;
				},
				config$1.INVALID_FIELD_DELAY
			);
		}
	}

	return `<div class="${"forgotPasswordPrompt svelte-31ptok"}"><div class="${"field svelte-31ptok"}"><div class="${"label svelte-31ptok"}">${escape(locale$1.SIGN_UP.EMAIL)}</div>
        <input type="${"text"}" id="${"email"}" name="${"email"}" autocomplete="${"email"}" class="${["svelte-31ptok", emailFlagInvalid ? "invalid" : ""].join(" ").trim()}"${add_attribute("value", email, 1)}${add_attribute("this", emailField, 1)}>
        ${emailFlagInvalid
	? `<div class="${"errorLabel svelte-31ptok"}">invalid email</div>`
	: ``}</div>
</div>`;
});

/* src\routes\_components\OverlayMenuItem.svelte generated by Svelte v3.23.0 */

const css$a = {
	code: ".overlayMenuItem.svelte-bh5wph .button{font-size:1.6rem;padding:13px 30px;padding-right:30px;box-sizing:border-box}.overlayMenuItem.svelte-bh5wph .button.activeButton:hover{background-color:#EEEEEE}.overlayMenuItem.svelte-bh5wph .button.disabled{opacity:0.33}.overlayMenuItem.svelte-bh5wph .default{font-weight:700}.overlayMenuItem.svelte-bh5wph .textPanel .button{font-size:1.2rem;padding:0 4px;padding:10px 17px}.overlayMenuItem.svelte-bh5wph .textPanel .buttonLabel{padding:0 2px;font-weight:bold;color:#333333}.overlayMenuItem.svelte-bh5wph .textPanel .button.activeButton:hover{background-color:initial}.overlayMenuItem.svelte-bh5wph .textPanel .button.activeButton:hover .buttonLabel{color:#666666;text-decoration:underline}.overlayMenuItem.svelte-bh5wph .textPanel.demphasisText .buttonLabel{font-weight:initial;color:#888888}",
	map: "{\"version\":3,\"file\":\"OverlayMenuItem.svelte\",\"sources\":[\"OverlayMenuItem.svelte\"],\"sourcesContent\":[\"<script>\\r\\n\\timport { createEventDispatcher } from 'svelte';\\r\\n\\r\\n    const dispatch = createEventDispatcher();\\r\\n\\r\\n    import Button from '../../components/Button.svelte';\\r\\n\\r\\n    export let menuItem;\\r\\n\\r\\n    // $: type = (menuItem && menuItem.type) || 'button';\\r\\n    $: className = (menuItem && menuItem.className) || '';\\r\\n    $: prefixText = (menuItem && menuItem.prefixText) || '';\\r\\n\\r\\n    $: label = (menuItem && menuItem.label && (typeof menuItem.label === 'function' ? menuItem.label() : menuItem.label)) || '';\\r\\n    $: disabled = (menuItem && menuItem.disabled && (typeof menuItem.disabled === 'function' ? menuItem.disabled() : menuItem.disabled)) || false;\\r\\n    $: visible = (menuItem && menuItem.visible !== undefined) ? (typeof menuItem.visible === 'function' ? menuItem.visible() : menuItem.visible) : true;\\r\\n    $: action = (menuItem && menuItem.action) || null;\\r\\n\\r\\n    $: isDefault = (menuItem && menuItem.default) || false;\\r\\n\\r\\n    function onClick() {\\r\\n        dispatch('select', { menuItem });\\r\\n    }\\r\\n</script>\\r\\n\\r\\n{#if visible}\\r\\n    <div class=\\\"overlayMenuItem\\\"><div class=\\\"{className}\\\">\\r\\n        <Button {onClick} {disabled} className=\\\"{isDefault ? 'default' : ''}\\\">{prefixText}<span class=\\\"buttonLabel\\\">{label}</span></Button>\\r\\n    </div></div>\\r\\n{/if}\\r\\n\\r\\n<style>\\r\\n\\t.overlayMenuItem :global(.button) {\\r\\n        font-size: 1.6rem;\\r\\n        padding: 13px 30px;\\r\\n        /* padding: 13px 17px; */\\r\\n        padding-right: 30px;\\r\\n        box-sizing: border-box;\\r\\n\\t}\\r\\n\\r\\n\\t.overlayMenuItem :global(.button.activeButton:hover) {\\r\\n        background-color: #EEEEEE;\\r\\n\\t}\\r\\n\\r\\n\\t.overlayMenuItem :global(.button.disabled) {\\r\\n        opacity: 0.33;\\r\\n\\t}\\r\\n\\r\\n    .overlayMenuItem :global(.default) {\\r\\n        font-weight: 700;\\r\\n    }\\r\\n\\r\\n\\t.overlayMenuItem :global(.textPanel .button) {\\r\\n        font-size: 1.2rem;\\r\\n        padding: 0 4px;\\r\\n        padding: 10px 17px;\\r\\n\\t}\\r\\n\\t.overlayMenuItem :global(.textPanel .buttonLabel) {\\r\\n        padding: 0 2px;\\r\\n        font-weight: bold;\\r\\n        color: #333333;\\r\\n\\t}\\r\\n\\t.overlayMenuItem :global(.textPanel .button.activeButton:hover) {\\r\\n        background-color: initial;\\r\\n\\t}\\r\\n\\t.overlayMenuItem :global(.textPanel .button.activeButton:hover .buttonLabel) {\\r\\n        color: #666666;\\r\\n        text-decoration: underline;\\r\\n\\t}\\r\\n\\r\\n\\t.overlayMenuItem :global(.textPanel.demphasisText .buttonLabel) {\\r\\n        font-weight: initial;\\r\\n        color: #888888;\\r\\n    }\\r\\n</style>\"],\"names\":[],\"mappings\":\"AAgCC,8BAAgB,CAAC,AAAQ,OAAO,AAAE,CAAC,AAC5B,SAAS,CAAE,MAAM,CACjB,OAAO,CAAE,IAAI,CAAC,IAAI,CAElB,aAAa,CAAE,IAAI,CACnB,UAAU,CAAE,UAAU,AAC7B,CAAC,AAED,8BAAgB,CAAC,AAAQ,0BAA0B,AAAE,CAAC,AAC/C,gBAAgB,CAAE,OAAO,AAChC,CAAC,AAED,8BAAgB,CAAC,AAAQ,gBAAgB,AAAE,CAAC,AACrC,OAAO,CAAE,IAAI,AACpB,CAAC,AAEE,8BAAgB,CAAC,AAAQ,QAAQ,AAAE,CAAC,AAChC,WAAW,CAAE,GAAG,AACpB,CAAC,AAEJ,8BAAgB,CAAC,AAAQ,kBAAkB,AAAE,CAAC,AACvC,SAAS,CAAE,MAAM,CACjB,OAAO,CAAE,CAAC,CAAC,GAAG,CACd,OAAO,CAAE,IAAI,CAAC,IAAI,AACzB,CAAC,AACD,8BAAgB,CAAC,AAAQ,uBAAuB,AAAE,CAAC,AAC5C,OAAO,CAAE,CAAC,CAAC,GAAG,CACd,WAAW,CAAE,IAAI,CACjB,KAAK,CAAE,OAAO,AACrB,CAAC,AACD,8BAAgB,CAAC,AAAQ,qCAAqC,AAAE,CAAC,AAC1D,gBAAgB,CAAE,OAAO,AAChC,CAAC,AACD,8BAAgB,CAAC,AAAQ,kDAAkD,AAAE,CAAC,AACvE,KAAK,CAAE,OAAO,CACd,eAAe,CAAE,SAAS,AACjC,CAAC,AAED,8BAAgB,CAAC,AAAQ,qCAAqC,AAAE,CAAC,AAC1D,WAAW,CAAE,OAAO,CACpB,KAAK,CAAE,OAAO,AAClB,CAAC\"}"
};

const OverlayMenuItem = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	const dispatch = createEventDispatcher();
	let { menuItem } = $$props;

	function onClick() {
		dispatch("select", { menuItem });
	}

	if ($$props.menuItem === void 0 && $$bindings.menuItem && menuItem !== void 0) $$bindings.menuItem(menuItem);
	$$result.css.add(css$a);
	let className = menuItem && menuItem.className || "";
	let prefixText = menuItem && menuItem.prefixText || "";

	let label = menuItem && menuItem.label && (typeof menuItem.label === "function"
	? menuItem.label()
	: menuItem.label) || "";

	let disabled = menuItem && menuItem.disabled && (typeof menuItem.disabled === "function"
	? menuItem.disabled()
	: menuItem.disabled) || false;

	let visible = menuItem && menuItem.visible !== undefined
	? typeof menuItem.visible === "function"
		? menuItem.visible()
		: menuItem.visible
	: true;

	let action = menuItem && menuItem.action || null;
	let isDefault = menuItem && menuItem.default || false;

	return `${visible
	? `<div class="${"overlayMenuItem svelte-bh5wph"}"><div class="${escape(null_to_empty(className)) + " svelte-bh5wph"}">${validate_component(Button, "Button").$$render(
			$$result,
			{
				onClick,
				disabled,
				className: isDefault ? "default" : ""
			},
			{},
			{
				default: () => `${escape(prefixText)}<span class="${"buttonLabel"}">${escape(label)}</span>`
			}
		)}</div></div>`
	: ``}`;
});

/* src\routes\_components\OverlayMenu.svelte generated by Svelte v3.23.0 */

const css$b = {
	code: ".overlayMenu.svelte-19qzdqs{display:inline-block;padding:8px 0;min-width:230px;background-color:#ffffff;border-radius:5px;overflow:hidden}",
	map: "{\"version\":3,\"file\":\"OverlayMenu.svelte\",\"sources\":[\"OverlayMenu.svelte\"],\"sourcesContent\":[\"<script>\\r\\n    import { tick } from 'svelte';\\r\\n\\r\\n    import OverlayMenuItem from './OverlayMenuItem.svelte';\\r\\n\\r\\n\\timport { closeOverlay } from '../../actions/appActions';\\r\\n\\r\\n    export let menuId;\\r\\n    export let targetItem = null;\\r\\n\\r\\n    import { menus, menuIds } from '../../config/menus';\\r\\n\\r\\n    $: menu = menus[menuId];\\r\\n    $: menuItems = (menu && menu.menuItems) || null;\\r\\n\\r\\n    async function selectMenuItem(event) {\\r\\n        const menuItem = event.detail && event.detail.menuItem;\\r\\n        const action = menuItem && menuItem.action;\\r\\n\\r\\n        closeOverlay(); // ensure doing first in case opening new menu\\r\\n        await tick();\\r\\n\\r\\n        if (action) {\\r\\n            action(targetItem);\\r\\n        }\\r\\n    }\\r\\n</script>\\r\\n\\r\\n<div class=\\\"overlayMenu\\\">\\r\\n    {#each menuItems as menuItem}\\r\\n        {#if !menuItem.condition || menuItem.condition(targetItem)}\\r\\n            <OverlayMenuItem {menuItem} on:select=\\\"{selectMenuItem}\\\" />\\r\\n        {/if}\\r\\n    {/each}\\r\\n</div>\\r\\n\\r\\n<style>\\r\\n\\t.overlayMenu {\\r\\n        display: inline-block;\\r\\n\\r\\n        padding: 8px 0;\\r\\n        min-width: 230px;\\r\\n\\r\\n        background-color: #ffffff;\\r\\n        border-radius: 5px;\\r\\n        overflow: hidden;\\r\\n\\t}\\r\\n</style>\"],\"names\":[],\"mappings\":\"AAqCC,YAAY,eAAC,CAAC,AACP,OAAO,CAAE,YAAY,CAErB,OAAO,CAAE,GAAG,CAAC,CAAC,CACd,SAAS,CAAE,KAAK,CAEhB,gBAAgB,CAAE,OAAO,CACzB,aAAa,CAAE,GAAG,CAClB,QAAQ,CAAE,MAAM,AACvB,CAAC\"}"
};

const OverlayMenu = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let { menuId } = $$props;
	let { targetItem = null } = $$props;

	if ($$props.menuId === void 0 && $$bindings.menuId && menuId !== void 0) $$bindings.menuId(menuId);
	if ($$props.targetItem === void 0 && $$bindings.targetItem && targetItem !== void 0) $$bindings.targetItem(targetItem);
	$$result.css.add(css$b);
	let menu = menus[menuId];
	let menuItems = menu && menu.menuItems || null;

	return `<div class="${"overlayMenu svelte-19qzdqs"}">${each(menuItems, menuItem => `${!menuItem.condition || menuItem.condition(targetItem)
	? `${validate_component(OverlayMenuItem, "OverlayMenuItem").$$render($$result, { menuItem }, {}, {})}`
	: ``}`)}
</div>`;
});

const img$d = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAABsklEQVRYR+2YUVEFMQxFz1MAOAAF4ABQAA4ABVgBBzgBHIACkAAOmPtmO7NT2k2a7Mf72H4yaXq4Se62b8eBr92B87EBZiu0KbgpCFwAN8Az8JNVZNp/DNwBn8DbUk6rBwX3CijhB3C9AqRyKadyaz0ALz1IC1D/3eVscxayhlNqVeUkCvgEPFabo5AtOKV+B66igNon+dUv8zUK2YNTDwqu29tWiQtUBjIMp8O9gFElU3CjgIpXac+d5U7DRQB1qCbbglwFLgKoPRakYuY+VwQ3B6I1ySM9ON+/BKm4YsIpuKiC5dAeZC1ESLmSJKqgFzIFl1WwQJ4CX50vwRnw3ftKeP6+hoKtgShnj35x/jFnAHtWUh+SgowCLvmcAC2f9FR3HxMBtExYeT1m7oIcBbTgyq3EMnP3zXwUsL7ASoWelawCOQLYunJZPpeG9AJG4Cwzd023BzADl4a0AFtvEqusvenslVt9rddic1mA9VBE4ZaU/J2ucCFAXZsEebQwrS4/mwXVSqbexcoryFtA5Xb7l0EtyPvpCZH6ZWFUndXjrR5c/cDRhBvgqGJ1/KZgVsE/5geCKbLSPi4AAAAASUVORK5CYII=";

const prompts = {
    PROJECT_ARCHIVE: {
        title: 'Archive Project',
        message: 'Are you sure you want to<br/>archive this project?',
        subMessage: 'It will no longer be<br/>editable by team members<br/>or visible to any followers',
        showClose: true,
        menuItems: [
            {
                label: 'Archive Project',
                action: () => { const p = get_store_value(project); p && p.id && archiveProject(p.id); },
                default: true,
            },
            {
                label: 'Cancel',
            },
        ],
    },
    PROJECT_ARCHIVED: {
        title: 'Project Archived',
        // title: 'Archive Project',
        // message: 'Project Archived',
        subMessage: 'No longer editable<br/>by team members<br/>or visible to any followers',
        menuItems: [
            {
                label: 'Ok',
            },
        ],
    },
    PROJECT_UNARCHIVED: {
        title: 'Project Unarchived',
        // title: 'Unarchive Project',
        // message: 'Project Unarchived',
        subMessage: 'Now editable by team members<br/>and visible to any followers',
        menuItems: [
            {
                label: 'Ok',
            },
        ],
    },

    MAKE_PUBLIC: {
        title: 'Make Public',
        message: 'Make this project public?',
        subMessage: 'It can then be discovered, followed and shared with others outside the team',
        showClose: true,
        menuItems: [
            {
                label: 'Make Public',
                action: makePublic,
                default: true,
            },
            {
                label: 'Cancel',
            },
        ],
    },
    MAKE_PUBLIC_COMPLETE: {
        title: 'Project Live!',
        subMessage: 'Your project is now discoverable<br/>and sharable with others!',
        menuItems: [
            {
                label: 'Copy Link',
                action: () => { const p = get_store_value(project); p && p.id && copyProjectLink(p.id); showPrompt(promptIds.MAKE_PUBLIC_COMPLETE_COPIED); },
                default: true,
            },
            {
                label: 'Ok',
            },
        ],
    },
    MAKE_PUBLIC_COMPLETE_COPIED: {
        title: 'Project Live!',
        subMessage: 'Your project is now discoverable<br/>and sharable with others!',
        menuItems: [
            {
                label: 'Link Copied',
                disabled: true,
            },
            {
                label: 'Ok',
            },
        ],
    },

    MAKE_PRIVATE: {
        title: 'Make Private',
        message: 'Make this project private?',
        subMessage: 'It will no longer be visible<br/>to followers and others outside the team',
        showClose: true,
        menuItems: [
            {
                label: 'Make Private',
                action: makePrivate,
                default: true,
            },
            {
                label: 'Cancel',
            },
        ],
    },
    MAKE_PRIVATE_COMPLETE: {
        title: 'Make Private',
        subMessage: 'Project no longer visible<br/>to followers and non-team members',
        menuItems: [
            {
                label: 'Ok',
            },
        ],
    },

    SHARE_PROJECT: {
        title: 'Share Project',
        message: 'Select copy link below to share this project with others',
        showClose: true,
        menuItems: [
            {
                label: 'Copy Link',
                action: () => { const p = get_store_value(targetProject); p && p.id && copyProjectLink(p.id); showPrompt(promptIds.SHARE_PROJECT_COMPLETE); },
                default: true,
            },
            {
                label: 'Close',
            },
        ],
    },
    SHARE_PROJECT_COMPLETE: {
        title: 'Share Project',
        message: 'Select copy link below to share this project with others',
        showClose: true,
        menuItems: [
            {
                label: 'Link Copied',
                disabled: true,
            },
            {
                label: 'Close',
            },
        ],
    },

    SHARE_PROFILE: {
        title: 'Share Profile',
        message: 'Select copy link below to share this profile',
        showClose: true,
        menuItems: [
            {
                label: 'Copy Link',
                action: () => { const p = get_store_value(targetUser); p && p.id && copyProfileLink(p.id); showPrompt(promptIds.SHARE_PROFILE_COMPLETE); },
                default: true,
            },
            {
                label: 'Close',
            },
        ],
    },
    SHARE_PROFILE_COMPLETE: {
        title: 'Share Profile',
        message: 'Select copy link below to share this profile',
        showClose: true,
        menuItems: [
            {
                label: 'Link Copied',
                disabled: true,
            },
            {
                label: 'Close',
            },
        ],
    },

    SHARE_POST: {
        title: 'Share Post',
        message: 'Select copy link below to share this post',
        showClose: true,
        menuItems: [
            {
                label: 'Copy Link',
                action: () => { const p = get_store_value(targetPost); p && p.id && copyPostLink(p.id); showPrompt(promptIds.SHARE_POST_COMPLETE); },
                default: true,
            },
            {
                label: 'Close',
            },
        ],
    },
    SHARE_POST_COMPLETE: {
        title: 'Share Post',
        message: 'Select copy link below to share this post',
        showClose: true,
        menuItems: [
            {
                label: 'Link Copied',
                disabled: true,
            },
            {
                label: 'Close',
            },
        ],
    },

    SIGN_UP: {
        title: 'Create User',
        showClose: true,
        menuItems: [
            {
                label: 'Create User',
                disabled: () => !get_store_value(signUpFormValidated),
                default: true,
            },
            {
                className: 'textPanel',
                prefixText: 'or ',
                label: 'Log In',
                action: () => { showPrompt(promptIds.LOG_IN); },
                visible: () => { return get_store_value(signInRequired) },
            },
        ],
    },
    FORGOT_PASSWORD: {
        title: 'Reset Password',
        showClose: true,
        menuItems: [
            {
                label: 'Send Reset Email',
                disabled: () => !get_store_value(forgotPasswordFormValidated),
                default: true,
            },
            // {
            //     className: 'textPanel',
            //     prefixText: 'or ',
            //     label: 'Email Support',
            // },
        ],
    },
    FORGOT_PASSWORD_RESET: {
        title: 'Reset Password',
        message: 'An email has been sent this address with instructions to reset your password.<br/><br/>If you can\'t see the email, be sure to check your spam folder,<br/>otherwise please email <a href="mailto:support@flockprojects.com">support@flockprojects.com</a>.',
        menuItems: [
            {
                label: 'Log In',
                default: true,
                action: () => { showPrompt(promptIds.LOG_IN); },
            },
        ],
    },
    SET_ACCOUNT: {
        title: 'Set Account Details',
        menuItems: [
            {
                label: 'Confirm',
                // label: 'Let\'s Go!',
                disabled: () => !get_store_value(setAccountFormValidated),
                default: true,
            },
        ],
    },
    RESET_PASSWORD: {
        title: 'Reset Password',
        menuItems: [
            {
                label: 'Confirm',
                // label: 'Let\'s Go!',
                disabled: () => !get_store_value(setAccountFormValidated),
                default: true,
            },
        ],
    },
    SIGN_UP_EMAIL_EXISTS: {
        title: 'Create User',
        message: 'Email already exists',
        menuItems: [
            {
                label: 'Ok',
                action: () => { showPrompt(promptIds.SIGN_UP); },
            },
        ],
    },
    ACCOUNT_READY: {
        title: 'Welcome!',
        message: 'You\'re all set to discover<br/>and share projects',
        menuItems: [
            {
                label: 'Let\'s Go!',
                default: true,
            },
        ],
    },
    USERNAME_EXISTS: {
        title: 'Sorry',
        message: 'That username already exists',
        allowClose: false,
        menuItems: [
            {
                label: 'Ok',
                action: () => { showPrompt(promptIds.SET_ACCOUNT, {allowClose: false}); },
                // action: () => { showPrompt(promptIds.SIGN_UP); },
            },
        ],
    },
    PASSWORD_RESET: {
        title: 'Password Reset',
        message: 'New password set',
        menuItems: [
            {
                label: 'Ok',
            },
        ],
    },
    LOG_IN: {
        title: 'Sign In',
        showClose: true,
        menuItems: [
            {
                label: 'Sign In',
                disabled: () => !get_store_value(logInFormValidated),
                default: true,
            },
            {
                className: 'textPanel demphasisText',
                label: 'Forgot Password',
                action: () => { showPrompt(promptIds.FORGOT_PASSWORD); },
            },
        ],
    },
    LOG_IN_ERROR: {
        title: 'Sign In',
        message: 'Invalid username, email<br />or password',
        menuItems: [
            {
                label: 'Ok',
                action: () => { showPrompt(promptIds.LOG_IN); },
            },
        ],
    },
    LOGGED_OUT: {
        title: 'Logged Out',
        message: 'You\'re now logged out',
        menuItems: [
            {
                label: 'Ok',
            },
        ],
    },
    ADD_PROJECT_ERROR: {
        title: 'New Project',
        message: 'Error adding project',
        menuItems: [
            {
                label: 'Ok',
            },
        ],
    },
    INVALID_IMAGE_TYPE_JPG_PNG: {
        title: 'Sorry',
        message: 'Image must be a<br/>jpeg or png file',
        menuItems: [
            {
                label: 'Ok',
            },
        ],
    },
    INVALID_IMAGE_FILESIZE_TOO_LARGE: {
        title: 'Sorry',
        message: 'Image filesize is too large',
        menuItems: [
            {
                label: 'Ok',
            },
        ],
    },
};

/* src\routes\_components\OverlayPrompt.svelte generated by Svelte v3.23.0 */

const css$c = {
	code: ".overlayPrompt.svelte-1nsstr6{display:inline-block;width:250px;background-color:#ffffff;border-radius:5px;overflow:hidden;text-align:center}.content.svelte-1nsstr6{position:relative;padding-top:25px;padding-bottom:30px}.title.svelte-1nsstr6{font-size:1.6rem;line-height:1.6rem;font-weight:700;padding:0 20px;padding-bottom:15px}.message.svelte-1nsstr6{font-size:1.5rem;line-height:1.7rem;padding:0 20px;padding-bottom:18px}.subMessage.svelte-1nsstr6{font-size:1.4rem;line-height:1.6rem;padding:0 20px;padding-bottom:12px;color:#888888}.overlayPrompt.svelte-1nsstr6 .overlayMenuItem{border-top:1px solid #D4D4D4}.overlayPrompt.svelte-1nsstr6 .closeButton{position:absolute;top:0;right:0;height:36px;width:37px;opacity:0.4}.overlayPrompt.svelte-1nsstr6 .closeButton .iconContainer{display:block}.overlayPrompt.svelte-1nsstr6 .closeButton .iconInnerContainer{justify-content:center;width:100%;height:100%}.overlayPrompt.svelte-1nsstr6 .closeButton .icon{transform-origin:center;transform:scale(0.45, 0.45)}",
	map: "{\"version\":3,\"file\":\"OverlayPrompt.svelte\",\"sources\":[\"OverlayPrompt.svelte\"],\"sourcesContent\":[\"<script>\\r\\n    import { tick } from 'svelte';\\r\\n\\r\\n    import OverlayMenuItem from './OverlayMenuItem.svelte';\\r\\n\\r\\n    import { closeOverlay } from '../../actions/appActions';\\r\\n    import { dontAllowOverlayClose } from '../../models/appModel';\\r\\n\\r\\n    import CloseIcon from \\\"../../assets/icons/clear.png\\\";\\r\\n\\r\\n    import Button from '../../components/Button.svelte';\\r\\n\\r\\n    export let promptId;\\r\\n    export let targetItem = null;\\r\\n\\r\\n    export let onConfirm = null;\\r\\n\\r\\n    import promptIds from '../../config/promptIds';\\r\\n    import prompts from '../../config/prompts';\\r\\n\\r\\n    $: prompt = prompts[promptId];\\r\\n    $: menuItems = (prompt && prompt.menuItems) || null;\\r\\n\\r\\n    $: title = (prompt && prompt.title) || null;\\r\\n    $: message = (prompt && prompt.message) || null;\\r\\n    $: subMessage = (prompt && prompt.subMessage) || null;\\r\\n\\r\\n    $: showClose = (prompt && prompt.showClose) || null;\\r\\n\\r\\n    let hasSlots = $$props.$$slots;\\r\\n\\r\\n    async function selectMenuItem(event) {\\r\\n        const menuItem = event.detail && event.detail.menuItem;\\r\\n        const action = menuItem && menuItem.action;\\r\\n\\r\\n        closeOverlay(); // ensure doing first in case opening new menu\\r\\n        await tick();\\r\\n\\r\\n        if (action) {\\r\\n            action(targetItem);\\r\\n        }\\r\\n\\r\\n        if (menuItem.default && onConfirm) {\\r\\n            onConfirm();\\r\\n        }\\r\\n    }\\r\\n\\r\\n    function close() {\\r\\n        if (!$dontAllowOverlayClose) {\\r\\n            closeOverlay();\\r\\n        }\\r\\n    }\\r\\n\\r\\n    export function updateMenuItems() {\\r\\n        menuItems = menuItems;\\r\\n    }\\r\\n</script>\\r\\n\\r\\n<div class=\\\"overlayPrompt\\\">\\r\\n    {#if title || message || subMessage}\\r\\n        <div class=\\\"content\\\">\\r\\n            {#if title}\\r\\n                <div class=\\\"title\\\">{title}</div>\\r\\n            {/if}\\r\\n            {#if showClose && !$dontAllowOverlayClose}\\r\\n                <Button className=\\\"closeButton\\\" onClick=\\\"{close}\\\" icon=\\\"{CloseIcon}\\\" />\\r\\n            {/if}\\r\\n            {#if message}\\r\\n                <div class=\\\"message\\\">{@html message}</div>\\r\\n            {/if}\\r\\n            {#if subMessage}\\r\\n                <div class=\\\"subMessage\\\">{@html subMessage}</div>\\r\\n            {/if}\\r\\n            {#if hasSlots}\\r\\n                <div class=\\\"panelContent\\\">\\r\\n                    <slot></slot>\\r\\n                </div>\\r\\n            {/if}\\r\\n        </div>\\r\\n    {/if}\\r\\n    {#if menuItems && menuItems.length}\\r\\n        <div class=\\\"menuItems\\\">\\r\\n            {#each menuItems as menuItem}\\r\\n                {#if !menuItem.condition || menuItem.condition(targetItem)}\\r\\n                    <OverlayMenuItem {menuItem} on:select=\\\"{selectMenuItem}\\\" />\\r\\n                {/if}\\r\\n            {/each}\\r\\n        </div>\\r\\n    {/if}\\r\\n</div>\\r\\n\\r\\n<style>\\r\\n\\t.overlayPrompt {\\r\\n        display: inline-block;\\r\\n\\r\\n        width: 250px;\\r\\n\\r\\n        background-color: #ffffff;\\r\\n        border-radius: 5px;\\r\\n        overflow: hidden;\\r\\n\\r\\n        text-align: center;\\r\\n\\t}\\r\\n\\r\\n    .content {\\r\\n        position: relative;\\r\\n        padding-top: 25px;\\r\\n        padding-bottom: 30px;\\r\\n    }\\r\\n\\r\\n\\t.title {\\r\\n        font-size: 1.6rem;\\r\\n        line-height: 1.6rem;\\r\\n        font-weight: 700;\\r\\n\\r\\n        padding: 0 20px;\\r\\n        padding-bottom: 15px;\\r\\n\\t}\\r\\n\\r\\n\\t.message {\\r\\n        font-size: 1.5rem;\\r\\n        line-height: 1.7rem;\\r\\n\\r\\n        padding: 0 20px;\\r\\n        padding-bottom: 18px;\\r\\n\\t}\\r\\n\\r\\n\\t.subMessage {\\r\\n        font-size: 1.4rem;\\r\\n        line-height: 1.6rem;\\r\\n\\r\\n        padding: 0 20px;\\r\\n        padding-bottom: 12px;\\r\\n        color: #888888;\\r\\n\\t}\\r\\n\\r\\n\\t.overlayPrompt :global(.overlayMenuItem) {\\r\\n        border-top: 1px solid #D4D4D4;\\r\\n\\t}\\r\\n\\t/* .overlayPrompt :global(.overlayMenuItem .button) {\\r\\n        padding: 13px 30px;\\r\\n\\t} */\\r\\n\\r\\n\\t.overlayPrompt :global(.closeButton) {\\r\\n        position: absolute;\\r\\n        top: 0;\\r\\n        right: 0;\\r\\n\\r\\n        height: 36px;\\r\\n        width: 37px;\\r\\n        opacity: 0.4;\\r\\n\\t}\\r\\n\\t.overlayPrompt :global(.closeButton .iconContainer) {\\r\\n        display: block;\\r\\n\\t}\\r\\n\\t.overlayPrompt :global(.closeButton .iconInnerContainer) {\\r\\n        justify-content: center;\\r\\n        width: 100%;\\r\\n        height: 100%;\\r\\n\\t}\\r\\n\\t.overlayPrompt :global(.closeButton .icon) {\\r\\n        transform-origin: center;\\r\\n        transform: scale(0.45, 0.45);\\r\\n\\t}\\r\\n</style>\"],\"names\":[],\"mappings\":\"AA4FC,cAAc,eAAC,CAAC,AACT,OAAO,CAAE,YAAY,CAErB,KAAK,CAAE,KAAK,CAEZ,gBAAgB,CAAE,OAAO,CACzB,aAAa,CAAE,GAAG,CAClB,QAAQ,CAAE,MAAM,CAEhB,UAAU,CAAE,MAAM,AACzB,CAAC,AAEE,QAAQ,eAAC,CAAC,AACN,QAAQ,CAAE,QAAQ,CAClB,WAAW,CAAE,IAAI,CACjB,cAAc,CAAE,IAAI,AACxB,CAAC,AAEJ,MAAM,eAAC,CAAC,AACD,SAAS,CAAE,MAAM,CACjB,WAAW,CAAE,MAAM,CACnB,WAAW,CAAE,GAAG,CAEhB,OAAO,CAAE,CAAC,CAAC,IAAI,CACf,cAAc,CAAE,IAAI,AAC3B,CAAC,AAED,QAAQ,eAAC,CAAC,AACH,SAAS,CAAE,MAAM,CACjB,WAAW,CAAE,MAAM,CAEnB,OAAO,CAAE,CAAC,CAAC,IAAI,CACf,cAAc,CAAE,IAAI,AAC3B,CAAC,AAED,WAAW,eAAC,CAAC,AACN,SAAS,CAAE,MAAM,CACjB,WAAW,CAAE,MAAM,CAEnB,OAAO,CAAE,CAAC,CAAC,IAAI,CACf,cAAc,CAAE,IAAI,CACpB,KAAK,CAAE,OAAO,AACrB,CAAC,AAED,6BAAc,CAAC,AAAQ,gBAAgB,AAAE,CAAC,AACnC,UAAU,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,AACpC,CAAC,AAKD,6BAAc,CAAC,AAAQ,YAAY,AAAE,CAAC,AAC/B,QAAQ,CAAE,QAAQ,CAClB,GAAG,CAAE,CAAC,CACN,KAAK,CAAE,CAAC,CAER,MAAM,CAAE,IAAI,CACZ,KAAK,CAAE,IAAI,CACX,OAAO,CAAE,GAAG,AACnB,CAAC,AACD,6BAAc,CAAC,AAAQ,2BAA2B,AAAE,CAAC,AAC9C,OAAO,CAAE,KAAK,AACrB,CAAC,AACD,6BAAc,CAAC,AAAQ,gCAAgC,AAAE,CAAC,AACnD,eAAe,CAAE,MAAM,CACvB,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,AACnB,CAAC,AACD,6BAAc,CAAC,AAAQ,kBAAkB,AAAE,CAAC,AACrC,gBAAgB,CAAE,MAAM,CACxB,SAAS,CAAE,MAAM,IAAI,CAAC,CAAC,IAAI,CAAC,AACnC,CAAC\"}"
};

const OverlayPrompt = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let $dontAllowOverlayClose = get_store_value(dontAllowOverlayClose);
	let { promptId } = $$props;
	let { targetItem = null } = $$props;
	let { onConfirm = null } = $$props;
	let hasSlots = $$props.$$slots;

	function close() {
		if (!$dontAllowOverlayClose) {
			closeOverlay();
		}
	}

	function updateMenuItems() {
		menuItems = menuItems;
	}

	if ($$props.promptId === void 0 && $$bindings.promptId && promptId !== void 0) $$bindings.promptId(promptId);
	if ($$props.targetItem === void 0 && $$bindings.targetItem && targetItem !== void 0) $$bindings.targetItem(targetItem);
	if ($$props.onConfirm === void 0 && $$bindings.onConfirm && onConfirm !== void 0) $$bindings.onConfirm(onConfirm);
	if ($$props.updateMenuItems === void 0 && $$bindings.updateMenuItems && updateMenuItems !== void 0) $$bindings.updateMenuItems(updateMenuItems);
	$$result.css.add(css$c);
	let prompt = prompts[promptId];
	let menuItems = prompt && prompt.menuItems || null;
	let title = prompt && prompt.title || null;
	let message = prompt && prompt.message || null;
	let subMessage = prompt && prompt.subMessage || null;
	let showClose = prompt && prompt.showClose || null;

	return `<div class="${"overlayPrompt svelte-1nsstr6"}">${title || message || subMessage
	? `<div class="${"content svelte-1nsstr6"}">${title
		? `<div class="${"title svelte-1nsstr6"}">${escape(title)}</div>`
		: ``}
            ${showClose && !$dontAllowOverlayClose
		? `${validate_component(Button, "Button").$$render(
				$$result,
				{
					className: "closeButton",
					onClick: close,
					icon: img$d
				},
				{},
				{}
			)}`
		: ``}
            ${message
		? `<div class="${"message svelte-1nsstr6"}">${message}</div>`
		: ``}
            ${subMessage
		? `<div class="${"subMessage svelte-1nsstr6"}">${subMessage}</div>`
		: ``}
            ${hasSlots
		? `<div class="${"panelContent"}">${$$slots.default ? $$slots.default({}) : ``}</div>`
		: ``}</div>`
	: ``}
    ${menuItems && menuItems.length
	? `<div class="${"menuItems"}">${each(menuItems, menuItem => `${!menuItem.condition || menuItem.condition(targetItem)
		? `${validate_component(OverlayMenuItem, "OverlayMenuItem").$$render($$result, { menuItem }, {}, {})}`
		: ``}`)}</div>`
	: ``}
</div>`;
});

/* src\routes\_components\Overlays.svelte generated by Svelte v3.23.0 */

const css$d = {
	code: ".overlayContainer.svelte-1jc938x{position:absolute;width:100%;height:100%;z-index:100}@media(max-height: 480px){.overlayContainer.svelte-1jc938x{position:fixed}}.overlayContent.svelte-1jc938x{position:relative;width:100%;min-height:100%;display:flex;align-items:center;justify-content:center}.overlayContainer.svelte-1jc938x .overlayMenu{z-index:101}.overlayContainer.svelte-1jc938x .overlayPrompt{z-index:102;margin:20px 0}.overlayBg.svelte-1jc938x{position:absolute;background:rgba(0, 0, 0, 0.5);width:100%;height:100%}.button.svelte-1jc938x{cursor:pointer}",
	map: "{\"version\":3,\"file\":\"Overlays.svelte\",\"sources\":[\"Overlays.svelte\"],\"sourcesContent\":[\"<script>\\r\\n\\timport promptIds from '../../config/promptIds';\\r\\n\\r\\n\\timport LogInPrompt from './LogInPrompt.svelte';\\r\\n\\timport SignUpPrompt from './SignUpPrompt.svelte';\\r\\n\\timport SetAccountPrompt from './SetAccountPrompt.svelte';\\r\\n\\timport ForgotPasswordPrompt from './ForgotPasswordPrompt.svelte';\\r\\n\\r\\n\\timport { user, curMenu, curPrompt, dontAllowOverlayClose } from '../../models/appModel';\\r\\n\\r\\n\\timport OverlayMenu from './OverlayMenu.svelte';\\r\\n\\timport OverlayPrompt from './OverlayPrompt.svelte';\\r\\n\\r\\n\\timport { createUser, setAccountDetails, sendPasswordReset } from '../../actions/userActions';\\r\\n\\r\\n\\timport { closeOverlay, login } from '../../actions/appActions';\\r\\n\\r\\n    import { menus } from '../../config/menus';\\r\\n    import prompts from '../../config/prompts';\\r\\n\\r\\n    $: menu = $curMenu ? menus[$curMenu] : null;\\r\\n\\t$: prompt = $curPrompt ? prompts[$curPrompt] : null;\\r\\n\\r\\n\\t$: resetPass = $user && $user.resetPass;\\r\\n\\r\\n\\tlet logInDetails;\\r\\n\\tlet logInUpdateMenuItems;\\r\\n\\tfunction logInSubmit() {\\r\\n\\t\\tcloseOverlay();\\r\\n\\t\\tlogin($logInDetails);\\r\\n\\t}\\r\\n\\r\\n\\tlet signUpNewUser;\\r\\n\\tlet signUpUpdateMenuItems;\\r\\n\\tfunction signUpSubmit() {\\r\\n\\t\\tcloseOverlay();\\r\\n\\t\\tcreateUser(signUpNewUser);\\r\\n\\t}\\r\\n\\r\\n\\tlet userDetails;\\r\\n\\tlet setAccountUpdateMenuItems;\\r\\n\\tfunction setAccountSubmit() {\\r\\n\\t\\tcloseOverlay();\\r\\n\\t\\tsetAccountDetails(userDetails, resetPass);\\r\\n\\t}\\r\\n\\r\\n\\tlet forgotPasswordEmail;\\r\\n\\tlet forgotPasswordUpdateMenuItems;\\r\\n\\tfunction forgotPasswordSubmit() {\\r\\n\\t\\tcloseOverlay();\\r\\n\\t\\tsendPasswordReset(forgotPasswordEmail);\\r\\n\\t}\\r\\n\\r\\n\\t$: canClose = ((menu && menu.allowClose !== false) || (prompt && prompt.allowClose !== false)) && !$dontAllowOverlayClose;\\r\\n\\r\\n\\tfunction close() {\\r\\n\\t\\tif (canClose) {\\r\\n\\t\\t\\tcloseOverlay();\\r\\n\\t\\t}\\r\\n\\t}\\r\\n</script>\\r\\n\\r\\n{#if $curMenu || $curPrompt}\\r\\n\\t<div class=\\\"overlayContainer\\\"><div class=\\\"overlayContent\\\">\\r\\n\\t\\t<div class=\\\"overlayBg\\\" class:button=\\\"{canClose}\\\" on:click=\\\"{close}\\\" />\\r\\n\\t\\t{#if $curMenu}\\r\\n\\t\\t\\t<OverlayMenu menuId=\\\"{$curMenu}\\\" />\\r\\n\\t\\t{:else}\\r\\n\\t\\t\\t{#if $curPrompt === promptIds.LOG_IN }\\r\\n\\t\\t\\t\\t<OverlayPrompt promptId=\\\"{$curPrompt}\\\" onConfirm=\\\"{logInSubmit}\\\" bind:updateMenuItems=\\\"{logInUpdateMenuItems}\\\">\\r\\n\\t\\t\\t\\t\\t<LogInPrompt\\r\\n\\t\\t\\t\\t\\t\\tbind:details=\\\"{logInDetails}\\\"\\r\\n\\t\\t\\t\\t\\t\\ton:confirm=\\\"{logInSubmit}\\\"\\r\\n\\t\\t\\t\\t\\t\\ton:change=\\\"{logInUpdateMenuItems}\\\"\\r\\n\\t\\t\\t\\t\\t/>\\r\\n\\t\\t\\t\\t</OverlayPrompt>\\r\\n\\t\\t\\t{:else if $curPrompt === promptIds.SIGN_UP }\\r\\n\\t\\t\\t\\t<OverlayPrompt promptId=\\\"{$curPrompt}\\\" onConfirm=\\\"{signUpSubmit}\\\" bind:updateMenuItems=\\\"{signUpUpdateMenuItems}\\\">\\r\\n\\t\\t\\t\\t\\t<SignUpPrompt\\r\\n\\t\\t\\t\\t\\t\\tbind:newUser=\\\"{signUpNewUser}\\\"\\r\\n\\t\\t\\t\\t\\t\\ton:confirm=\\\"{signUpSubmit}\\\"\\r\\n\\t\\t\\t\\t\\t\\ton:change=\\\"{signUpUpdateMenuItems}\\\"\\r\\n\\t\\t\\t\\t\\t/>\\r\\n\\t\\t\\t\\t</OverlayPrompt>\\r\\n\\t\\t\\t{:else if $curPrompt === promptIds.SET_ACCOUNT || $curPrompt === promptIds.RESET_PASSWORD }\\r\\n\\t\\t\\t\\t<OverlayPrompt promptId=\\\"{$curPrompt}\\\" onConfirm=\\\"{setAccountSubmit}\\\" bind:updateMenuItems=\\\"{setAccountUpdateMenuItems}\\\">\\r\\n\\t\\t\\t\\t\\t<SetAccountPrompt\\r\\n\\t\\t\\t\\t\\t\\tbind:userDetails=\\\"{userDetails}\\\"\\r\\n\\t\\t\\t\\t\\t\\ton:confirm=\\\"{setAccountSubmit}\\\"\\r\\n\\t\\t\\t\\t\\t\\ton:change=\\\"{setAccountUpdateMenuItems}\\\"\\r\\n\\t\\t\\t\\t\\t/>\\r\\n\\t\\t\\t\\t</OverlayPrompt>\\r\\n\\t\\t\\t{:else if $curPrompt === promptIds.FORGOT_PASSWORD }\\r\\n\\t\\t\\t\\t<OverlayPrompt promptId=\\\"{$curPrompt}\\\" onConfirm=\\\"{forgotPasswordSubmit}\\\" bind:updateMenuItems=\\\"{forgotPasswordUpdateMenuItems}\\\">\\r\\n\\t\\t\\t\\t\\t<ForgotPasswordPrompt\\r\\n\\t\\t\\t\\t\\t\\tbind:email=\\\"{forgotPasswordEmail}\\\"\\r\\n\\t\\t\\t\\t\\t\\ton:confirm=\\\"{forgotPasswordSubmit}\\\"\\r\\n\\t\\t\\t\\t\\t\\ton:change=\\\"{forgotPasswordUpdateMenuItems}\\\"\\r\\n\\t\\t\\t\\t\\t/>\\r\\n\\t\\t\\t\\t</OverlayPrompt>\\r\\n\\t\\t\\t{:else}\\r\\n\\t\\t\\t\\t<OverlayPrompt promptId=\\\"{$curPrompt}\\\" />\\r\\n\\t\\t\\t{/if}\\r\\n\\t\\t{/if}\\r\\n\\t</div></div>\\r\\n{/if}\\r\\n\\r\\n<style>\\r\\n\\t.overlayContainer {\\r\\n\\t\\tposition: absolute;\\r\\n\\t\\twidth: 100%;\\r\\n\\t\\theight: 100%;\\r\\n\\t\\tz-index: 100;\\r\\n\\t}\\r\\n\\t@media (max-height: 480px) {\\r\\n\\t\\t.overlayContainer {\\r\\n\\t\\t\\tposition: fixed;\\r\\n\\t\\t}\\r\\n\\t}\\r\\n\\r\\n\\t.overlayContent {\\r\\n\\t\\tposition: relative;\\r\\n\\t\\twidth: 100%;\\r\\n\\t\\tmin-height: 100%;\\r\\n\\r\\n\\t\\tdisplay: flex;\\r\\n\\t\\talign-items: center;\\r\\n\\t\\tjustify-content: center;\\r\\n\\t}\\r\\n\\r\\n\\t.overlayContainer :global(.overlayMenu) {\\r\\n\\t\\tz-index: 101;\\r\\n\\t}\\r\\n\\t.overlayContainer :global(.overlayPrompt) {\\r\\n\\t\\tz-index: 102;\\r\\n    \\tmargin: 20px 0;\\r\\n\\t}\\r\\n\\r\\n\\t.overlayBg {\\r\\n\\t\\tposition: absolute;\\r\\n\\t\\tbackground: rgba(0, 0, 0, 0.5);\\r\\n\\t\\twidth: 100%;\\r\\n\\t\\theight: 100%;\\r\\n\\t}\\r\\n\\t.button {\\r\\n\\t\\tcursor: pointer;\\r\\n\\t}\\r\\n</style>\"],\"names\":[],\"mappings\":\"AA4GC,iBAAiB,eAAC,CAAC,AAClB,QAAQ,CAAE,QAAQ,CAClB,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,OAAO,CAAE,GAAG,AACb,CAAC,AACD,MAAM,AAAC,aAAa,KAAK,CAAC,AAAC,CAAC,AAC3B,iBAAiB,eAAC,CAAC,AAClB,QAAQ,CAAE,KAAK,AAChB,CAAC,AACF,CAAC,AAED,eAAe,eAAC,CAAC,AAChB,QAAQ,CAAE,QAAQ,CAClB,KAAK,CAAE,IAAI,CACX,UAAU,CAAE,IAAI,CAEhB,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,MAAM,CACnB,eAAe,CAAE,MAAM,AACxB,CAAC,AAED,gCAAiB,CAAC,AAAQ,YAAY,AAAE,CAAC,AACxC,OAAO,CAAE,GAAG,AACb,CAAC,AACD,gCAAiB,CAAC,AAAQ,cAAc,AAAE,CAAC,AAC1C,OAAO,CAAE,GAAG,CACT,MAAM,CAAE,IAAI,CAAC,CAAC,AAClB,CAAC,AAED,UAAU,eAAC,CAAC,AACX,QAAQ,CAAE,QAAQ,CAClB,UAAU,CAAE,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAC9B,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,AACb,CAAC,AACD,OAAO,eAAC,CAAC,AACR,MAAM,CAAE,OAAO,AAChB,CAAC\"}"
};

const Overlays = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let $curMenu = get_store_value(curMenu);
	let $curPrompt = get_store_value(curPrompt);
	let $user = get_store_value(user);
	let $logInDetails;
	let $dontAllowOverlayClose = get_store_value(dontAllowOverlayClose);
	let logInDetails;
	$logInDetails = get_store_value(logInDetails);
	let logInUpdateMenuItems;

	function logInSubmit() {
		closeOverlay();
		login$1($logInDetails);
	}

	let signUpNewUser;
	let signUpUpdateMenuItems;

	function signUpSubmit() {
		closeOverlay();
		createUser(signUpNewUser);
	}

	let userDetails;
	let setAccountUpdateMenuItems;

	function setAccountSubmit() {
		closeOverlay();
		setAccountDetails(userDetails, resetPass);
	}

	let forgotPasswordEmail;
	let forgotPasswordUpdateMenuItems;

	function forgotPasswordSubmit() {
		closeOverlay();
		sendPasswordReset$1(forgotPasswordEmail);
	}

	$$result.css.add(css$d);
	let $$settled;
	let $$rendered;

	do {
		$$settled = true;
		$logInDetails = get_store_value(logInDetails);
		let menu = $curMenu ? menus[$curMenu] : null;
		let prompt = $curPrompt ? prompts[$curPrompt] : null;
		let resetPass = $user && $user.resetPass;
		let canClose = (menu && menu.allowClose !== false || prompt && prompt.allowClose !== false) && !$dontAllowOverlayClose;

		$$rendered = `${$curMenu || $curPrompt
		? `<div class="${"overlayContainer svelte-1jc938x"}"><div class="${"overlayContent svelte-1jc938x"}"><div class="${["overlayBg svelte-1jc938x", canClose ? "button" : ""].join(" ").trim()}"></div>
		${$curMenu
			? `${validate_component(OverlayMenu, "OverlayMenu").$$render($$result, { menuId: $curMenu }, {}, {})}`
			: `${$curPrompt === promptIds.LOG_IN
				? `${validate_component(OverlayPrompt, "OverlayPrompt").$$render(
						$$result,
						{
							promptId: $curPrompt,
							onConfirm: logInSubmit,
							updateMenuItems: logInUpdateMenuItems
						},
						{
							updateMenuItems: $$value => {
								logInUpdateMenuItems = $$value;
								$$settled = false;
							}
						},
						{
							default: () => `${validate_component(LogInPrompt, "LogInPrompt").$$render(
								$$result,
								{ details: logInDetails },
								{
									details: $$value => {
										logInDetails = $$value;
										$$settled = false;
									}
								},
								{}
							)}`
						}
					)}`
				: `${$curPrompt === promptIds.SIGN_UP
					? `${validate_component(OverlayPrompt, "OverlayPrompt").$$render(
							$$result,
							{
								promptId: $curPrompt,
								onConfirm: signUpSubmit,
								updateMenuItems: signUpUpdateMenuItems
							},
							{
								updateMenuItems: $$value => {
									signUpUpdateMenuItems = $$value;
									$$settled = false;
								}
							},
							{
								default: () => `${validate_component(SignUpPrompt, "SignUpPrompt").$$render(
									$$result,
									{ newUser: signUpNewUser },
									{
										newUser: $$value => {
											signUpNewUser = $$value;
											$$settled = false;
										}
									},
									{}
								)}`
							}
						)}`
					: `${$curPrompt === promptIds.SET_ACCOUNT || $curPrompt === promptIds.RESET_PASSWORD
						? `${validate_component(OverlayPrompt, "OverlayPrompt").$$render(
								$$result,
								{
									promptId: $curPrompt,
									onConfirm: setAccountSubmit,
									updateMenuItems: setAccountUpdateMenuItems
								},
								{
									updateMenuItems: $$value => {
										setAccountUpdateMenuItems = $$value;
										$$settled = false;
									}
								},
								{
									default: () => `${validate_component(SetAccountPrompt, "SetAccountPrompt").$$render(
										$$result,
										{ userDetails },
										{
											userDetails: $$value => {
												userDetails = $$value;
												$$settled = false;
											}
										},
										{}
									)}`
								}
							)}`
						: `${$curPrompt === promptIds.FORGOT_PASSWORD
							? `${validate_component(OverlayPrompt, "OverlayPrompt").$$render(
									$$result,
									{
										promptId: $curPrompt,
										onConfirm: forgotPasswordSubmit,
										updateMenuItems: forgotPasswordUpdateMenuItems
									},
									{
										updateMenuItems: $$value => {
											forgotPasswordUpdateMenuItems = $$value;
											$$settled = false;
										}
									},
									{
										default: () => `${validate_component(ForgotPasswordPrompt, "ForgotPasswordPrompt").$$render(
											$$result,
											{ email: forgotPasswordEmail },
											{
												email: $$value => {
													forgotPasswordEmail = $$value;
													$$settled = false;
												}
											},
											{}
										)}`
									}
								)}`
							: `${validate_component(OverlayPrompt, "OverlayPrompt").$$render($$result, { promptId: $curPrompt }, {}, {})}`}`}`}`}`}</div></div>`
		: ``}`;
	} while (!$$settled);

	return $$rendered;
});

/* src\routes\_components\DesktopWarning.svelte generated by Svelte v3.23.0 */

const css$e = {
	code: ".desktopWarningContainer.svelte-er3gxd{display:none;position:absolute;width:100%}@media(min-width: 480px) and (min-height: 480px){.desktopWarningContainer.svelte-er3gxd{display:block}}.message.svelte-er3gxd{width:100%;bottom:0;position:absolute;text-align:center;padding-bottom:10px;font-size:1.3rem;color:#999999}",
	map: "{\"version\":3,\"file\":\"DesktopWarning.svelte\",\"sources\":[\"DesktopWarning.svelte\"],\"sourcesContent\":[\"<script>\\r\\n</script>\\r\\n\\r\\n<div class=\\\"desktopWarningContainer\\\">\\r\\n    <div class=\\\"message\\\">designed for mobile</div>\\r\\n</div>\\r\\n\\r\\n<style>\\r\\n    .desktopWarningContainer {\\r\\n        display: none;\\r\\n        position: absolute;\\r\\n        width: 100%;\\r\\n    }\\r\\n\\r\\n\\t@media (min-width: 480px) and (min-height: 480px) {\\r\\n        .desktopWarningContainer {\\r\\n            display: block;\\r\\n        }\\r\\n    }\\r\\n\\r\\n    .message {\\r\\n        width: 100%;\\r\\n        bottom: 0;\\r\\n        position: absolute;\\r\\n        text-align: center;\\r\\n        padding-bottom: 10px;\\r\\n        font-size: 1.3rem;\\r\\n        color: #999999;\\r\\n    }\\r\\n</style>\"],\"names\":[],\"mappings\":\"AAQI,wBAAwB,cAAC,CAAC,AACtB,OAAO,CAAE,IAAI,CACb,QAAQ,CAAE,QAAQ,CAClB,KAAK,CAAE,IAAI,AACf,CAAC,AAEJ,MAAM,AAAC,YAAY,KAAK,CAAC,CAAC,GAAG,CAAC,aAAa,KAAK,CAAC,AAAC,CAAC,AAC5C,wBAAwB,cAAC,CAAC,AACtB,OAAO,CAAE,KAAK,AAClB,CAAC,AACL,CAAC,AAED,QAAQ,cAAC,CAAC,AACN,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,CAAC,CACT,QAAQ,CAAE,QAAQ,CAClB,UAAU,CAAE,MAAM,CAClB,cAAc,CAAE,IAAI,CACpB,SAAS,CAAE,MAAM,CACjB,KAAK,CAAE,OAAO,AAClB,CAAC\"}"
};

const DesktopWarning = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	$$result.css.add(css$e);

	return `<div class="${"desktopWarningContainer svelte-er3gxd"}"><div class="${"message svelte-er3gxd"}">designed for mobile</div>
</div>`;
});

/* src\components\Hotspots.svelte generated by Svelte v3.23.0 */

const css$f = {
	code: ".hotspotContainer.svelte-m9jx7u{position:absolute;width:375px}.hotspotContainer.svelte-m9jx7u a,.hotspotContainer.svelte-m9jx7u div{position:absolute;text-decoration:none;line-height:0;cursor:pointer}",
	map: "{\"version\":3,\"file\":\"Hotspots.svelte\",\"sources\":[\"Hotspots.svelte\"],\"sourcesContent\":[\"<svelte:window bind:innerWidth={viewWidth}/>\\n\\n<script>\\n    let viewWidth = 0;\\n\\n    let hotspotContainerScale = 1;\\n    $: {\\n        if (viewWidth < 480) {\\n            hotspotContainerScale = viewWidth / 375;\\n        } else {\\n            hotspotContainerScale = 411 / 375;\\n        }\\n    }\\n\\n    $: cssTransform = 'transform: scale(' + hotspotContainerScale + ', ' + hotspotContainerScale + '); transform-origin: 0 0;';\\n</script>\\n\\n<div class=\\\"hotspotContainer\\\" style=\\\"{cssTransform}\\\">\\n    <slot></slot>\\n</div>\\n\\n<style>\\n    .hotspotContainer {\\n        position: absolute;\\n        width: 375px;\\n        /* width: 100%; */\\n    }\\n\\n    .hotspotContainer :global(a), .hotspotContainer :global(div) {\\n        position: absolute;\\n\\n        text-decoration: none;\\n        line-height: 0;\\n\\n        cursor: pointer;\\n    }\\n</style>\"],\"names\":[],\"mappings\":\"AAsBI,iBAAiB,cAAC,CAAC,AACf,QAAQ,CAAE,QAAQ,CAClB,KAAK,CAAE,KAAK,AAEhB,CAAC,AAED,+BAAiB,CAAC,AAAQ,CAAC,AAAC,CAAE,+BAAiB,CAAC,AAAQ,GAAG,AAAE,CAAC,AAC1D,QAAQ,CAAE,QAAQ,CAElB,eAAe,CAAE,IAAI,CACrB,WAAW,CAAE,CAAC,CAEd,MAAM,CAAE,OAAO,AACnB,CAAC\"}"
};

const Hotspots = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let viewWidth = 0;
	let hotspotContainerScale = 1;
	$$result.css.add(css$f);

	 {
		{
			{
				hotspotContainerScale = viewWidth / 375;
			}
		}
	}

	let cssTransform = "transform: scale(" + hotspotContainerScale + ", " + hotspotContainerScale + "); transform-origin: 0 0;";

	return `



<div class="${"hotspotContainer svelte-m9jx7u"}"${add_attribute("style", cssTransform, 0)}>${$$slots.default ? $$slots.default({}) : ``}
</div>`;
});

/* src\components\Proxy.svelte generated by Svelte v3.23.0 */

const css$g = {
	code: ".proxy.svelte-1w9acli.svelte-1w9acli{line-height:0}img.svelte-1w9acli.svelte-1w9acli{width:100%}.absolutePlacement.svelte-1w9acli img.svelte-1w9acli{width:46%}.absolutePlacement.svelte-1w9acli.svelte-1w9acli{position:absolute}.button.svelte-1w9acli.svelte-1w9acli{cursor:pointer}",
	map: "{\"version\":3,\"file\":\"Proxy.svelte\",\"sources\":[\"Proxy.svelte\"],\"sourcesContent\":[\"<script>\\r\\n    import Hotspots from './Hotspots.svelte';\\r\\n\\r\\n    export let image;\\r\\n\\r\\n    export let href = null;\\r\\n    export let onClick = null;\\r\\n\\r\\n    export let className = '';\\r\\n    export let style = null;\\r\\n    export let absolutePlacement = false;\\r\\n\\r\\n    $: imageSrc = (image.indexOf('.png') !== -1) ? image : image + '.jpg';\\r\\n\\r\\n    let hasSlots = $$props.$$slots;\\r\\n</script>\\r\\n\\r\\n<div class=\\\"proxy {className}\\\" {style} class:absolutePlacement>\\r\\n    {#if hasSlots}\\r\\n        <Hotspots>\\r\\n            <slot></slot>\\r\\n        </Hotspots>\\r\\n    {/if}\\r\\n\\r\\n    {#if href}\\r\\n        <a {href} on:click={onClick}>\\r\\n            <img src=\\\"content/proxy/{imageSrc}\\\" alt=\\\"proxy\\\" />\\r\\n        </a>\\r\\n    {:else}\\r\\n        <img src=\\\"content/proxy/{imageSrc}\\\" alt=\\\"proxy\\\" on:click={onClick} class:button={onClick} />\\r\\n    {/if}\\r\\n</div>\\r\\n\\r\\n<style>\\r\\n    .proxy {\\r\\n        line-height: 0;\\r\\n    }\\r\\n\\r\\n    img {\\r\\n        width: 100%;\\r\\n    }\\r\\n\\r\\n    .absolutePlacement img {\\r\\n        width: 46%;\\r\\n    }\\r\\n\\r\\n    .absolutePlacement {\\r\\n        position: absolute;\\r\\n    }\\r\\n\\r\\n    .button {\\r\\n        cursor: pointer;\\r\\n    }\\r\\n</style>\"],\"names\":[],\"mappings\":\"AAkCI,MAAM,8BAAC,CAAC,AACJ,WAAW,CAAE,CAAC,AAClB,CAAC,AAED,GAAG,8BAAC,CAAC,AACD,KAAK,CAAE,IAAI,AACf,CAAC,AAED,iCAAkB,CAAC,GAAG,eAAC,CAAC,AACpB,KAAK,CAAE,GAAG,AACd,CAAC,AAED,kBAAkB,8BAAC,CAAC,AAChB,QAAQ,CAAE,QAAQ,AACtB,CAAC,AAED,OAAO,8BAAC,CAAC,AACL,MAAM,CAAE,OAAO,AACnB,CAAC\"}"
};

const Proxy = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let { image } = $$props;
	let { href = null } = $$props;
	let { onClick = null } = $$props;
	let { className = "" } = $$props;
	let { style = null } = $$props;
	let { absolutePlacement = false } = $$props;
	let hasSlots = $$props.$$slots;
	if ($$props.image === void 0 && $$bindings.image && image !== void 0) $$bindings.image(image);
	if ($$props.href === void 0 && $$bindings.href && href !== void 0) $$bindings.href(href);
	if ($$props.onClick === void 0 && $$bindings.onClick && onClick !== void 0) $$bindings.onClick(onClick);
	if ($$props.className === void 0 && $$bindings.className && className !== void 0) $$bindings.className(className);
	if ($$props.style === void 0 && $$bindings.style && style !== void 0) $$bindings.style(style);
	if ($$props.absolutePlacement === void 0 && $$bindings.absolutePlacement && absolutePlacement !== void 0) $$bindings.absolutePlacement(absolutePlacement);
	$$result.css.add(css$g);
	let imageSrc = image.indexOf(".png") !== -1 ? image : image + ".jpg";

	return `<div class="${[
		"proxy " + escape(className) + " svelte-1w9acli",
		absolutePlacement ? "absolutePlacement" : ""
	].join(" ").trim()}"${add_attribute("style", style, 0)}>${hasSlots
	? `${validate_component(Hotspots, "Hotspots").$$render($$result, {}, {}, {
			default: () => `${$$slots.default ? $$slots.default({}) : ``}`
		})}`
	: ``}

    ${href
	? `<a${add_attribute("href", href, 0)}><img src="${"content/proxy/" + escape(imageSrc)}" alt="${"proxy"}" class="${"svelte-1w9acli"}"></a>`
	: `<img src="${"content/proxy/" + escape(imageSrc)}" alt="${"proxy"}" class="${["svelte-1w9acli", onClick ? "button" : ""].join(" ").trim()}">`}
</div>`;
});

const img$e = "data:image/png;base64,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";

const img$f = "data:image/png;base64,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";

const img$g = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA2CAYAAACbZ/oUAAAEL0lEQVRoQ+2ajZFMQRDH+yJABIgAESACRIAIEAEiQASIABEgAkSACBAB9buaUb39er7ezLy9rb2puqrbfTPT/e+P//T02xM5snFyZHjlHHCDx6+LyE0RuajW/BAR/j437JObyv5Xwl+c9zvs/3WNjFYPI/ypiNw1QK1sQL8XkVfBAC26IeNRkMH/qQFwZDxvkVELGC+ixLMWzcNc1qBUzcCYa2VgXIyQHTWAAftRRAhhb/wREcKL5xcSc3h+O6PQFjJOVSsBJqQAa0PrbQgnQsoOwv2BiNwxD1KgU2A/iMibIMeTgZz7jox7uRAvAf5iPPtNRB6LyKdS6IjIraDwZTXXgvbA/gwGq5XxUkSuGRk3UvrlALMReRsHzItVi3mi1gAIxbVCfCa8GUQPhokDg/K5Vwb5jGMWIwWYEP7eqUhc7oGOJAZJ9YDNybjqhXYKMLmj84MQWXXuBY0AzVEVSS16MJ7hEB9GbvGs9R6kSQrGAc/AJTvDA4wSv0oLvXApfEc6vEvMIcRrcrYk1jrqkjWiBxirvFY7u6FRkpx4DiiqJz1gY4wxYthUfBiI8//eHmBtJRgzV+20KmkVYv1Ig7IfqRNPhkVYe4C1F9w8aEVp5uv9YX7N0p1bny7XDlvs7wEmfyOZwKZrSr2c4pBLLFgI5R4y9OSgb2R/vE0EZUP6r3o+A/AIL+b20ICZt+NUz8NHB1jn2CF6WFeIVTk8m1Rmh3RWfy+kbQ29OLxna9yxvy2anogIeLKkZUu0xeHdodDspcWiKVVL68ObYyN53ZqNoHF/fZ3l5rVoWqQAc7V6oYQdgpetzotwXpxRxpray9xiOMB7bjONzmqaTu5ynY0FU7IkzjUAbD5QHdE+OYuDW5i+gKCn134q9rTs7cYNkz1bwIZytj4v9bS43UBauhs56u46wk5cPGgTxVFsJJQAs5HdlDwG9Oiiv9UAMDBg9ZuPojNqAKOILcj3DdoDW1UG1wIGtG2f7Au0B7b63t4C+CyA7gJbOodTOUXu6j7zVp72wDZ3TFo9jBEgCc443YybDToFtvXFQPEczjGnl9Oc03w/clAAUeZqNq7OWavIGg/rPSxono2su221x/6rwa7NYWs0DzTfAbxn0Bu3bw66wI4CzD6eJwBNiLdeOAhdwNrm/JDI6Q1p7UFA013QZWjpRbiNAO/1KeUi9fIQbhgJGOVhUy4cGnQtg3tMDFhK22Fl7GjAETTesGc1Iele2UL4EsaaielYENbcy4eNGYBTZ3WKwXnpvtNoCz9Laj5ja6wyC3CUXWLwKUycAz4bMLLtBZ3v4rtg+yJteoNhC8Dx2LIMrh0BOcHyqRyvidaqOVsBTjE43w9n4n2HtJZvf+Cy5lc7VZ5MTdrSw1EHQMeSEVJrrcQODnCXwr2L9+HhXp271p8D7jLfASw+Og//A+tr9zdlr0VjAAAAAElFTkSuQmCC";

const img$h = "data:image/png;base64,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";

/* src\routes\_components\Splash.svelte generated by Svelte v3.23.0 */

const css$h = {
	code: ".splash.svelte-1217ds3{position:absolute;width:100%;height:100%;z-index:110;background-color:#ffffff;cursor:pointer}.logoContainer.svelte-1217ds3{position:absolute;width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center}.footerContainer.svelte-1217ds3{position:absolute;width:100%;bottom:23px}.logo.svelte-1217ds3{display:flex;flex-direction:column;justify-content:center;align-items:center;margin-top:-26px}.footer.svelte-1217ds3{display:flex;flex-direction:column;justify-content:center;align-items:center}.logoImage.svelte-1217ds3{display:block;width:223px;height:119px}.tagLineImage.svelte-1217ds3{display:block;width:178px;height:27px;margin-top:22px}.heartImage.svelte-1217ds3{display:block;width:30px;height:27px}.footerTaglineImage.svelte-1217ds3{display:block;width:371px;height:40px;margin-top:16px}",
	map: "{\"version\":3,\"file\":\"Splash.svelte\",\"sources\":[\"Splash.svelte\"],\"sourcesContent\":[\"<script>\\r\\n\\timport { stores } from '@sapper/app';\\r\\n    const { page } = stores();\\r\\n\\r\\n    import config from '../../config';\\r\\n\\r\\n    import Proxy from '../../components/Proxy.svelte';\\r\\n\\r\\n    import LogoImage from \\\"../../assets/images/logo.png\\\";\\r\\n    import TagLineImage from \\\"../../assets/images/splash_tagline.png\\\";\\r\\n    import HeartImage from \\\"../../assets/images/heart.png\\\";\\r\\n    import FooterTaglineImage from \\\"../../assets/images/splash_footer_tagline.png\\\";\\r\\n\\r\\n    let shown = false;\\r\\n    let showInited = false;\\r\\n    let timeoutInited = false;\\r\\n\\r\\n    $: {\\r\\n        if (!showInited) {\\r\\n            showInited = true;\\r\\n\\r\\n            const path = $page.path;\\r\\n\\r\\n            if (path === '' || path === '/' || path === '/discover' || path === '/home') {\\r\\n                shown = true;\\r\\n\\r\\n                if (!timeoutInited && setTimeout) {\\r\\n                    timeoutInited = true;\\r\\n\\r\\n                    setTimeout(() => {\\r\\n                        hideSplash();\\r\\n                    }, config.SPLASH_TIMEOUT * 1000);\\r\\n                }\\r\\n            }\\r\\n        }\\r\\n    }\\r\\n\\r\\n    function hideSplash() {\\r\\n        shown = false;\\r\\n    }\\r\\n</script>\\r\\n\\r\\n{#if shown}\\r\\n    <div class=\\\"splash\\\" on:click=\\\"{hideSplash}\\\">\\r\\n        <!-- <Proxy image=\\\"splash\\\" className=\\\"contentItem proxyOverlay\\\" ></Proxy> -->\\r\\n        <div class=\\\"logoContainer\\\">\\r\\n            <div class=\\\"logo\\\">\\r\\n                <img class=\\\"logoImage\\\" src=\\\"{LogoImage}\\\" alt=\\\"Flock\\\" />\\r\\n                <img class=\\\"tagLineImage\\\" src=\\\"{TagLineImage}\\\" alt=\\\"projects that matter\\\" />\\r\\n            </div>\\r\\n        </div>\\r\\n        <div class=\\\"footerContainer\\\">\\r\\n            <div class=\\\"footer\\\">\\r\\n                <img class=\\\"heartImage\\\" src=\\\"{HeartImage}\\\" alt=\\\"Heart Icon\\\" />\\r\\n                <img class=\\\"footerTaglineImage\\\" src=\\\"{FooterTaglineImage}\\\" alt=\\\"share  ~  connect  ~  collaborate\\\" />\\r\\n            </div>\\r\\n        </div>\\r\\n    </div>\\r\\n{/if}\\r\\n\\r\\n<style>\\r\\n    .splash {\\r\\n\\t\\tposition: absolute;\\r\\n\\t\\twidth: 100%;\\r\\n\\t\\theight: 100%;\\r\\n\\t\\tz-index: 110;\\r\\n\\r\\n        background-color: #ffffff;\\r\\n\\r\\n        cursor: pointer;\\r\\n    }\\r\\n\\r\\n\\t/* .splash :global(.proxyOverlay) {\\r\\n        position: absolute;\\r\\n        opacity: 0.5;\\r\\n\\t} */\\r\\n\\r\\n    .logoContainer {\\r\\n\\t\\tposition: absolute;\\r\\n\\t\\twidth: 100%;\\r\\n\\t\\theight: 100%;\\r\\n\\r\\n\\t\\tdisplay: flex;\\r\\n        flex-direction: column;\\r\\n\\t\\tjustify-content: center;\\r\\n\\t\\talign-items: center;\\r\\n    }\\r\\n\\r\\n    .footerContainer {\\r\\n        position: absolute;\\r\\n        width: 100%;\\r\\n        bottom: 23px;\\r\\n\\r\\n\\t\\t/* position: absolute;\\r\\n\\t\\twidth: 100%;\\r\\n\\t\\theight: 100%;\\r\\n\\r\\n\\t\\tdisplay: flex;\\r\\n        flex-direction: column;\\r\\n\\t\\tjustify-content: center;\\r\\n\\t\\talign-items: center; */\\r\\n    }\\r\\n\\r\\n    .logo {\\r\\n\\t\\tdisplay: flex;\\r\\n        flex-direction: column;\\r\\n\\t\\tjustify-content: center;\\r\\n\\t\\talign-items: center;\\r\\n\\r\\n        margin-top: -26px;\\r\\n    }\\r\\n\\r\\n    .footer {\\r\\n\\t\\tdisplay: flex;\\r\\n        flex-direction: column;\\r\\n\\t\\tjustify-content: center;\\r\\n\\t\\talign-items: center;\\r\\n    }\\r\\n\\r\\n    .logoImage {\\r\\n        display: block;\\r\\n        width: 223px;\\r\\n        height: 119px;\\r\\n    }\\r\\n    .tagLineImage {\\r\\n        display: block;\\r\\n        width: 178px;\\r\\n        height: 27px;\\r\\n\\r\\n        margin-top: 22px;\\r\\n    }\\r\\n\\r\\n    .heartImage {\\r\\n        display: block;\\r\\n        width: 30px;\\r\\n        height: 27px;\\r\\n    }\\r\\n    .footerTaglineImage {\\r\\n        display: block;\\r\\n        width: 371px;\\r\\n        height: 40px;\\r\\n\\r\\n        margin-top: 16px;\\r\\n    }\\r\\n</style>\"],\"names\":[],\"mappings\":\"AA6DI,OAAO,eAAC,CAAC,AACX,QAAQ,CAAE,QAAQ,CAClB,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,OAAO,CAAE,GAAG,CAEN,gBAAgB,CAAE,OAAO,CAEzB,MAAM,CAAE,OAAO,AACnB,CAAC,AAOD,cAAc,eAAC,CAAC,AAClB,QAAQ,CAAE,QAAQ,CAClB,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CAEZ,OAAO,CAAE,IAAI,CACP,cAAc,CAAE,MAAM,CAC5B,eAAe,CAAE,MAAM,CACvB,WAAW,CAAE,MAAM,AACjB,CAAC,AAED,gBAAgB,eAAC,CAAC,AACd,QAAQ,CAAE,QAAQ,CAClB,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,AAUhB,CAAC,AAED,KAAK,eAAC,CAAC,AACT,OAAO,CAAE,IAAI,CACP,cAAc,CAAE,MAAM,CAC5B,eAAe,CAAE,MAAM,CACvB,WAAW,CAAE,MAAM,CAEb,UAAU,CAAE,KAAK,AACrB,CAAC,AAED,OAAO,eAAC,CAAC,AACX,OAAO,CAAE,IAAI,CACP,cAAc,CAAE,MAAM,CAC5B,eAAe,CAAE,MAAM,CACvB,WAAW,CAAE,MAAM,AACjB,CAAC,AAED,UAAU,eAAC,CAAC,AACR,OAAO,CAAE,KAAK,CACd,KAAK,CAAE,KAAK,CACZ,MAAM,CAAE,KAAK,AACjB,CAAC,AACD,aAAa,eAAC,CAAC,AACX,OAAO,CAAE,KAAK,CACd,KAAK,CAAE,KAAK,CACZ,MAAM,CAAE,IAAI,CAEZ,UAAU,CAAE,IAAI,AACpB,CAAC,AAED,WAAW,eAAC,CAAC,AACT,OAAO,CAAE,KAAK,CACd,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,AAChB,CAAC,AACD,mBAAmB,eAAC,CAAC,AACjB,OAAO,CAAE,KAAK,CACd,KAAK,CAAE,KAAK,CACZ,MAAM,CAAE,IAAI,CAEZ,UAAU,CAAE,IAAI,AACpB,CAAC\"}"
};

const Splash = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let $page;
	const { page } = stores$1();
	$page = get_store_value(page);
	let shown = false;
	let showInited = false;
	let timeoutInited = false;

	function hideSplash() {
		shown = false;
	}

	$$result.css.add(css$h);
	$page = get_store_value(page);

	 {
		{
			if (!showInited) {
				showInited = true;
				const path = $page.path;

				if (path === "" || path === "/" || path === "/discover" || path === "/home") {
					shown = true;

					if (!timeoutInited && setTimeout) {
						timeoutInited = true;

						setTimeout(
							() => {
								hideSplash();
							},
							config$1.SPLASH_TIMEOUT * 1000
						);
					}
				}
			}
		}
	}

	return `${shown
	? `<div class="${"splash svelte-1217ds3"}">
        <div class="${"logoContainer svelte-1217ds3"}"><div class="${"logo svelte-1217ds3"}"><img class="${"logoImage svelte-1217ds3"}"${add_attribute("src", img$e, 0)} alt="${"Flock"}">
                <img class="${"tagLineImage svelte-1217ds3"}"${add_attribute("src", img$f, 0)} alt="${"projects that matter"}"></div></div>
        <div class="${"footerContainer svelte-1217ds3"}"><div class="${"footer svelte-1217ds3"}"><img class="${"heartImage svelte-1217ds3"}"${add_attribute("src", img$g, 0)} alt="${"Heart Icon"}">
                <img class="${"footerTaglineImage svelte-1217ds3"}"${add_attribute("src", img$h, 0)} alt="${"share  ~  connect  ~  collaborate"}"></div></div></div>`
	: ``}`;
});

const MessageModel = (messageData) => {
    let initData = {
        id: null,
        userId: null,
        conversationId: null,

        createdAt: 0,

        message: null,
        // image: null,

        // likes: [],
        // viewed: [],
    };

    if (messageData) {
        initData = Object.assign(initData, messageData);
    }
    return writable$1(initData);
};

// import messagesTestData from '../data/messages.json';

ConversationsModel.on('conversationUpdated', conversationUpdated);

let loadingMessages = writable$1(false);

const MessagesModel = new EventEmitter();

let curMessageFilterOptions = null;

let messagesUpdatedHandlers = [];

// let pollStarted = false;
// let curPollMessageTimeout = null;

// let messagesLoadedAt = null;

let messages = writable$1(null); // []);

userId.subscribe(onUserChange);
usercode.subscribe(onUserChange);

function onUserChange() {
	clearFilteredMessages();
	// if (!get(userId) || !get(usercode)) {
	// 	clearFilteredMessages();
	// }
	// if (get(userId) && get(usercode)) {
	// 	const details = { userId: get(userId), getUnviewed: true };
	// 	if (messagesLoadedAt) {
	// 		details.loadedAt = messagesLoadedAt;
	// 	}
	// 	getMessages(details);

	// 	if (!pollStarted) {
	// 		pollStarted = true;
	// 		pollMessage();
	// 	}
	// }
}

function conversationUpdated(event) {
	const loadedConversationId = event.conversationId;

	// debugOutput.set(get(debugOutput) + '<br/>conversationUpdated' + ' ' + loadedConversationId + ' ' + get(conversationId));

	// TODO: preload conversations into different messages
	if (loadedConversationId === get_store_value(conversationId)) {
		const preloading = !isConversationPage();
		updateMessages(preloading);
	}
}

function updateMessages(preloading) {
	getMessages$1({ conversationId: get_store_value(conversationId), getUnloaded: true, preload: preloading });
}

messages.subscribe(() => {
	messagesUpdatedHandlers.forEach(handler => {
		handler();
	});
});

function loadMessages(options, callback) {
    // const messageItems = JSON.parse(JSON.stringify(messagesTestData));
    // messageItems.reverse();
	// mergeMessages(messageItems);

	// debugOutput.set(get(debugOutput) + '<br/>loadMessages ' + options.conversationId + ' loading: ' + loadingRequestUtil.isLoading('messages', options));

	if (!loadingRequestUtil.isLoading('messages', options)) {
		//-- console.log('loadMessages', options);
		loadingRequestUtil.setLoading('messages', options, () => { loadingMessages.set(true); });

		// debugOutput.set(get(debugOutput) + '<br/>' + 'loadMessages: ' + JSON.stringify(options));

		// console.log('getMessages ' + options.conversationId + ' ' + Math.floor(Math.random() * 9999));

		api.getMessages(options).then(result => {
			// debugOutput.set(get(debugOutput) + '<br/>message update ' + Math.floor(Math.random() * 999) + ': ' + JSON.stringify(result.messages.length) + ', ' + JSON.stringify(options));

			// console.log('messages loaded ' + options.conversationId + ' count: ' + (result.messages && result.messages.length));

			// debugOutput.set(get(debugOutput) + '<br/>messages loaded ' + options.conversationId + ' ' + (result.messages && result.messages.length));

			if (!result.error) {
				// if (result.loadedAt) {
				// 	messagesLoadedAt = result.loadedAt;
				// }
				mergeMessages(result.messages);
			} else {
				mergeMessages([]);
			}
			loadingRequestUtil.clearLoading('messages', options, () => { loadingMessages.set(false); });
			if (callback) {
				callback(result);
			}

			if (result.viewedAt) {
				updateConversationSeen(options.conversationId, {viewedAt: result.viewedAt});
			}
		});
	}
}

function mergeMessages(newMessages) {
	// console.log('newMessages', newMessages);

	const origMessages = get_store_value(messages);
	const curMessages = origMessages || [];

	if (newMessages && newMessages.length) {
		let curMessage, newMessageData, messageId, newMessage;
		for (var messageI = 0; messageI < newMessages.length; messageI++) {
			newMessageData = newMessages[messageI];
			messageId = newMessageData.id;
            curMessage = curMessages.find(match => get_store_value(match).id === messageId);
            if (!curMessage) {
                curMessage = MessageModel(newMessageData);
                curMessages.unshift(curMessage);
            } else {
                newMessage = get_store_value(curMessage);
				newMessage.isNew = false;
                newMessage = Object.assign(newMessage, newMessageData);
                curMessage.set(newMessage);
            }
			// console.log('new: ' + newMessageData.message);
		}

		curMessages.sort((a,b) => {
			if (get_store_value(a).isNew && !get_store_value(b).isNew) { // ensure new messages stay at bottom
				return 1;
			} else if (get_store_value(b).isNew && !get_store_value(a).isNew) {
				return -1;
			} else {
				return get_store_value(a).createdAt - get_store_value(b).createdAt
			}
		});
		// curMessages.sort((a,b) => get(a).createdAt - get(b).createdAt );
		// curMessages.sort((a,b) => get(b).createdAt - get(a).createdAt ); // sort by reversed created time

		let lastMessage = null;
		curMessages.forEach((messageModel) => {
			curMessage = get_store_value(messageModel);
			curMessage.lastMessage = lastMessage;
			lastMessage = messageModel;
			// console.log(curMessage.createdAt + ' ' + curMessage.message);
			// console.log(curMessage.createdAt, curMessage);
		});

		messages.set(curMessages);
	} else if (!origMessages) {
		messages.set(curMessages);
	}
}

function getMessages$1(options, callback, isNewConversation) {
    if (curMessageFilterOptions && options && (
        curMessageFilterOptions.conversationId !== options.conversationId
    )) {
        clearFilteredMessages();
    }

    curMessageFilterOptions = JSON.parse(JSON.stringify(options));

	// debugOutput.set('getMessages' + JSON.stringify(curMessageFilterOptions));

    if (curMessageFilterOptions.conversationId && !isNewConversation) {
        loadMessages(curMessageFilterOptions, callback);
    }

	return messages;
}

function getMessage(messageId) {
	const curMessages = get_store_value(messages);
	return curMessages && curMessages.find(item => get_store_value(item).id === messageId);
}

function clearFilteredMessages() {
	// const curMessages = get(messages);
	// if (curMessages) {
	// 	curMessages.length = 0;
	// }
	const curMessages = null;
	messages.set(curMessages);
}

function addMessage$1(messageDetails) {
	const newMessageModel = MessageModel();
	const newMessage = get_store_value(newMessageModel);

	const ownerId = get_store_value(userId);

	newMessage.id = messageDetails.id;

	newMessage.userId = ownerId;

	newMessage.conversationId = messageDetails.conversationId;

	newMessage.newConversation = messageDetails.newConversation;
	newMessage.targetUserIds = messageDetails.targetUserIds;

	newMessage.message = messageDetails.message || '';
	if (messageDetails.image) {
		newMessage.image = messageDetails.image;
	}

	newMessage.createdAt = (new Date()).getTime(); // use for initial sort values
	newMessage.modifiedAt = newMessage.createdAt;

	newMessage.isNew = true;

	// savingMessageId.set(newMessage.id); // need to keep saving message so doesn't override on load
	// savingMessage.set(true);

	// console.log('addMessage', newMessage);

	// console.log('newMessage', newMessage);

	savingConversationId.set(messageDetails.conversationId);

	const result = api.addMessage({details: newMessage});
	result.then(result => {
		if (!result || result.error || result.invalid) {
			// console.error(result);
			// savingConversationId.set(null);

			// this sholdn't get called as now getting existing conversation on backend if duplicateKey found
			if (result.duplicateKey && result.action === 'addConversation' && get_store_value(conversationGroupId)) {
				const curConversation = get_store_value(conversation);
				if (curConversation && curConversation.isNew) {
					removeConversation(get_store_value(conversationId));
				}

				loadConversation(get_store_value(conversationGroupId)); // refresh conversation if existing conflict hit
			}
		}
		savingConversationId.set(null);

		if (result.message) {
			mergeMessages([result.message]);
		}

		let curConversationId;
		if (result.newConversation && result.conversationId) {
			curConversationId = result.conversationId;
			if (curConversationId !== get_store_value(conversationId)) {
				const curConversation = get_store_value(conversation);
				// console.log('remove conversatoin? ', get(conversationId), curConversation);
				if (curConversation.isNew) {
					removeConversation(curConversation.id);
				}
			}
		} else {
			curConversationId = get_store_value(conversationId);
		}
		//-- console.log('curConversationId : ' + curConversationId, ' result.conversationId: ' + result.conversationId);

		if (curConversationId) {
			getMessages$1({ conversationId: curConversationId, getUnloaded: true }); // , onMessagesRetrieved);
			// function onMessagesRetrieved() {
			// 	checkConversationSeen({conversationId: get(conversationId)}, true);
			// }
		}

		// savingMessage.set(false);
		return result;
	});

	const curMessages = get_store_value(messages) || [];
	newMessage.lastMessage = curMessages.length ? curMessages[curMessages.length - 1] : null;

	curMessages.push(newMessageModel);
	messages.set(curMessages);

	if (messageDetails.newConversation) {
		addConversation({id: messageDetails.conversationId});
	} else {
		const curConversation = get_store_value(conversation);
		if (curConversation && curConversation.id === newMessage.conversationId) {
			curConversation.lastMessageText = (newMessage.message && newMessage.message.substring(0, config$1.CONVERSATION_MAX_PREVIEW_LENGTH)) || '';
			curConversation.lastMessageAt = newMessage.createdAt;
			curConversation.lastSenderId = newMessage.userId;
			// conversation.set(curConversation); // dont set as triggers message reloading
		}
	}

	MessagesModel.emit('messagedAdded');

	return result;
}

function getNewMessageId() {
    let messageId, trialIndex;
	do { messageId = generateId$1(12); } while (getMessage(messageId) && trialIndex < 99);
	return messageId;
}

/* src\routes\_layout.svelte generated by Svelte v3.23.0 */

const css$i = {
	code: "appContent.svelte-f83cde{position:absolute;width:100%;height:100%}.pageContent.svelte-f83cde{position:absolute;top:60px;bottom:76px;width:100%}@media(min-width: 480px) and (min-height: 480px){appContainer.svelte-f83cde{position:absolute;height:100%;width:100%;display:flex;align-items:center;justify-content:center}appContent.svelte-f83cde{position:relative;max-width:411px;max-height:720px;border:1px solid #e0e0e0;box-shadow:rgba(8, 8, 8, 0.2) 0px 5px 30px -5px}}.pageContent.keyboardShown.svelte-f83cde{bottom:0}main.svelte-f83cde{position:absolute;height:100%;width:100%}@media(max-height: 480px){appContent.svelte-f83cde{height:initial;min-height:100%}main.svelte-f83cde{position:relative;height:initial}appContent.svelte-f83cde .headerBar{display:none}appContent.svelte-f83cde nav{display:none}.pageContent.svelte-f83cde{top:0;bottom:0}}.pageContent.landscapeScrollMode.svelte-f83cde{position:relative}.pageContent.landscapeScrollMode.svelte-f83cde .content{position:relative}.pageContent.landscapeScrollMode.svelte-f83cde .scrollView{position:relative}.showFeedBg.svelte-f83cde{background-color:#DDDDDD}.debugOutput.svelte-f83cde{position:absolute;top:5px;left:5px;color:#ff0000;user-select:text;z-index:999}",
	map: "{\"version\":3,\"file\":\"_layout.svelte\",\"sources\":[\"_layout.svelte\"],\"sourcesContent\":[\"<svelte:window bind:innerHeight={viewHeight} bind:innerWidth={viewWidth} />\\r\\n\\r\\n<script>\\r\\n\\timport { stores } from '@sapper/app';\\r\\n\\tconst { page } = stores();\\r\\n\\timport { onMount, tick } from 'svelte';\\r\\n\\r\\n\\timport config from '../config';\\r\\n\\r\\n    import GoogleAnalytics from '../components/GoogleAnalytics.svelte';\\r\\n\\r\\n\\timport { isDarkBgForPath } from \\\"../models/sectionsModel.js\\\";\\r\\n\\r\\n\\timport ScrollView from '../components/ScrollView.svelte';\\r\\n\\timport HeaderBar from './_components/HeaderBar.svelte';\\r\\n\\timport Nav from './_components/Nav.svelte';\\r\\n\\timport Overlays from './_components/Overlays.svelte';\\r\\n\\r\\n\\timport DesktopWarning from './_components/DesktopWarning.svelte';\\r\\n\\timport Splash from './_components/Splash.svelte';\\r\\n\\r\\n\\texport let segment;\\r\\n\\t$: path = ($page && $page.path) || '';\\r\\n\\r\\n\\timport {\\r\\n\\t\\tloadProject,\\r\\n\\t\\tloadConversation,\\r\\n\\t\\tloadProfile,\\r\\n\\t\\tloadChannel,\\r\\n\\t\\tloadPost,\\r\\n\\t\\tcloseOverlay,\\r\\n\\t} from '../actions/appActions';\\r\\n\\r\\n\\timport {\\r\\n\\t\\tcurPath,\\r\\n\\t\\tprevPath,\\r\\n\\r\\n\\t\\tprojectId,\\r\\n\\t\\tconversationId,\\r\\n\\t\\tconversationGroupId,\\r\\n\\t\\tprofileId,\\r\\n\\t\\tchannelId,\\r\\n\\t\\tpostId,\\r\\n\\r\\n\\t\\tconversation,\\r\\n\\t\\tviewedUser,\\r\\n\\t\\tproject,\\r\\n\\t\\tpost,\\r\\n\\r\\n\\t\\tnewConversation,\\r\\n\\r\\n\\t\\tchannel,\\r\\n\\r\\n\\t\\tcheckParams,\\r\\n\\r\\n\\t\\tdebugOutput,\\r\\n\\t} from '../models/appModel';\\r\\n\\r\\n\\timport MessagesModel from '../models/messagesModel'; // import to ensure checking for conversations\\r\\n\\r\\n\\tlet mounted = false;\\r\\n    onMount(() => {\\r\\n\\t\\tmounted = true;\\r\\n    });\\r\\n\\r\\n\\t$: {\\r\\n\\t\\t$page; mounted;\\r\\n\\t\\tonPageUpdated();\\r\\n\\t}\\r\\n\\r\\n\\t// mounted.subscribe(onPageUpdated);\\r\\n\\t// page.subscribe(onPageUpdated);\\r\\n\\r\\n\\tfunction onPageUpdated() {\\r\\n\\t\\tconst changedPath = ($curPath !== $page.path);\\r\\n\\r\\n\\t\\tif ($curPath !== $page.path) {\\r\\n\\t\\t\\tif ($prevPath !== $curPath) {\\r\\n\\t\\t\\t\\t$prevPath = $curPath;\\r\\n\\t\\t\\t}\\r\\n\\t\\t\\t$curPath = $page.path;\\r\\n\\t\\t}\\r\\n\\r\\n\\t\\tcheckParams($page.query);\\r\\n\\r\\n\\t\\tif (mounted) {\\r\\n\\t\\t\\tconst params = $page.params;\\r\\n\\t\\t\\tif (params) {\\r\\n\\t\\t\\t\\tif (params.conversation) {\\r\\n\\t\\t\\t\\t\\tif (($conversationId !== params.conversation && params.conversation !== $conversationGroupId) || !($conversation || $newConversation)) { // TODO: avoid repeat loading if item undefined?\\r\\n\\t\\t\\t\\t\\t\\tloadConversation(params.conversation);\\r\\n\\t\\t\\t\\t\\t}\\r\\n\\t\\t\\t\\t}\\r\\n\\t\\t\\t\\tif (params.profile) {\\r\\n\\t\\t\\t\\t\\tif ($profileId !== params.profile || !$viewedUser) { // TODO: avoid repeat loading if item undefined?\\r\\n\\t\\t\\t\\t\\t\\tloadProfile(params.profile);\\r\\n\\t\\t\\t\\t\\t}\\r\\n\\t\\t\\t\\t}\\r\\n\\t\\t\\t\\tif (params.project) {\\r\\n\\t\\t\\t\\t\\tif ($projectId !== params.project || !$project) { // TODO: avoid repeat loading if item undefined?\\r\\n\\t\\t\\t\\t\\t\\tloadProject(params.project);\\r\\n\\t\\t\\t\\t\\t}\\r\\n\\t\\t\\t\\t}\\r\\n\\t\\t\\t\\tif (params.channel) {\\r\\n\\t\\t\\t\\t\\tif ($channelId !== params.channel || !$channel) { // TODO: avoid repeat loading if item undefined?\\r\\n\\t\\t\\t\\t\\t\\tloadChannel(params.channel);\\r\\n\\t\\t\\t\\t\\t}\\r\\n\\t\\t\\t\\t}\\r\\n\\t\\t\\t\\tif (params.post) {\\r\\n\\t\\t\\t\\t\\tif ($postId !== params.post || !$post) { // TODO: avoid repeat loading if item undefined?\\r\\n\\t\\t\\t\\t\\t\\tloadPost(params.post);\\r\\n\\t\\t\\t\\t\\t}\\r\\n\\t\\t\\t\\t}\\r\\n\\t\\t\\t}\\r\\n\\r\\n\\t\\t\\tif (changedPath) {\\r\\n\\t\\t\\t\\tcloseOverlay();\\r\\n\\t\\t\\t}\\r\\n\\t\\t}\\r\\n\\t};\\r\\n\\r\\n\\tlet viewHeight;\\r\\n\\tlet viewWidth;\\r\\n\\r\\n\\tlet prevViewHeight = 0;\\r\\n\\tlet curViewHeight = 0;\\r\\n\\r\\n\\tlet initialHeightSet = false;\\r\\n\\tlet initialHeight = false;\\r\\n\\tlet keyboardShown = false;\\r\\n\\r\\n\\tlet landscapeScrollMode = false;\\r\\n\\r\\n\\t$: {\\r\\n\\t\\tif (!initialHeightSet) {\\r\\n\\t\\t\\tinitialHeight = viewHeight;\\r\\n\\t\\t\\tif (initialHeight) {\\r\\n\\t\\t\\t\\tinitialHeightSet = true;\\r\\n\\t\\t\\t}\\r\\n\\t\\t} else if (viewHeight && viewWidth < config.MOBILE_DEVICE_MAX_WIDTH && viewHeight < initialHeight) {\\r\\n\\t\\t\\tkeyboardShown = true;\\r\\n\\t\\t} else {\\r\\n\\t\\t\\tkeyboardShown = false;\\r\\n\\t\\t}\\r\\n\\t}\\r\\n\\r\\n\\t$: {\\r\\n\\t\\tprevViewHeight = curViewHeight || viewHeight;\\r\\n\\t\\tconst newLandscapeScrollMode = viewHeight < config.MOBILE_DEVICE_MAX_HEIGHT;\\r\\n\\t\\tcurViewHeight = viewHeight;\\r\\n\\r\\n\\t\\tif (newLandscapeScrollMode !== landscapeScrollMode) {\\r\\n\\t\\t\\tlet curScrollView = document.getElementsByClassName('scrollView');\\r\\n\\t\\t\\tcurScrollView = (curScrollView && curScrollView[0]) || null;\\r\\n\\r\\n\\t\\t\\tlet curScrollPosition = 0;\\r\\n\\r\\n\\t\\t\\tif (curScrollView) {\\r\\n\\t\\t\\t\\tif (landscapeScrollMode) {\\r\\n\\t\\t\\t\\t\\tcurScrollPosition = document.documentElement.scrollTop;\\r\\n\\t\\t\\t\\t\\t// console.log('document.documentElement.scrollTop', document.documentElement.scrollTop);\\r\\n\\t\\t\\t\\t} else {\\r\\n\\t\\t\\t\\t\\tcurScrollPosition = curScrollView.scrollTop;\\r\\n\\t\\t\\t\\t\\t// console.log('curScrollView.scrollTop', curScrollView.scrollTop);\\r\\n\\t\\t\\t\\t}\\r\\n\\t\\t\\t\\t// console.log('origScrollPosition', curScrollPosition);\\r\\n\\t\\t\\t\\tcurScrollPosition += prevViewHeight/2;\\r\\n\\t\\t\\t\\t// console.log('curScrollPosition', curScrollPosition, prevViewHeight/2);\\r\\n\\r\\n\\t\\t\\t\\tlandscapeScrollMode = newLandscapeScrollMode;\\r\\n\\r\\n\\t\\t\\t\\t(async () => {\\r\\n\\t\\t\\t\\t\\tawait tick();\\r\\n\\t\\t\\t\\t\\tif (curScrollView) {\\r\\n\\t\\t\\t\\t\\t\\tcurScrollPosition -= curViewHeight/2;\\r\\n\\t\\t\\t\\t\\t\\t// console.log('output curScrollPosition', curScrollPosition, curViewHeight/2);\\r\\n\\t\\t\\t\\t\\t\\tif (landscapeScrollMode) {\\r\\n\\t\\t\\t\\t\\t\\t\\tdocument.documentElement.scrollTop = curScrollPosition;\\r\\n\\t\\t\\t\\t\\t\\t\\t// console.log('new document.documentElement.scrollTop', document.documentElement.scrollTop);\\r\\n\\t\\t\\t\\t\\t\\t} else {\\r\\n\\t\\t\\t\\t\\t\\t\\tcurScrollView.scrollTop = curScrollPosition;\\r\\n\\t\\t\\t\\t\\t\\t\\t// console.log('new curScrollView.scrollTop', curScrollView.scrollTop);\\r\\n\\t\\t\\t\\t\\t\\t}\\r\\n\\t\\t\\t\\t\\t}\\r\\n\\t\\t\\t\\t})();\\r\\n\\t\\t\\t} else {\\r\\n\\t\\t\\t\\tlandscapeScrollMode = newLandscapeScrollMode;\\r\\n\\t\\t\\t}\\r\\n\\t\\t}\\r\\n\\t}\\r\\n\\r\\n\\t$: showFeedBg = isDarkBgForPath(path);\\r\\n\\r\\n\\tlet scrollRegion;\\r\\n</script>\\r\\n\\r\\n<appContainer>\\r\\n\\t<GoogleAnalytics />\\r\\n\\t<appContent class:showFeedBg=\\\"{showFeedBg}\\\">\\r\\n\\t\\t<DesktopWarning />\\r\\n\\t\\t<Splash />\\r\\n\\t\\t<Overlays />\\r\\n\\t\\t<div class=\\\"pageContent\\\" class:landscapeScrollMode=\\\"{landscapeScrollMode}\\\" class:keyboardShown=\\\"{keyboardShown}\\\">\\r\\n\\t\\t\\t{#if config.DEBUG && $debugOutput}\\r\\n\\t\\t\\t\\t<div class=\\\"debugOutput\\\">{@html $debugOutput}</div>\\r\\n\\t\\t\\t{/if}\\r\\n\\t\\t\\t<main>\\r\\n\\t\\t\\t\\t<slot></slot>\\r\\n\\t\\t\\t</main>\\r\\n\\t\\t</div>\\r\\n\\t\\t<HeaderBar {segment} {path} />\\r\\n\\t\\t<Nav {segment} {path} {keyboardShown} />\\r\\n\\t</appContent>\\r\\n</appContainer>\\r\\n\\r\\n<style>\\r\\n\\tappContent {\\r\\n\\t\\tposition: absolute;\\r\\n\\r\\n\\t\\twidth: 100%;\\r\\n\\t\\theight: 100%;\\r\\n\\t}\\r\\n\\r\\n\\t.pageContent {\\r\\n\\t\\tposition: absolute;\\r\\n\\t\\ttop: 60px; /* header height */\\r\\n\\t\\tbottom: 76px; /* nav height */\\r\\n\\t\\twidth: 100%;\\r\\n\\t}\\r\\n\\r\\n\\t@media (min-width: 480px) and (min-height: 480px) {\\r\\n\\t\\tappContainer {\\r\\n\\t\\t\\tposition: absolute;\\r\\n\\t\\t\\theight: 100%;\\r\\n\\t\\t\\twidth: 100%;\\r\\n\\r\\n\\t\\t\\tdisplay:flex;\\r\\n\\t\\t\\talign-items: center;\\r\\n\\t\\t\\tjustify-content: center;\\r\\n\\t\\t}\\r\\n\\r\\n\\t\\tappContent {\\r\\n\\t\\t\\tposition: relative;\\r\\n\\r\\n\\t\\t\\tmax-width: 411px;\\r\\n\\t\\t\\tmax-height: 720px;\\r\\n\\r\\n\\t\\t\\tborder: 1px solid #e0e0e0;\\r\\n        \\tbox-shadow: rgba(8, 8, 8, 0.2) 0px 5px 30px -5px;\\r\\n\\t\\t}\\r\\n\\t}\\r\\n\\r\\n\\t.pageContent.keyboardShown {\\r\\n\\t\\tbottom: 0; /* collapse nav */\\r\\n\\t}\\r\\n\\r\\n\\tmain {\\r\\n\\t\\tposition: absolute;\\r\\n\\t\\theight: 100%;\\r\\n\\t\\twidth: 100%;\\r\\n    \\t/* line-height: 0; */\\r\\n\\t}\\r\\n\\r\\n\\t@media (max-height: 480px) {\\r\\n\\t\\tappContent {\\r\\n\\t\\t\\theight: initial;\\r\\n\\t\\t\\tmin-height: 100%;\\r\\n\\t\\t}\\r\\n\\r\\n\\t\\tmain {\\r\\n\\t\\t\\tposition: relative;\\r\\n\\t\\t\\theight: initial;\\r\\n\\t\\t}\\r\\n\\r\\n\\t\\tappContent :global(.headerBar) {\\r\\n\\t\\t\\tdisplay: none;\\r\\n\\t\\t}\\r\\n\\r\\n\\t\\tappContent :global(nav) {\\r\\n\\t\\t\\tdisplay: none;\\r\\n\\t\\t}\\r\\n\\r\\n\\t\\t/* appContent {\\r\\n\\t\\t\\theight: 120%;\\r\\n\\t\\t} */\\r\\n\\r\\n\\t\\t.pageContent {\\r\\n\\t\\t\\ttop: 0;\\r\\n\\t\\t\\tbottom: 0;\\r\\n\\t\\t\\t/* position: relative; */\\r\\n\\t\\t}\\r\\n\\t\\t/* .pageContent :global(.content) {\\r\\n\\t\\t\\tposition: relative;\\r\\n\\t\\t}\\r\\n\\t\\t.pageContent :global(.scrollView) {\\r\\n\\t\\t\\tposition: relative;\\r\\n\\t\\t} */\\r\\n\\t}\\r\\n\\r\\n\\t.pageContent.landscapeScrollMode {\\r\\n\\t\\tposition: relative;\\r\\n\\t}\\r\\n\\t.pageContent.landscapeScrollMode :global(.content) {\\r\\n\\t\\tposition: relative;\\r\\n\\t}\\r\\n\\t.pageContent.landscapeScrollMode :global(.scrollView) {\\r\\n\\t\\tposition: relative;\\r\\n\\t}\\r\\n\\r\\n\\t.showFeedBg {\\r\\n\\t\\tbackground-color: #DDDDDD;\\r\\n\\t}\\r\\n\\r\\n\\t.debugOutput {\\r\\n\\t\\tposition: absolute;\\r\\n\\t\\ttop: 5px;\\r\\n\\t\\tleft: 5px;\\r\\n\\t\\tcolor: #ff0000;\\r\\n\\t\\tuser-select: text;\\r\\n\\t\\tz-index: 999;\\r\\n\\t}\\r\\n\\r\\n</style>\"],\"names\":[],\"mappings\":\"AAwNC,UAAU,cAAC,CAAC,AACX,QAAQ,CAAE,QAAQ,CAElB,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,AACb,CAAC,AAED,YAAY,cAAC,CAAC,AACb,QAAQ,CAAE,QAAQ,CAClB,GAAG,CAAE,IAAI,CACT,MAAM,CAAE,IAAI,CACZ,KAAK,CAAE,IAAI,AACZ,CAAC,AAED,MAAM,AAAC,YAAY,KAAK,CAAC,CAAC,GAAG,CAAC,aAAa,KAAK,CAAC,AAAC,CAAC,AAClD,YAAY,cAAC,CAAC,AACb,QAAQ,CAAE,QAAQ,CAClB,MAAM,CAAE,IAAI,CACZ,KAAK,CAAE,IAAI,CAEX,QAAQ,IAAI,CACZ,WAAW,CAAE,MAAM,CACnB,eAAe,CAAE,MAAM,AACxB,CAAC,AAED,UAAU,cAAC,CAAC,AACX,QAAQ,CAAE,QAAQ,CAElB,SAAS,CAAE,KAAK,CAChB,UAAU,CAAE,KAAK,CAEjB,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CACnB,UAAU,CAAE,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,AACvD,CAAC,AACF,CAAC,AAED,YAAY,cAAc,cAAC,CAAC,AAC3B,MAAM,CAAE,CAAC,AACV,CAAC,AAED,IAAI,cAAC,CAAC,AACL,QAAQ,CAAE,QAAQ,CAClB,MAAM,CAAE,IAAI,CACZ,KAAK,CAAE,IAAI,AAEZ,CAAC,AAED,MAAM,AAAC,aAAa,KAAK,CAAC,AAAC,CAAC,AAC3B,UAAU,cAAC,CAAC,AACX,MAAM,CAAE,OAAO,CACf,UAAU,CAAE,IAAI,AACjB,CAAC,AAED,IAAI,cAAC,CAAC,AACL,QAAQ,CAAE,QAAQ,CAClB,MAAM,CAAE,OAAO,AAChB,CAAC,AAED,wBAAU,CAAC,AAAQ,UAAU,AAAE,CAAC,AAC/B,OAAO,CAAE,IAAI,AACd,CAAC,AAED,wBAAU,CAAC,AAAQ,GAAG,AAAE,CAAC,AACxB,OAAO,CAAE,IAAI,AACd,CAAC,AAMD,YAAY,cAAC,CAAC,AACb,GAAG,CAAE,CAAC,CACN,MAAM,CAAE,CAAC,AAEV,CAAC,AAOF,CAAC,AAED,YAAY,oBAAoB,cAAC,CAAC,AACjC,QAAQ,CAAE,QAAQ,AACnB,CAAC,AACD,YAAY,kCAAoB,CAAC,AAAQ,QAAQ,AAAE,CAAC,AACnD,QAAQ,CAAE,QAAQ,AACnB,CAAC,AACD,YAAY,kCAAoB,CAAC,AAAQ,WAAW,AAAE,CAAC,AACtD,QAAQ,CAAE,QAAQ,AACnB,CAAC,AAED,WAAW,cAAC,CAAC,AACZ,gBAAgB,CAAE,OAAO,AAC1B,CAAC,AAED,YAAY,cAAC,CAAC,AACb,QAAQ,CAAE,QAAQ,CAClB,GAAG,CAAE,GAAG,CACR,IAAI,CAAE,GAAG,CACT,KAAK,CAAE,OAAO,CACd,WAAW,CAAE,IAAI,CACjB,OAAO,CAAE,GAAG,AACb,CAAC\"}"
};

const Layout = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let $page;
	let $curPath = get_store_value(curPath);
	let $prevPath = get_store_value(prevPath);
	let $conversationId = get_store_value(conversationId);
	let $conversationGroupId = get_store_value(conversationGroupId);
	let $conversation = get_store_value(conversation);
	let $newConversation = get_store_value(newConversation);
	let $profileId = get_store_value(profileId);
	let $viewedUser = get_store_value(viewedUser);
	let $projectId = get_store_value(projectId);
	let $project = get_store_value(project);
	let $channelId = get_store_value(channelId);
	let $channel = get_store_value(channel);
	let $postId = get_store_value(postId);
	let $post = get_store_value(post$q);
	let $debugOutput = get_store_value(debugOutput);
	const { page } = stores$1();
	$page = get_store_value(page);
	let { segment } = $$props;
	let mounted = false;

	onMount(() => {
		mounted = true;
	});

	// mounted.subscribe(onPageUpdated);
	// page.subscribe(onPageUpdated);
	function onPageUpdated() {
		const changedPath = $curPath !== $page.path;

		if ($curPath !== $page.path) {
			if ($prevPath !== $curPath) {
				$prevPath = $curPath;
			}

			$curPath = $page.path;
		}

		checkParams($page.query);

		if (mounted) {
			const params = $page.params;

			if (params) {
				if (params.conversation) {
					if ($conversationId !== params.conversation && params.conversation !== $conversationGroupId || !($conversation || $newConversation)) {
						// TODO: avoid repeat loading if item undefined?
						loadConversation(params.conversation);
					}
				}

				if (params.profile) {
					if ($profileId !== params.profile || !$viewedUser) {
						// TODO: avoid repeat loading if item undefined?
						loadProfile(params.profile);
					}
				}

				if (params.project) {
					if ($projectId !== params.project || !$project) {
						// TODO: avoid repeat loading if item undefined?
						loadProject(params.project);
					}
				}

				if (params.channel) {
					if ($channelId !== params.channel || !$channel) {
						// TODO: avoid repeat loading if item undefined?
						loadChannel(params.channel);
					}
				}

				if (params.post) {
					if ($postId !== params.post || !$post) {
						// TODO: avoid repeat loading if item undefined?
						loadPost(params.post);
					}
				}
			}

			if (changedPath) {
				closeOverlay();
			}
		}
	}

	
	let viewHeight;
	let initialHeightSet = false;
	let initialHeight = false;
	let keyboardShown = false;
	if ($$props.segment === void 0 && $$bindings.segment && segment !== void 0) $$bindings.segment(segment);
	$$result.css.add(css$i);
	$page = get_store_value(page);
	let path = $page && $page.path || "";

	 {
		{
			onPageUpdated();
		}
	}

	 {
		{
			if (!initialHeightSet) {
				initialHeight = viewHeight;

				if (initialHeight) {
					initialHeightSet = true;
				}
			} else {
				keyboardShown = false;
			}
		}
	}

	let showFeedBg = isDarkBgForPath(path);

	return `



<appContainer class="${"svelte-f83cde"}">${validate_component(GoogleAnalytics, "GoogleAnalytics").$$render($$result, {}, {}, {})}
	<appContent class="${["svelte-f83cde", showFeedBg ? "showFeedBg" : ""].join(" ").trim()}">${validate_component(DesktopWarning, "DesktopWarning").$$render($$result, {}, {}, {})}
		${validate_component(Splash, "Splash").$$render($$result, {}, {}, {})}
		${validate_component(Overlays, "Overlays").$$render($$result, {}, {}, {})}
		<div class="${[
		"pageContent svelte-f83cde",
		( "") + " " + (keyboardShown ? "keyboardShown" : "")
	].join(" ").trim()}">${config$1.DEBUG && $debugOutput
	? `<div class="${"debugOutput svelte-f83cde"}">${$debugOutput}</div>`
	: ``}
			<main class="${"svelte-f83cde"}">${$$slots.default ? $$slots.default({}) : ``}</main></div>
		${validate_component(HeaderBar, "HeaderBar").$$render($$result, { segment, path }, {}, {})}
		${validate_component(Nav, "Nav").$$render($$result, { segment, path, keyboardShown }, {}, {})}</appContent>
</appContainer>`;
});

/* src\routes\_error.svelte generated by Svelte v3.23.0 */

const css$j = {
	code: ".content.svelte-n4vlfg.svelte-n4vlfg{padding:20px}.content.svelte-n4vlfg pre.svelte-n4vlfg{overflow-x:scroll}",
	map: "{\"version\":3,\"file\":\"_error.svelte\",\"sources\":[\"_error.svelte\"],\"sourcesContent\":[\"<script>\\r\\n\\texport let status;\\r\\n\\texport let error;\\r\\n\\r\\n\\tconst dev = (!!\\\"production\\\".match(/development|staging/));\\r\\n\\r\\n\\t$: {\\r\\n\\t\\t// refresh page if imported module failed - likely site was updating\\r\\n\\t\\tif (typeof window !== 'undefined' && error && (!error.message || error.message.indexOf('Failed to fetch dynamically imported module') !== -1)) {\\r\\n\\t\\t\\tstatus = '';\\r\\n\\t\\t\\terror.message = '';\\r\\n\\t\\t\\terror = error;\\r\\n\\r\\n\\t\\t\\twindow.setTimeout(() => {\\r\\n\\t\\t\\t\\tlocation.href = location.href; // refresh\\r\\n\\t\\t\\t}, 1000); // give delay to avoid infinite loop\\r\\n\\t\\t}\\r\\n\\t}\\r\\n</script>\\r\\n\\r\\n<svelte:head>\\r\\n\\t<title>{status}</title>\\r\\n</svelte:head>\\r\\n\\r\\n<div class=\\\"content\\\">\\r\\n\\t<h1>{status}</h1>\\r\\n\\r\\n\\t<p>{error.message}</p>\\r\\n\\r\\n\\t{#if dev && error.stack}\\r\\n\\t\\t<pre>{error.stack}</pre>\\r\\n\\t{/if}\\r\\n</div>\\r\\n\\r\\n<style>\\r\\n\\t/* seems to need any css to compile */\\r\\n\\t* {\\r\\n\\t}\\r\\n\\r\\n\\t.content {\\r\\n\\t\\tpadding: 20px;\\r\\n\\t}\\r\\n\\r\\n\\t.content pre {\\r\\n    \\toverflow-x: scroll;\\r\\n\\t}\\r\\n</style>\"],\"names\":[],\"mappings\":\"AAuCC,QAAQ,4BAAC,CAAC,AACT,OAAO,CAAE,IAAI,AACd,CAAC,AAED,sBAAQ,CAAC,GAAG,cAAC,CAAC,AACV,UAAU,CAAE,MAAM,AACtB,CAAC\"}"
};

const Error$1 = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let { status } = $$props;
	let { error } = $$props;
	const dev = !!("production").match(/development|staging/);
	if ($$props.status === void 0 && $$bindings.status && status !== void 0) $$bindings.status(status);
	if ($$props.error === void 0 && $$bindings.error && error !== void 0) $$bindings.error(error);
	$$result.css.add(css$j);

	 {
		{
			// refresh page if imported module failed - likely site was updating
			if (typeof window !== "undefined" && error && (!error.message || error.message.indexOf("Failed to fetch dynamically imported module") !== -1)) {
				status = "";
				error.message = "";
				error = error;

				window.setTimeout(
					() => {
						location.href = location.href; // refresh
					},
					1000
				); // give delay to avoid infinite loop
			}
		}
	}

	return `${($$result.head += `${($$result.title = `<title>${escape(status)}</title>`, "")}`, "")}

<div class="${"content svelte-n4vlfg"}"><h1 class="${"svelte-n4vlfg"}">${escape(status)}</h1>

	<p class="${"svelte-n4vlfg"}">${escape(error.message)}</p>

	${dev && error.stack
	? `<pre class="${"svelte-n4vlfg"}">${escape(error.stack)}</pre>`
	: ``}
</div>`;
});

/* src\node_modules\@sapper\internal\App.svelte generated by Svelte v3.23.0 */

const App = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let { stores } = $$props;
	let { error } = $$props;
	let { status } = $$props;
	let { segments } = $$props;
	let { level0 } = $$props;
	let { level1 = null } = $$props;
	let { notify } = $$props;
	afterUpdate(notify);
	setContext(CONTEXT_KEY, stores);
	if ($$props.stores === void 0 && $$bindings.stores && stores !== void 0) $$bindings.stores(stores);
	if ($$props.error === void 0 && $$bindings.error && error !== void 0) $$bindings.error(error);
	if ($$props.status === void 0 && $$bindings.status && status !== void 0) $$bindings.status(status);
	if ($$props.segments === void 0 && $$bindings.segments && segments !== void 0) $$bindings.segments(segments);
	if ($$props.level0 === void 0 && $$bindings.level0 && level0 !== void 0) $$bindings.level0(level0);
	if ($$props.level1 === void 0 && $$bindings.level1 && level1 !== void 0) $$bindings.level1(level1);
	if ($$props.notify === void 0 && $$bindings.notify && notify !== void 0) $$bindings.notify(notify);

	return `


${validate_component(Layout, "Layout").$$render($$result, Object.assign({ segment: segments[0] }, level0.props), {}, {
		default: () => `${error
		? `${validate_component(Error$1, "Error").$$render($$result, { error, status }, {}, {})}`
		: `${validate_component(level1.component || missing_component, "svelte:component").$$render($$result, Object.assign(level1.props), {}, {})}`}`
	})}`;
});

// This file is generated by Sapper — do not edit it!

const ignore = [/^\/api\/updateNotifications\/?$/, /^\/api\/updateConversation\/?$/, /^\/api\/sendPasswordReset\/?$/, /^\/api\/getConversations\/?$/, /^\/api\/getNotifications\/?$/, /^\/api\/unfollowProject\/?$/, /^\/api\/followProject\/?$/, /^\/api\/requestUpload\/?$/, /^\/api\/unlikeProject\/?$/, /^\/api\/updateProject\/?$/, /^\/api\/getChannels\/?$/, /^\/api\/getMessages\/?$/, /^\/api\/getProjects\/?$/, /^\/api\/likeProject\/?$/, /^\/api\/addMessage\/?$/, /^\/api\/addProject\/?$/, /^\/api\/followPost\/?$/, /^\/api\/unlikePost\/?$/, /^\/api\/updatePost\/?$/, /^\/api\/updateUser\/?$/, /^\/api\/getPosts\/?$/, /^\/api\/getUsers\/?$/, /^\/api\/likePost\/?$/, /^\/api\/addPost\/?$/, /^\/api\/addUser\/?$/, /^\/api\/login\/?$/];

const components = [
	{
		js: () => Promise.resolve().then(function () { return index; }),
		css: "__SAPPER_CSS_PLACEHOLDER:index.svelte__"
	},
	{
		js: () => Promise.resolve().then(function () { return activity; }),
		css: "__SAPPER_CSS_PLACEHOLDER:activity.svelte__"
	},
	{
		js: () => Promise.resolve().then(function () { return _channel_; }),
		css: "__SAPPER_CSS_PLACEHOLDER:channels/[channel].svelte__"
	},
	{
		js: () => Promise.resolve().then(function () { return contacts; }),
		css: "__SAPPER_CSS_PLACEHOLDER:contacts.svelte__"
	},
	{
		js: () => Promise.resolve().then(function () { return index$1; }),
		css: "__SAPPER_CSS_PLACEHOLDER:discover/index.svelte__"
	},
	{
		js: () => Promise.resolve().then(function () { return index$2; }),
		css: "__SAPPER_CSS_PLACEHOLDER:messages/index.svelte__"
	},
	{
		js: () => Promise.resolve().then(function () { return _conversation_; }),
		css: "__SAPPER_CSS_PLACEHOLDER:messages/[conversation].svelte__"
	},
	{
		js: () => Promise.resolve().then(function () { return index$3; }),
		css: "__SAPPER_CSS_PLACEHOLDER:projects/index.svelte__"
	},
	{
		js: () => Promise.resolve().then(function () { return archive; }),
		css: "__SAPPER_CSS_PLACEHOLDER:projects/archive.svelte__"
	},
	{
		js: () => Promise.resolve().then(function () { return _new; }),
		css: "__SAPPER_CSS_PLACEHOLDER:projects/new.svelte__"
	},
	{
		js: () => Promise.resolve().then(function () { return index$4; }),
		css: "__SAPPER_CSS_PLACEHOLDER:projects/[project]/index.svelte__"
	},
	{
		js: () => Promise.resolve().then(function () { return followers; }),
		css: "__SAPPER_CSS_PLACEHOLDER:projects/[project]/followers.svelte__"
	},
	{
		js: () => Promise.resolve().then(function () { return messages$1; }),
		css: "__SAPPER_CSS_PLACEHOLDER:projects/[project]/messages.svelte__"
	},
	{
		js: () => Promise.resolve().then(function () { return details; }),
		css: "__SAPPER_CSS_PLACEHOLDER:projects/[project]/details.svelte__"
	},
	{
		js: () => Promise.resolve().then(function () { return index$5; }),
		css: "__SAPPER_CSS_PLACEHOLDER:profile/index.svelte__"
	},
	{
		js: () => Promise.resolve().then(function () { return index$6; }),
		css: "__SAPPER_CSS_PLACEHOLDER:profile/[profile]/index.svelte__"
	},
	{
		js: () => Promise.resolve().then(function () { return likes; }),
		css: "__SAPPER_CSS_PLACEHOLDER:profile/[profile]/likes.svelte__"
	},
	{
		js: () => Promise.resolve().then(function () { return edit; }),
		css: "__SAPPER_CSS_PLACEHOLDER:profile/[profile]/edit.svelte__"
	},
	{
		js: () => Promise.resolve().then(function () { return index$7; }),
		css: "__SAPPER_CSS_PLACEHOLDER:posts/index.svelte__"
	},
	{
		js: () => Promise.resolve().then(function () { return _new$1; }),
		css: "__SAPPER_CSS_PLACEHOLDER:posts/new.svelte__"
	},
	{
		js: () => Promise.resolve().then(function () { return index$8; }),
		css: "__SAPPER_CSS_PLACEHOLDER:posts/[post]/index.svelte__"
	},
	{
		js: () => Promise.resolve().then(function () { return edit$1; }),
		css: "__SAPPER_CSS_PLACEHOLDER:posts/[post]/edit.svelte__"
	}
];

const routes = (d => [
	{
		// index.svelte
		pattern: /^\/$/,
		parts: [
			{ i: 0 }
		]
	},

	{
		// activity.svelte
		pattern: /^\/activity\/?$/,
		parts: [
			{ i: 1 }
		]
	},

	{
		// channels/[channel].svelte
		pattern: /^\/channels\/([^\/]+?)\/?$/,
		parts: [
			null,
			{ i: 2, params: match => ({ channel: d(match[1]) }) }
		]
	},

	{
		// contacts.svelte
		pattern: /^\/contacts\/?$/,
		parts: [
			{ i: 3 }
		]
	},

	{
		// discover/index.svelte
		pattern: /^\/discover\/?$/,
		parts: [
			{ i: 4 }
		]
	},

	{
		// messages/index.svelte
		pattern: /^\/messages\/?$/,
		parts: [
			{ i: 5 }
		]
	},

	{
		// messages/[conversation].svelte
		pattern: /^\/messages\/([^\/]+?)\/?$/,
		parts: [
			null,
			{ i: 6, params: match => ({ conversation: d(match[1]) }) }
		]
	},

	{
		// projects/index.svelte
		pattern: /^\/projects\/?$/,
		parts: [
			{ i: 7 }
		]
	},

	{
		// projects/archive.svelte
		pattern: /^\/projects\/archive\/?$/,
		parts: [
			null,
			{ i: 8 }
		]
	},

	{
		// projects/new.svelte
		pattern: /^\/projects\/new\/?$/,
		parts: [
			null,
			{ i: 9 }
		]
	},

	{
		// projects/[project]/index.svelte
		pattern: /^\/projects\/([^\/]+?)\/?$/,
		parts: [
			null,
			{ i: 10, params: match => ({ project: d(match[1]) }) }
		]
	},

	{
		// projects/[project]/followers.svelte
		pattern: /^\/projects\/([^\/]+?)\/followers\/?$/,
		parts: [
			null,
			null,
			{ i: 11, params: match => ({ project: d(match[1]) }) }
		]
	},

	{
		// projects/[project]/messages.svelte
		pattern: /^\/projects\/([^\/]+?)\/messages\/?$/,
		parts: [
			null,
			null,
			{ i: 12, params: match => ({ project: d(match[1]) }) }
		]
	},

	{
		// projects/[project]/details.svelte
		pattern: /^\/projects\/([^\/]+?)\/details\/?$/,
		parts: [
			null,
			null,
			{ i: 13, params: match => ({ project: d(match[1]) }) }
		]
	},

	{
		// profile/index.svelte
		pattern: /^\/profile\/?$/,
		parts: [
			{ i: 14 }
		]
	},

	{
		// profile/[profile]/index.svelte
		pattern: /^\/profile\/([^\/]+?)\/?$/,
		parts: [
			null,
			{ i: 15, params: match => ({ profile: d(match[1]) }) }
		]
	},

	{
		// profile/[profile]/likes.svelte
		pattern: /^\/profile\/([^\/]+?)\/likes\/?$/,
		parts: [
			null,
			null,
			{ i: 16, params: match => ({ profile: d(match[1]) }) }
		]
	},

	{
		// profile/[profile]/edit.svelte
		pattern: /^\/profile\/([^\/]+?)\/edit\/?$/,
		parts: [
			null,
			null,
			{ i: 17, params: match => ({ profile: d(match[1]) }) }
		]
	},

	{
		// posts/index.svelte
		pattern: /^\/posts\/?$/,
		parts: [
			{ i: 18 }
		]
	},

	{
		// posts/new.svelte
		pattern: /^\/posts\/new\/?$/,
		parts: [
			null,
			{ i: 19 }
		]
	},

	{
		// posts/[post]/index.svelte
		pattern: /^\/posts\/([^\/]+?)\/?$/,
		parts: [
			null,
			{ i: 20, params: match => ({ post: d(match[1]) }) }
		]
	},

	{
		// posts/[post]/edit.svelte
		pattern: /^\/posts\/([^\/]+?)\/edit\/?$/,
		parts: [
			null,
			null,
			{ i: 21, params: match => ({ post: d(match[1]) }) }
		]
	}
])(decodeURIComponent);

function goto(href, opts = { replaceState: false }) {
	const target = select_target(new URL(href, document.baseURI));

	if (target) {
		_history[opts.replaceState ? 'replaceState' : 'pushState']({ id: cid }, '', href);
		return navigate(target, null).then(() => {});
	}

	location.href = href;
	return new Promise(f => {}); // never resolves
}

/** Callback to inform of a value updates. */



















function page_store(value) {
	const store = writable$1(value);
	let ready = true;

	function notify() {
		ready = true;
		store.update(val => val);
	}

	function set(new_value) {
		ready = false;
		store.set(new_value);
	}

	function subscribe(run) {
		let old_value;
		return store.subscribe((value) => {
			if (old_value === undefined || (ready && value !== old_value)) {
				run(old_value = value);
			}
		});
	}

	return { notify, set, subscribe };
}

const initial_data = typeof __SAPPER__ !== 'undefined' && __SAPPER__;

let ready = false;
let root_component;
let current_token;
let root_preloaded;
let current_branch = [];
let current_query = '{}';

const stores = {
	page: page_store({}),
	preloading: writable$1(null),
	session: writable$1(initial_data && initial_data.session)
};

let $session;
let session_dirty;

stores.session.subscribe(async value => {
	$session = value;

	if (!ready) return;
	session_dirty = true;

	const target = select_target(new URL(location.href));

	const token = current_token = {};
	const { redirect, props, branch } = await hydrate_target(target);
	if (token !== current_token) return; // a secondary navigation happened while we were loading

	await render(redirect, branch, props, target.page);
});

let prefetching


 = null;

let target;

let uid = 1;

let cid;

const _history = typeof history !== 'undefined' ? history : {
	pushState: (state, title, href) => {},
	replaceState: (state, title, href) => {},
	scrollRestoration: ''
};

const scroll_history = {};

function extract_query(search) {
	const query = Object.create(null);
	if (search.length > 0) {
		search.slice(1).split('&').forEach(searchParam => {
			let [, key, value = ''] = /([^=]*)(?:=(.*))?/.exec(decodeURIComponent(searchParam.replace(/\+/g, ' ')));
			if (typeof query[key] === 'string') query[key] = [query[key]];
			if (typeof query[key] === 'object') (query[key] ).push(value);
			else query[key] = value;
		});
	}
	return query;
}

function select_target(url) {
	if (url.origin !== location.origin) return null;
	if (!url.pathname.startsWith(initial_data.baseUrl)) return null;

	let path = url.pathname.slice(initial_data.baseUrl.length);

	if (path === '') {
		path = '/';
	}

	// avoid accidental clashes between server routes and page routes
	if (ignore.some(pattern => pattern.test(path))) return;

	for (let i = 0; i < routes.length; i += 1) {
		const route = routes[i];

		const match = route.pattern.exec(path);

		if (match) {
			const query = extract_query(url.search);
			const part = route.parts[route.parts.length - 1];
			const params = part.params ? part.params(match) : {};

			const page = { host: location.host, path, query, params };

			return { href: url.href, route, match, page };
		}
	}
}

function scroll_state() {
	return {
		x: pageXOffset,
		y: pageYOffset
	};
}

async function navigate(target, id, noscroll, hash) {
	if (id) {
		// popstate or initial navigation
		cid = id;
	} else {
		const current_scroll = scroll_state();

		// clicked on a link. preserve scroll state
		scroll_history[cid] = current_scroll;

		id = cid = ++uid;
		scroll_history[cid] = noscroll ? current_scroll : { x: 0, y: 0 };
	}

	cid = id;

	if (root_component) stores.preloading.set(true);

	const loaded = prefetching && prefetching.href === target.href ?
		prefetching.promise :
		hydrate_target(target);

	prefetching = null;

	const token = current_token = {};
	const { redirect, props, branch } = await loaded;
	if (token !== current_token) return; // a secondary navigation happened while we were loading

	await render(redirect, branch, props, target.page);
	if (document.activeElement) document.activeElement.blur();

	if (!noscroll) {
		let scroll = scroll_history[id];

		if (hash) {
			// scroll is an element id (from a hash), we need to compute y.
			const deep_linked = document.getElementById(hash.slice(1));

			if (deep_linked) {
				scroll = {
					x: 0,
					y: deep_linked.getBoundingClientRect().top + scrollY
				};
			}
		}

		scroll_history[cid] = scroll;
		if (scroll) scrollTo(scroll.x, scroll.y);
	}
}

async function render(redirect, branch, props, page) {
	if (redirect) return goto(redirect.location, { replaceState: true });

	stores.page.set(page);
	stores.preloading.set(false);

	if (root_component) {
		root_component.$set(props);
	} else {
		props.stores = {
			page: { subscribe: stores.page.subscribe },
			preloading: { subscribe: stores.preloading.subscribe },
			session: stores.session
		};
		props.level0 = {
			props: await root_preloaded
		};
		props.notify = stores.page.notify;

		// first load — remove SSR'd <head> contents
		const start = document.querySelector('#sapper-head-start');
		const end = document.querySelector('#sapper-head-end');

		if (start && end) {
			while (start.nextSibling !== end) detach(start.nextSibling);
			detach(start);
			detach(end);
		}

		root_component = new App({
			target,
			props,
			hydrate: true
		});
	}

	current_branch = branch;
	current_query = JSON.stringify(page.query);
	ready = true;
	session_dirty = false;
}

function part_changed(i, segment, match, stringified_query) {
	// TODO only check query string changes for preload functions
	// that do in fact depend on it (using static analysis or
	// runtime instrumentation)
	if (stringified_query !== current_query) return true;

	const previous = current_branch[i];

	if (!previous) return false;
	if (segment !== previous.segment) return true;
	if (previous.match) {
		if (JSON.stringify(previous.match.slice(1, i + 2)) !== JSON.stringify(match.slice(1, i + 2))) {
			return true;
		}
	}
}

async function hydrate_target(target)



 {
	const { route, page } = target;
	const segments = page.path.split('/').filter(Boolean);

	let redirect = null;

	const props = { error: null, status: 200, segments: [segments[0]] };

	const preload_context = {
		fetch: (url, opts) => fetch(url, opts),
		redirect: (statusCode, location) => {
			if (redirect && (redirect.statusCode !== statusCode || redirect.location !== location)) {
				throw new Error(`Conflicting redirects`);
			}
			redirect = { statusCode, location };
		},
		error: (status, error) => {
			props.error = typeof error === 'string' ? new Error(error) : error;
			props.status = status;
		}
	};

	if (!root_preloaded) {
		root_preloaded = initial_data.preloaded[0] || preload.call(preload_context, {
			host: page.host,
			path: page.path,
			query: page.query,
			params: {}
		}, $session);
	}

	let branch;
	let l = 1;

	try {
		const stringified_query = JSON.stringify(page.query);
		const match = route.pattern.exec(page.path);

		let segment_dirty = false;

		branch = await Promise.all(route.parts.map(async (part, i) => {
			const segment = segments[i];

			if (part_changed(i, segment, match, stringified_query)) segment_dirty = true;

			props.segments[l] = segments[i + 1]; // TODO make this less confusing
			if (!part) return { segment };

			const j = l++;

			if (!session_dirty && !segment_dirty && current_branch[i] && current_branch[i].part === part.i) {
				return current_branch[i];
			}

			segment_dirty = false;

			const { default: component, preload } = await load_component(components[part.i]);

			let preloaded;
			if (ready || !initial_data.preloaded[i + 1]) {
				preloaded = preload
					? await preload.call(preload_context, {
						host: page.host,
						path: page.path,
						query: page.query,
						params: part.params ? part.params(target.match) : {}
					}, $session)
					: {};
			} else {
				preloaded = initial_data.preloaded[i + 1];
			}

			return (props[`level${j}`] = { component, props: preloaded, segment, match, part: part.i });
		}));
	} catch (error) {
		props.error = error;
		props.status = 500;
		branch = [];
	}

	return { redirect, props, branch };
}

function load_css(chunk) {
	const href = `client/${chunk}`;
	if (document.querySelector(`link[href="${href}"]`)) return;

	return new Promise((fulfil, reject) => {
		const link = document.createElement('link');
		link.rel = 'stylesheet';
		link.href = href;

		link.onload = () => fulfil();
		link.onerror = reject;

		document.head.appendChild(link);
	});
}

function load_component(component)


 {
	// TODO this is temporary — once placeholders are
	// always rewritten, scratch the ternary
	const promises = (typeof component.css === 'string' ? [] : component.css.map(load_css));
	promises.unshift(component.js());
	return Promise.all(promises).then(values => values[0]);
}

function detach(node) {
	node.parentNode.removeChild(node);
}

const stores$1 = () => getContext(CONTEXT_KEY);

/* src\routes\index.svelte generated by Svelte v3.23.0 */

const css$k = {
	code: ".feed.svelte-688foo{width:100%;padding-top:5px;line-height:0}.feed.svelte-688foo .proxy{padding-bottom:10px}",
	map: "{\"version\":3,\"file\":\"index.svelte\",\"sources\":[\"index.svelte\"],\"sourcesContent\":[\"<script>\\r\\n\\timport { goto } from '@sapper/app';\\r\\n\\timport { onMount } from 'svelte';\\r\\n\\r\\n\\timport ScrollView from '../components/ScrollView.svelte';\\r\\n\\timport Proxy from '../components/Proxy.svelte';\\r\\n\\r\\n\\timport Feed from './_components/Feed.svelte';\\r\\n\\r\\n\\timport { showBetaFeatures } from '../models/appModel';\\r\\n\\r\\n\\tif (!$showBetaFeatures) {\\r\\n\\t\\tonMount(async () => {\\r\\n\\t\\t\\tgoto('discover'); // reroute\\r\\n\\t\\t});\\r\\n\\t}\\r\\n\\r\\n\\timport { loadProject, loadProjectPost, loadPost } from '../actions/appActions';\\r\\n\\r\\n</script>\\r\\n\\r\\n<svelte:head>\\r\\n\\t<title>Flock</title>\\r\\n</svelte:head>\\r\\n\\r\\n{#if $showBetaFeatures}\\r\\n\\t<ScrollView id=\\\"newsfeed\\\">\\r\\n\\t\\t<div class=\\\"feed\\\">\\r\\n\\t\\t\\t<Proxy image=\\\"feed1\\\" onClick=\\\"{e => loadProjectPost('s7djj2s2')}\\\" />\\r\\n\\t\\t\\t<Proxy image=\\\"feed2\\\" onClick=\\\"{e => loadPost('ma9l2h4h')}\\\" />\\r\\n\\t\\t\\t<Proxy image=\\\"feed3\\\" onClick=\\\"{e => loadProjectPost('s7djj2s2')}\\\" />\\r\\n\\t\\t\\t<Proxy image=\\\"feed4\\\" onClick=\\\"{e => loadProject('36bsf5gs')}\\\" />\\r\\n\\t\\t\\t<Proxy image=\\\"feed5\\\" onClick=\\\"{e => loadProjectPost('s7djj2s2')}\\\" />\\r\\n\\t\\t\\t<Proxy image=\\\"feed6\\\" onClick=\\\"{e => loadProject('s7djj2s2')}\\\" />\\r\\n\\t\\t</div>\\r\\n\\t\\t<!-- <Feed /> -->\\r\\n\\t</ScrollView>\\r\\n{/if}\\r\\n\\r\\n<style>\\r\\n\\t.feed {\\r\\n\\t\\twidth: 100%;\\r\\n\\r\\n\\t\\tpadding-top: 5px;\\r\\n\\r\\n    \\tline-height: 0;\\r\\n\\t}\\r\\n\\r\\n\\t.feed :global(.proxy) {\\r\\n\\t\\tpadding-bottom: 10px;\\r\\n\\t}\\r\\n</style>\"],\"names\":[],\"mappings\":\"AAwCC,KAAK,cAAC,CAAC,AACN,KAAK,CAAE,IAAI,CAEX,WAAW,CAAE,GAAG,CAEb,WAAW,CAAE,CAAC,AAClB,CAAC,AAED,mBAAK,CAAC,AAAQ,MAAM,AAAE,CAAC,AACtB,cAAc,CAAE,IAAI,AACrB,CAAC\"}"
};

const Routes = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let $showBetaFeatures = get_store_value(showBetaFeatures);

	if (!$showBetaFeatures) {
		onMount(async () => {
			goto("discover"); // reroute
		});
	}

	$$result.css.add(css$k);

	return `${($$result.head += `${($$result.title = `<title>Flock</title>`, "")}`, "")}

${$showBetaFeatures
	? `${validate_component(ScrollView, "ScrollView").$$render($$result, { id: "newsfeed" }, {}, {
			default: () => `<div class="${"feed svelte-688foo"}">${validate_component(Proxy, "Proxy").$$render(
				$$result,
				{
					image: "feed1",
					onClick: e => loadProjectPost("s7djj2s2")
				},
				{},
				{}
			)}
			${validate_component(Proxy, "Proxy").$$render(
				$$result,
				{
					image: "feed2",
					onClick: e => loadPost("ma9l2h4h")
				},
				{},
				{}
			)}
			${validate_component(Proxy, "Proxy").$$render(
				$$result,
				{
					image: "feed3",
					onClick: e => loadProjectPost("s7djj2s2")
				},
				{},
				{}
			)}
			${validate_component(Proxy, "Proxy").$$render(
				$$result,
				{
					image: "feed4",
					onClick: e => loadProject("36bsf5gs")
				},
				{},
				{}
			)}
			${validate_component(Proxy, "Proxy").$$render(
				$$result,
				{
					image: "feed5",
					onClick: e => loadProjectPost("s7djj2s2")
				},
				{},
				{}
			)}
			${validate_component(Proxy, "Proxy").$$render(
				$$result,
				{
					image: "feed6",
					onClick: e => loadProject("s7djj2s2")
				},
				{},
				{}
			)}</div>
		`
		})}`
	: ``}`;
});

var index = /*#__PURE__*/Object.freeze({
    __proto__: null,
    'default': Routes
});

/* src\components\Hotspot.svelte generated by Svelte v3.23.0 */

const css$l = {
	code: ".hotspot.svelte-1pfzviz{position:absolute;text-decoration:none;line-height:0}.button.svelte-1pfzviz{cursor:pointer}",
	map: "{\"version\":3,\"file\":\"Hotspot.svelte\",\"sources\":[\"Hotspot.svelte\"],\"sourcesContent\":[\"<script>\\n\\timport { DEBUG } from '../config';\\n\\n\\texport let href = null;\\n\\texport let onClick = null;\\n\\texport let style = null;\\n\\n\\t// $: { // can be a string and will still work?\\n\\t// \\tif (DEBUG && onClick && typeof onClick !== 'function') {\\n\\t// \\t\\tconsole.error('onClick property not a function: \\\"' + onClick + '\\\" type: ' + typeof onClick);\\n\\t// \\t}\\n\\t// }\\n</script>\\n\\n{#if href}\\n\\t<a {href} on:click={onClick} class=\\\"hotspot\\\" {style}>&nbsp;</a>\\n{:else}\\n\\t<div on:click={onClick} class=\\\"hotspot\\\" class:button={onClick} {style} />\\n{/if}\\n\\n<style>\\n\\t.hotspot {\\n        position: absolute;\\n\\n        text-decoration: none;\\n        line-height: 0;\\n\\n        /* background-color: rgba(255, 0, 0, 0.2); */\\n\\t}\\n\\n\\t.button {\\n\\t\\tcursor: pointer;\\n\\t}\\n</style>\"],\"names\":[],\"mappings\":\"AAqBC,QAAQ,eAAC,CAAC,AACH,QAAQ,CAAE,QAAQ,CAElB,eAAe,CAAE,IAAI,CACrB,WAAW,CAAE,CAAC,AAGrB,CAAC,AAED,OAAO,eAAC,CAAC,AACR,MAAM,CAAE,OAAO,AAChB,CAAC\"}"
};

const Hotspot = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let { href = null } = $$props;
	let { onClick = null } = $$props;
	let { style = null } = $$props;
	if ($$props.href === void 0 && $$bindings.href && href !== void 0) $$bindings.href(href);
	if ($$props.onClick === void 0 && $$bindings.onClick && onClick !== void 0) $$bindings.onClick(onClick);
	if ($$props.style === void 0 && $$bindings.style && style !== void 0) $$bindings.style(style);
	$$result.css.add(css$l);

	return `${href
	? `<a${add_attribute("href", href, 0)} class="${"hotspot svelte-1pfzviz"}"${add_attribute("style", style, 0)}> </a>`
	: `<div class="${["hotspot svelte-1pfzviz", onClick ? "button" : ""].join(" ").trim()}"${add_attribute("style", style, 0)}></div>`}`;
});

const img$i = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADYAAAA2CAYAAACMRWrdAAAC5UlEQVRoQ+2a/VUVMRDFLx3QgdgBVIBUoFYAVABWoB2IFYAVKBVoB0AFQAVKBXiuJ+HMy5tksrvJ7rx3yD/vYzfZ/DI3k8lkd7ClZWdLufAKtmmW9W6x9wD2w6A+ALgG8LdmkL2CfQZwDmBXgbgC8MkC9AZGkB8A3hlWofU+ArjN3ecJjFC/hPTY56fQecqPknwjQPjfUQ7OC5gGxfl0kkjuCwDKNBbCHQCgBVeKBzAN6nuA0pRG2EtxgXIknCswDYpWeGs4hxTuFACdyktZ0mIaVOwYrcD5U3LtPwFwOWChbD94ANOgHhPnYMHRc9LZxLJipCUsVppTlNNxMn9ylnMFpkF9C4tx5KmFk/OM1t5bSooa1NqkD52z4NjWjYBZ86JzSXEIlGU5Xv+aLAf0oitr2RxgY6BKcLwWA2N+T6X8v25vsClQOTg5lbILeU+wFlAluFJ00s1i9FCM0qVkco4ijYbS30NDrm5SJAwXTrmXmhWqxxxzAdUazA1USzBXUK3A3EG1AHMJNRXMLdQUMNdQY8HcQ40B2wiooWAbAzUEbKOgasF6QzEPf2FFwkOvW9sWRuncgvcKaMcGxyanBcYTD27DY+H2m1nXqqMcUa/l3syEqpGiTErGBq18X81+qpul4sMtiz1nhqcWbnZL1YAxZcxdMAuPc2i92mQm6ywGZUmRnuosgMXcuJXviwNGT8pBkUnM7vKT6ipJkd4w5iykS7bgWi4PVY5CuykHxpG+FxXShGQOjvVa5TtGQ5WkWMyLhydqcARrseZNgiqBSTevZlozcLJDs86pdCRyUvwjRp6n8wSNhRY5DAdtPMpZOeUINy0KlbOYdu5EEP7PJUAmQTXJLA6VA5Mn8zF00l4kkVB3waq0bPbdi8kTZ0ADmhSlm881xYO23wGGn0NjxwFdHHerBqaFUYw8CBBh1t6rGPf4frU0sChFyktapV8vOrRsBcEdHjlPk69g84xzu6dsrcX+AVX72DcU29ArAAAAAElFTkSuQmCC";

/* src\routes\_components\ContentPanel.svelte generated by Svelte v3.23.0 */

const css$m = {
	code: ".contentPanel.svelte-1e5cxd5{position:relative;margin-bottom:10px;padding:20px;background-color:#ffffff}.contentPanel.svelte-1e5cxd5 .hidden{visibility:hidden}.panelTitle.svelte-1e5cxd5{font-size:1.5rem;font-weight:700;color:#444444;margin-top:-2px;padding-bottom:15px}.contentPanel.svelte-1e5cxd5 .editButton{position:absolute;top:5px;right:10px;width:28px;height:26px;padding:8px}.contentPanel.svelte-1e5cxd5 .showMoreButton{display:table;padding:10px;padding-right:30px;margin-top:8px;margin-left:-10px;margin-bottom:-14px;font-size:1.3rem;font-weight:700}",
	map: "{\"version\":3,\"file\":\"ContentPanel.svelte\",\"sources\":[\"ContentPanel.svelte\"],\"sourcesContent\":[\"<script>\\n    import locale from '../../locale';\\n    import Button from '../../components/Button.svelte';\\n\\n    import EditIcon from \\\"../../assets/icons/edit.png\\\";\\n\\n    export let title = null;\\n    export let showEdit = false;\\n\\n    // export let editButtonAction = null;\\n    export let showMoreAction = null;\\n\\n    export let hideShowMoreWithVisibility = false;\\n    export let forceShowMoreShow = false;\\n    export let showMoreLabel = null;\\n\\n    $: curShowMoreLabel = showMoreLabel || locale.GENERAL.SHOW_MORE;//show more\\n</script>\\n\\n<div class=\\\"contentPanel\\\">\\n    {#if title}\\n        <div class=\\\"panelTitle\\\">{title}</div>\\n    {/if}\\n    {#if showEdit}\\n        <Button className=\\\"editButton\\\" icon=\\\"{EditIcon}\\\" disabled=\\\"{true}\\\" />\\n    {/if}\\n    <div class=\\\"panelContent\\\">\\n        <slot></slot>\\n    </div>\\n    {#if showMoreAction || hideShowMoreWithVisibility || forceShowMoreShow}\\n        <Button className=\\\"showMoreButton {hideShowMoreWithVisibility && !showMoreAction && !forceShowMoreShow ? 'hidden' : ''}\\\" onClick=\\\"{showMoreAction && showMoreAction !== true ? showMoreAction : null}\\\" disabled=\\\"{!showMoreAction || showMoreAction === true}\\\">{curShowMoreLabel}</Button>\\n    {/if}\\n</div>\\n\\n<style>\\n\\t.contentPanel {\\n        position: relative;\\n\\t\\tmargin-bottom: 10px;\\n        padding: 20px;\\n\\n        background-color: #ffffff;\\n\\t}\\n\\n    .contentPanel :global(.hidden) {\\n        visibility: hidden;\\n    }\\n\\n    .panelContent {\\n\\n    }\\n\\n\\t.panelTitle {\\n        font-size: 1.5rem;\\n        font-weight: 700;\\n        color: #444444;\\n\\n        margin-top: -2px;\\n        padding-bottom: 15px;\\n\\t}\\n\\n    .contentPanel :global(.editButton) {\\n\\t\\tposition: absolute;\\n\\n        top: 5px;\\n        right: 10px;\\n\\n\\t\\twidth: 28px;\\n\\t\\theight: 26px;\\n\\t\\tpadding: 8px;\\n\\t}\\n\\n\\t.contentPanel :global(.showMoreButton) {\\n\\t\\tdisplay: table;\\n\\n\\t\\tpadding: 10px;\\n        padding-right: 30px;\\n\\n        margin-top: 8px;\\n        margin-left: -10px;\\n        margin-bottom: -14px;\\n\\n\\t\\tfont-size: 1.3rem;\\n\\t\\tfont-weight: 700;\\n\\t}\\n</style>\"],\"names\":[],\"mappings\":\"AAmCC,aAAa,eAAC,CAAC,AACR,QAAQ,CAAE,QAAQ,CACxB,aAAa,CAAE,IAAI,CACb,OAAO,CAAE,IAAI,CAEb,gBAAgB,CAAE,OAAO,AAChC,CAAC,AAEE,4BAAa,CAAC,AAAQ,OAAO,AAAE,CAAC,AAC5B,UAAU,CAAE,MAAM,AACtB,CAAC,AAMJ,WAAW,eAAC,CAAC,AACN,SAAS,CAAE,MAAM,CACjB,WAAW,CAAE,GAAG,CAChB,KAAK,CAAE,OAAO,CAEd,UAAU,CAAE,IAAI,CAChB,cAAc,CAAE,IAAI,AAC3B,CAAC,AAEE,4BAAa,CAAC,AAAQ,WAAW,AAAE,CAAC,AACtC,QAAQ,CAAE,QAAQ,CAEZ,GAAG,CAAE,GAAG,CACR,KAAK,CAAE,IAAI,CAEjB,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,OAAO,CAAE,GAAG,AACb,CAAC,AAED,4BAAa,CAAC,AAAQ,eAAe,AAAE,CAAC,AACvC,OAAO,CAAE,KAAK,CAEd,OAAO,CAAE,IAAI,CACP,aAAa,CAAE,IAAI,CAEnB,UAAU,CAAE,GAAG,CACf,WAAW,CAAE,KAAK,CAClB,aAAa,CAAE,KAAK,CAE1B,SAAS,CAAE,MAAM,CACjB,WAAW,CAAE,GAAG,AACjB,CAAC\"}"
};

const ContentPanel = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let { title = null } = $$props;
	let { showEdit = false } = $$props;
	let { showMoreAction = null } = $$props;
	let { hideShowMoreWithVisibility = false } = $$props;
	let { forceShowMoreShow = false } = $$props;
	let { showMoreLabel = null } = $$props;
	if ($$props.title === void 0 && $$bindings.title && title !== void 0) $$bindings.title(title);
	if ($$props.showEdit === void 0 && $$bindings.showEdit && showEdit !== void 0) $$bindings.showEdit(showEdit);
	if ($$props.showMoreAction === void 0 && $$bindings.showMoreAction && showMoreAction !== void 0) $$bindings.showMoreAction(showMoreAction);
	if ($$props.hideShowMoreWithVisibility === void 0 && $$bindings.hideShowMoreWithVisibility && hideShowMoreWithVisibility !== void 0) $$bindings.hideShowMoreWithVisibility(hideShowMoreWithVisibility);
	if ($$props.forceShowMoreShow === void 0 && $$bindings.forceShowMoreShow && forceShowMoreShow !== void 0) $$bindings.forceShowMoreShow(forceShowMoreShow);
	if ($$props.showMoreLabel === void 0 && $$bindings.showMoreLabel && showMoreLabel !== void 0) $$bindings.showMoreLabel(showMoreLabel);
	$$result.css.add(css$m);
	let curShowMoreLabel = showMoreLabel || locale$1.GENERAL.SHOW_MORE;

	return `<div class="${"contentPanel svelte-1e5cxd5"}">${title
	? `<div class="${"panelTitle svelte-1e5cxd5"}">${escape(title)}</div>`
	: ``}
    ${showEdit
	? `${validate_component(Button, "Button").$$render(
			$$result,
			{
				className: "editButton",
				icon: img$i,
				disabled: true
			},
			{},
			{}
		)}`
	: ``}
    <div class="${"panelContent svelte-1e5cxd5"}">${$$slots.default ? $$slots.default({}) : ``}</div>
    ${showMoreAction || hideShowMoreWithVisibility || forceShowMoreShow
	? `${validate_component(Button, "Button").$$render(
			$$result,
			{
				className: "showMoreButton " + (hideShowMoreWithVisibility && !showMoreAction && !forceShowMoreShow
				? "hidden"
				: ""),
				onClick: showMoreAction && showMoreAction !== true
				? showMoreAction
				: null,
				disabled: !showMoreAction || showMoreAction === true
			},
			{},
			{
				default: () => `${escape(curShowMoreLabel)}`
			}
		)}`
	: ``}
</div>`;
});

function getNotificationMessage(notification) {
    let message = null;
    if (notification.indirect || notification.notPriority) { // TODO: remove notPriority
        message = '<i>(indirect)</i>';
    } else {
        switch (notification.type) {
            case NotificationTypes.POST_ADDED:
                if (notification.threadId) {
                    if (notification.threadTitle) {
                        message = 'replied in "' + notification.threadTitle + '"';
                    } else if (notification.channelTitle) {
                        message = 'replied to a post in #' + notification.channelTitle + '';
                    } else {
                        message = 'replied to a post';
                    }
                } else if (notification.channelId) {
                    if (notification.channelTitle) {
                        message = 'added a post to #' + notification.channelTitle + '';
                    } else {
                        message = 'added a post';
                    }
                } else if (notification.projectId) {
                    message = 'posted an update';
                }
                break;
        }
    }
    return message;
}

/* src\routes\_components\NotificationListItem.svelte generated by Svelte v3.23.0 */

const css$n = {
	code: ".notifcationListItem.svelte-1by30qb.svelte-1by30qb{position:relative;padding:5px 0;height:67px;margin-bottom:0;cursor:pointer}.thumb.svelte-1by30qb.svelte-1by30qb{position:absolute;top:14px;left:21px;width:61px;height:61px;object-fit:cover;border:1px solid #D9D9D9}.notifcationListItem.svelte-1by30qb.svelte-1by30qb .avatarIcon{position:absolute;top:14px;left:21px;width:61px;height:61px}.detailContent.svelte-1by30qb.svelte-1by30qb{position:absolute;left:96px;top:16px;bottom:0;right:46px;display:flex;align-items:center}.detailInnerContent.svelte-1by30qb.svelte-1by30qb{width:100%}.title.svelte-1by30qb.svelte-1by30qb{font-size:1.4rem;line-height:1.3rem;font-weight:700}.message.svelte-1by30qb.svelte-1by30qb{font-size:1.3rem;line-height:1.3rem;margin-top:3px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.detail.svelte-1by30qb.svelte-1by30qb{font-size:1.1rem;margin-top:4px;color:#888888;line-height:1.3rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.projectTitle.svelte-1by30qb.svelte-1by30qb{font-weight:700}.info.svelte-1by30qb.svelte-1by30qb{position:absolute;right:0;top:13px}.info.svelte-1by30qb .unseenIcon.svelte-1by30qb{position:absolute;top:23px;right:25px;width:16px;height:16px;background-color:#DF3C3C;border-radius:999px}",
	map: "{\"version\":3,\"file\":\"NotificationListItem.svelte\",\"sources\":[\"NotificationListItem.svelte\"],\"sourcesContent\":[\"<script>\\r\\n    import { get, writable } from 'svelte/store';\\r\\n\\r\\n    import locale from '../../locale';\\r\\n\\r\\n    import AvatarIcon from './AvatarIcon.svelte';\\r\\n\\r\\n    import { getDateAgeString } from '../../utils';\\r\\n\\r\\n    import { getNotificationMessage } from '../../utils/NotificationUtil';\\r\\n\\r\\n    import { getUser, getUserModelFromData } from '../../models/usersModel';\\r\\n\\r\\n    import { loadPost, loadChannel, loadProject } from '../../actions/appActions';\\r\\n\\r\\n    export let notification;\\r\\n\\r\\n    $: thumbImage = ''; // getProjectHeaderImage($notification, true);\\r\\n\\r\\n    $: isUserAction = ($notification && $notification.isUserAction) || true;\\r\\n\\r\\n    $: title = ($notification && $notification.title) || '';\\r\\n    $: message = ($notification && getNotificationMessage($notification)) || '';\\r\\n\\r\\n    $: postId = ($notification && $notification.postId) || null;\\r\\n    $: threadId = ($notification && $notification.threadId) || null;\\r\\n    $: channelId = ($notification && $notification.channelId) || null;\\r\\n    $: projectId = ($notification && $notification.projectId) || null;\\r\\n\\r\\n    $: viewed = ($notification && $notification.viewed) || false;\\r\\n\\r\\n    // $: console.log('$notification', $notification);\\r\\n\\r\\n    $: projectTitle = $notification && $notification.projectTitle;\\r\\n\\r\\n    $: date = ($notification && $notification.createdAt) || null;\\r\\n    $: dateString = (date && getDateAgeString(date)) || '';\\r\\n\\r\\n    $: actor = ($notification && $notification.actors && $notification.actors.length && $notification.actors[0]) || null;\\r\\n    $: actorUser = (actor && date && getUserModelFromData(actor, date)) || writable(null);\\r\\n    $: actorName = ($actorUser && $actorUser.name) || (actor && actor.name) || '';\\r\\n\\r\\n    $: titleString = title || actorName || '';\\r\\n\\r\\n    function loadItem() {\\r\\n        if (threadId) {\\r\\n            loadPost(threadId, { anchorToBottom: true });\\r\\n        } else if (postId) {\\r\\n            loadPost(postId);\\r\\n        } else if (channelId) {\\r\\n            loadChannel(channelId);\\r\\n        } else if (projectId) {\\r\\n            loadProject(projectId);\\r\\n        }\\r\\n    }\\r\\n</script>\\r\\n\\r\\n<div class=\\\"notifcationListItem\\\" on:click=\\\"{loadItem}\\\">\\r\\n    {#if isUserAction}\\r\\n        <AvatarIcon user=\\\"{actorUser}\\\" useThumb=\\\"{true}\\\" />\\r\\n    {:else}\\r\\n        <img class=\\\"thumb\\\" src=\\\"{thumbImage}\\\" alt=\\\"{titleString}\\\" />\\r\\n    {/if}\\r\\n    <div class=\\\"detailContent\\\">\\r\\n        <div class=\\\"detailInnerContent\\\">\\r\\n            <div class=\\\"title\\\">{titleString}</div>\\r\\n            <div class=\\\"message\\\">{@html message}</div>\\r\\n            {#if dateString}\\r\\n                <div class=\\\"detail\\\">\\r\\n                    {#if projectTitle}\\r\\n                        {locale.NOTIFICATION.PROJECT_PREFIX}<span class=\\\"projectTitle\\\">{projectTitle}</span> -\\r\\n                    {/if}\\r\\n                {dateString}</div>\\r\\n            {/if}\\r\\n        </div>\\r\\n    </div>\\r\\n    <div class=\\\"info\\\">\\r\\n        {#if !viewed}\\r\\n            <div class=\\\"unseenIcon\\\" />\\r\\n        {/if}\\r\\n    </div>\\r\\n</div>\\r\\n\\r\\n<style>\\r\\n    .notifcationListItem {\\r\\n        position: relative;\\r\\n\\r\\n        padding: 5px 0;\\r\\n        height: 67px;\\r\\n        margin-bottom: 0;\\r\\n\\r\\n        cursor: pointer;\\r\\n    }\\r\\n\\r\\n    .thumb {\\r\\n        position: absolute;\\r\\n        top: 14px;\\r\\n        left: 21px;\\r\\n        width: 61px;\\r\\n        height: 61px;\\r\\n        object-fit: cover;\\r\\n\\r\\n        border: 1px solid #D9D9D9;\\r\\n    }\\r\\n\\r\\n    .notifcationListItem :global(.avatarIcon) {\\r\\n        position: absolute;\\r\\n        top: 14px;\\r\\n        left: 21px;\\r\\n        width: 61px;\\r\\n        height: 61px;\\r\\n    }\\r\\n\\r\\n    .detailContent {\\r\\n        position: absolute;\\r\\n        left: 96px;\\r\\n        top: 16px;\\r\\n        bottom: 0;\\r\\n        right: 46px;\\r\\n\\r\\n\\t\\tdisplay: flex;\\r\\n        align-items: center;\\r\\n        /* padding-bottom: 3px; */\\r\\n    }\\r\\n    .detailInnerContent {\\r\\n        width: 100%;\\r\\n    }\\r\\n\\r\\n    .title {\\r\\n        font-size: 1.4rem;\\r\\n        line-height: 1.3rem;\\r\\n        font-weight: 700;\\r\\n    }\\r\\n\\r\\n    .message {\\r\\n        font-size: 1.3rem;\\r\\n        line-height: 1.3rem;\\r\\n        margin-top: 3px;\\r\\n\\r\\n        white-space: nowrap;\\r\\n        overflow: hidden;\\r\\n        text-overflow: ellipsis;\\r\\n    }\\r\\n\\r\\n    .detail {\\r\\n        font-size: 1.1rem;\\r\\n        margin-top: 4px;\\r\\n        color: #888888;\\r\\n        line-height: 1.3rem;\\r\\n\\r\\n        white-space: nowrap;\\r\\n        overflow: hidden;\\r\\n        text-overflow: ellipsis;\\r\\n    }\\r\\n\\r\\n    .projectTitle {\\r\\n        font-weight: 700;\\r\\n    }\\r\\n\\r\\n    .info {\\r\\n        position: absolute;\\r\\n        right: 0;\\r\\n        top: 13px;\\r\\n    }\\r\\n\\r\\n    .info .unseenIcon {\\r\\n        position: absolute;\\r\\n        top: 23px;\\r\\n        right: 25px;\\r\\n        width: 16px;\\r\\n        height: 16px;\\r\\n        background-color: #DF3C3C;\\r\\n        border-radius: 999px;\\r\\n    }\\r\\n</style>\"],\"names\":[],\"mappings\":\"AAoFI,oBAAoB,8BAAC,CAAC,AAClB,QAAQ,CAAE,QAAQ,CAElB,OAAO,CAAE,GAAG,CAAC,CAAC,CACd,MAAM,CAAE,IAAI,CACZ,aAAa,CAAE,CAAC,CAEhB,MAAM,CAAE,OAAO,AACnB,CAAC,AAED,MAAM,8BAAC,CAAC,AACJ,QAAQ,CAAE,QAAQ,CAClB,GAAG,CAAE,IAAI,CACT,IAAI,CAAE,IAAI,CACV,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,UAAU,CAAE,KAAK,CAEjB,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,AAC7B,CAAC,AAED,kDAAoB,CAAC,AAAQ,WAAW,AAAE,CAAC,AACvC,QAAQ,CAAE,QAAQ,CAClB,GAAG,CAAE,IAAI,CACT,IAAI,CAAE,IAAI,CACV,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,AAChB,CAAC,AAED,cAAc,8BAAC,CAAC,AACZ,QAAQ,CAAE,QAAQ,CAClB,IAAI,CAAE,IAAI,CACV,GAAG,CAAE,IAAI,CACT,MAAM,CAAE,CAAC,CACT,KAAK,CAAE,IAAI,CAEjB,OAAO,CAAE,IAAI,CACP,WAAW,CAAE,MAAM,AAEvB,CAAC,AACD,mBAAmB,8BAAC,CAAC,AACjB,KAAK,CAAE,IAAI,AACf,CAAC,AAED,MAAM,8BAAC,CAAC,AACJ,SAAS,CAAE,MAAM,CACjB,WAAW,CAAE,MAAM,CACnB,WAAW,CAAE,GAAG,AACpB,CAAC,AAED,QAAQ,8BAAC,CAAC,AACN,SAAS,CAAE,MAAM,CACjB,WAAW,CAAE,MAAM,CACnB,UAAU,CAAE,GAAG,CAEf,WAAW,CAAE,MAAM,CACnB,QAAQ,CAAE,MAAM,CAChB,aAAa,CAAE,QAAQ,AAC3B,CAAC,AAED,OAAO,8BAAC,CAAC,AACL,SAAS,CAAE,MAAM,CACjB,UAAU,CAAE,GAAG,CACf,KAAK,CAAE,OAAO,CACd,WAAW,CAAE,MAAM,CAEnB,WAAW,CAAE,MAAM,CACnB,QAAQ,CAAE,MAAM,CAChB,aAAa,CAAE,QAAQ,AAC3B,CAAC,AAED,aAAa,8BAAC,CAAC,AACX,WAAW,CAAE,GAAG,AACpB,CAAC,AAED,KAAK,8BAAC,CAAC,AACH,QAAQ,CAAE,QAAQ,CAClB,KAAK,CAAE,CAAC,CACR,GAAG,CAAE,IAAI,AACb,CAAC,AAED,oBAAK,CAAC,WAAW,eAAC,CAAC,AACf,QAAQ,CAAE,QAAQ,CAClB,GAAG,CAAE,IAAI,CACT,KAAK,CAAE,IAAI,CACX,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,gBAAgB,CAAE,OAAO,CACzB,aAAa,CAAE,KAAK,AACxB,CAAC\"}"
};

const NotificationListItem = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let $notification;
	let $actorUser;
	let { notification } = $$props;
	$notification = get_store_value(notification);

	if ($$props.notification === void 0 && $$bindings.notification && notification !== void 0) $$bindings.notification(notification);
	$$result.css.add(css$n);
	$notification = get_store_value(notification);
	$actorUser = get_store_value(actorUser);
	let thumbImage = "";
	let isUserAction = $notification && $notification.isUserAction || true;
	let title = $notification && $notification.title || "";
	let message = $notification && getNotificationMessage($notification) || "";
	let postId = $notification && $notification.postId || null;
	let threadId = $notification && $notification.threadId || null;
	let channelId = $notification && $notification.channelId || null;
	let projectId = $notification && $notification.projectId || null;
	let viewed = $notification && $notification.viewed || false;
	let projectTitle = $notification && $notification.projectTitle;
	let date = $notification && $notification.createdAt || null;
	let dateString = date && getDateAgeString(date) || "";
	let actor = $notification && $notification.actors && $notification.actors.length && $notification.actors[0] || null;
	let actorUser = actor && date && getUserModelFromData(actor, date) || writable$1(null);
	let actorName = $actorUser && $actorUser.name || actor && actor.name || "";
	let titleString = title || actorName || "";

	return `<div class="${"notifcationListItem svelte-1by30qb"}">${isUserAction
	? `${validate_component(AvatarIcon, "AvatarIcon").$$render($$result, { user: actorUser, useThumb: true }, {}, {})}`
	: `<img class="${"thumb svelte-1by30qb"}"${add_attribute("src", thumbImage, 0)}${add_attribute("alt", titleString, 0)}>`}
    <div class="${"detailContent svelte-1by30qb"}"><div class="${"detailInnerContent svelte-1by30qb"}"><div class="${"title svelte-1by30qb"}">${escape(titleString)}</div>
            <div class="${"message svelte-1by30qb"}">${message}</div>
            ${dateString
	? `<div class="${"detail svelte-1by30qb"}">${projectTitle
		? `${escape(locale$1.NOTIFICATION.PROJECT_PREFIX)}<span class="${"projectTitle svelte-1by30qb"}">${escape(projectTitle)}</span> -`
		: ``}
                ${escape(dateString)}</div>`
	: ``}</div></div>
    <div class="${"info svelte-1by30qb"}">${!viewed
	? `<div class="${"unseenIcon svelte-1by30qb"}"></div>`
	: ``}</div>
</div>`;
});

/* src\routes\_components\ContentLoader.svelte generated by Svelte v3.23.0 */

const css$o = {
	code: ".contentLoader.svelte-13ars76{padding:20px;font-size:1.5rem;color:#888888}",
	map: "{\"version\":3,\"file\":\"ContentLoader.svelte\",\"sources\":[\"ContentLoader.svelte\"],\"sourcesContent\":[\"<script>\\n    import locale from '../../locale';\\n\\n    let hasSlots = $$props.$$slots;\\n\\n    export let label = !hasSlots ? locale.LOADING.DEFAULT : '';\\n</script>\\n\\n<div class=\\\"contentLoader\\\">{label}<slot></slot></div>\\n\\n<style>\\n    .contentLoader {\\n        padding: 20px;\\n        font-size: 1.5rem;\\n        color: #888888;\\n    }\\n</style>\"],\"names\":[],\"mappings\":\"AAWI,cAAc,eAAC,CAAC,AACZ,OAAO,CAAE,IAAI,CACb,SAAS,CAAE,MAAM,CACjB,KAAK,CAAE,OAAO,AAClB,CAAC\"}"
};

const ContentLoader = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let hasSlots = $$props.$$slots;
	let { label = !hasSlots ? locale$1.LOADING.DEFAULT : "" } = $$props;
	if ($$props.label === void 0 && $$bindings.label && label !== void 0) $$bindings.label(label);
	$$result.css.add(css$o);
	return `<div class="${"contentLoader svelte-13ars76"}">${escape(label)}${$$slots.default ? $$slots.default({}) : ``}</div>`;
});

/* src\routes\_components\NotificationList.svelte generated by Svelte v3.23.0 */

const css$p = {
	code: ".notificationList.svelte-u931uv{padding-top:10px;padding-bottom:40px}.notificationList.svelte-u931uv .panelContent{margin-top:-6px;margin-bottom:-6px}.noNotifications.svelte-u931uv{padding:0 20px;font-size:1.2rem;line-height:1.8rem;padding-top:10px;padding-bottom:20px}.notificationList.svelte-u931uv .contentLoader{padding:0 20px;font-size:1.2rem;padding-top:10px;padding-bottom:30px;line-height:2.5rem}",
	map: "{\"version\":3,\"file\":\"NotificationList.svelte\",\"sources\":[\"NotificationList.svelte\"],\"sourcesContent\":[\"<script>\\r\\n    import locale from '../../locale';\\r\\n\\r\\n    import config from '../../config';\\r\\n\\r\\n\\timport { get, writable } from 'svelte/store';\\r\\n\\r\\n    import Proxy from '../../components/Proxy.svelte';\\r\\n    import Hotspot from '../../components/Hotspot.svelte';\\r\\n\\r\\n\\timport ContentPanel from './../_components/ContentPanel.svelte';\\r\\n    import NotificationListItem from './NotificationListItem.svelte';\\r\\n    import ContentLoader from './../_components/ContentLoader.svelte';\\r\\n\\r\\n\\timport { newProject } from '../../actions/appActions';\\r\\n\\r\\n    import {\\r\\n        userId,\\r\\n        user,\\r\\n        loggingIn,\\r\\n\\t\\tisUserLoaded,\\r\\n    } from '../../models/appModel';\\r\\n\\r\\n\\timport { getNotifications, loadingNotifications } from '../../models/notificationsModel';\\r\\n    // const loadingNotifications = writable(false);\\r\\n\\r\\n    $: isLoadingNotifications = $loadingNotifications && !$notifications; // (!$notifications || !$notifications.length); // - don't check length as causes to flash\\r\\n\\r\\n\\r\\n\\t// import noficationData from '../data/notifications.json';\\r\\n\\t// const notificationItems = JSON.parse(JSON.stringify(noficationData));\\r\\n\\t// const notificationItemModels = notificationItems.map((item) => {\\r\\n\\t// \\treturn writable(item);\\r\\n\\t// })\\r\\n    // const notifications = writable(notificationItemModels); // get from notificationsModel\\r\\n\\r\\n    // export let notifications;\\r\\n\\r\\n    let notifications = writable([]);\\r\\n\\t$: { notifications = getNotifications({ userId: $userId }) };\\r\\n\\r\\n    export let className = '';\\r\\n</script>\\r\\n\\r\\n<div class=\\\"notificationList {className}\\\">\\r\\n    {#if isLoadingNotifications || !isUserLoaded($user, $userId, $loggingIn)}\\r\\n        <ContentLoader label=\\\"{locale.LOADING.NOTIFICATIONS}\\\" />\\r\\n    {:else}\\r\\n        {#each $notifications as notification}\\r\\n            {#if !get(notification).indirect && !get(notification).notPriority } <!-- TODO: remove notPriority -->\\r\\n                <NotificationListItem {notification} />\\r\\n            {/if}\\r\\n        {:else}\\r\\n            <div class=\\\"noNotifications\\\">\\r\\n                {locale.NOTIFICATIONS.NO_NOTIFICATIONS}<br/><br/>\\r\\n                <a href=\\\"discover\\\">Discover</a> inspiring projects to get involved with<br/>or create a <a href=\\\"javascript:void(0)\\\" on:click=\\\"{newProject}\\\">New Project</a>\\r\\n            </div>\\r\\n        {/each}\\r\\n    {/if}\\r\\n</div>\\r\\n\\r\\n<style>\\r\\n    .notificationList {\\r\\n        padding-top: 10px;\\r\\n        padding-bottom: 40px;\\r\\n        /* padding-top: 310px; */\\r\\n    }\\r\\n\\r\\n    .notificationList :global(.panelContent) {\\r\\n        margin-top: -6px;\\r\\n        margin-bottom: -6px;\\r\\n    }\\r\\n\\r\\n    .noNotifications {\\r\\n        padding: 0 20px;\\r\\n        font-size: 1.2rem;\\r\\n        line-height: 1.8rem;\\r\\n        padding-top: 10px;\\r\\n        padding-bottom: 20px;\\r\\n    }\\r\\n\\r\\n    .notificationList :global(.contentLoader) {\\r\\n        padding: 0 20px;\\r\\n        font-size: 1.2rem;\\r\\n        padding-top: 10px;\\r\\n        padding-bottom: 30px;\\r\\n        line-height: 2.5rem;\\r\\n    }\\r\\n</style>\"],\"names\":[],\"mappings\":\"AA8DI,iBAAiB,cAAC,CAAC,AACf,WAAW,CAAE,IAAI,CACjB,cAAc,CAAE,IAAI,AAExB,CAAC,AAED,+BAAiB,CAAC,AAAQ,aAAa,AAAE,CAAC,AACtC,UAAU,CAAE,IAAI,CAChB,aAAa,CAAE,IAAI,AACvB,CAAC,AAED,gBAAgB,cAAC,CAAC,AACd,OAAO,CAAE,CAAC,CAAC,IAAI,CACf,SAAS,CAAE,MAAM,CACjB,WAAW,CAAE,MAAM,CACnB,WAAW,CAAE,IAAI,CACjB,cAAc,CAAE,IAAI,AACxB,CAAC,AAED,+BAAiB,CAAC,AAAQ,cAAc,AAAE,CAAC,AACvC,OAAO,CAAE,CAAC,CAAC,IAAI,CACf,SAAS,CAAE,MAAM,CACjB,WAAW,CAAE,IAAI,CACjB,cAAc,CAAE,IAAI,CACpB,WAAW,CAAE,MAAM,AACvB,CAAC\"}"
};

const NotificationList = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let $loadingNotifications = get_store_value(loadingNotifications);
	let $notifications;
	let $userId = get_store_value(userId);
	let $user = get_store_value(user);
	let $loggingIn = get_store_value(loggingIn);

	// import noficationData from '../data/notifications.json';
	// const notificationItems = JSON.parse(JSON.stringify(noficationData));
	// const notificationItemModels = notificationItems.map((item) => {
	// 	return writable(item);
	// })
	// const notifications = writable(notificationItemModels); // get from notificationsModel
	// export let notifications;
	let notifications = writable$1([]);

	$notifications = get_store_value(notifications);
	
	let { className = "" } = $$props;
	if ($$props.className === void 0 && $$bindings.className && className !== void 0) $$bindings.className(className);
	$$result.css.add(css$p);
	$notifications = get_store_value(notifications);
	let isLoadingNotifications = $loadingNotifications && !$notifications;

	 {
		{
			notifications = getNotifications$1({ userId: $userId });
		}
	}

	return `<div class="${"notificationList " + escape(className) + " svelte-u931uv"}">${isLoadingNotifications || !isUserLoaded($user, $userId, $loggingIn)
	? `${validate_component(ContentLoader, "ContentLoader").$$render($$result, { label: locale$1.LOADING.NOTIFICATIONS }, {}, {})}`
	: `${$notifications.length
		? each($notifications, notification => `${!get_store_value(notification).indirect && !get_store_value(notification).notPriority
			? `
                ${validate_component(NotificationListItem, "NotificationListItem").$$render($$result, { notification }, {}, {})}`
			: ``}`)
		: `<div class="${"noNotifications svelte-u931uv"}">${escape(locale$1.NOTIFICATIONS.NO_NOTIFICATIONS)}<br><br>
                <a href="${"discover"}">Discover</a> inspiring projects to get involved with<br>or create a <a href="${"javascript:void(0)"}">New Project</a>
            </div>`}`}
</div>`;
});

/* src\routes\activity.svelte generated by Svelte v3.23.0 */

const Activity = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	return `${($$result.head += `${($$result.title = `<title>Flock</title>`, "")}`, "")}

<div class="${"content"}">${validate_component(ScrollView, "ScrollView").$$render($$result, { id: "activity" }, {}, {
		default: () => `

		${validate_component(NotificationList, "NotificationList").$$render($$result, {}, {}, {})}`
	})}
</div>`;
});

var activity = /*#__PURE__*/Object.freeze({
    __proto__: null,
    'default': Activity
});

const img$j = "data:image/png;base64,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";

/* src\routes\_components\NewPostButton.svelte generated by Svelte v3.23.0 */

const css$q = {
	code: ".newPostButtonPanel.svelte-1rwifg8{position:relative;background-color:#ffffff;height:41px;padding-top:3px;padding-bottom:3px;margin-top:10px;margin-bottom:10px}.newPostButtonPanel.svelte-1rwifg8 .proxy{position:absolute}.newPostButtonPanel.svelte-1rwifg8 .newPostButton{position:absolute;top:11px;right:0;padding-right:58px;font-weight:700;font-size:1.7rem}.newPostButtonPanel.svelte-1rwifg8 .newPostButton .icon{padding-left:25px;margin-top:-2px}",
	map: "{\"version\":3,\"file\":\"NewPostButton.svelte\",\"sources\":[\"NewPostButton.svelte\"],\"sourcesContent\":[\"<script>\\r\\n    import Proxy from '../../components/Proxy.svelte';\\r\\n    import Button from '../../components/Button.svelte';\\r\\n\\r\\n    import locale from '../../locale';\\r\\n\\r\\n    import NewPostIcon from \\\"../../assets/icons/create_post.png\\\";\\r\\n\\r\\n    // export let type = 'new_post';\\r\\n\\r\\n    export let icon = NewPostIcon;\\r\\n    export let label = locale.GENERAL.NEW_POST; // 'new post';\\r\\n\\r\\n    export let className = '';\\r\\n\\r\\n    export let onClick = null;\\r\\n</script>\\r\\n\\r\\n<div class=\\\"newPostButtonPanel {className}\\\">\\r\\n    <!-- <Proxy image=\\\"{type}\\\" className=\\\"proxyOverlay\\\" /> -->\\r\\n\\r\\n    <Button className=\\\"newPostButton\\\" {onClick} icon=\\\"{icon}\\\">{label}</Button>\\r\\n\\r\\n    <!-- <slot></slot> -->\\r\\n</div>\\r\\n\\r\\n<style>\\r\\n    /* .newPostButtonPanel :global(.proxyOverlay) {\\r\\n        position: absolute;\\r\\n        opacity: 0.5;\\r\\n    } */\\r\\n\\r\\n\\t.newPostButtonPanel {\\r\\n        position: relative;\\r\\n        background-color: #ffffff;\\r\\n        height: 41px;\\r\\n        padding-top: 3px;\\r\\n        padding-bottom: 3px;\\r\\n        margin-top: 10px;\\r\\n        margin-bottom: 10px;\\r\\n\\t}\\r\\n\\r\\n    .newPostButtonPanel :global(.proxy) {\\r\\n        position: absolute;\\r\\n    }\\r\\n\\r\\n    .newPostButtonPanel :global(.newPostButton) {\\r\\n        position: absolute;\\r\\n        top: 11px;\\r\\n        right: 0;\\r\\n        padding-right: 58px;\\r\\n        /* padding-right: 63px; */\\r\\n        font-weight: 700;\\r\\n        font-size: 1.7rem;\\r\\n    }\\r\\n    .newPostButtonPanel :global(.newPostButton .icon) {\\r\\n        padding-left: 25px;\\r\\n        /* padding-left: 30px; */\\r\\n        margin-top: -2px;\\r\\n    }\\r\\n\\r\\n    /* .button {\\r\\n        cursor: pointer;\\r\\n    } */\\r\\n</style>\"],\"names\":[],\"mappings\":\"AAgCC,mBAAmB,eAAC,CAAC,AACd,QAAQ,CAAE,QAAQ,CAClB,gBAAgB,CAAE,OAAO,CACzB,MAAM,CAAE,IAAI,CACZ,WAAW,CAAE,GAAG,CAChB,cAAc,CAAE,GAAG,CACnB,UAAU,CAAE,IAAI,CAChB,aAAa,CAAE,IAAI,AAC1B,CAAC,AAEE,kCAAmB,CAAC,AAAQ,MAAM,AAAE,CAAC,AACjC,QAAQ,CAAE,QAAQ,AACtB,CAAC,AAED,kCAAmB,CAAC,AAAQ,cAAc,AAAE,CAAC,AACzC,QAAQ,CAAE,QAAQ,CAClB,GAAG,CAAE,IAAI,CACT,KAAK,CAAE,CAAC,CACR,aAAa,CAAE,IAAI,CAEnB,WAAW,CAAE,GAAG,CAChB,SAAS,CAAE,MAAM,AACrB,CAAC,AACD,kCAAmB,CAAC,AAAQ,oBAAoB,AAAE,CAAC,AAC/C,YAAY,CAAE,IAAI,CAElB,UAAU,CAAE,IAAI,AACpB,CAAC\"}"
};

const NewPostButton = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let { icon = img$j } = $$props;
	let { label = locale$1.GENERAL.NEW_POST } = $$props; // 'new post';
	let { className = "" } = $$props;
	let { onClick = null } = $$props;
	if ($$props.icon === void 0 && $$bindings.icon && icon !== void 0) $$bindings.icon(icon);
	if ($$props.label === void 0 && $$bindings.label && label !== void 0) $$bindings.label(label);
	if ($$props.className === void 0 && $$bindings.className && className !== void 0) $$bindings.className(className);
	if ($$props.onClick === void 0 && $$bindings.onClick && onClick !== void 0) $$bindings.onClick(onClick);
	$$result.css.add(css$q);

	return `<div class="${"newPostButtonPanel " + escape(className) + " svelte-1rwifg8"}">

    ${validate_component(Button, "Button").$$render(
		$$result,
		{
			className: "newPostButton",
			onClick,
			icon
		},
		{},
		{ default: () => `${escape(label)}` }
	)}

    
</div>`;
});

/* src\routes\_components\Counter.svelte generated by Svelte v3.23.0 */

const css$r = {
	code: ".counterContainer.svelte-1odxsrs{vertical-align:bottom;display:inline-block;position:relative}.counter.svelte-1odxsrs{width:22px;height:22px;font-size:1.2rem;border-radius:100px;color:#444444;background-color:#D7D7D7;display:flex;justify-content:center;align-items:center}.hasNew.svelte-1odxsrs{color:#FFFFFF;background-color:#DF3C3C}",
	map: "{\"version\":3,\"file\":\"Counter.svelte\",\"sources\":[\"Counter.svelte\"],\"sourcesContent\":[\"<script>\\n    export let count = 0;\\n    export let hasNew = false;\\n    export let visible = true;\\n</script>\\n\\n{#if visible}\\n    <div class=\\\"counterContainer\\\">\\n        <div class=\\\"counter\\\" class:hasNew=\\\"{hasNew}\\\" class:default=\\\"{!hasNew}\\\">{count}</div>\\n    </div>\\n{/if}\\n\\n<style>\\n    .counterContainer {\\n\\t\\tvertical-align: bottom;\\n\\t\\tdisplay: inline-block;\\n\\t\\tposition: relative;\\n    }\\n\\n    .counter {\\n        width: 22px;\\n        height: 22px;\\n\\n        font-size: 1.2rem;\\n\\n        border-radius: 100px;\\n\\n        color: #444444;\\n        background-color: #D7D7D7;\\n\\n\\t\\tdisplay: flex;\\n\\t\\tjustify-content: center;\\n\\t\\talign-items: center;\\n    }\\n\\n    .hasNew {\\n        color: #FFFFFF;\\n        background-color: #DF3C3C;\\n    }\\n</style>\"],\"names\":[],\"mappings\":\"AAaI,iBAAiB,eAAC,CAAC,AACrB,cAAc,CAAE,MAAM,CACtB,OAAO,CAAE,YAAY,CACrB,QAAQ,CAAE,QAAQ,AAChB,CAAC,AAED,QAAQ,eAAC,CAAC,AACN,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CAEZ,SAAS,CAAE,MAAM,CAEjB,aAAa,CAAE,KAAK,CAEpB,KAAK,CAAE,OAAO,CACd,gBAAgB,CAAE,OAAO,CAE/B,OAAO,CAAE,IAAI,CACb,eAAe,CAAE,MAAM,CACvB,WAAW,CAAE,MAAM,AACjB,CAAC,AAED,OAAO,eAAC,CAAC,AACL,KAAK,CAAE,OAAO,CACd,gBAAgB,CAAE,OAAO,AAC7B,CAAC\"}"
};

const Counter = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let { count = 0 } = $$props;
	let { hasNew = false } = $$props;
	let { visible = true } = $$props;
	if ($$props.count === void 0 && $$bindings.count && count !== void 0) $$bindings.count(count);
	if ($$props.hasNew === void 0 && $$bindings.hasNew && hasNew !== void 0) $$bindings.hasNew(hasNew);
	if ($$props.visible === void 0 && $$bindings.visible && visible !== void 0) $$bindings.visible(visible);
	$$result.css.add(css$r);

	return `${visible
	? `<div class="${"counterContainer svelte-1odxsrs"}"><div class="${[
			"counter svelte-1odxsrs",
			(hasNew ? "hasNew" : "") + " " + (!hasNew ? "default" : "")
		].join(" ").trim()}">${escape(count)}</div></div>`
	: ``}`;
});

const img$k = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAiCAYAAAA3WXuFAAACmklEQVRYR+2XzWoVQRCFT17AB5D4AuraENeKrmPQdSSuVdwbdC9J1opZKybrgK4Nca2+gOID+ATyhaqhbt/qmZ6ZCBFsmHuHme7q0+fU36zogo2VC4ZH/xSgS5Lu2sX9dUlfJf2Q9EbStwF2r0nalnQlrP0t6dgu7pdGjSGAvDBjtX0x/ERSaRjwe3aQ2loOtWPAFuZkgB5I2rVZPyW9Dmw4a/ftPWBuG2s8gpVDSczL2OD9I0mrtv6ppHcRUQnopqQPNuG9MZCdEsP7kq4a2Hs2CTC8+y7pcY+sMOiH2pT02TcpAX0x9PjI8wEfgYUjA4V82LpjYDYSKUtzDgr51jJALhUy3WhMB7DxsZiLhEMOzxIOBAH8d9JFhhxxCzsRw0uLJp69sqvxPPK1nXtEQC7XgqYNlgnrU5MIZtNwrthxn+1ki4B+2SL0ZMKYgWFG55yNi/0wTL/MTwao1Qca9+ydFn1wCRAhuy5prGRzgJGA30o6kXSWOjKn7ss/czbP1nogpU7taHHKsc45BWgM+4deRsrE+MkS3djQnwLIQ56sfquWqWPp+Ju+VN0nK66ua1k4p7CQrSHUye5ItqRErf1w6SgBeP+YZNcHHBCxAHdS1STz57FwnheoEkxagPta2NjbzAUVwcA2rKcFeKinjqAoJ4RnSyWPsmGD5Ifv9IIpE2NN+yjfoMHCSDwQ4T3YJw0xlPkUoOiHF1rP5DSxFW4C08pQBEUy89aTjpKwzcYzSVwMygJzmyK1laG4aeyHYYlur/Z+dMafAojNoxwegTz3HMP90hdFS2adCgjbpH+iB6f3yMOJkYZoHNusneGdA4j1ADgI31l8IGxNSA0deXMBYQiGAMUATJPz1uQ7D0AtrtE85z+gIar+ABXxmSMBn8R9AAAAAElFTkSuQmCC";

const img$l = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAiCAYAAAA3WXuFAAACKUlEQVRYR+1X7VEbMRDVygXEHXA++X9MBTEVYCoAKgipJFABpII4FUA6MP8tWenAFHC7mSWy5+58p5N0B2Nmcj89+57efng/QBzZB0emR3wcQVmWjUej0TkRLYhoDAAzIloBgEXEO2vtyhfdLMtmUsqvRJSVsFsAWBZF8ctau23CN0ZIKcUivgshMs+jS0S8rhOzI1LKeyHEwoO1APBNa72s2xwIUkpdEREThnxbRDy11lo2dlF5FEKMQ8AAcK21fijbVgRNp9M5IjJhzLdCxDMGSCkZO4sBSynP1uv10w5TEZTnOXt6EkPobJdEBABwnoC1xpjJgaDIVCW82w4pp24foclk8gAAl4O+FEhGRD82m80Vm+8F9UhX4LNes33ayoJoCOZUDmPMq5bjFaSUeiKiL6ke9sEBwG+t9bwSoaMrajcufvbxNBULABe7MVJvjDwwP6cSJ+KejTH77j7E6EjU8Q/mHR1s8M61dGeMuSl71Lh+5Hn+HqmrpKpxuO5+dDsNT+C3qqdnRJw3LWmtK6zbbVjUp15Fcgh+cWIaN07vTv0GorxiKo2xLQoDpq81TZ1FXRc3gKggMUERKhc6ANzG7ky86xDRTduVUXc++i6L7FMHfabrDxItiAlD1t2mi6JLTFTK6mTuQuG7qt4WXqSUi/IlESLE2xhDCVxbYFG7S+UPIi66rloff1LKyoTu5H69QIuiYDGNJ3Kok70FhT4UavdfUFek/gLdgwkyp9leXwAAAABJRU5ErkJggg==";

const img$m = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAiCAYAAAA6RwvCAAABxElEQVRYR+3Xz4dXYRQG8M80pYlRWrQqsygyLaJFi0S0KDHMRMwmhjb9A5kWEYkUlf6BNhFtIhKRaTFEZtEi2iSmxZhWLcYkNemnkxPXdW/fH3PjK/ds3ss957zP+7znfd/nDBkQGxoQHAYeyGFM4n3DjO3AIzwv561i5AqmMYJNDQP5ijXcx8Vi7jKQYOIORhFBGxoG8iMX9xFnisyUgVzD6Zx8Am8aBrIXjzPnPVz4k78M5Bxm8R27k5UmscRWv8UwbuJWC6RlpFRgbY2UT1zLSMtIp1u4rZH/p0aWcOQfvb7PMNbp9Z3BpeRzDq8L3P4sfO9MUfOwxP1JhLh6V1O1+3A8F3gVd+tkwDYsIMZOtoxj+JCOW/EUuzoFYhWHcvztXqVZD+AyDuJbRdKI+YQtuI3QuGGhQc/ic/6rwrMRL5L1l0WHv7UTQf9KzeqeYE9SvD99XqUeXcSJmrjtddvWb18TrcaNAisxb7ARCj2kZrQMPVm/QGKSeYQYDrUfFrdmiO2jPSFI5/UAmcL17H8iXbBxvh826oq1lwU9wHgGxFE/1Utwt8XaTc7NiLsnLO6EL90EVfmsZ2v6nbMyrgVSpuUXIDGGIz7IDroAAAAASUVORK5CYII=";

const img$n = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAYAAAAehFoBAAACyElEQVRYR+2YjW0UMRBGv1RAOgAqgFRAqCBQAVBBQgWQCiAVJFSQUAFQAaSD0AGpIOhFntWsz961fbunPWlHOm1y8o6fv/mxfQfaMzvYM16twHNHbFV4yQo/k3Q3N2DsvyUlXkq6lMTzn6TXkv7sCrwWGMgfkg4d4HdJb5YI7GHvJf2UdBLS4vnSgGPY46DqpwBaG6nm9ZVMlIIlZz9LWhxwDhaFPDCKY7+apSt8cUjhIdgY2E9HqyMC5DgFOWnrywGPwQJIHwbsyYg4jLmS9C20wUIt08NSwCWwsTdLCdodf/N5EQ2iZwN+vg14DNwCm1PM4M8kvXKDAP8awKvV9sBM8DuEmj6LSlPtYKQPRfrOEeL7Q+0cHphVnwaHR7WOCqUCnLQwxVH7Y/iuyIUHRl1S4kISYZzT3oe0sIJFfXJ71DzwQxjNilF7bkOcG0lPw0QoT4oMmgembxIqnpzAdmHUDfNZR0Fl1M6aByYNvtSsdqIVxdCojNpJi9uaqczgohBNCE3XID0oRIo+uUPGwPFqdwlNTiMYhQg80BuW2ulqoOnV5D1P3mNSb6jF5KjFB6ChAxLdg9sMliz+3FmiBJpbxnVDSrAIugMfDkexWVoyjosBz86GTmtj0P54ycS2K/JkEtTGhynP//FBCdXxw8HIjHHsCdhG1xg7wA9BtxzggSEyhN76L2CA0x1QF6N22MY3VB4D5uUcdAuwjy55jw9/MCJNAGcLN5V7ba4EOAf9d6IrEuDsrLZ5oPbb8B2L6XWMUuAUNOFC/dtEd2ioxd6VC990E27lGMX32JdrgA2asPkwTnlYQm38x8XZpUUtsClH7uGcVbOl91pPi7xRl7ANxL6mi1Co1QpvyVL8elzoXR63Klw88xYD/VbdibtkYCBtN+XK9vh73tKBYbRfSZu6xBYRnubVfVC4t9IVeJrA572sCs+t8H/DUKIthjXZnAAAAABJRU5ErkJggg==";

const img$o = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAzYAAAHqCAIAAABZTkxrAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjAxNzZBRTc0OERERjExRUE5QjZEOURGN0JCOUZEMDgzIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjAxNzZBRTc1OERERjExRUE5QjZEOURGN0JCOUZEMDgzIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MDE3NkFFNzI4RERGMTFFQTlCNkQ5REY3QkI5RkQwODMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MDE3NkFFNzM4RERGMTFFQTlCNkQ5REY3QkI5RkQwODMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6UjAHaAAAHVklEQVR42uzWQQ0AAAjEMMC/xtOCDUJaCXutkxQAAJeMBAAAFg0AAIsGAGDRAACwaAAAFg0AAIsGAGDRAACwaAAAWDQAAIsGAIBFAwCwaAAAWDQAAIsGAIBFAwCwaAAAWDQAACwaAIBFAwDAogEAWDQAACwaAIBFAwDAogEAYNEAACwaAAAWDQDAogEAYNEAACwaAAAWDQDAogEAYNEAALBoAAAWDQAAiwYAYNEAALBoAAAWDQAAiwYAgEUDALBoAABYNAAAiwYAgEUDALBoAABYNAAAiwYAgEUDAMCiAQBYNAAALBoAgEUDAMCiAQBYNAAALBoAABYNAMCiAQBg0QAALBoAABYNAMCiAQBg0QAALBoAABYNAACLBgBg0QAAsGgAABYNAACLBgBg0QAAsGgAAFg0AACLBgCARQMAsGgAAFg0AACLBgCARQMAsGgAAFg0AAAsGgCARQMAwKIBAFg0AAAsGgCARQMAwKIBAGDRAAAsGgAAFg0AwKIBAGDRAAAsGgAAFg0AwKIBAGDRAACwaAAAFg0AAIsGAGDRAACwaAAAFg0AAIsGAIBFAwCwaAAAWDQAAIsGAIBFAwCwaAAAWDQAAIsGAIBFAwDAogEAWDQAACwaAIBFAwDAogEAWDQAACwaAAAWDQDAogEAYNEAACwaAAAWDQDAogEAYNEAACwaAAAWDQAAiwYAYNEAALBoAAAWDQAAiwYAYNEAALBoAAAWDQAAiwYAgEUDALBoAABYNAAAiwYAgEUDALBoAABYNAAALBoAgEUDAMCiAQBYNAAALBoAgEUDAMCiAQBYNAAALBoAABYNAMCiAQBg0QAALBoAABYNAMCiAQBg0QAAsGgAABYNAACLBgBg0QAAsGgAABYNAACLBgBg0QAAsGgAAFg0AACLBgCARQMAsGgAAFg0AACLBgCARQMAwKIBAFg0AAAsGgCARQMAwKIBAFg0AAAsGgCARQMAwKIBAGDRAAAsGgAAFg0AwKIBAGDRAAAsGgAAFg0AAIsGAGDRAACwaAAAFg0AAIsGAGDRAACwaAAAFg0AAIsGAIBFAwCwaAAAWDQAAIsGAIBFAwCwaAAAWDQAACwaAIBFAwDAogEAWDQAACwaAIBFAwDAogEAWDQAACwaAAAWDQDAogEAYNEAACwaAAAWDQDAogEAYNEAALBoAAAWDQAAiwYAYNEAALBoAAAWDQAAiwYAYNEAALBoAABYNAAAiwYAgEUDALBoAABYNAAAiwYAgEUDAMCiAQBYNAAALBoAgEUDAMCiAQBYNAAALBoAgEUDAMCiAQBg0QAALBoAABYNAMCiAQBg0QAALBoAABYNAMCiSQAAYNEAALBoAAAWDQAAiwYAYNEAALBoAAAWDQAAiwYAgEUDALBoAABYNAAAiwYAgEUDALBoAABYNAAAiwYAgEUDAMCiAQBYNAAALBoAgEUDAMCiAQBYNAAALBoAABYNAMCiAQBg0QAALBoAABYNAMCiAQBg0QAALBoAABYNAACLBgBg0QAAsGgAABYNAACLBgBg0QAAsGgAAFg0AACLBgCARQMAsGgAAFg0AACLBgCARQMAsGgAAFg0AAAsGgCARQMAwKIBAFg0AAAsGgCARQMAwKIBAGDRAAAsGgAAFg0AwKIBAGDRAAAsGgAAFg0AwKIBAGDRAACwaAAAFg0AAIsGAGDRAACwaAAAFg0AAIsGAIBFAwCwaAAAWDQAAIsGAIBFAwCwaAAAWDQAAIsGAIBFAwDAogEAWDQAACwaAIBFAwDAogEAWDQAACwaAAAWDQDAogEAYNEAACwaAAAWDQDAogEAYNEAACwaAAAWDQAAiwYAYNEAALBoAAAWDQAAiwYAYNEAALBoAABYNAAAiwYAgEUDALBoAABYNAAAiwYAgEUDALBoAABYNAAALBoAgEUDAMCiAQBYNAAALBoAgEUDAMCiAQBg0QAALBoAABYNAMCiAQBg0QAALBoAABYNAMCiAQBg0QAAsGgAABYNAACLBgBg0QAAsGgAABYNAACLBgBg0QAAsGgAAFg0AACLBgCARQMAsGgAAFg0AACLBgCARQMAwKIBAFg0AAAsGgCARQMAwKIBAFg0AAAsGgCARQMAwKIBAGDRAAAsGgAAFg0AwKIBAGDRAAAsGgAAFg0AAIsGAGDRAACwaAAAFg0AAIsGAGDRAACwaAAAFg0AAIsGAIBFAwCwaAAAWDQAAIsGAIBFAwCwaAAAWDQAACwaAIBFAwDAogEAWDQAACwaAIBFAwDAogEAWDQAACwaAAAWDQDAogEAYNEAACwaAAAWDQDAogEAYNEAALBoAAAWDQAAiwYAYNEAALBoAAAWDQAAiwYAYNEAALBoAABYNAAAiwYAgEUDALBoAABYNAAAiwYAgEUDAMCiAQBYNAAALBoAgEUDAMCiAQBYNAAALBoAgEUDAMCiAQBg0QAALBoAABYNAMCiAQBg0QAALBoAABYNAACLBgBg0QAAsGgAABYNAACLBgDw0QowAA6ABm5JPw8/AAAAAElFTkSuQmCC";

/* src\routes\_components\PostItem.svelte generated by Svelte v3.23.0 */

const css$s = {
	code: ".postItem.svelte-ygkkez.svelte-ygkkez{position:relative;background-color:#ffffff;margin-bottom:5px}.button.svelte-ygkkez.svelte-ygkkez{cursor:pointer}.postItem.svelte-ygkkez.svelte-ygkkez .avatarIcon{position:absolute;left:14px;top:16px;height:40px;width:40px}.postItem.onlyImageShown.svelte-ygkkez.svelte-ygkkez .avatarIcon{top:11px;left:19px;height:30px;width:30px}.userName.svelte-ygkkez.svelte-ygkkez{padding-top:15px;padding-left:66px;padding-right:20px}.info.svelte-ygkkez.svelte-ygkkez{padding-bottom:15px;padding-left:66px;padding-right:20px}.hasThumb.svelte-ygkkez .info.svelte-ygkkez{padding-left:117px;min-height:42px}.thumb.svelte-ygkkez.svelte-ygkkez{position:absolute;left:65px;top:39px;width:42px;height:42px;object-fit:cover;border:1px solid #D9D9D9}.userName.svelte-ygkkez.svelte-ygkkez{font-size:1.3rem;color:#777777;padding-bottom:5px;padding-right:28px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.showReplyIcon.svelte-ygkkez .userName.svelte-ygkkez{padding-right:64px}.showRepliesIcon.svelte-ygkkez .userName.svelte-ygkkez{padding-right:78px}.showReplyIcon.showOptionsButton.svelte-ygkkez .userName.svelte-ygkkez{padding-right:82px}.showRepliesIcon.showOptionsButton.svelte-ygkkez .userName.svelte-ygkkez{padding-right:96px}.date.svelte-ygkkez.svelte-ygkkez{color:#bbbbbb}.edited.svelte-ygkkez.svelte-ygkkez{display:inline-block;font-size:1.1rem;color:#b9b9b9;background-color:#f7f5f5;padding:1px 4px;border-radius:3px;user-select:none}.title.svelte-ygkkez.svelte-ygkkez{font-size:1.5rem;line-height:1.7rem;color:#000000;font-weight:700;padding-bottom:8px}.message.svelte-ygkkez.svelte-ygkkez{font-size:1.5rem;line-height:1.7rem;color:#333333}.messageLimited.svelte-ygkkez.svelte-ygkkez{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.selectable.svelte-ygkkez.svelte-ygkkez{user-select:text}.selectable.svelte-ygkkez.svelte-ygkkez a{user-select:text}.postImageContainer.svelte-ygkkez.svelte-ygkkez{padding-left:66px;padding-right:43px;padding-bottom:6px;margin-top:-4px}.postImageContainer.showFullImage.svelte-ygkkez.svelte-ygkkez{padding-left:0;padding-right:0;display:flex;justify-content:center}.postImage.svelte-ygkkez.svelte-ygkkez{max-width:100%;max-height:80vw;margin-bottom:8px}.postImageContainer.showFullImage.svelte-ygkkez .postImage.svelte-ygkkez{max-height:initial}.postItem.svelte-ygkkez.svelte-ygkkez .likeButton{position:absolute;right:-4px;top:8px;width:30px;margin-right:9px;height:20px;padding:6px}.postItem.showOptionsButton.svelte-ygkkez.svelte-ygkkez .likeButton{right:-2px}.postItem.svelte-ygkkez.svelte-ygkkez .likeButton .icon{margin-top:-3px}.postItem.showReplyIcon.svelte-ygkkez.svelte-ygkkez .likeButton{right:30px}.postItem.showRepliesIcon.svelte-ygkkez.svelte-ygkkez .likeButton{right:40px}.count.svelte-ygkkez.svelte-ygkkez{position:absolute;margin-top:3px;margin-left:23px;font-size:1rem;font-weight:700;color:#444444}.postItem.svelte-ygkkez.svelte-ygkkez .commentButton{position:absolute;right:48px;top:16px}.commentIcon.svelte-ygkkez.svelte-ygkkez{position:absolute;background-size:contain;background-position:center;background-repeat:no-repeat;width:17px;height:17px}.buttonGroup.buttonGroupOffset.svelte-ygkkez.svelte-ygkkez{position:absolute;right:16px}.postItem.svelte-ygkkez.svelte-ygkkez .optionsButton{position:absolute;right:-1px;top:6px;width:33px;height:38px}.optionsIcon.svelte-ygkkez.svelte-ygkkez{position:absolute;top:8px;width:26px;height:20px;background-size:contain;background-position:center;background-repeat:no-repeat}.postItem.svelte-ygkkez.svelte-ygkkez .counterContainer{position:absolute;margin-top:-1px;margin-left:20px}.postItem.svelte-ygkkez.svelte-ygkkez .counter{height:18px;width:18px;font-size:1rem;font-weight:700}.postItem.svelte-ygkkez.svelte-ygkkez .counter.default{background-color:initial}.replyIcon.svelte-ygkkez.svelte-ygkkez{position:absolute;right:18px;top:13px;background-size:cover;width:22px;height:22px}.postItem.showUnseenIcon.svelte-ygkkez .replyIcon.svelte-ygkkez{display:none}.postItem.showUnseenIcon.svelte-ygkkez.svelte-ygkkez .likeButton{right:-4px}.unseenIcon.svelte-ygkkez.svelte-ygkkez{position:absolute;top:18px;right:54px;width:12px;height:12px;background-color:#DF3C3C;border-radius:999px}",
	map: "{\"version\":3,\"file\":\"PostItem.svelte\",\"sources\":[\"PostItem.svelte\"],\"sourcesContent\":[\"<script>\\n    import { goto } from '@sapper/app';\\n    import { get, writable } from 'svelte/store';\\n    import { tick } from 'svelte';\\n\\n    import config from '../../config';\\n    import locale from '../../locale';\\n\\n    import { menuIds } from '../../config/menus';\\n\\n    import Button from '../../components/Button.svelte';\\n    // import Counter from '../_components/Counter.svelte';\\n\\n    // import ArrowIcon from \\\"../../assets/icons/next_arrow.png\\\";\\n\\n    import Counter from '../_components/Counter.svelte';\\n\\n    import AvatarIcon from '../_components/AvatarIcon.svelte';\\n\\n    import LikeIcon from \\\"../../assets/icons/post_like.png\\\";\\n    import LikeSelectedIcon from \\\"../../assets/icons/post_like_selected.png\\\";\\n    import CommentIcon from \\\"../../assets/icons/comment_small.png\\\";\\n    import ReplyIcon from \\\"../../assets/icons/reply_small.png\\\";\\n    import OptionsMenuIcon from \\\"../../assets/icons/menu.png\\\";\\n\\n    import PlaceholderImage from \\\"../../assets/images/postPlaceholder.png\\\";\\n\\n    import { getDisplayText, getDateString, getDateAge, getDateAgeString, secondsDiff } from '../../utils';\\n\\n    import { getUser } from '../../models/usersModel';\\n\\n\\timport {\\n        project,\\n        userId,\\n        targetPost,\\n\\t\\tgetHeaderImage,\\n    } from '../../models/appModel';\\n\\n\\timport {\\n        loadProfile,\\n        loadPost,\\n        showMenu,\\n    } from '../../actions/appActions';\\n\\n\\timport {\\n        postToggleLiked,\\n    } from '../../actions/postActions';\\n\\n    import {\\n        getPost,\\n    } from '../../models/postsModel';\\n\\n    import {\\n        getUnviewedThreadNotificationCount,\\n        getThreadUnviewed,\\n    } from '../../models/notificationsModel';\\n\\n    export let post;\\n\\n    export let type = 'thread';\\n\\n    let showFullImage = false;\\n\\n    // export let type = 'thread';\\n\\n    let user = writable([]);\\n\\n\\t$: isArchived = ($project && $project.archived) || false;\\n\\n    $: postId = ($post && $post.id) || null;\\n\\n    $: postUserId = ($post && $post.userId) || null;\\n    $: { user = getUser(postUserId) };\\n    $: userLoaded = ($user && $user.name) || false;\\n    $: userName = ($user && $user.name) || '';\\n    $: userNameString = userName || ''; // '&nbsp;';\\n\\n    $: title = ($post && $post.title) || null;\\n    $: message = ($post && $post.message) || null;\\n    $: image = ($post && $post.image) || null;\\n\\n    $: useThumbImage = (type === 'thread');\\n\\n    // $: imageSrc = image && !useThumbImage && getHeaderImage(image);\\n    $: thumbImageSrc = image && useThumbImage && getHeaderImage(image, true);\\n\\n    let imageSrc = PlaceholderImage;\\n    $: { // load placeholder to set image size\\n        image;\\n        if (image && !useThumbImage) {\\n            (async () => {\\n                await tick();\\n                imageSrc = PlaceholderImage;\\n\\n                await tick();\\n                setTimeout(() => { // ensure allowing placeholder to resize - tick doesn't seem to be enough\\n                    imageSrc = getHeaderImage(image);\\n                }, 0);\\n            })();\\n        }\\n    }\\n\\n    let canMaximizeImage = false;\\n    let initializedCanMaximizeImage = false;\\n    $: {\\n        if (image && imageSrc && imageSrc !== PlaceholderImage) {\\n            initializedCanMaximizeImage = true;\\n\\n            var testImage = new Image();\\n            testImage.onload = () => {\\n                if (testImage.width >= window.innerWidth || testImage.height >= window.innerWidth * 0.9) {\\n                    canMaximizeImage = true;\\n                }\\n            };\\n            testImage.src = imageSrc;\\n        }\\n    }\\n\\n    $: liked = ($post && $post.liked) || false;\\n\\n    $: canEdit = ($post && $post.userId && $post.userId === $userId) || false;\\n\\n    $: showTitle = (type === 'thread');\\n    $: canLinkThrough = (type === 'thread');\\n    $: linkUserName = (type === 'threadPost');\\n    // $: displayBreaks = (type !== 'thread');\\n    $: collapseBreaks = (type === 'thread');\\n    $: disallowLinks = (type === 'thread');\\n    $: showLastActiveTime = (type === 'thread');\\n    $: textSelectable = (type !== 'thread');\\n    $: messageLimited = (type === 'thread');\\n    // $: compressedMargin = (type === 'threadPost');\\n\\n    $: likeCount = ($post && $post.likeCount) || '';\\n\\n    $: showRepliesIcon = (type === 'thread') && repliesCount;\\n    $: showReplyIcon = (type === 'thread') && !repliesCount;\\n\\n    $: showOptionsButton = canEdit && (type !== 'thread');\\n\\n    $: showEdited = ((type !== 'thread') && ($post && $post.edited && secondsDiff($post.createdAt, $post.editedAt) > config.SHOW_EDITED_MIN_TIME)) || false;\\n    $: editedDate = (showEdited && $post.editedAt && getDateString($post.editedAt)) || '';\\n\\n    // $: console.log('post diff', secondsDiff($post.createdAt, $post.editedAt));\\n\\n    // $: titleHTML = displayBreaks ? title : getUnbrokenText(title);\\n    // $: messageHTML = displayBreaks ? message : getUnbrokenText(message);\\n\\n    $: titleHTML = getDisplayText(title, {disallowLinks, collapseBreaks});\\n    $: messageHTML = getDisplayText(message, {disallowLinks, collapseBreaks});\\n\\n    $: repliesCount = ($post && $post.postCount) || 0;\\n    $: unviewedCount = ($post && getUnviewedThreadNotificationCount($post.id)) || writable(0);\\n\\n    $: showUnseenIcon = (!repliesCount && $unviewedCount); // (type === 'thread') &&\\n\\n    $: date = $post && showLastActiveTime ? $post.lastActiveAt : $post.createdAt;\\n\\n    let dateString = '';\\n    // $: isRecent = !showLastActiveTime && getDateAge(date).hours < 1;\\n    // $: dateString = (showLastActiveTime && repliesCount) ? 'active ' + getDateAgeString(date) : (isRecent ? getDateAgeString(date) : getDateString(date));\\n    $: {\\n        if (date) {\\n            if (showLastActiveTime && repliesCount) {\\n                dateString = 'active ' + getDateAgeString(date, {allowLessThanMinute: false});\\n            } else {\\n                const dateAge = getDateAge(date);\\n                if (dateAge.hours < 0.66) {\\n                    dateString = getDateAgeString(date);\\n                } else if (dateAge.days < 0.66) {\\n                    dateString = getDateString(date, 'h:mmtt');\\n                } else {\\n                    dateString = getDateString(date);\\n                }\\n            }\\n        }\\n    }\\n\\n\\n    // $: titleHTML = parseHTML(title);\\n    // $: messageHTML = parseHTML(message);\\n\\n    function viewUserProfile(event) {\\n        if (userLoaded) {\\n            loadProfile(postUserId);\\n        }\\n        event && event.stopPropagation();\\n    }\\n\\n    function loadCurrentPost() {\\n        if (postId) {\\n            const onlyHasUnreadReplies = !!($unviewedCount && !getThreadUnviewed(postId));\\n            // console.log(onlyHasUnreadReplies, $unviewedCount, getThreadUnviewed(postId));\\n            loadPost(postId, { anchorToBottom: onlyHasUnreadReplies });\\n            // loadPost(postId);\\n            // goto('posts/' + postId);\\n        }\\n    }\\n\\n\\tfunction toggleLiked(event) {\\n        event && event.stopPropagation();\\n        postToggleLiked(postId);\\n    }\\n\\n    function showPostOptions(event) {\\n        event && event.stopPropagation();\\n\\n        const postModel = getPost(postId);\\n        if (postModel) {\\n            const post = get(postModel);\\n            $targetPost = post;\\n\\n            showMenu(menuIds.POST_OPTIONS);\\n        }\\n    }\\n\\n    function toggleFullImage() {\\n        showFullImage = !showFullImage;\\n    }\\n</script>\\n\\n<div class=\\\"postItem\\\" class:hasThumb=\\\"{!!thumbImageSrc}\\\" class:button=\\\"{canLinkThrough}\\\" class:onlyImageShown=\\\"{showFullImage && !title && !message}\\\" on:click=\\\"{canLinkThrough ? loadCurrentPost : null}\\\"\\n    class:showReplyIcon=\\\"{showReplyIcon}\\\"\\n    class:showRepliesIcon=\\\"{showRepliesIcon}\\\"\\n    class:showOptionsButton=\\\"{showOptionsButton}\\\"\\n    class:showUnseenIcon=\\\"{showUnseenIcon}\\\">\\n    <!-- <Avatar  -->\\n    <AvatarIcon {user} onClick=\\\"{userLoaded ? viewUserProfile : null}\\\" useThumb=\\\"{true}\\\" />\\n    <div class=\\\"buttonGroup\\\" class:buttonGroupOffset=\\\"{showOptionsButton}\\\">\\n        {#if !isArchived}\\n            <Button className=\\\"likeButton\\\" onClick=\\\"{toggleLiked}\\\" icon=\\\"{liked ? LikeSelectedIcon : LikeIcon}\\\">\\n                <!-- <div class=\\\"likeIcon\\\" style=\\\"background-image: url({LikeIcon})\\\"/> -->\\n                <div class=\\\"count\\\">{likeCount}</div>\\n                <!-- <Counter count=\\\"{likeCount}\\\" /> -->\\n            </Button>\\n        {/if}\\n        {#if showRepliesIcon}\\n            <Button className=\\\"commentButton\\\">\\n                <div class=\\\"commentIcon\\\" style=\\\"background-image: url({CommentIcon})\\\"/>\\n                <Counter count=\\\"{$unviewedCount || repliesCount}\\\" hasNew=\\\"{$unviewedCount}\\\" />\\n            </Button>\\n        {:else if !isArchived}\\n            {#if showReplyIcon}\\n                <div class=\\\"replyIcon\\\" style=\\\"background-image: url({ReplyIcon})\\\"/>\\n            {/if}\\n            {#if showUnseenIcon}\\n                <div class=\\\"unseenIcon\\\" />\\n            {/if}\\n        {/if}\\n    </div>\\n    {#if showOptionsButton}\\n        <Button className=\\\"optionsButton\\\" onClick=\\\"{showPostOptions}\\\">\\n            <div class=\\\"optionsIcon\\\" style=\\\"background-image: url({OptionsMenuIcon})\\\"/>\\n        </Button>\\n    {/if}\\n    {#if thumbImageSrc}\\n        <img class=\\\"thumb\\\" src=\\\"{thumbImageSrc}\\\" alt=\\\"{title || 'thumbnail'}\\\" />\\n    {/if}\\n    <div class=\\\"userName\\\" class:selectable=\\\"{textSelectable}\\\">\\n        <span div=\\\"userNameLabel\\\" class:button=\\\"{linkUserName && userLoaded}\\\" on:click=\\\"{linkUserName && userLoaded ? viewUserProfile : null}\\\">{@html userNameString}</span>\\n        {#if dateString}<span class=\\\"date\\\">{#if userName} - {/if}{dateString}</span>{/if}\\n        {#if showEdited}<span class=\\\"edited\\\" title=\\\"{editedDate}\\\">{locale.POST.EDITED}</span>{/if}\\n    </div>\\n    <div class=\\\"info\\\">\\n        {#if showTitle && title}\\n            <div class=\\\"title\\\">{@html titleHTML}</div>\\n        {/if}\\n        {#if message}\\n            <div class=\\\"message\\\" class:selectable=\\\"{textSelectable}\\\" class:messageLimited=\\\"{messageLimited}\\\">{@html  messageHTML}</div>\\n        {/if}\\n    </div>\\n    {#if image && !useThumbImage}\\n        <div class=\\\"postImageContainer\\\" class:button=\\\"{canMaximizeImage}\\\" on:click=\\\"{canMaximizeImage ? toggleFullImage : null}\\\" class:showFullImage=\\\"{showFullImage}\\\">\\n            <img class=\\\"postImage\\\" src=\\\"{imageSrc}\\\" alt=\\\"{title || 'post'}\\\" />\\n        </div>\\n    {/if}\\n</div>\\n\\n<style>\\n    .postItem {\\n        position: relative;\\n\\n        background-color: #ffffff;\\n\\n        margin-bottom: 5px;\\n    }\\n\\n    .button {\\n        cursor: pointer;\\n    }\\n\\n    .postItem :global(.avatarIcon) {\\n        position: absolute;\\n        left: 14px;\\n        top: 16px;\\n        height: 40px;\\n        width: 40px;\\n    }\\n    .postItem.onlyImageShown :global(.avatarIcon) {\\n        top: 11px;\\n        left: 19px;\\n        height: 30px;\\n        width: 30px;\\n    }\\n    .userName {\\n        padding-top: 15px;\\n        padding-left: 66px;\\n        padding-right: 20px;\\n    }\\n    .info {\\n        /* padding: 15px; */\\n        padding-bottom: 15px;\\n        padding-left: 66px;\\n        padding-right: 20px;\\n    }\\n\\n    .hasThumb .info {\\n        padding-left: 117px;\\n        min-height: 42px;\\n    }\\n\\n    .thumb {\\n        position: absolute;\\n        left: 65px;\\n        top: 39px;\\n\\n        width: 42px;\\n        height: 42px;\\n        object-fit: cover;\\n        border: 1px solid #D9D9D9;\\n    }\\n\\n    .userName {\\n        font-size: 1.3rem;\\n        color: #777777;\\n        /* font-weight: 700; */\\n        padding-bottom: 5px;\\n        padding-right: 28px;\\n\\n        white-space: nowrap;\\n        overflow: hidden;\\n        text-overflow: ellipsis;\\n    }\\n    .showReplyIcon .userName {\\n        padding-right: 64px;\\n    }\\n    .showRepliesIcon .userName {\\n        padding-right: 78px;\\n    }\\n    .showReplyIcon.showOptionsButton .userName {\\n        padding-right: 82px;\\n    }\\n    .showRepliesIcon.showOptionsButton .userName {\\n        padding-right: 96px;\\n    }\\n    /* .userName.showReplyIcon {\\n        padding-right: 20px;\\n    }\\n    .userName.showRepliesIcon {\\n        padding-right: 28px;\\n    } */\\n\\n    .date {\\n        color: #bbbbbb;\\n    }\\n\\n    .edited {\\n        display: inline-block;\\n        font-size: 1.1rem;\\n        color: #b9b9b9;\\n        background-color: #f7f5f5;\\n        padding: 1px 4px;\\n        border-radius: 3px;\\n        user-select: none;\\n    }\\n\\n    .title {\\n        font-size: 1.5rem;\\n        line-height: 1.7rem;\\n        color: #000000;\\n        font-weight: 700;\\n        padding-bottom: 8px;\\n\\n        /* white-space: nowrap;\\n        overflow: hidden;\\n        text-overflow: ellipsis; */\\n    }\\n\\n    .message {\\n        font-size: 1.5rem;\\n        line-height: 1.7rem;\\n        color: #333333;\\n    }\\n    .messageLimited {\\n        white-space: nowrap;\\n        overflow: hidden;\\n        text-overflow: ellipsis;\\n    }\\n    .selectable {\\n        user-select: text;\\n    }\\n    .selectable :global(a) {\\n        user-select: text;\\n    }\\n\\n\\t.postImageContainer {\\n        padding-left: 66px;\\n        padding-right: 43px;\\n        padding-bottom: 6px;\\n        margin-top: -4px;\\n\\t}\\n    .postImageContainer.showFullImage {\\n        padding-left: 0;\\n        padding-right: 0;\\n        display: flex;\\n        justify-content: center;\\n    }\\n\\t.postImage {\\n        max-width: 100%;\\n        max-height: 80vw;\\n        margin-bottom: 8px;\\n\\t}\\n\\t.postImageContainer.showFullImage .postImage {\\n        max-height: initial;\\n\\t}\\n\\n    /* .message.compressedMargin {\\n        padding-right: 32px;\\n    } */\\n\\n    .postItem :global(.likeButton) {\\n        position: absolute;\\n        right: -4px;\\n        top: 8px;\\n        width: 30px;\\n        margin-right: 9px;\\n        height: 20px;\\n        padding: 6px;\\n    }\\n    .postItem.showOptionsButton :global(.likeButton) {\\n        right: -2px;\\n    }\\n    .postItem :global(.likeButton .icon) {\\n        margin-top: -3px;\\n    }\\n    .postItem.showReplyIcon :global(.likeButton) {\\n        right: 30px;\\n    }\\n    .postItem.showRepliesIcon :global(.likeButton) {\\n        right: 40px;\\n    }\\n\\n    .count {\\n        position: absolute;\\n        margin-top: 3px;\\n        margin-left: 23px;\\n        /* width: 20px;\\n        text-align: center; */\\n\\n        font-size: 1rem;\\n        font-weight: 700;\\n        color: #444444;\\n    }\\n\\n    .postItem :global(.commentButton) {\\n        position: absolute;\\n        right: 48px;\\n        top: 16px;\\n    }\\n    .commentIcon {\\n        position: absolute;\\n        background-size: contain;\\n        background-position: center;\\n        background-repeat: no-repeat;\\n        width: 17px;\\n        height: 17px;\\n    }\\n\\n    .buttonGroup.buttonGroupOffset {\\n        position: absolute;\\n        right: 16px;\\n    }\\n\\n    .postItem :global(.optionsButton) {\\n        position: absolute;\\n        right: -1px;\\n        top: 6px;\\n        width: 33px;\\n        height: 38px;\\n    }\\n    .optionsIcon {\\n        position: absolute;\\n        top: 8px;\\n        width: 26px;\\n        height: 20px;\\n        background-size: contain;\\n        background-position: center;\\n        background-repeat: no-repeat;\\n    }\\n\\n    .postItem :global(.counterContainer) {\\n        position: absolute;\\n        margin-top: -1px;\\n        margin-left: 20px;\\n    }\\n    .postItem :global(.counter) {\\n        height: 18px;\\n        width: 18px;\\n        font-size: 1rem;\\n        font-weight: 700;\\n    }\\n    .postItem :global(.counter.default) {\\n        background-color: initial;\\n    }\\n    /*.postItem :global(.counter) {\\n        border-radius: initial;\\n        background-color: initial;\\n        font-size: 1rem;\\n        color: #333333;\\n    } */\\n\\n\\n    .replyIcon {\\n        position: absolute;\\n        right: 18px;\\n        top: 13px;\\n        /* right: 19px;\\n        top: 15px; */\\n\\n        background-size: cover;\\n        width: 22px;\\n        height: 22px;\\n    }\\n\\n    .postItem.showUnseenIcon .replyIcon {\\n        display: none;\\n        /* right: 29px; */\\n    }\\n    .postItem.showUnseenIcon :global(.likeButton) {\\n        right: -4px;\\n        /* right: 16px; */\\n        /* right: 38px; */\\n    }\\n\\n    .unseenIcon {\\n        position: absolute;\\n        top: 18px;\\n        right: 54px;\\n        /* right: 13px; */\\n        width: 12px;\\n        height: 12px;\\n        background-color: #DF3C3C;\\n        border-radius: 999px;\\n    }\\n</style>\"],\"names\":[],\"mappings\":\"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\"}"
};

const PostItem = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let $project = get_store_value(project);
	let $post;
	let $user;
	let $userId = get_store_value(userId);
	let $unviewedCount;
	let $targetPost = get_store_value(targetPost);
	let { post } = $$props;
	$post = get_store_value(post);
	let { type = "thread" } = $$props;

	// export let type = 'thread';
	let user = writable$1([]);

	$user = get_store_value(user);
	
	let imageSrc = img$o;
	let canMaximizeImage = false;
	let dateString = "";

	// $: titleHTML = parseHTML(title);
	// $: messageHTML = parseHTML(message);
	function viewUserProfile(event) {
		if (userLoaded) {
			loadProfile(postUserId);
		}

		event && event.stopPropagation();
	}

	function toggleLiked(event) {
		event && event.stopPropagation();
		postToggleLiked(postId);
	}

	function showPostOptions(event) {
		event && event.stopPropagation();
		const postModel = getPost(postId);

		if (postModel) {
			const post = get_store_value(postModel);
			$targetPost = post;
			showMenu(menuIds.POST_OPTIONS);
		}
	}

	if ($$props.post === void 0 && $$bindings.post && post !== void 0) $$bindings.post(post);
	if ($$props.type === void 0 && $$bindings.type && type !== void 0) $$bindings.type(type);
	$$result.css.add(css$s);
	$post = get_store_value(post);
	$user = get_store_value(user);
	$unviewedCount = get_store_value(unviewedCount);
	let isArchived = $project && $project.archived || false;
	let postId = $post && $post.id || null;
	let postUserId = $post && $post.userId || null;

	 {
		{
			user = getUser(postUserId);
		}
	}

	let userLoaded = $user && $user.name || false;
	let userName = $user && $user.name || "";
	let userNameString = userName || "";
	let title = $post && $post.title || null;
	let message = $post && $post.message || null;
	let image = $post && $post.image || null;
	let useThumbImage = type === "thread";
	let thumbImageSrc = image && useThumbImage && getHeaderImage(image, true);

	 {
		{

			if (image && !useThumbImage) {
				(async () => {
					await tick();
					imageSrc = img$o;
					await tick();

					setTimeout(
						() => {
							// ensure allowing placeholder to resize - tick doesn't seem to be enough
							imageSrc = getHeaderImage(image);
						},
						0
					);
				})();
			}
		}
	}

	 {
		{
			if (image && imageSrc && imageSrc !== img$o) {
				var testImage = new Image();

				testImage.onload = () => {
					if (testImage.width >= window.innerWidth || testImage.height >= window.innerWidth * 0.9) {
						canMaximizeImage = true;
					}
				};

				testImage.src = imageSrc;
			}
		}
	}

	let liked = $post && $post.liked || false;
	let canEdit = $post && $post.userId && $post.userId === $userId || false;
	let showTitle = type === "thread";
	let canLinkThrough = type === "thread";
	let linkUserName = type === "threadPost";
	let collapseBreaks = type === "thread";
	let disallowLinks = type === "thread";
	let showLastActiveTime = type === "thread";
	let textSelectable = type !== "thread";
	let messageLimited = type === "thread";
	let likeCount = $post && $post.likeCount || "";
	let repliesCount = $post && $post.postCount || 0;
	let showRepliesIcon = type === "thread" && repliesCount;
	let showReplyIcon = type === "thread" && !repliesCount;
	let showOptionsButton = canEdit && type !== "thread";
	let showEdited = type !== "thread" && ($post && $post.edited && secondsDiff($post.createdAt, $post.editedAt) > config$1.SHOW_EDITED_MIN_TIME) || false;
	let editedDate = showEdited && $post.editedAt && getDateString($post.editedAt) || "";
	let titleHTML = getDisplayText(title, { disallowLinks, collapseBreaks });
	let messageHTML = getDisplayText(message, { disallowLinks, collapseBreaks });
	let unviewedCount = $post && getUnviewedThreadNotificationCount($post.id) || writable$1(0);
	let showUnseenIcon = !repliesCount && $unviewedCount;

	let date = $post && showLastActiveTime
	? $post.lastActiveAt
	: $post.createdAt;

	 {
		{
			if (date) {
				if (showLastActiveTime && repliesCount) {
					dateString = "active " + getDateAgeString(date, { allowLessThanMinute: false });
				} else {
					const dateAge = getDateAge(date);

					if (dateAge.hours < 0.66) {
						dateString = getDateAgeString(date);
					} else if (dateAge.days < 0.66) {
						dateString = getDateString(date, "h:mmtt");
					} else {
						dateString = getDateString(date);
					}
				}
			}
		}
	}

	return `<div class="${[
		"postItem svelte-ygkkez",
		(!!thumbImageSrc ? "hasThumb" : "") + " " + (canLinkThrough ? "button" : "") + " " + ( "") + " " + (showReplyIcon ? "showReplyIcon" : "") + " " + (showRepliesIcon ? "showRepliesIcon" : "") + " " + (showOptionsButton ? "showOptionsButton" : "") + " " + (showUnseenIcon ? "showUnseenIcon" : "")
	].join(" ").trim()}">
    ${validate_component(AvatarIcon, "AvatarIcon").$$render(
		$$result,
		{
			user,
			onClick: userLoaded ? viewUserProfile : null,
			useThumb: true
		},
		{},
		{}
	)}
    <div class="${["buttonGroup svelte-ygkkez", showOptionsButton ? "buttonGroupOffset" : ""].join(" ").trim()}">${!isArchived
	? `${validate_component(Button, "Button").$$render(
			$$result,
			{
				className: "likeButton",
				onClick: toggleLiked,
				icon: liked ? img$l : img$k
			},
			{},
			{
				default: () => `
                <div class="${"count svelte-ygkkez"}">${escape(likeCount)}</div>
                `
			}
		)}`
	: ``}
        ${showRepliesIcon
	? `${validate_component(Button, "Button").$$render($$result, { className: "commentButton" }, {}, {
			default: () => `<div class="${"commentIcon svelte-ygkkez"}" style="${"background-image: url(" + escape(img$m) + ")"}"></div>
                ${validate_component(Counter, "Counter").$$render(
				$$result,
				{
					count: $unviewedCount || repliesCount,
					hasNew: $unviewedCount
				},
				{},
				{}
			)}`
		})}`
	: `${!isArchived
		? `${showReplyIcon
			? `<div class="${"replyIcon svelte-ygkkez"}" style="${"background-image: url(" + escape(img$n) + ")"}"></div>`
			: ``}
            ${showUnseenIcon
			? `<div class="${"unseenIcon svelte-ygkkez"}"></div>`
			: ``}`
		: ``}`}</div>
    ${showOptionsButton
	? `${validate_component(Button, "Button").$$render(
			$$result,
			{
				className: "optionsButton",
				onClick: showPostOptions
			},
			{},
			{
				default: () => `<div class="${"optionsIcon svelte-ygkkez"}" style="${"background-image: url(" + escape(img) + ")"}"></div>`
			}
		)}`
	: ``}
    ${thumbImageSrc
	? `<img class="${"thumb svelte-ygkkez"}"${add_attribute("src", thumbImageSrc, 0)}${add_attribute("alt", title || "thumbnail", 0)}>`
	: ``}
    <div class="${["userName svelte-ygkkez", textSelectable ? "selectable" : ""].join(" ").trim()}"><span div="${"userNameLabel"}" class="${["svelte-ygkkez", linkUserName && userLoaded ? "button" : ""].join(" ").trim()}">${userNameString}</span>
        ${dateString
	? `<span class="${"date svelte-ygkkez"}">${userName ? ` - ` : ``}${escape(dateString)}</span>`
	: ``}
        ${showEdited
	? `<span class="${"edited svelte-ygkkez"}"${add_attribute("title", editedDate, 0)}>${escape(locale$1.POST.EDITED)}</span>`
	: ``}</div>
    <div class="${"info svelte-ygkkez"}">${showTitle && title
	? `<div class="${"title svelte-ygkkez"}">${titleHTML}</div>`
	: ``}
        ${message
	? `<div class="${[
			"message svelte-ygkkez",
			(textSelectable ? "selectable" : "") + " " + (messageLimited ? "messageLimited" : "")
		].join(" ").trim()}">${messageHTML}</div>`
	: ``}</div>
    ${image && !useThumbImage
	? `<div class="${[
			"postImageContainer svelte-ygkkez",
			(canMaximizeImage ? "button" : "") + " " + ( "")
		].join(" ").trim()}"><img class="${"postImage svelte-ygkkez"}"${add_attribute("src", imageSrc, 0)}${add_attribute("alt", title || "post", 0)}></div>`
	: ``}
</div>`;
});

/* src\routes\channels\[channel].svelte generated by Svelte v3.23.0 */

const css$t = {
	code: ".channelHeader.svelte-3y1v3b{background-color:#ffffff;font-size:1.4rem;color:#666666;padding:16px 20px}.channelHeaderPost.svelte-3y1v3b{padding-bottom:0}.pageContent.svelte-3y1v3b .newPostHeader{margin:0}.content.svelte-3y1v3b .channelActions{box-shadow:0 2px 3px 0 rgba(0,0,0,0.12)}.postsContainer.svelte-3y1v3b .contentLoader{background-color:#f2f2f2;font-size:1.3rem;line-height:2.2rem}.content.svelte-3y1v3b .channelActions{box-shadow:0 2px 3px 0 rgba(0,0,0,0.12)}.content.svelte-3y1v3b .channelPosts{margin-top:5px}.content.svelte-3y1v3b{margin-bottom:40px}.postsContainer.svelte-3y1v3b{padding-top:5px}",
	map: "{\"version\":3,\"file\":\"[channel].svelte\",\"sources\":[\"[channel].svelte\"],\"sourcesContent\":[\"<script>\\r\\n\\timport locale from '../../locale';\\r\\n\\r\\n\\timport { writable } from 'svelte/store';\\r\\n\\timport { goto } from '@sapper/app';\\r\\n\\r\\n\\timport ScrollView from '../../components/ScrollView.svelte';\\r\\n\\timport Proxy from '../../components/Proxy.svelte';\\r\\n\\timport NewPostButton from '../_components/NewPostButton.svelte';\\r\\n\\timport ContentLoader from '../_components/ContentLoader.svelte';\\r\\n\\timport PostItem from '../_components/PostItem.svelte';\\r\\n\\r\\n\\timport {\\r\\n\\t\\tproject,\\r\\n\\t\\tchannel,\\r\\n\\t\\tchannelId,\\r\\n\\t\\tshowBetaFeatures,\\r\\n\\t\\tgetIsProjectTeamMember,\\r\\n\\t\\tuser,\\r\\n\\t\\tuserId,\\r\\n\\t\\tisUserLoaded,\\r\\n\\t\\tloggingIn,\\r\\n\\t} from '../../models/appModel';\\r\\n\\r\\n\\timport {\\r\\n\\t\\tloadCurrentProject,\\r\\n\\t\\tloadCurrentChannel,\\r\\n\\t\\tnewThread,\\r\\n\\t\\tloadPost,\\r\\n\\t\\tcheckLoggedIn,\\r\\n\\t} from '../../actions/appActions';\\r\\n\\r\\n\\timport {\\r\\n\\t\\tloadUsersOfItemModels,\\r\\n\\t} from '../../models/usersModel';\\r\\n\\r\\n\\timport {\\r\\n\\t\\tgetPosts,\\r\\n\\t\\tloadingPosts,\\r\\n\\t} from '../../models/postsModel';\\r\\n\\r\\n\\timport {\\r\\n\\t\\tloadingChannels,\\r\\n\\t\\tgetChannelDefaultDescription,\\r\\n\\t} from '../../models/channelsModel';\\r\\n\\r\\n\\timport {\\r\\n\\t\\tloadingProjects,\\r\\n\\t} from '../../models/projectsModel';\\r\\n\\r\\n\\t// $: userLoading = (!($user && $user.loaded) && $userId);\\r\\n\\r\\n\\t$: projectTitleString = ($project && $project.title && $project.title + ' - ') || '';\\r\\n\\t$: isArchived = ($project && $project.archived) || false;\\r\\n\\r\\n\\tloadCurrentProject();\\r\\n\\tloadCurrentChannel();\\r\\n\\r\\n\\tconst DISPLAY_BOTTOM_LINK_POST_COUNT = 6;\\r\\n\\r\\n\\t$: sortByCreated = ($channel && $channel.sortByCreated) || false;\\r\\n\\r\\n    let posts = writable([]);\\r\\n\\t$: { posts = getPosts( { channelId: $channelId, type: 'thread', sortByCreated } ) };\\r\\n\\r\\n    $: isTeamMember = $user && getIsProjectTeamMember($project);\\r\\n\\t$: canPost = $channel && (!$channel.teamOnly || isTeamMember) && !isArchived;\\r\\n\\r\\n\\t$: channelDescription = $channel && ($channel.description || getChannelDefaultDescription($channel)) || null;\\r\\n\\r\\n    $: {\\r\\n        loadUsersOfItemModels($posts);\\r\\n    }\\r\\n\\r\\n\\tfunction newPost() {\\r\\n\\t\\tif (!canPost) { return; }\\r\\n\\t\\tif (!checkLoggedIn()) { return; }\\r\\n\\r\\n\\t\\tnewThread();\\r\\n\\t}\\r\\n</script>\\r\\n\\r\\n<svelte:head>\\r\\n\\t<title>{projectTitleString}Flock</title>\\r\\n</svelte:head>\\r\\n\\r\\n<div class=\\\"pageContent\\\">\\r\\n\\t{#if ($loadingChannels && (!$channel || $channel.id !== $channelId)) || !isUserLoaded($user, $userId, $loggingIn) || (!$project && $loadingProjects) }\\r\\n\\t\\t<ContentLoader label=\\\"{locale.LOADING.CHANNEL}\\\" />\\r\\n\\t{:else if !$channel || !$channel.id}\\r\\n\\t\\t<ContentLoader label=\\\"{locale.CHANNEL.NOT_FOUND}\\\" />\\r\\n\\t{:else}\\r\\n\\t\\t<ScrollView id=\\\"channel\\\">\\r\\n\\t\\t\\t<div slot=\\\"scrollHeader\\\">\\r\\n\\t\\t\\t\\t{#if channelDescription}\\r\\n\\t\\t\\t\\t\\t<div class=\\\"channelHeader\\\" class:channelHeaderPost=\\\"{canPost}\\\">{@html channelDescription}</div>\\r\\n\\t\\t\\t\\t{/if}\\r\\n\\t\\t\\t\\t{#if canPost}\\r\\n\\t\\t\\t\\t\\t<!-- <Proxy image=\\\"channel_actions\\\" className=\\\"channelActions\\\" /> -->\\r\\n\\t\\t\\t\\t\\t<NewPostButton onClick=\\\"{newPost}\\\" className=\\\"newPostHeader\\\" />\\r\\n\\t\\t\\t\\t{/if}\\r\\n\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t<div class=\\\"content\\\">\\r\\n\\t\\t\\t\\t<!-- <Proxy image=\\\"channel_posts\\\" className=\\\"channelPosts proxyOverlay\\\" onClick=\\\"{e => loadPost('sm2ld9p2')}\\\" /> -->\\r\\n\\t\\t\\t\\t<div class=\\\"postsContainer\\\">\\r\\n\\t\\t\\t\\t\\t{#each $posts as post}\\r\\n\\t\\t\\t\\t\\t\\t<PostItem {post} />\\r\\n\\t\\t\\t\\t\\t{:else}\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t{#if $loadingPosts && (!$posts || !$posts.length) }\\r\\n\\t\\t\\t\\t\\t\\t\\t<ContentLoader label=\\\"{locale.LOADING.CHANNEL_ITEMS}\\\" />\\r\\n\\t\\t\\t\\t\\t\\t{:else}\\r\\n\\t\\t\\t\\t\\t\\t\\t<ContentLoader>{locale.CHANNEL.NO_POSTS}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t{#if canPost}<br/>be the first to <a href=\\\"javascript:void(0)\\\" on:click=\\\"{newPost}\\\">Add a Post</a>{/if}\\r\\n\\t\\t\\t\\t\\t\\t\\t</ContentLoader>\\r\\n\\t\\t\\t\\t\\t\\t{/if}\\r\\n\\t\\t\\t\\t\\t{/each}\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t{#if canPost && $posts && $posts.length >= DISPLAY_BOTTOM_LINK_POST_COUNT}\\r\\n\\t\\t\\t\\t\\t<NewPostButton onClick=\\\"{newPost}\\\" />\\r\\n\\t\\t\\t\\t{/if}\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</ScrollView>\\r\\n\\t{/if}\\r\\n</div>\\r\\n\\r\\n<style>\\r\\n\\t/* .content :global(.proxyOverlay) {\\r\\n\\t\\tposition: absolute;\\r\\n\\t\\topacity: 0.5;\\r\\n\\t} */\\r\\n\\r\\n\\t.channelHeader {\\r\\n\\t\\tbackground-color: #ffffff;\\r\\n\\t\\tfont-size: 1.4rem;\\r\\n\\t\\tcolor: #666666;\\r\\n\\r\\n\\t\\tpadding: 16px 20px;\\r\\n\\t\\t/* margin-bottom: 5px; */\\r\\n\\t}\\r\\n\\t.channelHeaderPost {\\r\\n    \\tpadding-bottom: 0;\\r\\n\\t}\\r\\n\\r\\n\\t.pageContent :global(.newPostHeader) {\\r\\n\\t\\tmargin: 0;\\r\\n\\r\\n\\t    /* height: 54px;\\r\\n\\t\\tdisplay:flex;\\r\\n\\t\\talign-items: center;\\r\\n\\t\\tbackground-color: #ffffff; */\\r\\n\\t}\\r\\n\\r\\n\\t.content :global(.channelActions) {\\r\\n\\t\\tbox-shadow: 0 2px 3px 0 rgba(0,0,0,0.12);\\r\\n\\t}\\r\\n\\r\\n\\t.postsContainer :global(.contentLoader) {\\r\\n    \\tbackground-color: #f2f2f2;\\r\\n        font-size: 1.3rem;\\r\\n        line-height: 2.2rem;\\r\\n\\t}\\r\\n\\r\\n\\t.content :global(.channelActions) {\\r\\n\\t\\tbox-shadow: 0 2px 3px 0 rgba(0,0,0,0.12);\\r\\n\\t}\\r\\n\\r\\n\\t.content :global(.channelPosts) {\\r\\n\\t\\tmargin-top: 5px;\\r\\n\\t}\\r\\n\\r\\n\\t.content {\\r\\n\\t\\tmargin-bottom: 40px;\\r\\n\\t}\\r\\n\\r\\n\\t.postsContainer {\\r\\n    \\tpadding-top: 5px;\\r\\n\\t}\\r\\n</style>\"],\"names\":[],\"mappings\":\"AAqIC,cAAc,cAAC,CAAC,AACf,gBAAgB,CAAE,OAAO,CACzB,SAAS,CAAE,MAAM,CACjB,KAAK,CAAE,OAAO,CAEd,OAAO,CAAE,IAAI,CAAC,IAAI,AAEnB,CAAC,AACD,kBAAkB,cAAC,CAAC,AAChB,cAAc,CAAE,CAAC,AACrB,CAAC,AAED,0BAAY,CAAC,AAAQ,cAAc,AAAE,CAAC,AACrC,MAAM,CAAE,CAAC,AAMV,CAAC,AAED,sBAAQ,CAAC,AAAQ,eAAe,AAAE,CAAC,AAClC,UAAU,CAAE,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,AACzC,CAAC,AAED,6BAAe,CAAC,AAAQ,cAAc,AAAE,CAAC,AACrC,gBAAgB,CAAE,OAAO,CACtB,SAAS,CAAE,MAAM,CACjB,WAAW,CAAE,MAAM,AAC1B,CAAC,AAED,sBAAQ,CAAC,AAAQ,eAAe,AAAE,CAAC,AAClC,UAAU,CAAE,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,AACzC,CAAC,AAED,sBAAQ,CAAC,AAAQ,aAAa,AAAE,CAAC,AAChC,UAAU,CAAE,GAAG,AAChB,CAAC,AAED,QAAQ,cAAC,CAAC,AACT,aAAa,CAAE,IAAI,AACpB,CAAC,AAED,eAAe,cAAC,CAAC,AACb,WAAW,CAAE,GAAG,AACpB,CAAC\"}"
};

const DISPLAY_BOTTOM_LINK_POST_COUNT = 6;

const U5Bchannelu5D = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let $project = get_store_value(project);
	let $channel = get_store_value(channel);
	let $channelId = get_store_value(channelId);
	let $user = get_store_value(user);
	let $posts;
	let $loadingChannels = get_store_value(loadingChannels);
	let $userId = get_store_value(userId);
	let $loggingIn = get_store_value(loggingIn);
	let $loadingProjects = get_store_value(loadingProjects);
	let $loadingPosts = get_store_value(loadingPosts);
	loadCurrentProject();
	loadCurrentChannel();
	let posts = writable$1([]);
	$posts = get_store_value(posts);
	

	function newPost() {
		if (!canPost) {
			return;
		}

		if (!checkLoggedIn()) {
			return;
		}

		newThread();
	}

	$$result.css.add(css$t);
	$posts = get_store_value(posts);
	let projectTitleString = $project && $project.title && $project.title + " - " || "";
	let isArchived = $project && $project.archived || false;
	let sortByCreated = $channel && $channel.sortByCreated || false;

	 {
		{
			posts = getPosts$1({
				channelId: $channelId,
				type: "thread",
				sortByCreated
			});
		}
	}

	let isTeamMember = $user && getIsProjectTeamMember($project);
	let canPost = $channel && (!$channel.teamOnly || isTeamMember) && !isArchived;
	let channelDescription = $channel && ($channel.description || getChannelDefaultDescription($channel)) || null;

	 {
		{
			loadUsersOfItemModels($posts);
		}
	}

	return `${($$result.head += `${($$result.title = `<title>${escape(projectTitleString)}Flock</title>`, "")}`, "")}

<div class="${"pageContent svelte-3y1v3b"}">${$loadingChannels && (!$channel || $channel.id !== $channelId) || !isUserLoaded($user, $userId, $loggingIn) || !$project && $loadingProjects
	? `${validate_component(ContentLoader, "ContentLoader").$$render($$result, { label: locale$1.LOADING.CHANNEL }, {}, {})}`
	: `${!$channel || !$channel.id
		? `${validate_component(ContentLoader, "ContentLoader").$$render($$result, { label: locale$1.CHANNEL.NOT_FOUND }, {}, {})}`
		: `${validate_component(ScrollView, "ScrollView").$$render($$result, { id: "channel" }, {}, {
				scrollHeader: () => `<div slot="${"scrollHeader"}">${channelDescription
				? `<div class="${["channelHeader svelte-3y1v3b", canPost ? "channelHeaderPost" : ""].join(" ").trim()}">${channelDescription}</div>`
				: ``}
				${canPost
				? `
					${validate_component(NewPostButton, "NewPostButton").$$render(
						$$result,
						{
							onClick: newPost,
							className: "newPostHeader"
						},
						{},
						{}
					)}`
				: ``}</div>`,
				default: () => `

			<div class="${"content svelte-3y1v3b"}">
				<div class="${"postsContainer svelte-3y1v3b"}">${$posts.length
				? each($posts, post => `${validate_component(PostItem, "PostItem").$$render($$result, { post }, {}, {})}`)
				: `${$loadingPosts && (!$posts || !$posts.length)
					? `${validate_component(ContentLoader, "ContentLoader").$$render($$result, { label: locale$1.LOADING.CHANNEL_ITEMS }, {}, {})}`
					: `${validate_component(ContentLoader, "ContentLoader").$$render($$result, {}, {}, {
							default: () => `${escape(locale$1.CHANNEL.NO_POSTS)}
								${canPost
							? `<br>be the first to <a href="${"javascript:void(0)"}">Add a Post</a>`
							: ``}
							`
						})}`}`}</div>
				${canPost && $posts && $posts.length >= DISPLAY_BOTTOM_LINK_POST_COUNT
				? `${validate_component(NewPostButton, "NewPostButton").$$render($$result, { onClick: newPost }, {}, {})}`
				: ``}</div>`
			})}`}`}
</div>`;
});

var _channel_ = /*#__PURE__*/Object.freeze({
    __proto__: null,
    'default': U5Bchannelu5D
});

/* src\routes\contacts.svelte generated by Svelte v3.23.0 */

const Contacts = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	return `${($$result.head += `${($$result.title = `<title>Flock</title>`, "")}`, "")}

${validate_component(ScrollView, "ScrollView").$$render($$result, { id: "contacts" }, {}, {
		default: () => `${validate_component(Proxy, "Proxy").$$render($$result, { image: "contacts" }, {}, {
			default: () => `
		${validate_component(Hotspot, "Hotspot").$$render(
				$$result,
				{
					onClick: e => loadProfile("bl20a8lm"),
					style: "\r\n\t\t\tleft: 9px;\r\n\t\t\ttop: 46px;\r\n\t\t\twidth: 256px;\r\n\t\t\theight: 693px;"
				},
				{},
				{}
			)}

		
		${validate_component(Hotspot, "Hotspot").$$render(
				$$result,
				{
					onClick: e => loadConversation("r70dp2bf"),
					style: "\r\n\t\t\tright: 7px;\r\n\t\t\ttop: 51px;\r\n\t\t\twidth: 59px;\r\n\t\t\theight: 678px;"
				},
				{},
				{}
			)}`
		})}
`
	})}`;
});

var contacts = /*#__PURE__*/Object.freeze({
    __proto__: null,
    'default': Contacts
});

const img$p = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAACfUlEQVRYR+2X3XFTMRBGv1RAqADSQagAqABSAaSCQAWBCgIVABVAKiBUkKSCJB1ABWSORzsoa11pJXu498E74wfb0upofz5Je1q47S2cTzvATTM0GsHXkl5JeirpUNK+pN+SriTdSvoh6XxTOOb3AAJxIuldAmqtD/AHSZ9bA2v/RwGJ0vcUsd71iOhRim7v3FAE30o6K0TtLqWSSJmR8heSnjgSxhyn8V2QrQiy2E/n8VdK3UVlJeZ9LYA+641kDZBoXLrIUU/UYNSAfJMNJpIHqaFCPmqAdCKdavZe0qeQ14eDaJTT7KdvkiibkE0B+tQiGUjLqPnNEkWap2lTgHlq/qTuzZuh6dgNoFxust/CpTIFCMyj5DDsrEGdb5roEcWmlQB9etEwUrSpUSJoqVmooyOALSmKgvs0v5RUk6qV39LiyAjCbLYtQPz9zfyGMjMn4HAEfQ1uK4Kc5wi/2TCgdxRKRaAQEecv2biQFk5FBxmwA79L+SuguVhfp3tkc19TgBxp3P3MQrutrObL5mO6cAwDeklADqiZEeOiy42I0jF7HL0w1BrA30T4zp2u17yfrpOpBsjOeWPkl0/qCMjIucx8Tg7Sa0bt8T0yfzWnJSGkhfTaucwce2vQPKWFam8XNogqhK0FiKMSpC0APB3Px154ea2VQLpKJQLIIkSF3T8Pb/3fQJ4IQOdZCENGAW05biRIkH8UlbipN27TbKyUhVCz9AIaCOkEloInumbUJGnnQ4PlVoKk4YjmpI0CDmR6NaX0SqxC/m9AIP2ZzG+TkHMAdkHOBTgFuXbmzwlYglx7e88NaJBIF2K/dgwuAbCqCDvAUcG0eYuP4D1LqnwpPQxp6gAAAABJRU5ErkJggg==";

/* src\routes\_components\SearchBar.svelte generated by Svelte v3.23.0 */

const css$u = {
	code: ".searchBar.svelte-msqgp2{width:100%}.searchBarField.svelte-msqgp2{position:relative;margin:15px 16px;border-radius:100px;background-color:rgba(0, 0, 0, 0.05)}.searchButton.svelte-msqgp2{position:absolute;right:-3px;top:0;bottom:0;padding:10px;cursor:pointer;display:flex;align-items:center}.searchIcon.svelte-msqgp2{width:20px;height:20px;background-size:cover;margin-top:-2px}.searchFieldInput.svelte-msqgp2{border:none;outline:none;background:none;width:100%;box-sizing:border-box;font-size:1.5rem;padding:6px 12px;padding-right:28px}",
	map: "{\"version\":3,\"file\":\"SearchBar.svelte\",\"sources\":[\"SearchBar.svelte\"],\"sourcesContent\":[\"<script>\\n    import locale from '../../locale';\\n\\n    import { testInputDefocus } from '../../utils';\\n\\n    import SearchIcon from \\\"../../assets/icons/search.png\\\";\\n    import ClearIcon from \\\"../../assets/icons/clear.png\\\";\\n\\n    export let searchString = '';\\n\\n    let input;\\n\\n    function selectSearchIcon() {\\n        if (searchString) {\\n            searchString = '';\\n        } else {\\n            focusInput();\\n        }\\n    }\\n\\n    function focusInput() {\\n        if (input) {\\n            input.focus();\\n        }\\n    }\\n</script>\\n\\n<div class=\\\"searchBar\\\">\\n    <div class=\\\"searchBarField\\\">\\n        <div class=\\\"searchButton\\\" on:click=\\\"{selectSearchIcon}\\\">\\n            <div class=\\\"searchIcon\\\" style=\\\"background-image: url({searchString ? ClearIcon : SearchIcon})\\\" />\\n        </div>\\n        <input bind:this=\\\"{input}\\\" class=\\\"searchFieldInput\\\" type=\\\"text\\\" bind:value=\\\"{searchString}\\\" placeholder=\\\"{locale.GENERAL.SEARCH_PLACEHOLDER}\\\" on:keypress=\\\"{testInputDefocus}\\\" />\\n    </div>\\n</div>\\n\\n<style>\\n    .searchBar {\\n        width: 100%;\\n    }\\n\\n    .searchBarField {\\n        position: relative;\\n        margin: 15px 16px;\\n\\n        border-radius: 100px;\\n        background-color: rgba(0, 0, 0, 0.05);\\n    }\\n\\n    .searchButton {\\n        position: absolute;\\n        right: -3px;\\n        top: 0;\\n        bottom: 0;\\n\\n        padding: 10px;\\n\\n        cursor: pointer;\\n\\n\\t\\tdisplay: flex;\\n\\t\\talign-items: center;\\n    }\\n\\n    .searchIcon {\\n        width: 20px;\\n        height: 20px;\\n        background-size: cover;\\n        margin-top: -2px;\\n    }\\n\\n    .searchFieldInput {\\n        border: none;\\n        outline: none;\\n        background: none;\\n\\n        width: 100%;\\n        box-sizing: border-box;\\n\\n        font-size: 1.5rem;\\n        padding: 6px 12px;\\n        padding-right: 28px;\\n    }\\n</style>\"],\"names\":[],\"mappings\":\"AAqCI,UAAU,cAAC,CAAC,AACR,KAAK,CAAE,IAAI,AACf,CAAC,AAED,eAAe,cAAC,CAAC,AACb,QAAQ,CAAE,QAAQ,CAClB,MAAM,CAAE,IAAI,CAAC,IAAI,CAEjB,aAAa,CAAE,KAAK,CACpB,gBAAgB,CAAE,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,AACzC,CAAC,AAED,aAAa,cAAC,CAAC,AACX,QAAQ,CAAE,QAAQ,CAClB,KAAK,CAAE,IAAI,CACX,GAAG,CAAE,CAAC,CACN,MAAM,CAAE,CAAC,CAET,OAAO,CAAE,IAAI,CAEb,MAAM,CAAE,OAAO,CAErB,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,MAAM,AACjB,CAAC,AAED,WAAW,cAAC,CAAC,AACT,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,eAAe,CAAE,KAAK,CACtB,UAAU,CAAE,IAAI,AACpB,CAAC,AAED,iBAAiB,cAAC,CAAC,AACf,MAAM,CAAE,IAAI,CACZ,OAAO,CAAE,IAAI,CACb,UAAU,CAAE,IAAI,CAEhB,KAAK,CAAE,IAAI,CACX,UAAU,CAAE,UAAU,CAEtB,SAAS,CAAE,MAAM,CACjB,OAAO,CAAE,GAAG,CAAC,IAAI,CACjB,aAAa,CAAE,IAAI,AACvB,CAAC\"}"
};

const SearchBar = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let { searchString = "" } = $$props;
	let input;

	if ($$props.searchString === void 0 && $$bindings.searchString && searchString !== void 0) $$bindings.searchString(searchString);
	$$result.css.add(css$u);

	return `<div class="${"searchBar svelte-msqgp2"}"><div class="${"searchBarField svelte-msqgp2"}"><div class="${"searchButton svelte-msqgp2"}"><div class="${"searchIcon svelte-msqgp2"}" style="${"background-image: url(" + escape(searchString ? img$d : img$p) + ")"}"></div></div>
        <input class="${"searchFieldInput svelte-msqgp2"}" type="${"text"}"${add_attribute("placeholder", locale$1.GENERAL.SEARCH_PLACEHOLDER, 0)}${add_attribute("this", input, 1)}${add_attribute("value", searchString, 1)}></div>
</div>`;
});

/* src\routes\_components\FilterBar.svelte generated by Svelte v3.23.0 */

const css$v = {
	code: ".filterBar.svelte-jjncoj.svelte-jjncoj{width:100%;background-color:#ffffff;padding-bottom:10px}.filterScrollRegion.svelte-jjncoj.svelte-jjncoj{overflow-x:scroll;overflow-y:hidden;-ms-overflow-style:none;white-space:nowrap}.filterBar.svelte-jjncoj.svelte-jjncoj .filterScrollRegion::-webkit-scrollbar{display:none}.filterSet.svelte-jjncoj.svelte-jjncoj{padding-left:17px;padding-right:10px;white-space:nowrap;display:inline-block}.filterBar.isCategorySelector.svelte-jjncoj.svelte-jjncoj{padding-bottom:0}.filterBar.isCategorySelector.svelte-jjncoj.svelte-jjncoj{white-space:normal}.filterBar.isCategorySelector.svelte-jjncoj .filterSet.svelte-jjncoj{white-space:normal;padding:0;padding-top:4px;padding-right:6px}.filterBar.isCategorySelector.svelte-jjncoj.svelte-jjncoj .filterButton{margin-bottom:6px}.filterSet.svelte-jjncoj.svelte-jjncoj .filterButton{display:inline-block;background-color:#EEEEEE;border-radius:100px;font-size:1.5rem;padding:2px 10px;margin-right:5px;color:#0D0D0D}.filterSet.svelte-jjncoj.svelte-jjncoj .selectedItem{border:2px solid #242424;background-color:initial;padding:0px 8px}.filterSet.svelte-jjncoj.svelte-jjncoj .buttonContent{display:inline-block;user-select:text}",
	map: "{\"version\":3,\"file\":\"FilterBar.svelte\",\"sources\":[\"FilterBar.svelte\"],\"sourcesContent\":[\"<script>\\n    import Button from '../../components/Button.svelte';\\n    // import TagSet from './TagSet.svelte';\\n\\n    import { onMount, tick } from 'svelte';\\n\\n    export let filterString = '';\\n\\n    export let isCategorySelector = false;\\n\\n    const deselectOtherOnCategory = true;\\n\\n    // , 'narrative'\\n    let itemSet = ['design', 'arts', 'tech', 'environment', 'community', 'apps', 'games', 'music', 'media', 'education', 'food'];\\n\\n    $: items = isCategorySelector ? [...itemSet, 'other'] : ['all', ...itemSet];\\n\\n    $: allowMultiSelect = isCategorySelector;\\n\\n    function selectFilter(filterValue) {\\n        // selectingItem = true;\\n\\n        // await tick();\\n        // console.log('set value');\\n\\n        // console.log('before filterString', filterString);\\n\\n        if (filterValue === 'all') {\\n            filterString = '';\\n        } else {\\n            if (allowMultiSelect) {\\n                if (filterValue) {\\n                    let curFilterItems = filterString.trim().split(', ');\\n\\n                    if (deselectOtherOnCategory) {\\n                        if ((filterValue === 'other' || filterString === 'other') && (filterValue !== filterString)) {\\n                            curFilterItems = [];\\n                        }\\n                    }\\n\\n                    const curItemIndex = curFilterItems.indexOf(filterValue);\\n                    // console.log('curItemIndex', curItemIndex);\\n                    if (curItemIndex !== -1) {\\n                        curFilterItems.splice(curItemIndex, 1);\\n                    } else {\\n                        curFilterItems.push(filterValue);\\n                    }\\n                    curFilterItems = curFilterItems.filter(item => item);\\n\\n                    filterString = curFilterItems.join(', ').trim();\\n                }\\n            } else {\\n                filterString = filterValue;\\n            }\\n        }\\n\\n        // console.log('after filterString', filterString);\\n\\n        // await tick();\\n        // console.log('stop set value');\\n        // selectingItem = false;\\n    }\\n\\n    $: {\\n        filterString;\\n        if (mounted) {\\n            (async () => {\\n                await tick();\\n                scrollToSelectedItem();\\n            })();\\n        }\\n    }\\n\\n    let scrollRegion;\\n    let mounted = false;\\n\\n    // let selectingItem;\\n\\n    const SCROLL_FOCUS_MARGIN = 10;\\n    const SCROLL_FOCUS_OFFSET = 40;\\n\\n    onMount(() => {\\n        mounted = true;\\n    });\\n\\n    function scrollToSelectedItem() {\\n        // console.log('update value ' + selectingItem);\\n        if (scrollRegion) { //  && !selectingItem\\n            const selectedElementArray = scrollRegion.getElementsByClassName('selectedItem');\\n            const selectedElement = selectedElementArray && selectedElementArray.length ? selectedElementArray[0] : null;\\n            if (selectedElement) {\\n                const selectedElementLeft = selectedElement.offsetLeft;\\n                const selectedElementRight = selectedElement.offsetLeft + selectedElement.offsetWidth;\\n                const scrollRegionWidth = scrollRegion.offsetWidth;\\n                const scrollRegionLeft = scrollRegion.scrollLeft;\\n                const scrollRegionRight = scrollRegion.scrollLeft + scrollRegionWidth;\\n\\n                // console.log('offset: ' + (selectedElement.offsetLeft + selectedElement.offsetWidth) + ' width: ' + scrollRegionWidth);\\n                // console.log(selectedElementRight + ' > ' + (scrollRegion.scrollLeft + scrollRegionWidth - SCROLL_FOCUS_MARGIN));\\n                // if (selectedElement.offsetLeft + selectedElement.offsetWidth > scrollRegionWidth) {\\n                if (selectedElementRight < scrollRegionWidth - SCROLL_FOCUS_MARGIN) {\\n                    // console.log('reset ' + selectedElementRight + ' < ' + (scrollRegionWidth - SCROLL_FOCUS_MARGIN));\\n                    // console.log('set scroll ' + 0);\\n                    scrollRegion.scrollTo(0, 0);\\n                } else if (selectedElementRight > scrollRegionRight - SCROLL_FOCUS_MARGIN\\n                || selectedElementLeft < scrollRegionLeft + SCROLL_FOCUS_MARGIN) {\\n                    const offsetX = selectedElement.offsetLeft - SCROLL_FOCUS_OFFSET;\\n                    // console.log('set scroll: ' + offsetX);\\n                    scrollRegion.scrollTo(offsetX, 0);\\n                }\\n            }\\n        }\\n    }\\n</script>\\n\\n<div class=\\\"filterBar\\\" class:isCategorySelector=\\\"{isCategorySelector}\\\">\\n    <!-- <TagSet tags=\\\"{items}\\\" /> -->\\n\\n    <div class=\\\"filterScrollRegion\\\" bind:this=\\\"{scrollRegion}\\\">\\n        <div class=\\\"filterSet\\\">\\n            {#each items as item, index}\\n                <Button className=\\\"filterButton {((index || isCategorySelector) ? filterString.match(new RegExp('\\\\\\\\b' + item + '\\\\\\\\b')) : filterString === '') ? 'selectedItem' : ''}\\\" onClick={e => selectFilter(item)}>{item}</Button>\\n            {/each}\\n        </div>\\n    </div>\\n</div>\\n\\n<style>\\n    .filterBar {\\n        width: 100%;\\n        background-color: #ffffff;\\n        padding-bottom: 10px;\\n    }\\n\\n    .filterScrollRegion {\\n        overflow-x: scroll;\\n        overflow-y: hidden;\\n        -ms-overflow-style: none; /* Hide scrollbar for IE and Edge */\\n        white-space: nowrap;\\n\\t}\\n\\t.filterBar :global(.filterScrollRegion::-webkit-scrollbar) { /* Hide scrollbar for Chrome, Safari and Opera */\\n        display: none;\\n    }\\n\\n    .filterSet {\\n        padding-left: 17px;\\n        padding-right: 10px;\\n        white-space: nowrap;\\n        display: inline-block;\\n    }\\n\\n    .filterBar.isCategorySelector {\\n        padding-bottom: 0;\\n    }\\n\\n    .filterBar.isCategorySelector {\\n        white-space: normal;\\n    }\\n    .filterBar.isCategorySelector .filterSet {\\n        white-space: normal;\\n        padding: 0;\\n        /* padding-left: 6px; */\\n        padding-top: 4px;\\n        padding-right: 6px;\\n    }\\n    .filterBar.isCategorySelector :global(.filterButton) {\\n        margin-bottom: 6px;\\n    }\\n\\n    .filterSet :global(.filterButton) {\\n        display: inline-block;\\n        background-color: #EEEEEE;\\n\\n        border-radius: 100px;\\n\\n        font-size: 1.5rem;\\n\\n        padding: 2px 10px;\\n\\n        margin-right: 5px;\\n        /* margin-bottom: 8px; */\\n\\n        color: #0D0D0D;\\n    }\\n\\n    .filterSet :global(.selectedItem) {\\n        border: 2px solid #242424;\\n        background-color: initial;\\n\\n        padding: 0px 8px;\\n    }\\n\\n\\n    .filterSet :global(.buttonContent) {\\n        display: inline-block;\\n        user-select: text;\\n    }\\n</style>\"],\"names\":[],\"mappings\":\"AAgII,UAAU,4BAAC,CAAC,AACR,KAAK,CAAE,IAAI,CACX,gBAAgB,CAAE,OAAO,CACzB,cAAc,CAAE,IAAI,AACxB,CAAC,AAED,mBAAmB,4BAAC,CAAC,AACjB,UAAU,CAAE,MAAM,CAClB,UAAU,CAAE,MAAM,CAClB,kBAAkB,CAAE,IAAI,CACxB,WAAW,CAAE,MAAM,AAC1B,CAAC,AACD,sCAAU,CAAC,AAAQ,sCAAsC,AAAE,CAAC,AACrD,OAAO,CAAE,IAAI,AACjB,CAAC,AAED,UAAU,4BAAC,CAAC,AACR,YAAY,CAAE,IAAI,CAClB,aAAa,CAAE,IAAI,CACnB,WAAW,CAAE,MAAM,CACnB,OAAO,CAAE,YAAY,AACzB,CAAC,AAED,UAAU,mBAAmB,4BAAC,CAAC,AAC3B,cAAc,CAAE,CAAC,AACrB,CAAC,AAED,UAAU,mBAAmB,4BAAC,CAAC,AAC3B,WAAW,CAAE,MAAM,AACvB,CAAC,AACD,UAAU,iCAAmB,CAAC,UAAU,cAAC,CAAC,AACtC,WAAW,CAAE,MAAM,CACnB,OAAO,CAAE,CAAC,CAEV,WAAW,CAAE,GAAG,CAChB,aAAa,CAAE,GAAG,AACtB,CAAC,AACD,UAAU,+CAAmB,CAAC,AAAQ,aAAa,AAAE,CAAC,AAClD,aAAa,CAAE,GAAG,AACtB,CAAC,AAED,sCAAU,CAAC,AAAQ,aAAa,AAAE,CAAC,AAC/B,OAAO,CAAE,YAAY,CACrB,gBAAgB,CAAE,OAAO,CAEzB,aAAa,CAAE,KAAK,CAEpB,SAAS,CAAE,MAAM,CAEjB,OAAO,CAAE,GAAG,CAAC,IAAI,CAEjB,YAAY,CAAE,GAAG,CAGjB,KAAK,CAAE,OAAO,AAClB,CAAC,AAED,sCAAU,CAAC,AAAQ,aAAa,AAAE,CAAC,AAC/B,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CACzB,gBAAgB,CAAE,OAAO,CAEzB,OAAO,CAAE,GAAG,CAAC,GAAG,AACpB,CAAC,AAGD,sCAAU,CAAC,AAAQ,cAAc,AAAE,CAAC,AAChC,OAAO,CAAE,YAAY,CACrB,WAAW,CAAE,IAAI,AACrB,CAAC\"}"
};

const FilterBar = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let { filterString = "" } = $$props;
	let { isCategorySelector = false } = $$props;

	// , 'narrative'
	let itemSet = [
		"design",
		"arts",
		"tech",
		"environment",
		"community",
		"apps",
		"games",
		"music",
		"media",
		"education",
		"food"
	];

	function selectFilter(filterValue) {
		// selectingItem = true;
		// await tick();
		// console.log('set value');
		// console.log('before filterString', filterString);
		if (filterValue === "all") {
			filterString = "";
		} else {
			if (allowMultiSelect) {
				if (filterValue) {
					let curFilterItems = filterString.trim().split(", ");

					{
						if ((filterValue === "other" || filterString === "other") && filterValue !== filterString) {
							curFilterItems = [];
						}
					}

					const curItemIndex = curFilterItems.indexOf(filterValue);

					// console.log('curItemIndex', curItemIndex);
					if (curItemIndex !== -1) {
						curFilterItems.splice(curItemIndex, 1);
					} else {
						curFilterItems.push(filterValue);
					}

					curFilterItems = curFilterItems.filter(item => item);
					filterString = curFilterItems.join(", ").trim();
				}
			} else {
				filterString = filterValue;
			}
		}
	} // console.log('after filterString', filterString);
	// await tick();

	let scrollRegion;
	let mounted = false;

	onMount(() => {
		mounted = true;
	});

	if ($$props.filterString === void 0 && $$bindings.filterString && filterString !== void 0) $$bindings.filterString(filterString);
	if ($$props.isCategorySelector === void 0 && $$bindings.isCategorySelector && isCategorySelector !== void 0) $$bindings.isCategorySelector(isCategorySelector);
	$$result.css.add(css$v);

	let items = isCategorySelector
	? [...itemSet, "other"]
	: ["all", ...itemSet];

	let allowMultiSelect = isCategorySelector;

	 {
		{

			if (mounted) {
				(async () => {
					await tick();
				})();
			}
		}
	}

	return `<div class="${["filterBar svelte-jjncoj", isCategorySelector ? "isCategorySelector" : ""].join(" ").trim()}">

    <div class="${"filterScrollRegion svelte-jjncoj"}"${add_attribute("this", scrollRegion, 1)}><div class="${"filterSet svelte-jjncoj"}">${each(items, (item, index) => `${validate_component(Button, "Button").$$render(
		$$result,
		{
			className: "filterButton " + ((index || isCategorySelector
			? filterString.match(new RegExp("\\b" + item + "\\b"))
			: filterString === "")
			? "selectedItem"
			: ""),
			onClick: e => selectFilter(item)
		},
		{},
		{ default: () => `${escape(item)}` }
	)}`)}</div></div>
</div>`;
});

const img$q = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAqCAYAAADbCvnoAAABr0lEQVRYR+3YzVXDMAwAYCkTdATXyZ2OABvABDQTUCaATkA3IGzQDWADuoAdjwALODy/l1xCE8l/eT3U1yrWV1m20yJc2MAL88AVRK0Iq0JCiFVRFC8AsO0nPGit99TkIZ+ToB7zCQCbUYJGa12HJJ17hgRJKU8AcDMxSXLULEhKuQOAN6IKSVGzoPV63SDiI2NZjtba2hjzw4idDUlRoSHByVp7F4uK7aHxt41GkaB+l33NNHZSFAly2ZZEsUBLotigYV08dp57xLunvEEuS05UECgnKhiUCxUFyoGKBqVGJQEFoJ611odzl1oykBBiUxTFN/Ny3WutX7OBeox7iVtxQIj4oJQ6ZgH5Yrqu+2jbdngV/meKWrLUGKcLBuXABINyYYJAvhgAmNxR0U3ti0HEWinVcHbeEMPuoSUw7CVbCsMCLYkhQUII0V8H3BPYu2fG/UX9LnP3jfuTgRwhDey9y6SU7kZ+ojSpMOSSVVV1a611l+bkSIkhQS6gLMtt13XvZ8sbcM6Q1aYCJlC/iLjzPfQ4uXwPxns3qbW2McYYTgLfGDbId+LQ+CuIqtwfGLv4K60SNGkAAAAASUVORK5CYII=";

const img$r = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEoAAAAsCAYAAADCfS42AAACEklEQVRoQ+3a3W2DMBAA4DMskBU6QTtC+h6jbNBmgq6QTNBukIyAAuK1HSEjZIT2nZ/KlYgcCuQw/jkceEpkB/CXs302MJgPlABD1ZorwQyFDIIZqgG1Wq2WaZp+Nf3+Qa3X60We529pmu6Q2N5U45y/AsCeMbY7Ho9buWFXUAKpLMvPqqqeAOCQJMnGG4UbDamRpGqbJEkO9fcLVAOpLr8LrBakv/aHYfgQx/FZfL6CKopC9M3HBr7XWF1IANAeUQJHRNU9YWGRriKqjqIuLMbYKQiC5ziOv30Yt4YgtUL1RZYvWEOROqF8xlJB6oXyEUsV6SaUT1hjkFBQPmC1IVVV9VOW5TLLshNmckKv9aY6G+pAQkfUVFMHXUiDoabUDXUiKUFNAUs3kjIUZSwTSKOgKGKZQhoNRQmLc74HALHxdjmGpgB9aQI6Peg7ievUwTSSlohynTrYQNIK5aIb2kLSDmUTyyaSESgbWLaRjEGZxHKBZBRKwvoAgBd51lTdKXWFZByqxuGci+djo7BcIlmDEhcag+UaySqUKhYFJOtQQ7GoIDmBwmJRQnIGdQurKIp3kwvcvnVrV5mWRbHKhbuwAEA8iV7I59S5C6B6r06herAu7aGA5LTryf9sW+ogyqkgkYFqiyxKSKSgZCxqSOSgxA1FUbQNguBQv+mmOvjq/p3zwVx3g0ydb4ZCys5QSKhfUhF4S0OVba0AAAAASUVORK5CYII=";

/* src\routes\_components\HomeIntro.svelte generated by Svelte v3.23.0 */

const css$w = {
	code: ".homeIntro.svelte-1qao9wg{position:relative;background-color:#ffffff;padding-bottom:2px}.homeIntro.svelte-1qao9wg .filterButton{background-color:initial}.homeIntro.svelte-1qao9wg .filterButton.selectedItem{padding:0px 6px;border-radius:0;border:none;border-bottom:2px solid #242424}.button.svelte-1qao9wg{cursor:pointer}.headerRegion.svelte-1qao9wg{position:relative;width:100%;padding-top:39%;background-image:url('https://flock-hub.s3-us-west-2.amazonaws.com/static/intro_image.jpg');background-size:cover;background-position:center}.header.svelte-1qao9wg{padding-top:14px;padding-left:23px;padding-right:23px;color:#222222}.title.svelte-1qao9wg{font-size:2rem;line-height:2.5rem;font-weight:700;padding-top:5px;padding-bottom:12px}.headerText.svelte-1qao9wg{font-size:1.6rem;line-height:2.2rem;padding-bottom:6px}.actions.svelte-1qao9wg{position:relative;display:flex;justify-content:center}.actions.svelte-1qao9wg{position:relative;padding:0 23px;padding-bottom:4px}.homeIntro.svelte-1qao9wg .signUpButton{display:inline-block}.homeIntro.svelte-1qao9wg .signUpButton .buttonContent{margin:11px;margin-top:15px;margin-top:8px;padding:8px 21px;font-size:1.5rem;font-weight:700;background-color:#222222;border-radius:999px;color:#ffffff}.homeIntro.svelte-1qao9wg .signInButton{display:inline-block}.homeIntro.svelte-1qao9wg .signInButton .buttonContent{margin:11px;margin-right:13px;margin-left:6px;margin-top:15px;padding:6px 14px;font-size:1.5rem;font-weight:700;border:2px solid #222222;border-radius:999px;color:#222222}.readMoreContainer.svelte-1qao9wg{padding-bottom:4px}.homeIntro.svelte-1qao9wg .readMoreButton{display:inline-block;padding:10px;padding-right:30px;padding-left:23px;font-size:1.3rem;font-weight:700}.homeIntro.svelte-1qao9wg .readMoreButton .icon{padding-left:13px}.discoverIndicatorContainer.svelte-1qao9wg{display:flex;justify-content:center;margin-top:-3px;padding-bottom:4px}.homeIntro.svelte-1qao9wg .discoverIndicator{padding-bottom:42px;font-size:1.5rem}.homeIntro.svelte-1qao9wg .discoverIndicator .icon{transform-origin:top;transform:scale(0.3, 0.3)}.homeIntro.svelte-1qao9wg .discoverIndicator .iconContainer{display:block;position:absolute;padding-top:8px;left:50%}.homeIntro.svelte-1qao9wg .discoverIndicator .iconInnerContainer{justify-content:center;align-items:initial}",
	map: "{\"version\":3,\"file\":\"HomeIntro.svelte\",\"sources\":[\"HomeIntro.svelte\"],\"sourcesContent\":[\"<script>\\n    import locale from '../../locale';\\n    import config from '../../config';\\n\\n    import Button from '../../components/Button.svelte';\\n\\n    import Proxy from '../../components/Proxy.svelte';\\n\\n    import promptIds from '../../config/promptIds';\\n\\n    import MoreArrowIcon from \\\"../../assets/icons/next_arrow.png\\\";\\n    import DiscoverArrowIcon from \\\"../../assets/icons/discover_arrow_icon.png\\\";\\n\\n\\timport FilterBar from './../_components/FilterBar.svelte';\\n\\n    import { loadProject } from '../../actions/appActions';\\n\\n    import {\\n        user,\\n\\t\\tdiscoverFilterString,\\n    } from '../../models/appModel';\\n\\n    import {\\n        showPrompt,\\n    } from '../../actions/appActions';\\n\\n    export let onDiscoverScrollDown = null;\\n\\n    $: loggedIn = !!$user;\\n\\n    function signIn() {\\n\\t\\tshowPrompt(promptIds.LOG_IN);\\n    }\\n    function signUp() {\\n\\t\\tshowPrompt(promptIds.SIGN_UP);\\n    }\\n    function showFlockInfo() {\\n        loadProject(config.FLOCK_PROJECT, { showInfo: true });\\n    }\\n</script>\\n\\n<div class=\\\"homeIntro\\\">\\n\\t<!-- <Proxy image=\\\"home_intro\\\" className=\\\"proxyOverview\\\" /> -->\\n\\n    <div class=\\\"headerRegion button\\\" on:click=\\\"{showFlockInfo}\\\"></div>\\n\\n    <div class=\\\"header button\\\" on:click=\\\"{showFlockInfo}\\\">\\n        <div class=\\\"title\\\">{@html locale.HOME_INTRO.TITLE}</div>\\n        <div class=\\\"headerText\\\">{@html locale.HOME_INTRO.HEADER_TEXT}</div>\\n    </div>\\n\\n    <!-- <div class=\\\"panelContent button\\\" on:click=\\\"{showFlockInfo}\\\">\\n        <div class=\\\"introText\\\">{@html locale.HOME_INTRO.INTRO_TEXT}</div>\\n    </div> -->\\n\\n    <div class=\\\"readMoreContainer\\\">\\n        <Button className=\\\"readMoreButton\\\" onClick=\\\"{showFlockInfo}\\\" icon=\\\"{MoreArrowIcon}\\\">{locale.HOME_INTRO.LEARN_MORE}</Button>\\n    </div>\\n\\n    {#if !loggedIn}\\n        <div class=\\\"actions\\\">\\n            <!-- <Button className=\\\"readMoreButton\\\" onClick=\\\"{e => { loadProject(config.FLOCK_PROJECT, { showInfo: true }); }}\\\" icon=\\\"{MoreArrowIcon}\\\">{locale.HOME_INTRO.LEARN_MORE}</Button> -->\\n            <div class=\\\"actionButtonsContainer\\\">\\n                <!-- <Button className=\\\"signInButton\\\" onClick=\\\"{signIn}\\\">{locale.HOME_INTRO.SIGN_IN}</Button> -->\\n                <Button className=\\\"signUpButton\\\" onClick=\\\"{signUp}\\\">{locale.HOME_INTRO.SIGN_UP}</Button>\\n            </div>\\n        </div>\\n    {/if}\\n\\n    <div class=\\\"discoverIndicatorContainer\\\">\\n        <Button className=\\\"discoverIndicator\\\" icon=\\\"{DiscoverArrowIcon}\\\" onClick=\\\"{onDiscoverScrollDown}\\\">{locale.HOME_INTRO.DISCOVER}</Button>\\n    </div>\\n\\n\\t<FilterBar bind:filterString={$discoverFilterString} />\\n</div>\\n\\n<style>\\n\\t/* .homeIntro :global(.proxyOverview) {\\n\\t\\tposition: absolute;\\n        opacity: 0.5;\\n    } */\\n\\n    .homeIntro {\\n        position: relative;\\n        /* height: 520px; */\\n        background-color: #ffffff;\\n        padding-bottom: 2px;\\n    }\\n\\n    .homeIntro :global(.filterButton) {\\n        background-color: initial;\\n    }\\n\\n    .homeIntro :global(.filterButton.selectedItem) {\\n        padding: 0px 6px;\\n        border-radius: 0;\\n        border: none;\\n        border-bottom: 2px solid #242424;\\n    }\\n\\n    .button {\\n        cursor: pointer;\\n    }\\n\\n    .headerRegion {\\n        position: relative;\\n        width: 100%;\\n        padding-top: 39%;\\n        /* padding-top: 35.5%; */\\n        /* height: 200px; */\\n        /* padding-top: 59%; */\\n        background-image: url('https://flock-hub.s3-us-west-2.amazonaws.com/static/intro_image.jpg');\\n        /* background-image: url('../assets/intro_image.jpg'); */\\n        background-size: cover;\\n        background-position: center;\\n    }\\n\\n    .header {\\n        /* position: absolute;\\n        bottom: 0;\\n        padding-bottom: 27px; */\\n\\n        padding-top: 14px;\\n        padding-left: 23px;\\n        padding-right: 23px;\\n        /* padding-bottom: 21px; */\\n\\n        color: #222222;\\n        /* color: #ffffff; */\\n    }\\n\\n    .title {\\n        font-size: 2rem;\\n        line-height: 2.5rem;\\n\\n        /* font-size: 2.4rem;\\n        padding-bottom: 5px; */\\n\\n        font-weight: 700;\\n        padding-top: 5px;\\n        padding-bottom: 12px;\\n    }\\n\\n    .headerText {\\n        font-size: 1.6rem;\\n\\n        line-height: 2.2rem;\\n        padding-bottom: 6px;\\n\\n        /* font-weight: 700;\\n        line-height: 1.8rem; */\\n    }\\n\\n    .panelContent {\\n        padding-left: 23px;\\n        padding-top: 18px;\\n        padding-right: 54px;\\n        padding-bottom: 6px;\\n        /* padding-top: 23px; */\\n    }\\n\\n    .introText {\\n        font-size: 1.4rem;\\n        line-height: 2rem;\\n    }\\n\\n    .actions {\\n        position: relative;\\n\\t\\tdisplay: flex;\\n\\t\\tjustify-content: center;\\n        /* padding: 0 23px;\\n        padding-bottom: 6px; */\\n    }\\n\\n    .actions {\\n        position: relative;\\n        padding: 0 23px;\\n        padding-bottom: 4px;\\n        /* padding-bottom: 2px; */\\n    }\\n\\n    .homeIntro :global(.signUpButton) {\\n        display: inline-block;\\n\\n        /* margin-left: -9px; */\\n        /* margin-left: -6px; */\\n    }\\n    .homeIntro :global(.signUpButton .buttonContent) {\\n        margin: 11px;\\n        margin-top: 15px;\\n\\n        /* margin-right: 13px;\\n        margin-left: 6px; */\\n\\n        margin-top: 8px;\\n\\n        padding: 8px 21px;\\n\\n        font-size: 1.5rem;\\n        font-weight: 700;\\n\\n        background-color: #222222;\\n        border-radius: 999px;\\n        color: #ffffff;\\n    }\\n\\n    .homeIntro :global(.signInButton) {\\n        display: inline-block;\\n        /* margin-left: -9px; */\\n    }\\n    .homeIntro :global(.signInButton .buttonContent) {\\n        margin: 11px;\\n        margin-right: 13px;\\n        margin-left: 6px;\\n        margin-top: 15px;\\n\\n        padding: 6px 14px;\\n\\n        font-size: 1.5rem;\\n        font-weight: 700;\\n\\n        /* background-color: #222222; */\\n        border: 2px solid #222222;\\n        border-radius: 999px;\\n        color: #222222;\\n    }\\n\\n    .readMoreContainer {\\n        /* position: relative;\\n        height: 24px; */\\n        padding-bottom: 4px;\\n    }\\n\\n    .homeIntro :global(.readMoreButton) {\\n        /* position: absolute;\\n        top: -13px;\\n        right: 15px; */\\n        /* top: 12px; */\\n\\n        display: inline-block;\\n\\n        padding: 10px;\\n        padding-right: 30px;\\n\\n        padding-left: 23px;\\n\\n        font-size: 1.3rem;\\n        /* font-size: 1.5rem; */\\n        font-weight: 700;\\n    }\\n    .homeIntro :global(.readMoreButton .icon) {\\n        padding-left: 13px;\\n    }\\n\\n    .discoverIndicatorContainer {\\n\\t\\tdisplay: flex;\\n\\t\\tjustify-content: center;\\n        margin-top: -3px;\\n\\n        /* padding-top: 5px;\\n        padding-bottom: 10px; */\\n\\n        padding-bottom: 4px;\\n        /* padding-bottom: 8px; */\\n    }\\n\\n    .homeIntro :global(.discoverIndicator) {\\n        /* padding: 10px; */\\n        padding-bottom: 42px;\\n\\n        font-size: 1.5rem;\\n        /* font-size: 1.7rem; */\\n    }\\n    .homeIntro :global(.discoverIndicator .icon) {\\n        transform-origin: top;\\n\\n        transform: scale(0.3, 0.3);\\n    }\\n    .homeIntro :global(.discoverIndicator .iconContainer) {\\n        display: block;\\n        position: absolute;\\n        padding-top: 8px;\\n        left: 50%;\\n    }\\n    .homeIntro :global(.discoverIndicator .iconInnerContainer) {\\n        justify-content: center;\\n        align-items: initial;\\n    }\\n\\n</style>\"],\"names\":[],\"mappings\":\"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\"}"
};

const HomeIntro = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let $user = get_store_value(user);
	let $discoverFilterString = get_store_value(discoverFilterString);
	let { onDiscoverScrollDown = null } = $$props;

	function signUp() {
		showPrompt(promptIds.SIGN_UP);
	}

	function showFlockInfo() {
		loadProject(config$1.FLOCK_PROJECT, { showInfo: true });
	}

	if ($$props.onDiscoverScrollDown === void 0 && $$bindings.onDiscoverScrollDown && onDiscoverScrollDown !== void 0) $$bindings.onDiscoverScrollDown(onDiscoverScrollDown);
	$$result.css.add(css$w);
	let $$settled;
	let $$rendered;

	do {
		$$settled = true;
		let loggedIn = !!$user;

		$$rendered = `<div class="${"homeIntro svelte-1qao9wg"}">

    <div class="${"headerRegion button svelte-1qao9wg"}"></div>

    <div class="${"header button svelte-1qao9wg"}"><div class="${"title svelte-1qao9wg"}">${locale$1.HOME_INTRO.TITLE}</div>
        <div class="${"headerText svelte-1qao9wg"}">${locale$1.HOME_INTRO.HEADER_TEXT}</div></div>

    

    <div class="${"readMoreContainer svelte-1qao9wg"}">${validate_component(Button, "Button").$$render(
			$$result,
			{
				className: "readMoreButton",
				onClick: showFlockInfo,
				icon: img$q
			},
			{},
			{
				default: () => `${escape(locale$1.HOME_INTRO.LEARN_MORE)}`
			}
		)}</div>

    ${!loggedIn
		? `<div class="${"actions svelte-1qao9wg"}">
            <div class="${"actionButtonsContainer"}">
                ${validate_component(Button, "Button").$$render(
				$$result,
				{
					className: "signUpButton",
					onClick: signUp
				},
				{},
				{
					default: () => `${escape(locale$1.HOME_INTRO.SIGN_UP)}`
				}
			)}</div></div>`
		: ``}

    <div class="${"discoverIndicatorContainer svelte-1qao9wg"}">${validate_component(Button, "Button").$$render(
			$$result,
			{
				className: "discoverIndicator",
				icon: img$r,
				onClick: onDiscoverScrollDown
			},
			{},
			{
				default: () => `${escape(locale$1.HOME_INTRO.DISCOVER)}`
			}
		)}</div>

	${validate_component(FilterBar, "FilterBar").$$render(
			$$result,
			{ filterString: $discoverFilterString },
			{
				filterString: $$value => {
					$discoverFilterString = $$value;
					$$settled = false;
				}
			},
			{}
		)}
</div>`;
	} while (!$$settled);

	return $$rendered;
});

/* src\routes\_components\ActionButton.svelte generated by Svelte v3.23.0 */

const css$x = {
	code: ".actionButton.svelte-c97749{width:100%;height:100%;font-size:1.3rem}.actionButton.svelte-c97749 .button{width:100%;height:100%;display:flex;justify-content:center;align-items:center}.actionButton.svelte-c97749 .buttonContent{padding-bottom:1px}.actionButton.svelte-c97749 .buttonContentWithCount .buttonContent{padding-bottom:1px;padding-right:56px}.actionButton.svelte-c97749 .buttonContentWithIcon .buttonContent{padding-bottom:1px;padding-right:37px}.actionButton.svelte-c97749 .icon{padding-left:20px}.selectedLabelContainer.svelte-c97749{display:inline-block;position:relative;vertical-align:bottom}.selectedLabel.svelte-c97749{position:absolute;right:0;bottom:0}.countContainer.svelte-c97749{vertical-align:bottom;display:inline-block;position:relative}.count.svelte-c97749{position:absolute;left:44px;bottom:1px;font-weight:700;font-size:1.1rem;color:#777777}",
	map: "{\"version\":3,\"file\":\"ActionButton.svelte\",\"sources\":[\"ActionButton.svelte\"],\"sourcesContent\":[\"<script>\\r\\n\\timport Button from '../../components/Button.svelte';\\r\\n\\r\\n\\texport let label = '';\\r\\n\\texport let selectedLabel = null;\\r\\n\\r\\n\\texport let action = null;\\r\\n\\texport let icon = null;\\r\\n\\texport let selectedIcon = null;\\r\\n\\r\\n\\texport let disabled = false;\\r\\n\\r\\n\\texport let targetItem = null;\\r\\n\\texport let targetItemId = null;\\r\\n\\texport let targetItemProperty = null;\\r\\n\\r\\n\\texport let countProperty = null;\\r\\n\\r\\n\\texport let style = null;\\r\\n\\texport let buttonContentStyle = null;\\r\\n\\texport let iconStyle = null;\\r\\n\\texport let countStyle = null;\\r\\n\\r\\n\\texport let displayZeroCountValue = false;\\r\\n\\r\\n\\t$: isSelected = targetItem && targetItem[targetItemProperty];\\r\\n\\r\\n\\t$: countValue = (targetItem && countProperty && targetItem[countProperty]);\\r\\n\\t$: count = countValue ? countValue : ((displayZeroCountValue && countValue !== undefined) ? 0 : '');\\r\\n</script>\\r\\n\\r\\n<div class=\\\"actionButton\\\">\\r\\n\\t<Button\\r\\n\\t\\t{disabled}\\r\\n\\t\\ticon=\\\"{targetItem && targetItemProperty && targetItem[targetItemProperty] ? selectedIcon : icon}\\\"\\r\\n\\t\\tonClick=\\\"{action ? (e => action(targetItemId)) : null}\\\"\\r\\n\\t\\tclassName=\\\"{countProperty ? 'buttonContentWithCount' : (icon ? 'buttonContentWithIcon' : null)}\\\"\\r\\n\\t\\t{buttonContentStyle}\\r\\n\\t\\tstyle=\\\"{style}\\\" iconStyle=\\\"{iconStyle}\\\"\\r\\n\\t>\\r\\n\\t\\t{#if selectedLabel}\\r\\n\\t\\t\\t<span style=\\\"visibility: {isSelected ? 'hidden' : 'visible'}\\\">{label}</span><div class=\\\"selectedLabelContainer\\\"><span class=\\\"selectedLabel\\\" style=\\\"visibility: {isSelected ? 'visible' : 'hidden'}\\\">{selectedLabel}</span></div>{:else}\\r\\n\\t\\t{label}{/if}{#if countProperty && targetItem}<div class=\\\"countContainer\\\">\\r\\n\\t\\t\\t\\t<div class=\\\"count\\\" style=\\\"{countStyle}\\\">{count}</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t{/if}\\r\\n\\t</Button>\\r\\n</div>\\r\\n\\r\\n<style>\\r\\n\\t.actionButton {\\r\\n\\t\\t/* width: 33%;\\r\\n\\t\\tdisplay: flex;\\r\\n\\t\\tjustify-content: center;\\r\\n\\t\\talign-items: center; */\\r\\n\\r\\n\\t\\twidth: 100%;\\r\\n\\t\\theight: 100%;\\r\\n\\r\\n\\t\\tfont-size: 1.3rem;\\r\\n\\t}\\r\\n\\r\\n\\t.actionButton :global(.button) {\\r\\n\\t\\twidth: 100%;\\r\\n\\t\\theight: 100%;\\r\\n\\t\\tdisplay: flex;\\r\\n\\t\\tjustify-content: center;\\r\\n\\t\\talign-items: center;\\r\\n\\t}\\r\\n\\r\\n\\t.actionButton :global(.buttonContent) {\\r\\n    \\tpadding-bottom: 1px;\\r\\n\\t}\\r\\n\\t.actionButton :global(.buttonContentWithCount .buttonContent) {\\r\\n    \\tpadding-bottom: 1px;\\r\\n    \\tpadding-right: 56px;\\r\\n\\t}\\r\\n\\t.actionButton :global(.buttonContentWithIcon .buttonContent) {\\r\\n    \\tpadding-bottom: 1px;\\r\\n    \\tpadding-right: 37px;\\r\\n\\t}\\r\\n\\r\\n\\t.actionButton :global(.icon) {\\r\\n    \\tpadding-left: 20px;\\r\\n\\t}\\r\\n\\r\\n\\t.selectedLabelContainer {\\r\\n\\t\\tdisplay: inline-block;\\r\\n\\t\\tposition: relative;\\r\\n\\t\\tvertical-align: bottom;\\r\\n\\t}\\r\\n\\t.selectedLabel {\\r\\n\\t\\tposition: absolute;\\r\\n\\t\\tright: 0;\\r\\n    \\tbottom: 0;\\r\\n\\t}\\r\\n\\r\\n\\t.countContainer {\\r\\n\\t\\tvertical-align: bottom;\\r\\n\\t\\tdisplay: inline-block;\\r\\n\\t\\tposition: relative;\\r\\n\\t}\\r\\n\\r\\n\\t.count {\\r\\n\\t\\tposition: absolute;\\r\\n\\t\\tleft: 44px;\\r\\n\\t\\tbottom: 1px;\\r\\n\\r\\n\\t\\tfont-weight: 700;\\r\\n    \\tfont-size: 1.1rem;\\r\\n\\t\\tcolor: #777777;\\r\\n\\t}\\r\\n</style>\"],\"names\":[],\"mappings\":\"AAkDC,aAAa,cAAC,CAAC,AAMd,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CAEZ,SAAS,CAAE,MAAM,AAClB,CAAC,AAED,2BAAa,CAAC,AAAQ,OAAO,AAAE,CAAC,AAC/B,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,OAAO,CAAE,IAAI,CACb,eAAe,CAAE,MAAM,CACvB,WAAW,CAAE,MAAM,AACpB,CAAC,AAED,2BAAa,CAAC,AAAQ,cAAc,AAAE,CAAC,AACnC,cAAc,CAAE,GAAG,AACvB,CAAC,AACD,2BAAa,CAAC,AAAQ,sCAAsC,AAAE,CAAC,AAC3D,cAAc,CAAE,GAAG,CACnB,aAAa,CAAE,IAAI,AACvB,CAAC,AACD,2BAAa,CAAC,AAAQ,qCAAqC,AAAE,CAAC,AAC1D,cAAc,CAAE,GAAG,CACnB,aAAa,CAAE,IAAI,AACvB,CAAC,AAED,2BAAa,CAAC,AAAQ,KAAK,AAAE,CAAC,AAC1B,YAAY,CAAE,IAAI,AACtB,CAAC,AAED,uBAAuB,cAAC,CAAC,AACxB,OAAO,CAAE,YAAY,CACrB,QAAQ,CAAE,QAAQ,CAClB,cAAc,CAAE,MAAM,AACvB,CAAC,AACD,cAAc,cAAC,CAAC,AACf,QAAQ,CAAE,QAAQ,CAClB,KAAK,CAAE,CAAC,CACL,MAAM,CAAE,CAAC,AACb,CAAC,AAED,eAAe,cAAC,CAAC,AAChB,cAAc,CAAE,MAAM,CACtB,OAAO,CAAE,YAAY,CACrB,QAAQ,CAAE,QAAQ,AACnB,CAAC,AAED,MAAM,cAAC,CAAC,AACP,QAAQ,CAAE,QAAQ,CAClB,IAAI,CAAE,IAAI,CACV,MAAM,CAAE,GAAG,CAEX,WAAW,CAAE,GAAG,CACb,SAAS,CAAE,MAAM,CACpB,KAAK,CAAE,OAAO,AACf,CAAC\"}"
};

const ActionButton = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let { label = "" } = $$props;
	let { selectedLabel = null } = $$props;
	let { action = null } = $$props;
	let { icon = null } = $$props;
	let { selectedIcon = null } = $$props;
	let { disabled = false } = $$props;
	let { targetItem = null } = $$props;
	let { targetItemId = null } = $$props;
	let { targetItemProperty = null } = $$props;
	let { countProperty = null } = $$props;
	let { style = null } = $$props;
	let { buttonContentStyle = null } = $$props;
	let { iconStyle = null } = $$props;
	let { countStyle = null } = $$props;
	let { displayZeroCountValue = false } = $$props;
	if ($$props.label === void 0 && $$bindings.label && label !== void 0) $$bindings.label(label);
	if ($$props.selectedLabel === void 0 && $$bindings.selectedLabel && selectedLabel !== void 0) $$bindings.selectedLabel(selectedLabel);
	if ($$props.action === void 0 && $$bindings.action && action !== void 0) $$bindings.action(action);
	if ($$props.icon === void 0 && $$bindings.icon && icon !== void 0) $$bindings.icon(icon);
	if ($$props.selectedIcon === void 0 && $$bindings.selectedIcon && selectedIcon !== void 0) $$bindings.selectedIcon(selectedIcon);
	if ($$props.disabled === void 0 && $$bindings.disabled && disabled !== void 0) $$bindings.disabled(disabled);
	if ($$props.targetItem === void 0 && $$bindings.targetItem && targetItem !== void 0) $$bindings.targetItem(targetItem);
	if ($$props.targetItemId === void 0 && $$bindings.targetItemId && targetItemId !== void 0) $$bindings.targetItemId(targetItemId);
	if ($$props.targetItemProperty === void 0 && $$bindings.targetItemProperty && targetItemProperty !== void 0) $$bindings.targetItemProperty(targetItemProperty);
	if ($$props.countProperty === void 0 && $$bindings.countProperty && countProperty !== void 0) $$bindings.countProperty(countProperty);
	if ($$props.style === void 0 && $$bindings.style && style !== void 0) $$bindings.style(style);
	if ($$props.buttonContentStyle === void 0 && $$bindings.buttonContentStyle && buttonContentStyle !== void 0) $$bindings.buttonContentStyle(buttonContentStyle);
	if ($$props.iconStyle === void 0 && $$bindings.iconStyle && iconStyle !== void 0) $$bindings.iconStyle(iconStyle);
	if ($$props.countStyle === void 0 && $$bindings.countStyle && countStyle !== void 0) $$bindings.countStyle(countStyle);
	if ($$props.displayZeroCountValue === void 0 && $$bindings.displayZeroCountValue && displayZeroCountValue !== void 0) $$bindings.displayZeroCountValue(displayZeroCountValue);
	$$result.css.add(css$x);
	let isSelected = targetItem && targetItem[targetItemProperty];
	let countValue = targetItem && countProperty && targetItem[countProperty];

	let count = countValue
	? countValue
	: displayZeroCountValue && countValue !== undefined
		? 0
		: "";

	return `<div class="${"actionButton svelte-c97749"}">${validate_component(Button, "Button").$$render(
		$$result,
		{
			disabled,
			icon: targetItem && targetItemProperty && targetItem[targetItemProperty]
			? selectedIcon
			: icon,
			onClick: action ? e => action(targetItemId) : null,
			className: countProperty
			? "buttonContentWithCount"
			: icon ? "buttonContentWithIcon" : null,
			buttonContentStyle,
			style,
			iconStyle
		},
		{},
		{
			default: () => `${selectedLabel
			? `<span style="${"visibility: " + escape(isSelected ? "hidden" : "visible")}">${escape(label)}</span><div class="${"selectedLabelContainer svelte-c97749"}"><span class="${"selectedLabel svelte-c97749"}" style="${"visibility: " + escape(isSelected ? "visible" : "hidden")}">${escape(selectedLabel)}</span></div>`
			: `${escape(label)}`}${countProperty && targetItem
			? `<div class="${"countContainer svelte-c97749"}"><div class="${"count svelte-c97749"}"${add_attribute("style", countStyle, 0)}>${escape(count)}</div></div>`
			: ``}`
		}
	)}
</div>`;
});

const img$s = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA0CAYAAADfRPtlAAAD7klEQVRoQ+2Zj5ENQRDG+yJABIgAESACRIAIyAARIAJEcESACBABIkAE1K9q+1W/3p6dPztv9rx6U3X17u7t9PTX3zfdPbNncuTj7MjxyQng/87wicGAwWsick9E7rvvfojIVxH5ICL83jLU9k0R4Xc73rfYrmHwjog8ExE+cwNnXkyAc8/yPYCw7YMWzf002eYzO0oAXhaRN4WL+wWfT84sOQIwnqsdBPGxiPxempgDCLiPU4StnW8iwgJIkR/kxM8jEbnqFkS2dwNHUrZ/isjbwDbs3ii0vXssB/CLA/d5ivaSPJDwK+cMwXjgnCNwVu4E7amI5GzD9m1jiwDeSrG4BBAnn5iJ7yaGSqQEO8x/aB6GFSTFQPKwrQPbgFuUm7Nlbb+e5s98SwEkskRYR9JABi2grCOwiJRfNgbOLudtsw1m7KcAIilKAQPpkOVaB4uqpJQhGGYg+ZKsnFobeeq+DBUWASTC343FMDIVaLGHI5fcnD9T4FprJua80q77GhwBZC+ohNayp5hIDJQDO6iTLeXBx9ayyB5HursRAbTybN173gkkCVPKIuypTCvEED5qkyFd1F6zEAG0e2atPK1HlsVe7GEfQOepPR0B/Ntx/1mAMAZIEg1RLy0JOYb9PtzDNBJgztHW76sBsle03eop0VYAuXkWIG3e3ikktwcpzCSdizzoiOiMGLO6GgG0HUJNe7ZVEBb9jQDarEQiuLKV54Xr/jIlZ6a4VKsGMK1Zs+JZuPCIx6w8w9qaAmhpJ+lwHOmV1nsBp+xwnNOkUtyL4oDvH3sW5l4AbeOQ7GuXzoO+f4RF+r6LMDjdwJ6OJAFLAJEAgLQmIlG69a2lil+cdrSXpfYBOPQrd2XhI0WfSvHfcvirjkVl5QACxB6f+NtePYwG6q86shm+BKCCSt2vjAIZ3ePYe53Qj1KATLbnxNFMNoHDyRqAbGr2oL2bHCFXD45bBhrsomRXA5CAjATJWlydWBlWgatlUDUegUzdXrfuz+jWuxpcK0B12t9LApJmd80tmXZRXEHYq8rmU02tRD0jHiT7gjrZ2vEAijpnL6Sawa1lUMH6K35AUp9qD8oc00goFtzqHngtgwrSHlv0f9kibOSwdn5yr/cCyAIwgGTtDXZJGfFlgJMBtopecOayWE+ArMUewjELMvWiMnqxSuMMuNY9PMPbG2CqVvoMy3nTZ8qmMjCaQVsr/ftBzbA8E2XKmveDOVy77w/BoF08yrDKsj7X6/3H6ma7OGruwShDtmTapvUPzaA6RXNMsrFvl/hft2SSQj8KoGZYfR/I58HB9epkmqQzatJIBkdh2lvnBHCTsHdc9OgZ/AfSDd418bY+ZQAAAABJRU5ErkJggg==";

const img$t = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA0CAYAAADfRPtlAAACz0lEQVRoQ+2Z7XEUMQyG31RAOghUQKggUAGkAkgF0AGkApIKgApIKgAqgFQAdAAVwDwz68xl17bsPdm3dzn92ZtbW/IryfraA+04Hew4Pu0BbruF9xaMWPChpOeSXoze/ZL0Q9K1JH7PocD7WBK/V+lqDu8aCz6V9FYST4s4zPkA2FrLewDBe6y02N6vA2+eJpUAPJT0oVD4WOC74TC5gwCMdbWEEs8k/clttAAC7sug4doDhPW47bPIQVryvj2rBfD7muCCILR9OtIQiitxd0uxKPBJalEO4IWk1xb3ivcfB5diCy7/qmKvtfRS0pvYohRANIuGvQkrEh3fezMersEk8KQA4lKkAm8KAYH7502fYl4RA4iGf3pL78Tv0TgHxwDiyy1cqAdG0gZ3PRtFW7lnD4BUUXeKhZgFuagnPU7TQMa3ceqJAfzXQHBPlncw3UuAdAJHPVXuKOv3uAu5l3eQMPvSUas9WU2SfcyChNnPPU/lKItSkDSXzYO8pKR64Ci4B6u/kiYlYKoW3UY3La5F0Tb1KH3WtlgR6zH2mMyCcv0gYwTGCdtAzH+iY48cQPwZKy49J5L7sF50NmONLNjI2GLJxLgCQ0TJAsimJbdPk/ZojLIEIHuWGFWjUXMuQPYtqU8sAsehSy3IWoIOveLjDV/Im6Hnyw58wxlrAC4BZBW4WgsGpWzKktXg5gIMQHsGnuI7t06QiV29HiBng1vXggGw94h/VZHJEqw00NUGmRRfvjPwvcGTzCReIswLILJolHHZdTsQOgN4FX3gtEB6AkQWtSsHmwuSwhlwydrSAuQdZGLy5qaRWWnAAuxtwdVcSfApHV4RKSnqi6oTC9Tq+1YAayJs8uNlDZDU2tYAkZuLsC6RMqeIHgCRzxdjupEQfIiU/OcWTDZpwSCbCBvmJjybg/OqZDyuSjMevVy0GQCL8R6gpaGlv995C/4HTEpyNdFdZMYAAAAASUVORK5CYII=";

const img$u = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4CAYAAACohjseAAAE0klEQVRoQ+2az4sdRRDHq2e22X3bA64gqCRixEjwICp4CfjrH5BsDiKejL/uCl48iSAYUDDkFNBgPIkn43+QxEAuYhY8yGJEc8vNF+jeecub6ZZaupfa2Zk33T0/kl3ybrt099SnvtXVNdXD4JD/2CHngweAB13h0RRcW1t7cj6f3wKAOef82el0ensM540GmGXZLWPM0wiltb6a5/nrhwbQqvcPwO6eN5zzp8ZQcRQFJ5PJlSRJXqOKGWMubm1tfTC0ioMDVtQzRMVCKcUPPODq6up3jLH33d5L0/So24tjqDi4gkKIOQAsISDn/NhsNnsiTdNfrXKDqzgoIFWPMfa3lPI4glUy6tk8zz8dKlQHBaTqlWX5ymw2u44gKysrLxMVp0qphw8coBDiIwD4Bg2n6jkQIcR/ALBm//5YKXVuCMjBFGwDoA4AgMFUHATQ1/g2J/Sh6CCANIkAQGP4tYXxfQlYSSC5Ump1kaFNiagPuJ3939dCbh2qns9B3nSU9GVXJ8Asy97SWj/PGDvJGDthjJmQzOh9iFMVAaAAAAkAG4wxzLRXiqL43R0xoeCtgFhLFkVxCgCeM8bgQf0CntWuOml6oI96bi5VsQVgyhjLjTGbjDF8t/xDSnl+0Zx9gKgKAHxhjHkEAB6KCOOCMXbbVS2+HhdC3ASAEwCAURD6wyL+rtb6QrUq2gcohNCeUFMAmGmtNwHgRpqmG1LKn0ItqxtvE9VLWuv1JEnQycd8ogYAjFIqoWvWAdIKA8fmALCptb6bJMnlsix/i90PfcDj0aK1fhQATiZJgoo/Rta9o5R6fCGgfX/7k4RKPmYPxdcJvnbWJhnfyb7G9D0uxL7GLBqySN8Ai9YLtWvhMYEZ1RjzI0k69zRcQ+G8Kpn7BTIGzgsQB91ryFg4b8AGyMHe4egerIErOOfHfXuqraUafVhVSSyXpJTPDJlkhBBb5MgyjLG3QwqKIMA6JYeEzLLsL1v/4qOD4YJCdGwlbW2KhX00XDRgnZJKqeBoWBTaQggsoDvBdQLEyWR/eL/7+e5X0q/ptHYnrxMv955RaWegS3REA9LeyxD3fZUbqei+aTQg7YiFvL0HhOhu47jL+tGAfXm4CbivCIkGpHsEb418KwtfBW0Sc5k0eo9HA5Ist69N0ARh+z3gW4n0kUm7AHp7F8NtaWnpe1KVTMuyfKOt9dFHJo0CtAXwv1apDaXUi3Wq2XGXAKD2iwos84qieLcJtI99HgVYuVO4LKU8XQXMsuxbYwxeXdNnoOplpaeK/7vKOT9T3cd9ZOoowCzLfjbGrFuoPWeUNeqramMYz8rl5eV3EMIq82oVnjF2UUr5oXNWH5k0CpAWwu7m1r5KXSCt+x078fKzKIoz1TDE8N3e3v6h+nkJtu611l+7Bm7XaikWcLd3ioCVBOIEwMbw5203tzYBXXJfXpBQ35kPAJ9Zp0XVpLGArvvtMildZ48CvueeDW0HQ6ftflsTU5PGAjqwPYYwxn6pSzi+kDhuMpl8mSTJJw2XO8E1aTBg5Xra2b7BOV/vs5qxN07v0UQUU5MGA9rMds0++E5Zlm+2HdghCtKxJBHtZFz6KYrvmsGAuLBNDEd8Sy5fY5rGISh+IRXjyCjArgaPOf8B4JjeHuJZ/wOpjRlmnT6vJAAAAABJRU5ErkJggg==";

const img$v = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4CAYAAACohjseAAADr0lEQVRoQ+2az2vUQBTH30s3tNsJuIIXERGxIB5Er4K//gPrQcSTov4BCl48iSDoQVA8eVDQU/Ek/gf1x1kLHkSoqLfeXCGz2bLJPJmSSNgmk5mXJt0tzTXzMvOZ78w3M28GYYc/uMP5YBdw2hVuTcFer3doNBqtAsDI9/1j/X7/dxud1xpgEASrRHREQyml3kdRdH7HAKbq/QT4P+fJ9/3DbajYioLdbnfZ87xzecWI6OVgMLjZtIqNAxaolzHFUkp/6gHn5+dfIOKNIpA2VGxcQSHECAA6JUo1rmKjgCb1MmCl1KMoiu42NVQbBaxQL2PqSyn3Th2gEOIWADyxbPhtKeVTy7JOxRpTUAjxBwB6RASIxdXk3jWmYiOAjuplijSiYiOA2bLMpF5GlZVBxB9hGC44jT+LwlsOODc3d3pmZuajRd2biiRJcmY4HH7ixJbFbDlgflHt2tAmVKwFGATBZaXUCUQ8hYhHiairjcUVbKx8DAAhAKwgojaq5TiOP3OVrQTUa8k4ji8AwHEi0nPkJAAEhtVJTT5jeB8RIyL6joh6b/k1DMNnpohNgFoVAHhARPsAYE9ui1P6HRszcaV2/CYBwF+l1PPxVdEmQCGEKoNyrNSVybq8oR0kpfTyHyoC3PhBW9c2WQXXpJT7jYDp/u0bAGjDmKYnKsr1FJrMFEIWwml1Sl10iiBL4YyA+qV2VCJasnHSbRrLRrhKwAmHrISzApxQSCs4a8AJg4x931+wzalWLtXyc2sC5iQh4pUwDN/YznknwG1W0hnOaYhus5IsODZgy0qy4WoB6mAhxKCFJV2t5LDzHMwPVSGE3qY0/kgp2e1kB9bJvTB6hJ1xYwMyU4MMNoA6hzRswKIzP1brDUHZxrbOiTAbsE72jNER7Mw3GzBLzTMaywlhO2kdwFYcNOsNrpOyANPN8C+OFDViWE7KAqzhoFr1hJNT5TopCzAIgrdEtOiihnbC2dnZq3qbkzrwWZtMQV0nZQEKIb7oDLdNnlSfN8RxfG089a6H+fr6+uvx6yWGTmM5KRfQJnfaB4D7VSe3ekXU6XReZbegDIAsJ+UClma/ASBWSj12vViQzut7pqQzx0m5gEW/CL2teReG4UWXuTlettvtPvQ8706JETk7qTNgiYOu+L6/aJsnsemA9ArK9bwRcZzUGTDdRXxIK15LkuQS9+yuCjRnRBuOyzkBdgbUjUqN4YBL8qcKxvRegw6Hw4OcjmQB1mls27G7gG33+FbX9w8svudI2zT+kwAAAABJRU5ErkJggg==";

const img$w = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAYAAADFeBvrAAADXElEQVRoQ+2ai7EMQRSG/xsBMpABIkAEiAARIAJEQAaIgBsBIkAEiAARUJ/qc+vo7ff07Ext6aqtu3V3pvt8fV5/7+yZTmycnRiPtgJ6LOnlGpu5FdBvSQ8lvZ4NtSUQLNOhtgb6Kem2pM+zPLU1EBxTofYANBVqL0BAEXaEHx4bHlsDfQmWXwt/F0NtDfRR0l1JHyR5qBujLtoD0C1JlyMo+hMlvXvsBQjDrweoS4FiCGpPQCmo55Ke9bhpb0AG9clBdKmJYwARShZGZidFgEFRIIfi8UDSqxGo2UBXJd0MRgLCqzRyQNwTQ9GjbCOyc84Cuh/KLyW4Z5SAmIf8eRombJJIS4EAeCEJz8Tju6Rv4Z+5neXz2hGCz9kwRhVqFAgAYjyOfzr/u/CapqADtEGxCTTepEQaAcIrwNAMbRA6hEc1xnviMbqWuclPRlYi9QLFiYpHOE6vCWJcsZpIQvUAYTj5YuNNgFmkjjs9VpVIrUCxZ7o7eKfhpcvJX7yTlEgtQCT+e7dCV+eeCOKnyuq+GhAu/uoKwJaeiYHYZCtMF3bVgHwPOA/Nc6VNb54W73gYcpmU+DtKQD7UaJJMdMwCkCLEI8CYpPoHpgbEjdY495A3MQwt40Ar5jzEhSbh8U5K2jTHyKQLsccAgGGzDyImB8T3zo+CIXvwDsrE8iQLUwq5H6GC/IokzshmEyr2BUis/fB+TZx6GOxhjqxOTHnIF4ODpGsgIizQXGg+3nvNF99eOz74SKnC5DzkzyCt4YbhdibqybfWA14TTA4I+X8nbOWVSqnGmxzAUsdopsBg5D4vwsSS2JTHUY7gXqbnikYOhJ208xDz5PoWz4cMON6MRVIrZbAtlirX5AMeQXn7wU6T3LUEt3tyQLEKeNL7pK8EFIcDO/d20sEuBVSUNA3FKCt9UovRk/wzUUKLvkB4jYx4DTxP47SCMlJdm4F8H+CmGQc7D0R59/qsVsqLG1gLOY4OF0p24jNRA6Lr874qaVrDoATk52juA40LG5C/vChpGudNHh/ixWbDYFtqDfJn8fGk5qE1YGKgqWuUgKYuFIWMeWj6GiWgewvKci3kDWj6GjmgVlFaMzz3+VF/GkOZbpUwo0CrrVH71mfU4M3u+w+02dY3LnxyHvoDqh3yNY+2B+0AAAAASUVORK5CYII=";

/* src\routes\_components\ActionBar.svelte generated by Svelte v3.23.0 */

const css$y = {
	code: ".actionBar.svelte-3bbn1f{display:flex;justify-content:space-between;height:52px;background-color:#ffffff}.actionBar.svelte-3bbn1f .actionContainerButton{width:33%;display:flex;justify-content:center;align-items:center}.actionBar.svelte-3bbn1f .actionContainerButton > div{width:100%;height:100%}",
	map: "{\"version\":3,\"file\":\"ActionBar.svelte\",\"sources\":[\"ActionBar.svelte\"],\"sourcesContent\":[\"<script>\\r\\n\\timport Button from '../../components/Button.svelte';\\r\\n\\r\\n\\timport ActionButton from './ActionButton.svelte';\\r\\n\\r\\n    import LikeIcon from \\\"../../assets/icons/like.png\\\";\\r\\n    import LikeSelectedIcon from \\\"../../assets/icons/like_selected.png\\\";\\r\\n    import FollowIcon from \\\"../../assets/icons/follow.png\\\";\\r\\n    import FollowSelectedIcon from \\\"../../assets/icons/follow_selected.png\\\";\\r\\n    import ShareIcon from \\\"../../assets/icons/share.png\\\";\\r\\n\\r\\n\\timport {\\r\\n\\t\\tshowProjectCounts\\r\\n\\t} from '../../models/appModel';\\r\\n\\r\\n\\timport {\\r\\n\\t\\tshowShareProjectDialog\\r\\n\\t} from '../../actions/appActions';\\r\\n\\r\\n\\timport {\\r\\n\\t\\tprojectToggleFollowing,\\r\\n\\t\\tprojectToggleLiked,\\r\\n\\t} from '../../actions/projectActions';\\r\\n\\r\\n\\texport let targetItemId = null;\\r\\n\\texport let targetItem = null;\\r\\n\\texport let type = 'project';\\r\\n\\r\\n\\tfunction shareItem() {\\r\\n\\t\\tswitch (type) {\\r\\n\\t\\t\\tcase 'project':\\r\\n\\t\\t\\t\\tshowShareProjectDialog(targetItemId);\\r\\n\\t\\t\\t\\tbreak;\\r\\n\\t\\t}\\r\\n\\t}\\r\\n</script>\\r\\n\\r\\n<div class=\\\"actionBar\\\">\\r\\n\\t<div class=\\\"actionContainerButton actionButtonLeft\\\">\\r\\n\\t\\t<slot name=\\\"buttonLeft\\\">\\r\\n\\t\\t\\t<ActionButton\\r\\n\\t\\t\\t\\tlabel = \\\"like\\\"\\r\\n\\t\\t\\t\\ticon = \\\"{LikeIcon}\\\"\\r\\n\\t\\t\\t\\tselectedIcon = \\\"{LikeSelectedIcon}\\\"\\r\\n\\r\\n\\t\\t\\t\\ttargetItem = \\\"{targetItem}\\\"\\r\\n\\t\\t\\t\\ttargetItemId = \\\"{targetItemId}\\\"\\r\\n\\t\\t\\t\\taction = \\\"{projectToggleLiked}\\\"\\r\\n\\t\\t\\t\\ttargetItemProperty = \\\"liked\\\"\\r\\n\\r\\n\\t\\t\\t\\tcountProperty= \\\"{$showProjectCounts ? 'likeCount' : ''}\\\"\\r\\n\\t\\t\\t/>\\r\\n\\t\\t\\t\\t<!-- countProperty = \\\"likeCount\\\" -->\\r\\n\\t\\t</slot>\\r\\n\\t</div>\\r\\n\\t<div class=\\\"actionContainerButton actionButtonMiddle\\\">\\r\\n\\t\\t<slot name=\\\"buttonMiddle\\\">\\r\\n\\t\\t\\t<ActionButton\\r\\n\\t\\t\\t\\tlabel = \\\"follow\\\"\\r\\n\\t\\t\\t\\tselectedLabel = \\\"following\\\"\\r\\n\\r\\n\\t\\t\\t\\ticon = \\\"{FollowIcon}\\\"\\r\\n\\t\\t\\t\\tselectedIcon = \\\"{FollowSelectedIcon}\\\"\\r\\n\\r\\n\\t\\t\\t\\ttargetItem = \\\"{targetItem}\\\"\\r\\n\\t\\t\\t\\ttargetItemId = \\\"{targetItemId}\\\"\\r\\n\\t\\t\\t\\taction = \\\"{projectToggleFollowing}\\\"\\r\\n\\t\\t\\t\\ttargetItemProperty = \\\"following\\\"\\r\\n\\r\\n\\t\\t\\t\\tbuttonContentStyle = \\\"padding-right: 48px;\\\"\\r\\n\\t\\t\\t\\ticonStyle = \\\"padding-bottom: 4px\\\"\\r\\n\\r\\n\\t\\t\\t\\tcountProperty= \\\"{$showProjectCounts ? 'followCount' : ''}\\\"\\r\\n\\t\\t\\t/>\\r\\n\\t\\t\\t\\t<!-- countProperty= \\\"followCount\\\" -->\\r\\n\\t\\t</slot>\\r\\n\\t</div>\\r\\n\\t<div class=\\\"actionContainerButton actionButtonRight\\\">\\r\\n\\t\\t<slot name=\\\"buttonRight\\\">\\r\\n\\t\\t\\t<ActionButton\\r\\n\\t\\t\\t\\tlabel = \\\"share\\\"\\r\\n\\r\\n\\t\\t\\t\\ticon = \\\"{ShareIcon}\\\"\\r\\n\\r\\n\\t\\t\\t\\taction = \\\"{shareItem}\\\"\\r\\n\\t\\t\\t/>\\r\\n\\t\\t</slot>\\r\\n\\t</div>\\r\\n</div>\\r\\n\\r\\n<style>\\r\\n\\t.actionBar {\\r\\n\\t\\tdisplay: flex;\\r\\n\\t\\tjustify-content: space-between;\\r\\n\\r\\n    \\t/* margin-top: 3px; */\\r\\n\\t\\theight: 52px;\\r\\n\\r\\n\\t\\tbackground-color: #ffffff;\\r\\n\\t}\\r\\n\\r\\n\\t.actionBar :global(.actionContainerButton) {\\r\\n\\t\\twidth: 33%;\\r\\n\\t\\tdisplay: flex;\\r\\n\\t\\tjustify-content: center;\\r\\n\\t\\talign-items: center;\\r\\n\\t}\\r\\n\\r\\n\\t.actionBar :global(.actionContainerButton > div) {\\r\\n\\t\\twidth: 100%;\\r\\n\\t\\theight: 100%;\\r\\n\\t}\\r\\n\\r\\n    /* .actionBar :global(.actionButtonMiddle .buttonContent) {\\r\\n        margin-right: 48px;\\r\\n    } */\\r\\n</style>\"],\"names\":[],\"mappings\":\"AA2FC,UAAU,cAAC,CAAC,AACX,OAAO,CAAE,IAAI,CACb,eAAe,CAAE,aAAa,CAG9B,MAAM,CAAE,IAAI,CAEZ,gBAAgB,CAAE,OAAO,AAC1B,CAAC,AAED,wBAAU,CAAC,AAAQ,sBAAsB,AAAE,CAAC,AAC3C,KAAK,CAAE,GAAG,CACV,OAAO,CAAE,IAAI,CACb,eAAe,CAAE,MAAM,CACvB,WAAW,CAAE,MAAM,AACpB,CAAC,AAED,wBAAU,CAAC,AAAQ,4BAA4B,AAAE,CAAC,AACjD,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,AACb,CAAC\"}"
};

const ActionBar = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let $showProjectCounts = get_store_value(showProjectCounts);
	let { targetItemId = null } = $$props;
	let { targetItem = null } = $$props;
	let { type = "project" } = $$props;

	function shareItem() {
		switch (type) {
			case "project":
				showShareProjectDialog(targetItemId);
				break;
		}
	}

	if ($$props.targetItemId === void 0 && $$bindings.targetItemId && targetItemId !== void 0) $$bindings.targetItemId(targetItemId);
	if ($$props.targetItem === void 0 && $$bindings.targetItem && targetItem !== void 0) $$bindings.targetItem(targetItem);
	if ($$props.type === void 0 && $$bindings.type && type !== void 0) $$bindings.type(type);
	$$result.css.add(css$y);

	return `<div class="${"actionBar svelte-3bbn1f"}"><div class="${"actionContainerButton actionButtonLeft"}">${$$slots.buttonLeft
	? $$slots.buttonLeft({})
	: `
			${validate_component(ActionButton, "ActionButton").$$render(
			$$result,
			{
				label: "like",
				icon: img$s,
				selectedIcon: img$t,
				targetItem,
				targetItemId,
				action: projectToggleLiked,
				targetItemProperty: "liked",
				countProperty: $showProjectCounts ? "likeCount" : ""
			},
			{},
			{}
		)}
				
		`}</div>
	<div class="${"actionContainerButton actionButtonMiddle"}">${$$slots.buttonMiddle
	? $$slots.buttonMiddle({})
	: `
			${validate_component(ActionButton, "ActionButton").$$render(
			$$result,
			{
				label: "follow",
				selectedLabel: "following",
				icon: img$u,
				selectedIcon: img$v,
				targetItem,
				targetItemId,
				action: projectToggleFollowing,
				targetItemProperty: "following",
				buttonContentStyle: "padding-right: 48px;",
				iconStyle: "padding-bottom: 4px",
				countProperty: $showProjectCounts ? "followCount" : ""
			},
			{},
			{}
		)}
				
		`}</div>
	<div class="${"actionContainerButton actionButtonRight"}">${$$slots.buttonRight
	? $$slots.buttonRight({})
	: `
			${validate_component(ActionButton, "ActionButton").$$render(
			$$result,
			{
				label: "share",
				icon: img$w,
				action: shareItem
			},
			{},
			{}
		)}
		`}</div>
</div>`;
});

const img$x = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAgCAYAAAB6kdqOAAABx0lEQVRYR9WX8TUEMRCHf1cBOqACVIAOqAAdUAEqoANUQAdOBaiAEujA+/Yl+3Ij2U1us3tn/tn3bpPJtzO/mczNtGY2WzMe/TugPUmnknh6+5L0KGneE91Dt3c7WPfu9vKMWipCm5KeJOE0ZQBdSrLOgb83H2F9sPdE0rd9EQPC4YskoPoMh0cB1JC9zVkWCAhgwhTlQrEu90O8T6LLB7WRskDXkq76CCLv0RUW6iXXzY0kzo1GCNKNXE+V1nHmVgyINL1VOqTUzb7XYZiyY1dZpc5qrKfinq2oLyTd1vC+hA/ax50FoudQJaswKq1ptGHKqJDPVdBI2pHUVKote/rC7sRQr+GNYIFWIew2XbEI8Ru5PJgoSgvRSQFxfZDPsRvkj+vsCxds6rafokm2zTDMRteAdubGiDGydy7pIea4b2IcAyoJk9KQBSd9CH2optAMzTc5LeYCsW4oVBZMCRBrqT4iVdo4P1xk/oyry2jI7gGKS5DBP8f4M8ClnQVTGqEQIGeybG/wHHK/pq/KunxxzVC6Vuzoheps5ptSGwLkxQ6U1xV6AaazkroghwJ5sQOFTor0UkPUpRkoXl8jQsWHjp2yqkC/ij5MIdCJrKQAAAAASUVORK5CYII=";

const img$y = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAACDklEQVRIS72WsW4TQRCGZ2yf7PNeYTqoEJCGAimiDgpvkAqFLlLEA9BS0iFRkDJFCqiiVHkFktC7TANKUpEUkc/Sjc/S+XbQnO6stb13vrUcrrLWO/Ptv/vP7CKs8CmlBoh4H0XRhms4ugYopT4CwDeJS9P0zXg8/uWSwxkYBMFvZn4hEET846rSCdjpdLaazeaFqchVpRPQVFdAXVXWBvZ6vadJklxbzos9z3sWhuFNnbOsDfR9/2ej0di2JdVan8Vx/HZtwFzdlfikJGltlbUUVqkzFtAnotfLVE6BomIymewAwCtmloLeBIA2APjLksz9zwAwBADZkSEingLAXRRFJ1kp5c57XrFdjrzK6SEqpUbzKphZinqdoCJXiLkhLlfYOtcFxZ7nvcxk/AdoBpNanTFNkiQPoXQKy0xj7ssDKJ2BLQBlIAiCXWY+XoNrF2BW4JqgpZ2n1PtFd3EpkWJuVW8tBSql/gLAY1fv5/NDInpki60CDqRiVgTGRNR1BUpPXPkjIqsY66DtKeFKRsT3RcM2Y61A82VWAZIdKD0SrfWXOI4/zcdbA5bcf7dpmr6TRK1W63vxgisSL3NqmcJ+fh+aCwwB4DMRHZiDeaM4tBjsloie1FIoL2sjwYSZf4xGow9V55gfw1cRns+zOrVModyRHa31ebvd3qv7IhNQt9s9QsR9+U1EjflF/gNY9PaMlVaqjgAAAABJRU5ErkJggg==";

const img$z = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAmCAYAAAA4LpBhAAABJklEQVRYR+3X0Y3CMAwG4D9Z4BghygIwAkwEG8AGcBPdsQELVGQEWMBCloqEEImT2BUP0Nc+fLZrJ67DGx73BhNfdNKqi+UNIcy892uOgoh+U0oXbURFNISw8N7/AZiN0IWIVimlkwbOomOG5wfw7qjhLBpj3AHYZjJSwSV0A2BfKGM3LJX3H8DcGpYaiTvXHK4dGVNYRLm0YyebwVWoNVyNWsJNqBXcjFrAXWgt7Jw7DsOwfJ5zLcqXwSJ3eJii4wgVQQBXIlq+upGaM9WCXJUm1AJsQq3AatQSrEKtQRGdAiyiU4FFNMYorSvZOZQ2xd7FrBusKW8C8PMUuQqsaSRetnljuMNqUEQfbhP+vvxbcZj8t0JqiN73TWdvL2J2n2oC+JxMb1b98iek0EPAAAAAAElFTkSuQmCC";

/* src\routes\_components\ProjectItem.svelte generated by Svelte v3.23.0 */

const css$z = {
	code: ".projectItem.svelte-fyla60.svelte-fyla60{margin-bottom:10px;background-color:#ffffff}.contentContainer.svelte-fyla60.svelte-fyla60{position:relative;cursor:pointer;margin-top:7px;padding-left:23px}.projectItem.ownerProjectItem.svelte-fyla60 .contentContainer.svelte-fyla60{padding-bottom:18px}.contentContainer.svelte-fyla60.svelte-fyla60 .readMoreButton{position:absolute;top:1px;right:11px;padding:10px;padding-right:30px;font-size:1.1rem;font-weight:700}.contentContainer.svelte-fyla60.svelte-fyla60 .readMoreButton .icon{padding-left:15px}.projectItem.svelte-fyla60.svelte-fyla60 .proxyImage{position:absolute;width:411px;height:314px;opacity:0.5}.projectItem.svelte-fyla60.svelte-fyla60 .actionBar .actionButtonLeft .buttonContent{margin-right:6px}.projectItem.svelte-fyla60.svelte-fyla60 .actionBar .actionButtonMiddle .buttonContent{margin-right:-12px}.projectItem.svelte-fyla60.svelte-fyla60 .actionBar .actionButtonRight .buttonContent{margin-right:-20px}.headerImage.svelte-fyla60.svelte-fyla60{width:100%;padding-top:59.6%;background-size:cover;background-position:center;background-color:#dedede;cursor:pointer}.header.svelte-fyla60.svelte-fyla60{font-size:2.2rem;padding-top:3px;padding-right:105px}.description.svelte-fyla60.svelte-fyla60{padding-top:3px;padding-right:23px;font-size:1.5rem;line-height:2rem;min-height:26px;color:#555555}",
	map: "{\"version\":3,\"file\":\"ProjectItem.svelte\",\"sources\":[\"ProjectItem.svelte\"],\"sourcesContent\":[\"<script>\\n    // import { onDestroy } from 'svelte'; // afterUpdate\\n\\n    import { get } from 'svelte/store';\\n    import { writable } from 'svelte/store';\\n\\n    import Button from '../../components/Button.svelte';\\n\\n    import ActionBar from './ActionBar.svelte';\\n    import ActionButton from './ActionButton.svelte';\\n\\n    import LikesIcon from \\\"../../assets/icons/likes.png\\\";\\n    import FollowerIcon from \\\"../../assets/icons/followers.png\\\";\\n\\n    import Proxy from '../../components/Proxy.svelte';\\n\\n    import { showProjectCounts, user, getIsProjectTeamMember } from '../../models/appModel'; // getProject\\n    import { getProjectHeaderImage } from '../../models/projectsModel'; // getProject\\n    import { loadProject } from '../../actions/appActions';\\n\\n    import MoreArrowIcon from \\\"../../assets/icons/more_arrow.png\\\";\\n\\n    // export let projectId = null;\\n    // let project = writable({}); // declare store here to prevent SSR error\\n    // $: { project = getProjectModel(projectId) } ;\\n\\n    export let project;\\n\\n    $: projectId = ($project && $project.id) || null;\\n    // $: projectOwnerId = ($project && $project.ownerId) || null;\\n\\n    // TODO: change to is member\\n    // $: isProjectOwner = projectOwnerId && projectOwnerId === $userId;\\n    $: isTeamMember = $user && $project && getIsProjectTeamMember($project);\\n\\n    $: projectSlug = ($project && $project.slug) || null;\\n\\n    $: headerImage = getProjectHeaderImage($project);\\n\\n    $: projectTitle = ($project && $project.title) || '';\\n    $: projectDescription = ($project && $project.description) || '';\\n</script>\\n\\n<div class=\\\"projectItem\\\" class:ownerProjectItem=\\\"{isTeamMember}\\\">\\n    <!-- <Proxy image=\\\"discover1\\\" className=\\\"proxyImage\\\" /> -->\\n    <div class=\\\"headerImage\\\" style=\\\"background-image: url({headerImage})\\\" alt=\\\"project image\\\" on:click=\\\"{e => loadProject(projectId, { showInfo: true })}\\\" />\\n    <div class=\\\"contentContainer\\\" on:click=\\\"{e => loadProject(projectId, { showInfo: true })}\\\">\\n        <Button className=\\\"readMoreButton\\\" onClick=\\\"{e => { loadProject(projectId, { showInfo: true }); e.stopPropagation() }}\\\" icon=\\\"{MoreArrowIcon}\\\">read more</Button>\\n        <div class=\\\"itemContent\\\">\\n            <div class=\\\"header\\\">{projectTitle}</div>\\n            <div class=\\\"description\\\">{projectDescription}</div>\\n        </div>\\n    </div>\\n    {#if !isTeamMember}\\n        <ActionBar targetItemId=\\\"{projectId}\\\" targetItem=\\\"{$project}\\\" />\\n    {:else if $showProjectCounts}\\n        <ActionBar targetItemId=\\\"{projectId}\\\" targetItem=\\\"{$project}\\\">\\n            <div slot=\\\"buttonLeft\\\">\\n                <ActionButton\\n                    label = \\\"likes\\\"\\n\\n                    icon = \\\"{LikesIcon}\\\"\\n\\n                    targetItem = \\\"{$project}\\\"\\n                    targetItemId = \\\"{projectId}\\\"\\n\\n                    countProperty= \\\"likeCount\\\"\\n\\n                    buttonContentStyle = \\\"padding-right: 56px;\\\"\\n                    iconStyle = \\\"padding-bottom: 4px; margin-top: 1px;\\\"\\n                />\\n            </div>\\n            <div slot=\\\"buttonMiddle\\\">\\n                <ActionButton\\n                    label = \\\"followers\\\"\\n\\n                    icon = \\\"{FollowerIcon}\\\"\\n\\n                    targetItem = \\\"{$project}\\\"\\n                    targetItemId = \\\"{projectId}\\\"\\n\\n                    countProperty= \\\"followCount\\\"\\n\\n                    buttonContentStyle = \\\"padding-right: 56px;\\\"\\n                    iconStyle = \\\"padding-bottom: 4px\\\"\\n                />\\n            </div>\\n        </ActionBar>\\n    {/if}\\n    <!-- {#if isTeamMember}\\n        <ActionBar targetItemId=\\\"{projectId}\\\" targetItem=\\\"{$project}\\\">\\n            <div slot=\\\"buttonLeft\\\">\\n                <ActionButton\\n                    label = \\\"likes\\\"\\n\\n                    icon = \\\"{LikesIcon}\\\"\\n\\n                    targetItem = \\\"{$project}\\\"\\n                    targetItemId = \\\"{projectId}\\\"\\n\\n                    countProperty= \\\"likeCount\\\"\\n\\n                    buttonContentStyle = \\\"padding-right: 56px;\\\"\\n                    iconStyle = \\\"padding-bottom: 4px; margin-top: 1px;\\\"\\n                />\\n            </div>\\n            <div slot=\\\"buttonMiddle\\\">\\n                <ActionButton\\n                    label = \\\"followers\\\"\\n\\n                    icon = \\\"{FollowerIcon}\\\"\\n\\n                    targetItem = \\\"{$project}\\\"\\n                    targetItemId = \\\"{projectId}\\\"\\n\\n                    countProperty= \\\"followCount\\\"\\n\\n                    buttonContentStyle = \\\"padding-right: 56px;\\\"\\n                    iconStyle = \\\"padding-bottom: 4px\\\"\\n                />\\n            </div>\\n        </ActionBar>\\n    {:else}\\n        <ActionBar targetItemId=\\\"{projectId}\\\" targetItem=\\\"{$project}\\\" />\\n    {/if} -->\\n</div>\\n\\n<style>\\n    .projectItem {\\n        margin-bottom: 10px;\\n\\n        background-color: #ffffff;\\n    }\\n\\n    .contentContainer {\\n        position: relative;\\n\\n        /* height: 102px; */\\n        cursor: pointer;\\n\\n        margin-top: 7px;\\n        padding-left: 23px;\\n        /* padding-left: 18px; */\\n    }\\n\\n    .projectItem.ownerProjectItem .contentContainer {\\n        padding-bottom: 18px;\\n    }\\n\\n    .contentContainer :global(.readMoreButton) {\\n        position: absolute;\\n        top: 1px;\\n        right: 11px;\\n\\n        padding: 10px;\\n        padding-right: 30px;\\n\\n        font-size: 1.1rem;\\n        font-weight: 700;\\n    }\\n    .contentContainer :global(.readMoreButton .icon) {\\n        padding-left: 15px;\\n    }\\n\\n    .projectItem :global(.proxyImage) {\\n        position: absolute;\\n        width: 411px;\\n        height: 314px;\\n        opacity: 0.5;\\n    }\\n\\n    .projectItem :global(.actionBar .actionButtonLeft .buttonContent) {\\n        /* position: absolute;\\n        left: 26px; */\\n        margin-right: 6px;\\n    }\\n\\n    .projectItem :global(.actionBar .actionButtonMiddle .buttonContent) {\\n        margin-right: -12px;\\n    }\\n\\n    .projectItem :global(.actionBar .actionButtonRight .buttonContent) {\\n        margin-right: -20px;\\n    }\\n\\n    .headerImage {\\n        width: 100%;\\n    \\tpadding-top: 59.6%;\\n    \\tbackground-size: cover;\\n        background-position: center;\\n\\n        /* height: 245px;\\n        object-fit: cover; */\\n\\n        background-color: #dedede;\\n\\n        /* height: 154px;\\n        object-fit: cover; */\\n\\n        cursor: pointer;\\n    }\\n\\n    .header {\\n        font-size: 2.2rem;\\n        padding-top: 3px;\\n        padding-right: 105px;\\n    }\\n\\n    .description {\\n        padding-top: 3px;\\n        padding-right: 23px;\\n        /* padding-right: 50px; */\\n\\n        font-size: 1.5rem;\\n        line-height: 2rem;\\n\\n        min-height: 26px;\\n\\n        color: #555555;\\n    }\\n</style>\"],\"names\":[],\"mappings\":\"AAgII,YAAY,4BAAC,CAAC,AACV,aAAa,CAAE,IAAI,CAEnB,gBAAgB,CAAE,OAAO,AAC7B,CAAC,AAED,iBAAiB,4BAAC,CAAC,AACf,QAAQ,CAAE,QAAQ,CAGlB,MAAM,CAAE,OAAO,CAEf,UAAU,CAAE,GAAG,CACf,YAAY,CAAE,IAAI,AAEtB,CAAC,AAED,YAAY,+BAAiB,CAAC,iBAAiB,cAAC,CAAC,AAC7C,cAAc,CAAE,IAAI,AACxB,CAAC,AAED,6CAAiB,CAAC,AAAQ,eAAe,AAAE,CAAC,AACxC,QAAQ,CAAE,QAAQ,CAClB,GAAG,CAAE,GAAG,CACR,KAAK,CAAE,IAAI,CAEX,OAAO,CAAE,IAAI,CACb,aAAa,CAAE,IAAI,CAEnB,SAAS,CAAE,MAAM,CACjB,WAAW,CAAE,GAAG,AACpB,CAAC,AACD,6CAAiB,CAAC,AAAQ,qBAAqB,AAAE,CAAC,AAC9C,YAAY,CAAE,IAAI,AACtB,CAAC,AAED,wCAAY,CAAC,AAAQ,WAAW,AAAE,CAAC,AAC/B,QAAQ,CAAE,QAAQ,CAClB,KAAK,CAAE,KAAK,CACZ,MAAM,CAAE,KAAK,CACb,OAAO,CAAE,GAAG,AAChB,CAAC,AAED,wCAAY,CAAC,AAAQ,2CAA2C,AAAE,CAAC,AAG/D,YAAY,CAAE,GAAG,AACrB,CAAC,AAED,wCAAY,CAAC,AAAQ,6CAA6C,AAAE,CAAC,AACjE,YAAY,CAAE,KAAK,AACvB,CAAC,AAED,wCAAY,CAAC,AAAQ,4CAA4C,AAAE,CAAC,AAChE,YAAY,CAAE,KAAK,AACvB,CAAC,AAED,YAAY,4BAAC,CAAC,AACV,KAAK,CAAE,IAAI,CACd,WAAW,CAAE,KAAK,CAClB,eAAe,CAAE,KAAK,CACnB,mBAAmB,CAAE,MAAM,CAK3B,gBAAgB,CAAE,OAAO,CAKzB,MAAM,CAAE,OAAO,AACnB,CAAC,AAED,OAAO,4BAAC,CAAC,AACL,SAAS,CAAE,MAAM,CACjB,WAAW,CAAE,GAAG,CAChB,aAAa,CAAE,KAAK,AACxB,CAAC,AAED,YAAY,4BAAC,CAAC,AACV,WAAW,CAAE,GAAG,CAChB,aAAa,CAAE,IAAI,CAGnB,SAAS,CAAE,MAAM,CACjB,WAAW,CAAE,IAAI,CAEjB,UAAU,CAAE,IAAI,CAEhB,KAAK,CAAE,OAAO,AAClB,CAAC\"}"
};

const ProjectItem = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let $project;
	let $user = get_store_value(user);
	let $showProjectCounts = get_store_value(showProjectCounts);
	let { project } = $$props;
	$project = get_store_value(project);
	if ($$props.project === void 0 && $$bindings.project && project !== void 0) $$bindings.project(project);
	$$result.css.add(css$z);
	$project = get_store_value(project);
	let projectId = $project && $project.id || null;
	let isTeamMember = $user && $project && getIsProjectTeamMember($project);
	let projectSlug = $project && $project.slug || null;
	let headerImage = getProjectHeaderImage($project);
	let projectTitle = $project && $project.title || "";
	let projectDescription = $project && $project.description || "";

	return `<div class="${["projectItem svelte-fyla60", isTeamMember ? "ownerProjectItem" : ""].join(" ").trim()}">
    <div class="${"headerImage svelte-fyla60"}" style="${"background-image: url(" + escape(headerImage) + ")"}" alt="${"project image"}"></div>
    <div class="${"contentContainer svelte-fyla60"}">${validate_component(Button, "Button").$$render(
		$$result,
		{
			className: "readMoreButton",
			onClick: e => {
				loadProject(projectId, { showInfo: true });
				e.stopPropagation();
			},
			icon: img$z
		},
		{},
		{ default: () => `read more` }
	)}
        <div class="${"itemContent"}"><div class="${"header svelte-fyla60"}">${escape(projectTitle)}</div>
            <div class="${"description svelte-fyla60"}">${escape(projectDescription)}</div></div></div>
    ${!isTeamMember
	? `${validate_component(ActionBar, "ActionBar").$$render(
			$$result,
			{
				targetItemId: projectId,
				targetItem: $project
			},
			{},
			{}
		)}`
	: `${$showProjectCounts
		? `${validate_component(ActionBar, "ActionBar").$$render(
				$$result,
				{
					targetItemId: projectId,
					targetItem: $project
				},
				{},
				{
					buttonLeft: () => `<div slot="${"buttonLeft"}">${validate_component(ActionButton, "ActionButton").$$render(
						$$result,
						{
							label: "likes",
							icon: img$x,
							targetItem: $project,
							targetItemId: projectId,
							countProperty: "likeCount",
							buttonContentStyle: "padding-right: 56px;",
							iconStyle: "padding-bottom: 4px; margin-top: 1px;"
						},
						{},
						{}
					)}</div>`,
					buttonMiddle: () => `<div slot="${"buttonMiddle"}">${validate_component(ActionButton, "ActionButton").$$render(
						$$result,
						{
							label: "followers",
							icon: img$y,
							targetItem: $project,
							targetItemId: projectId,
							countProperty: "followCount",
							buttonContentStyle: "padding-right: 56px;",
							iconStyle: "padding-bottom: 4px"
						},
						{},
						{}
					)}</div>`,
					default: () => `
            `
				}
			)}`
		: ``}`}
    
</div>`;
});

/* src\routes\discover\_components\Discover.svelte generated by Svelte v3.23.0 */

const css$A = {
	code: ".pageContent.svelte-yz6r4s .proxyOverlay{position:absolute;opacity:0.5}.feed.svelte-yz6r4s{width:100%;padding-top:5px;min-height:400px}.pageContent.svelte-yz6r4s .searchBar{height:39px}.pageContent.svelte-yz6r4s .scrollHeader{background-color:#ffffff}.pageContent.svelte-yz6r4s .searchBarField{margin:10px 16px}",
	map: "{\"version\":3,\"file\":\"Discover.svelte\",\"sources\":[\"Discover.svelte\"],\"sourcesContent\":[\"<script>\\r\\n\\timport locale from '../../../locale';\\r\\n\\r\\n\\timport { onMount, tick } from 'svelte';\\r\\n\\r\\n\\timport { writable } from 'svelte/store';\\r\\n\\r\\n\\timport ScrollView from '../../../components/ScrollView.svelte';\\r\\n\\timport SearchBar from './../../_components/SearchBar.svelte';\\r\\n\\timport FilterBar from './../../_components/FilterBar.svelte';\\r\\n\\timport HomeIntro from './../../_components/HomeIntro.svelte';\\r\\n\\r\\n\\timport Proxy from '../../../components/Proxy.svelte';\\r\\n\\timport Hotspots from '../../../components/Hotspots.svelte';\\r\\n    import Hotspot from '../../../components/Hotspot.svelte';\\r\\n\\r\\n\\timport Feed from './../../_components/Feed.svelte';\\r\\n\\timport ProjectItem from './../../_components/ProjectItem.svelte';\\r\\n\\timport ContentLoader from './../../_components/ContentLoader.svelte';\\r\\n\\r\\n\\timport AppModel, {\\r\\n\\t\\tviewMode,\\r\\n\\t\\tlocationMode,\\r\\n\\t\\tresetScrollRegionPosition,\\r\\n\\t\\tshowBetaFeatures,\\r\\n\\t\\tdiscoverSearchString,\\r\\n\\t\\tdiscoverFilterString,\\r\\n\\t} from '../../../models/appModel';\\r\\n\\r\\n\\timport {\\r\\n\\t\\tgetDiscoveryProjects,\\r\\n\\t\\tloadingProjects,\\r\\n\\t\\tgetFilteredProjects,\\r\\n\\t} from '../../../models/projectsModel';\\r\\n\\r\\n\\timport { loadProject } from '../../../actions/appActions';\\r\\n\\r\\n\\tconst DISCOVER_SCROLL_DOWN_AMOUNT = 200;\\r\\n\\r\\n\\tAppModel.on('home', onHome);\\r\\n\\r\\n\\tlet discoveryProjects = writable([]);\\r\\n\\tlet filteredDiscoveryProjects = writable([]);\\r\\n\\r\\n\\t$: { discoveryProjects = getDiscoveryProjects(); }\\r\\n\\r\\n\\t$: { $filteredDiscoveryProjects = getFilteredProjects($discoveryProjects, { searchString: $discoverSearchString, filterString: $discoverFilterString }) }\\r\\n\\r\\n\\t$: {\\r\\n\\t\\t$discoverFilterString;\\r\\n\\t\\tscrollToTop();\\r\\n\\t}\\r\\n\\r\\n    onMount(() => {\\r\\n\\t\\tif ($discoverSearchString || $discoverFilterString) {\\r\\n            (async () => {\\r\\n                await tick();\\r\\n\\t\\t\\t\\tscrollToTop();\\r\\n            })();\\r\\n\\t\\t}\\r\\n    });\\r\\n\\r\\n\\tlet scrollRegion;\\r\\n\\r\\n\\tfunction onHome() {\\r\\n\\t\\tscrollToTop();\\r\\n\\t}\\r\\n\\r\\n\\tfunction scrollToTop() {\\r\\n\\t\\tif (scrollRegion) {\\r\\n        \\tscrollRegion.scrollTo(0, 0);\\r\\n\\t\\t}\\r\\n\\t}\\r\\n\\r\\n\\tfunction onDiscoverScrollDown() {\\r\\n\\t\\tif (scrollRegion) {\\r\\n        \\tscrollRegion.scrollTo(0, scrollRegion.scrollTop + DISCOVER_SCROLL_DOWN_AMOUNT);\\r\\n\\t\\t}\\r\\n\\t}\\r\\n\\r\\n\\tfunction toggleViewMode() {\\r\\n\\t\\t$viewMode = ($viewMode === 'explore') ? 'discover' : 'explore';\\r\\n\\t}\\r\\n\\r\\n\\tfunction toggleLocationMode() {\\r\\n\\t\\t$locationMode = ($locationMode === 'global') ? 'local' : 'global';\\r\\n\\t\\tresetScrollRegionPosition('discover');\\r\\n\\t}\\r\\n\\r\\n\\t$: proxyContentOffset = ($locationMode === 'global') ? 0 : 3;\\r\\n\\t$: proxyFilterImage = ($locationMode === 'global') ? 'discover_search' : 'discover_search_local';\\r\\n</script>\\r\\n\\r\\n<div class=\\\"pageContent\\\">\\r\\n\\t<ScrollView id=\\\"discover\\\" bind:scrollRegion=\\\"{scrollRegion}\\\" headerStartHidden=\\\"{!$showBetaFeatures}\\\" headerResetOnShow=\\\"{true}\\\">\\r\\n\\t\\t<!-- <Feed type=\\\"discover\\\" linkToProjects=\\\"{true}\\\" count=\\\"{5}\\\" offset=\\\"{proxyContentOffset}\\\"/> -->\\r\\n\\r\\n\\t\\t{#if !$discoverSearchString && !$discoverFilterString}\\r\\n\\t\\t\\t<!-- !$showBetaFeatures &&  -->\\r\\n\\t\\t\\t<HomeIntro onDiscoverScrollDown=\\\"{onDiscoverScrollDown}\\\" />\\r\\n\\t\\t{/if}\\r\\n\\r\\n\\t\\t<div class=\\\"feed\\\">\\r\\n\\t\\t\\t{#if $loadingProjects && (!$filteredDiscoveryProjects || !$filteredDiscoveryProjects.length) }\\r\\n\\t\\t\\t\\t<ContentLoader label=\\\"{locale.LOADING.DISCOVER}\\\" />\\r\\n\\t\\t\\t{:else}\\r\\n\\t\\t\\t\\t{#each $filteredDiscoveryProjects as project}\\r\\n\\t\\t\\t\\t\\t<ProjectItem {project} />\\r\\n\\t\\t\\t\\t{:else}\\r\\n\\t\\t\\t\\t\\t{#if $discoverFilterString}\\r\\n\\t\\t\\t\\t\\t\\t{#if $discoverSearchString}\\r\\n\\t\\t\\t\\t\\t\\t\\t<slot><ContentLoader label=\\\"No projects in &quot;{$discoverFilterString}&quot; matching &quot;{$discoverSearchString}&quot;\\\" /></slot>\\r\\n\\t\\t\\t\\t\\t\\t{:else}\\r\\n\\t\\t\\t\\t\\t\\t\\t<slot><ContentLoader label=\\\"No projects in &quot;{$discoverFilterString}&quot;\\\" /></slot>\\r\\n\\t\\t\\t\\t\\t\\t{/if}\\r\\n\\t\\t\\t\\t\\t{:else if $discoverSearchString}\\r\\n\\t\\t\\t\\t\\t\\t<slot><ContentLoader label=\\\"No projects matching &quot;{$discoverSearchString}&quot;\\\" /></slot>\\r\\n\\t\\t\\t\\t\\t{:else}\\r\\n\\t\\t\\t\\t\\t\\t<ContentLoader label=\\\"{locale.DISCOVER.NO_PROJECTS}\\\" />\\r\\n\\t\\t\\t\\t\\t{/if}\\r\\n\\t\\t\\t\\t{/each}\\r\\n\\t\\t\\t{/if}\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div slot=\\\"scrollHeader\\\">\\r\\n\\t\\t\\t{#if $showBetaFeatures}\\r\\n\\t\\t\\t\\t<Proxy image=\\\"{proxyFilterImage}\\\">\\r\\n\\t\\t\\t\\t\\t<!-- Toggle View Mode -->\\r\\n\\t\\t\\t\\t\\t<Hotspot onClick=\\\"{toggleViewMode}\\\" style=\\\"\\r\\n\\t\\t\\t\\t\\t\\tleft: 7px;\\r\\n\\t\\t\\t\\t\\t\\ttop: 5px;\\r\\n\\t\\t\\t\\t\\t\\twidth: 38px;\\r\\n\\t\\t\\t\\t\\t\\theight: 39px;\\\" />\\r\\n\\r\\n\\t\\t\\t\\t\\t<!-- Toggle Location Mode -->\\r\\n\\t\\t\\t\\t\\t<Hotspot onClick=\\\"{toggleLocationMode}\\\" style=\\\"\\r\\n\\t\\t\\t\\t\\t\\tright: 10px;\\r\\n\\t\\t\\t\\t\\t\\ttop: 5px;\\r\\n\\t\\t\\t\\t\\t\\twidth: 232px;\\r\\n\\t\\t\\t\\t\\t\\theight: 46px;\\\" />\\r\\n\\t\\t\\t\\t</Proxy>\\r\\n\\t\\t\\t{:else}\\r\\n\\t\\t\\t\\t<!-- <Proxy image=\\\"{proxyFilterImage}\\\" className=\\\"proxyOverlay\\\">\\r\\n\\t\\t\\t\\t\\t<Hotspot onClick=\\\"{toggleViewMode}\\\" style=\\\"\\r\\n\\t\\t\\t\\t\\t\\tleft: 7px;\\r\\n\\t\\t\\t\\t\\t\\ttop: 5px;\\r\\n\\t\\t\\t\\t\\t\\twidth: 38px;\\r\\n\\t\\t\\t\\t\\t\\theight: 39px;\\\" />\\r\\n\\r\\n\\t\\t\\t\\t\\t<Hotspot onClick=\\\"{toggleLocationMode}\\\" style=\\\"\\r\\n\\t\\t\\t\\t\\t\\tright: 10px;\\r\\n\\t\\t\\t\\t\\t\\ttop: 5px;\\r\\n\\t\\t\\t\\t\\t\\twidth: 232px;\\r\\n\\t\\t\\t\\t\\t\\theight: 46px;\\\" />\\r\\n\\t\\t\\t\\t</Proxy> -->\\r\\n\\t\\t\\t\\t<SearchBar bind:searchString={$discoverSearchString} />\\r\\n\\t\\t\\t\\t<FilterBar bind:filterString={$discoverFilterString} />\\r\\n\\t\\t\\t{/if}\\r\\n\\t\\t</div>\\r\\n\\t</ScrollView>\\r\\n</div>\\r\\n\\r\\n<style>\\r\\n\\t.pageContent :global(.proxyOverlay) {\\r\\n\\t\\tposition: absolute;\\r\\n\\t\\topacity: 0.5;\\r\\n\\t}\\r\\n\\r\\n\\t.feed {\\r\\n\\t\\twidth: 100%;\\r\\n\\r\\n\\t\\tpadding-top: 5px;\\r\\n\\r\\n\\t\\tmin-height: 400px;\\r\\n\\t}\\r\\n\\r\\n\\t/* .feed :global(.proxy) {\\r\\n\\t\\tpadding-bottom: 10px;\\r\\n\\t} */\\r\\n\\r\\n\\t.pageContent :global(.searchBar) {\\r\\n\\t\\theight: 39px;\\r\\n\\t}\\r\\n\\r\\n\\t.pageContent :global(.scrollHeader) {\\r\\n    \\tbackground-color: #ffffff;\\r\\n\\t}\\r\\n\\r\\n\\t.pageContent :global(.searchBarField) {\\r\\n    \\tmargin: 10px 16px;\\r\\n    \\t/* margin: 8px 11px; */\\r\\n\\t}\\r\\n</style>\"],\"names\":[],\"mappings\":\"AAmKC,0BAAY,CAAC,AAAQ,aAAa,AAAE,CAAC,AACpC,QAAQ,CAAE,QAAQ,CAClB,OAAO,CAAE,GAAG,AACb,CAAC,AAED,KAAK,cAAC,CAAC,AACN,KAAK,CAAE,IAAI,CAEX,WAAW,CAAE,GAAG,CAEhB,UAAU,CAAE,KAAK,AAClB,CAAC,AAMD,0BAAY,CAAC,AAAQ,UAAU,AAAE,CAAC,AACjC,MAAM,CAAE,IAAI,AACb,CAAC,AAED,0BAAY,CAAC,AAAQ,aAAa,AAAE,CAAC,AACjC,gBAAgB,CAAE,OAAO,AAC7B,CAAC,AAED,0BAAY,CAAC,AAAQ,eAAe,AAAE,CAAC,AACnC,MAAM,CAAE,IAAI,CAAC,IAAI,AAErB,CAAC\"}"
};

const DISCOVER_SCROLL_DOWN_AMOUNT = 200;

const Discover = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let $filteredDiscoveryProjects;
	let $discoveryProjects;
	let $discoverSearchString = get_store_value(discoverSearchString);
	let $discoverFilterString = get_store_value(discoverFilterString);
	let $viewMode = get_store_value(viewMode);
	let $locationMode = get_store_value(locationMode);
	let $showBetaFeatures = get_store_value(showBetaFeatures);
	let $loadingProjects = get_store_value(loadingProjects);
	appModel.on("home", onHome);
	let discoveryProjects = writable$1([]);
	$discoveryProjects = get_store_value(discoveryProjects);
	let filteredDiscoveryProjects = writable$1([]);
	$filteredDiscoveryProjects = get_store_value(filteredDiscoveryProjects);

	onMount(() => {
		if ($discoverSearchString || $discoverFilterString) {
			(async () => {
				await tick();
				scrollToTop();
			})();
		}
	});

	let scrollRegion;

	function onHome() {
		scrollToTop();
	}

	function scrollToTop() {
		if (scrollRegion) {
			scrollRegion.scrollTo(0, 0);
		}
	}

	function onDiscoverScrollDown() {
		if (scrollRegion) {
			scrollRegion.scrollTo(0, scrollRegion.scrollTop + DISCOVER_SCROLL_DOWN_AMOUNT);
		}
	}

	function toggleViewMode() {
		$viewMode = $viewMode === "explore" ? "discover" : "explore";
	}

	function toggleLocationMode() {
		$locationMode = $locationMode === "global" ? "local" : "global";
		resetScrollRegionPosition("discover");
	}

	$$result.css.add(css$A);
	let $$settled;
	let $$rendered;

	do {
		$$settled = true;
		$filteredDiscoveryProjects = get_store_value(filteredDiscoveryProjects);
		$discoveryProjects = get_store_value(discoveryProjects);

		 {
			{
				discoveryProjects = getDiscoveryProjects();
			}
		}

		 {
			{
				$filteredDiscoveryProjects = getFilteredProjects($discoveryProjects, {
					searchString: $discoverSearchString,
					filterString: $discoverFilterString
				});
			}
		}

		 {
			{
				scrollToTop();
			}
		}

		let proxyFilterImage = $locationMode === "global"
		? "discover_search"
		: "discover_search_local";

		$$rendered = `<div class="${"pageContent svelte-yz6r4s"}">${validate_component(ScrollView, "ScrollView").$$render(
			$$result,
			{
				id: "discover",
				headerStartHidden: !$showBetaFeatures,
				headerResetOnShow: true,
				scrollRegion
			},
			{
				scrollRegion: $$value => {
					scrollRegion = $$value;
					$$settled = false;
				}
			},
			{
				scrollHeader: () => `<div slot="${"scrollHeader"}">${$showBetaFeatures
				? `${validate_component(Proxy, "Proxy").$$render($$result, { image: proxyFilterImage }, {}, {
						default: () => `
					${validate_component(Hotspot, "Hotspot").$$render(
							$$result,
							{
								onClick: toggleViewMode,
								style: "\r\n\t\t\t\t\t\tleft: 7px;\r\n\t\t\t\t\t\ttop: 5px;\r\n\t\t\t\t\t\twidth: 38px;\r\n\t\t\t\t\t\theight: 39px;"
							},
							{},
							{}
						)}

					
					${validate_component(Hotspot, "Hotspot").$$render(
							$$result,
							{
								onClick: toggleLocationMode,
								style: "\r\n\t\t\t\t\t\tright: 10px;\r\n\t\t\t\t\t\ttop: 5px;\r\n\t\t\t\t\t\twidth: 232px;\r\n\t\t\t\t\t\theight: 46px;"
							},
							{},
							{}
						)}`
					})}`
				: `
				${validate_component(SearchBar, "SearchBar").$$render(
						$$result,
						{ searchString: $discoverSearchString },
						{
							searchString: $$value => {
								$discoverSearchString = $$value;
								$$settled = false;
							}
						},
						{}
					)}
				${validate_component(FilterBar, "FilterBar").$$render(
						$$result,
						{ filterString: $discoverFilterString },
						{
							filterString: $$value => {
								$discoverFilterString = $$value;
								$$settled = false;
							}
						},
						{}
					)}`}</div>`,
				default: () => `

		${!$discoverSearchString && !$discoverFilterString
				? `
			${validate_component(HomeIntro, "HomeIntro").$$render($$result, { onDiscoverScrollDown }, {}, {})}`
				: ``}

		<div class="${"feed svelte-yz6r4s"}">${$loadingProjects && (!$filteredDiscoveryProjects || !$filteredDiscoveryProjects.length)
				? `${validate_component(ContentLoader, "ContentLoader").$$render($$result, { label: locale$1.LOADING.DISCOVER }, {}, {})}`
				: `${$filteredDiscoveryProjects.length
					? each($filteredDiscoveryProjects, project => `${validate_component(ProjectItem, "ProjectItem").$$render($$result, { project }, {}, {})}`)
					: `${$discoverFilterString
						? `${$discoverSearchString
							? `${$$slots.default
								? $$slots.default({})
								: `${validate_component(ContentLoader, "ContentLoader").$$render(
										$$result,
										{
											label: "No projects in \"" + $discoverFilterString + "\" matching \"" + $discoverSearchString + "\""
										},
										{},
										{}
									)}`}`
							: `${$$slots.default
								? $$slots.default({})
								: `${validate_component(ContentLoader, "ContentLoader").$$render(
										$$result,
										{
											label: "No projects in \"" + $discoverFilterString + "\""
										},
										{},
										{}
									)}`}`}`
						: `${$discoverSearchString
							? `${$$slots.default
								? $$slots.default({})
								: `${validate_component(ContentLoader, "ContentLoader").$$render(
										$$result,
										{
											label: "No projects matching \"" + $discoverSearchString + "\""
										},
										{},
										{}
									)}`}`
							: `${validate_component(ContentLoader, "ContentLoader").$$render($$result, { label: locale$1.DISCOVER.NO_PROJECTS }, {}, {})}`}`}`}`}</div>

		`
			}
		)}
</div>`;
	} while (!$$settled);

	return $$rendered;
});

/* src\routes\discover\_components\ExploreFilterBar.svelte generated by Svelte v3.23.0 */

const css$B = {
	code: ".filterBar.svelte-6lk1tf{position:absolute;height:60px;background-image:linear-gradient(rgba(0,0,0,0.8), rgba(0,0,0,0.6), rgba(0,0,0,0))}",
	map: "{\"version\":3,\"file\":\"ExploreFilterBar.svelte\",\"sources\":[\"ExploreFilterBar.svelte\"],\"sourcesContent\":[\"<script>\\r\\n\\timport Proxy from '../../../components/Proxy.svelte';\\r\\n\\timport Hotspots from '../../../components/Hotspots.svelte';\\r\\n\\timport Hotspot from '../../../components/Hotspot.svelte';\\r\\n\\r\\n\\timport { viewMode, locationMode, exploreZoomed } from '../../../models/appModel';\\r\\n\\r\\n\\tfunction toggleViewMode() {\\r\\n\\t\\t$viewMode = ($viewMode === 'explore') ? 'discover' : 'explore';\\r\\n\\t}\\r\\n\\r\\n\\tfunction toggleLocationMode() {\\r\\n\\t\\t$locationMode = ($locationMode === 'global') ? 'local' : 'global';\\r\\n\\r\\n\\t\\t// reset zoom if zoomed in and toggling location state\\r\\n\\t\\tif ($exploreZoomed) {\\r\\n\\t\\t\\t$exploreZoomed = false;\\r\\n\\t\\t}\\r\\n\\t}\\r\\n\\r\\n\\t$: proxyFilterImage = ($locationMode === 'global') ? 'explore_filter.png' : 'explore_filter_local.png';\\r\\n</script>\\r\\n\\r\\n<div class=\\\"filterBar\\\">\\r\\n\\t<Hotspots>\\r\\n\\t\\t<!-- Toggle View Mode -->\\r\\n\\t\\t<Hotspot onClick=\\\"{toggleViewMode}\\\" style=\\\"\\r\\n\\t\\t\\tleft: 7px;\\r\\n\\t\\t\\ttop: 5px;\\r\\n\\t\\t\\twidth: 44px;\\r\\n\\t\\t\\theight: 46px;\\\" />\\r\\n\\r\\n\\t\\t<!-- Toggle Location Mode -->\\r\\n\\t\\t<Hotspot onClick=\\\"{toggleLocationMode}\\\" style=\\\"\\r\\n\\t\\t\\tright: 10px;\\r\\n\\t\\t\\ttop: 5px;\\r\\n\\t\\t\\twidth: 232px;\\r\\n\\t\\t\\theight: 46px;\\\" />\\r\\n\\t</Hotspots>\\r\\n\\r\\n\\t<Proxy image=\\\"{proxyFilterImage}\\\" />\\r\\n</div>\\r\\n\\r\\n<style>\\r\\n\\t.filterBar {\\r\\n\\t\\tposition: absolute;\\r\\n    \\theight: 60px;\\r\\n\\t\\tbackground-image: linear-gradient(rgba(0,0,0,0.8), rgba(0,0,0,0.6), rgba(0,0,0,0));\\r\\n\\t}\\r\\n</style>\"],\"names\":[],\"mappings\":\"AA4CC,UAAU,cAAC,CAAC,AACX,QAAQ,CAAE,QAAQ,CACf,MAAM,CAAE,IAAI,CACf,gBAAgB,CAAE,gBAAgB,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,AACnF,CAAC\"}"
};

const ExploreFilterBar = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let $viewMode = get_store_value(viewMode);
	let $locationMode = get_store_value(locationMode);
	let $exploreZoomed = get_store_value(exploreZoomed);

	function toggleViewMode() {
		$viewMode = $viewMode === "explore" ? "discover" : "explore";
	}

	function toggleLocationMode() {
		$locationMode = $locationMode === "global" ? "local" : "global";

		// reset zoom if zoomed in and toggling location state
		if ($exploreZoomed) {
			$exploreZoomed = false;
		}
	}

	$$result.css.add(css$B);

	let proxyFilterImage = $locationMode === "global"
	? "explore_filter.png"
	: "explore_filter_local.png";

	return `<div class="${"filterBar svelte-6lk1tf"}">${validate_component(Hotspots, "Hotspots").$$render($$result, {}, {}, {
		default: () => `
		${validate_component(Hotspot, "Hotspot").$$render(
			$$result,
			{
				onClick: toggleViewMode,
				style: "\r\n\t\t\tleft: 7px;\r\n\t\t\ttop: 5px;\r\n\t\t\twidth: 44px;\r\n\t\t\theight: 46px;"
			},
			{},
			{}
		)}

		
		${validate_component(Hotspot, "Hotspot").$$render(
			$$result,
			{
				onClick: toggleLocationMode,
				style: "\r\n\t\t\tright: 10px;\r\n\t\t\ttop: 5px;\r\n\t\t\twidth: 232px;\r\n\t\t\theight: 46px;"
			},
			{},
			{}
		)}`
	})}

	${validate_component(Proxy, "Proxy").$$render($$result, { image: proxyFilterImage }, {}, {})}
</div>`;
});

/* src\routes\discover\_components\Explore.svelte generated by Svelte v3.23.0 */

const css$C = {
	code: ".content.svelte-1w2ygh{position:absolute;width:100%;height:100%;background-color:#0B0B0B}.content.svelte-1w2ygh .hotspotContainer{height:100%}.contentArea.svelte-1w2ygh{position:absolute;width:100%;height:100%;display:flex;align-items:center;justify-content:center}",
	map: "{\"version\":3,\"file\":\"Explore.svelte\",\"sources\":[\"Explore.svelte\"],\"sourcesContent\":[\"<script>\\r\\n\\timport { locationMode, exploreZoomed } from '../../../models/appModel';\\r\\n\\r\\n\\timport Proxy from '../../../components/Proxy.svelte';\\r\\n\\timport Hotspots from '../../../components/Hotspots.svelte';\\r\\n    import Hotspot from '../../../components/Hotspot.svelte';\\r\\n\\r\\n\\timport ScrollView from '../../../components/ScrollView.svelte';\\r\\n\\r\\n\\t$: proxyContentImage = ($locationMode === 'global') ? 'explore_content' : 'explore_content_local';\\r\\n\\r\\n\\timport ExploreFilterBar from './ExploreFilterBar.svelte';\\r\\n\\r\\n\\tfunction exploreZoomIn() {\\r\\n\\t\\t$exploreZoomed = true;\\r\\n\\t}\\r\\n</script>\\r\\n\\r\\n<div class=\\\"content\\\">\\r\\n\\t<div class=\\\"contentArea\\\">\\r\\n\\t\\t<Hotspots>\\r\\n\\t\\t\\t<!-- Zoom In -->\\r\\n\\t\\t\\t<Hotspot onClick=\\\"{exploreZoomIn}\\\" style=\\\"\\r\\n\\t\\t\\t\\ttop: 50%;\\r\\n\\t\\t\\t\\tleft: 50%;\\r\\n\\t\\t\\t\\ttransform: translate(-50%, -50%);\\r\\n\\t\\t\\t\\twidth: 350px;\\r\\n\\t\\t\\t\\theight: 350px;\\r\\n\\t\\t\\t\\tborder-radius: 999px;\\\" />\\r\\n\\t\\t</Hotspots>\\r\\n\\r\\n\\t\\t<Proxy image=\\\"{proxyContentImage}\\\" />\\r\\n\\t</div>\\r\\n\\r\\n\\t<ExploreFilterBar />\\r\\n</div>\\r\\n\\r\\n<style>\\r\\n\\t.content {\\r\\n\\t\\tposition: absolute;\\r\\n\\t\\twidth: 100%;\\r\\n\\t\\theight: 100%;\\r\\n\\r\\n\\t\\tbackground-color: #0B0B0B;\\r\\n\\t}\\r\\n\\r\\n\\t.content :global(.hotspotContainer) {\\r\\n\\t\\theight: 100%;\\r\\n\\t}\\r\\n\\r\\n\\t.contentArea {\\r\\n\\t\\tposition: absolute;\\r\\n\\t\\twidth: 100%;\\r\\n\\t\\theight: 100%;\\r\\n\\r\\n\\t\\tdisplay:flex;\\r\\n\\t\\talign-items: center;\\r\\n\\t\\tjustify-content: center;\\r\\n\\t}\\r\\n</style>\"],\"names\":[],\"mappings\":\"AAsCC,QAAQ,cAAC,CAAC,AACT,QAAQ,CAAE,QAAQ,CAClB,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CAEZ,gBAAgB,CAAE,OAAO,AAC1B,CAAC,AAED,sBAAQ,CAAC,AAAQ,iBAAiB,AAAE,CAAC,AACpC,MAAM,CAAE,IAAI,AACb,CAAC,AAED,YAAY,cAAC,CAAC,AACb,QAAQ,CAAE,QAAQ,CAClB,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CAEZ,QAAQ,IAAI,CACZ,WAAW,CAAE,MAAM,CACnB,eAAe,CAAE,MAAM,AACxB,CAAC\"}"
};

const Explore = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let $locationMode = get_store_value(locationMode);
	let $exploreZoomed = get_store_value(exploreZoomed);

	function exploreZoomIn() {
		$exploreZoomed = true;
	}

	$$result.css.add(css$C);

	let proxyContentImage = $locationMode === "global"
	? "explore_content"
	: "explore_content_local";

	return `<div class="${"content svelte-1w2ygh"}"><div class="${"contentArea svelte-1w2ygh"}">${validate_component(Hotspots, "Hotspots").$$render($$result, {}, {}, {
		default: () => `
			${validate_component(Hotspot, "Hotspot").$$render(
			$$result,
			{
				onClick: exploreZoomIn,
				style: "\r\n\t\t\t\ttop: 50%;\r\n\t\t\t\tleft: 50%;\r\n\t\t\t\ttransform: translate(-50%, -50%);\r\n\t\t\t\twidth: 350px;\r\n\t\t\t\theight: 350px;\r\n\t\t\t\tborder-radius: 999px;"
			},
			{},
			{}
		)}`
	})}

		${validate_component(Proxy, "Proxy").$$render($$result, { image: proxyContentImage }, {}, {})}</div>

	${validate_component(ExploreFilterBar, "ExploreFilterBar").$$render($$result, {}, {}, {})}
</div>`;
});

/* src\routes\discover\_components\ExploreZoomed.svelte generated by Svelte v3.23.0 */

const css$D = {
	code: ".content.svelte-wx7qkl{position:absolute;width:100%;height:100%;background-color:#0B0B0B;overflow:hidden}.content.svelte-wx7qkl .hotspotContainer{top:0;height:100%}.contentArea.svelte-wx7qkl{position:absolute;width:100%;height:100%;display:flex;align-items:center;justify-content:center}.contentArea.svelte-wx7qkl .exploreZoomed{margin-top:55px}",
	map: "{\"version\":3,\"file\":\"ExploreZoomed.svelte\",\"sources\":[\"ExploreZoomed.svelte\"],\"sourcesContent\":[\"<script>\\r\\n\\timport { exploreZoomed } from '../../../models/appModel';\\r\\n\\r\\n\\timport { loadProject } from '../../../actions/appActions';\\r\\n\\r\\n\\timport Proxy from '../../../components/Proxy.svelte';\\r\\n\\timport Hotspots from '../../../components/Hotspots.svelte';\\r\\n    import Hotspot from '../../../components/Hotspot.svelte';\\r\\n\\r\\n\\timport ScrollView from '../../../components/ScrollView.svelte';\\r\\n\\r\\n\\timport ExploreFilterBar from './ExploreFilterBar.svelte';\\r\\n\\r\\n\\tfunction exploreZoomOut() {\\r\\n\\t\\t$exploreZoomed = false;\\r\\n\\t}\\r\\n</script>\\r\\n\\r\\n<div class=\\\"content\\\">\\r\\n\\t<div class=\\\"contentArea\\\">\\r\\n\\t\\t<Hotspots>\\r\\n\\t\\t\\t<!-- Zoom Out -->\\r\\n\\t\\t\\t<Hotspot onClick=\\\"{exploreZoomOut}\\\" style=\\\"\\r\\n\\t\\t\\t\\ttop: 0;\\r\\n\\t\\t\\t\\tleft: 0;\\r\\n\\t\\t\\t\\twidth: 100%;\\r\\n\\t\\t\\t\\theight: 100%;\\\" />\\r\\n\\r\\n\\t\\t\\t<!-- Select Project -->\\r\\n\\t\\t\\t<Hotspot onClick=\\\"{e => loadProject('s7djj2s2')}\\\" style=\\\"\\r\\n\\t\\t\\t\\ttop: 50%;\\r\\n\\t\\t\\t\\tleft: 50%;\\r\\n\\t\\t\\t\\ttransform: translate(-50%, -50%);\\r\\n\\t\\t\\t\\twidth: 250px;\\r\\n\\t\\t\\t\\theight: 250px;\\r\\n\\t\\t\\t\\tborder-radius: 999px;\\\" />\\r\\n\\t\\t</Hotspots>\\r\\n\\r\\n\\t\\t<Proxy image=\\\"explore_zoomed\\\" className=\\\"exploreZoomed\\\" />\\r\\n\\t</div>\\r\\n\\r\\n\\t<ExploreFilterBar />\\r\\n</div>\\r\\n\\r\\n<style>\\r\\n\\t.content {\\r\\n\\t\\tposition: absolute;\\r\\n\\t\\twidth: 100%;\\r\\n\\t\\theight: 100%;\\r\\n\\r\\n\\t\\tbackground-color: #0B0B0B;\\r\\n\\r\\n\\t\\toverflow: hidden;\\r\\n\\t}\\r\\n\\r\\n\\t.content :global(.hotspotContainer) {\\r\\n\\t\\ttop: 0;\\r\\n\\t\\theight: 100%;\\r\\n\\t}\\r\\n\\r\\n\\t.contentArea {\\r\\n\\t\\tposition: absolute;\\r\\n\\t\\twidth: 100%;\\r\\n\\t\\theight: 100%;\\r\\n\\r\\n\\t\\tdisplay:flex;\\r\\n\\t\\talign-items: center;\\r\\n\\t\\tjustify-content: center;\\r\\n\\t}\\r\\n\\r\\n\\t.contentArea :global(.exploreZoomed) {\\r\\n\\t\\tmargin-top: 55px;\\r\\n\\t}\\r\\n</style>\"],\"names\":[],\"mappings\":\"AA6CC,QAAQ,cAAC,CAAC,AACT,QAAQ,CAAE,QAAQ,CAClB,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CAEZ,gBAAgB,CAAE,OAAO,CAEzB,QAAQ,CAAE,MAAM,AACjB,CAAC,AAED,sBAAQ,CAAC,AAAQ,iBAAiB,AAAE,CAAC,AACpC,GAAG,CAAE,CAAC,CACN,MAAM,CAAE,IAAI,AACb,CAAC,AAED,YAAY,cAAC,CAAC,AACb,QAAQ,CAAE,QAAQ,CAClB,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CAEZ,QAAQ,IAAI,CACZ,WAAW,CAAE,MAAM,CACnB,eAAe,CAAE,MAAM,AACxB,CAAC,AAED,0BAAY,CAAC,AAAQ,cAAc,AAAE,CAAC,AACrC,UAAU,CAAE,IAAI,AACjB,CAAC\"}"
};

const ExploreZoomed = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let $exploreZoomed = get_store_value(exploreZoomed);

	function exploreZoomOut() {
		$exploreZoomed = false;
	}

	$$result.css.add(css$D);

	return `<div class="${"content svelte-wx7qkl"}"><div class="${"contentArea svelte-wx7qkl"}">${validate_component(Hotspots, "Hotspots").$$render($$result, {}, {}, {
		default: () => `
			${validate_component(Hotspot, "Hotspot").$$render(
			$$result,
			{
				onClick: exploreZoomOut,
				style: "\r\n\t\t\t\ttop: 0;\r\n\t\t\t\tleft: 0;\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\theight: 100%;"
			},
			{},
			{}
		)}

			
			${validate_component(Hotspot, "Hotspot").$$render(
			$$result,
			{
				onClick: e => loadProject("s7djj2s2"),
				style: "\r\n\t\t\t\ttop: 50%;\r\n\t\t\t\tleft: 50%;\r\n\t\t\t\ttransform: translate(-50%, -50%);\r\n\t\t\t\twidth: 250px;\r\n\t\t\t\theight: 250px;\r\n\t\t\t\tborder-radius: 999px;"
			},
			{},
			{}
		)}`
	})}

		${validate_component(Proxy, "Proxy").$$render(
		$$result,
		{
			image: "explore_zoomed",
			className: "exploreZoomed"
		},
		{},
		{}
	)}</div>

	${validate_component(ExploreFilterBar, "ExploreFilterBar").$$render($$result, {}, {}, {})}
</div>`;
});

/* src\routes\discover\index.svelte generated by Svelte v3.23.0 */

const Discover_1 = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let $viewMode = get_store_value(viewMode);
	let $exploreZoomed = get_store_value(exploreZoomed);

	return `



${($$result.head += `${($$result.title = `<title>Flock</title>`, "")}`, "")}

${$viewMode === "discover"
	? `${validate_component(Discover, "Discover").$$render($$result, {}, {}, {})}`
	: `${$exploreZoomed
		? `${validate_component(ExploreZoomed, "ExploreZoomed").$$render($$result, {}, {}, {})}`
		: `${validate_component(Explore, "Explore").$$render($$result, {}, {}, {})}`}`}`;
});

var index$1 = /*#__PURE__*/Object.freeze({
    __proto__: null,
    'default': Discover_1
});

/* src\routes\_components\ConversationListItem.svelte generated by Svelte v3.23.0 */

const css$E = {
	code: ".conversationListItem.svelte-7jfayp.svelte-7jfayp{position:relative;padding:5px 0;height:67px;margin-bottom:0;cursor:pointer}.conversationListItem.svelte-7jfayp.svelte-7jfayp .avatarIcon{position:absolute;top:14px;left:21px;width:61px;height:61px}.detailContent.svelte-7jfayp.svelte-7jfayp{position:absolute;left:96px;top:14px;bottom:0;right:46px;display:flex;align-items:center}.detailInnerContent.svelte-7jfayp.svelte-7jfayp{width:100%}.title.svelte-7jfayp.svelte-7jfayp{font-size:1.5rem;line-height:1.3rem;font-weight:700}.message.svelte-7jfayp.svelte-7jfayp{font-size:1.2rem;line-height:1.3rem;margin-top:7px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.dateString.svelte-7jfayp.svelte-7jfayp{color:#999999}.info.svelte-7jfayp.svelte-7jfayp{position:absolute;right:0;top:13px}.info.svelte-7jfayp .unseenIcon.svelte-7jfayp{position:absolute;top:23px;right:25px;width:16px;height:16px;background-color:#DF3C3C;border-radius:999px}",
	map: "{\"version\":3,\"file\":\"ConversationListItem.svelte\",\"sources\":[\"ConversationListItem.svelte\"],\"sourcesContent\":[\"<script>\\r\\n    import { get, writable } from 'svelte/store';\\r\\n\\r\\n    import config from '../../config';\\r\\n    import locale from '../../locale';\\r\\n\\r\\n    import AvatarIcon from './AvatarIcon.svelte';\\r\\n\\r\\n    import { getDisplayText, getDateAgeString, getEllipsisText } from '../../utils';\\r\\n\\r\\n    import { getUser, getUserModelFromData } from '../../models/usersModel';\\r\\n\\r\\n    import { getConversationOtherUser, getUserConversationInfo } from '../../models/conversationsModel';\\r\\n\\r\\n    import { userId } from '../../models/appModel';\\r\\n\\r\\n    import { loadPost, loadChannel, loadProject } from '../../actions/appActions';\\r\\n\\r\\n\\timport { loadConversation } from '../../actions/appActions';\\r\\n\\r\\n    export let conversation;\\r\\n\\r\\n    // $: console.log('conversation', $conversation);\\r\\n\\r\\n    $: title = ($conversation && $conversation.title) || '';\\r\\n\\r\\n    $: lastSenderId = ($conversation && $conversation.lastSenderId) || null;\\r\\n\\r\\n    $: lastMessageText = ($conversation && $conversation.lastMessageText) || '';\\r\\n    $: lastMessageFormatted = lastMessageText && getDisplayText(lastMessageText, {disallowLinks: true, collapseBreaks: true});\\r\\n    $: lastMessagePrefixed = lastMessageFormatted && (lastSenderId === $userId ? 'you: ' + lastMessageFormatted : lastMessageFormatted);\\r\\n    $: lastMessageTruncated = lastMessagePrefixed && getEllipsisText(lastMessagePrefixed, config.CONVERSATION_MAX_PREVIEW_LENGTH);\\r\\n    $: messagePreview = lastMessageTruncated || '(image)'; // TODO: use if image present to display this\\r\\n\\r\\n    // $: message = $conversation ? (($conversation.lastMessageText && getEllipsisText($conversation.lastMessageText, config.CONVERSATION_MAX_PREVIEW_LENGTH)) || '(image)') : '';\\r\\n\\r\\n    $: conversationId = ($conversation && $conversation.id) || null;\\r\\n    $: projectId = ($conversation && $conversation.projectId) || null;\\r\\n\\r\\n    $: viewed = $conversation ? $conversation.viewed : true;\\r\\n\\r\\n    // $: userConversationInfo = getUserConversationInfo($conversation);\\r\\n    // $: viewed = userConversationInfo ? userConversationInfo.viewed : true;\\r\\n\\r\\n    // $: projectTitle = $conversation && $conversation.projectTitle;\\r\\n\\r\\n    $: date = ($conversation && $conversation.lastMessageAt) || null;\\r\\n    $: dateString = (date && ' - ' + getDateAgeString(date)) || '';\\r\\n\\r\\n    $: actor = ($conversation && getConversationOtherUser($conversation)) || null;\\r\\n    $: actorUser = (actor && date && getUserModelFromData(actor, date)) || writable(null);\\r\\n    $: actorName = ($actorUser && $actorUser.name) || (actor && actor.name) || '';\\r\\n\\r\\n    $: titleString = title || actorName || '';\\r\\n\\r\\n    function loadItem() {\\r\\n        if (conversationId) {\\r\\n            loadConversation(conversationId);\\r\\n        }\\r\\n    }\\r\\n</script>\\r\\n\\r\\n<div class=\\\"conversationListItem\\\" on:click=\\\"{loadItem}\\\">\\r\\n    <AvatarIcon user=\\\"{actorUser}\\\" useThumb=\\\"{true}\\\" />\\r\\n    <div class=\\\"detailContent\\\">\\r\\n        <div class=\\\"detailInnerContent\\\">\\r\\n            <div class=\\\"title\\\">{titleString}</div>\\r\\n            <div class=\\\"message\\\">{@html messagePreview}<span class=\\\"dateString\\\">{dateString}</span></div>\\r\\n        </div>\\r\\n    </div>\\r\\n    <div class=\\\"info\\\">\\r\\n        {#if !viewed}\\r\\n            <div class=\\\"unseenIcon\\\" />\\r\\n        {/if}\\r\\n    </div>\\r\\n</div>\\r\\n\\r\\n<style>\\r\\n    .conversationListItem {\\r\\n        position: relative;\\r\\n\\r\\n        padding: 5px 0;\\r\\n        height: 67px;\\r\\n        margin-bottom: 0;\\r\\n\\r\\n        cursor: pointer;\\r\\n    }\\r\\n\\r\\n    /* .thumb {\\r\\n        position: absolute;\\r\\n        top: 14px;\\r\\n        left: 21px;\\r\\n        width: 61px;\\r\\n        height: 61px;\\r\\n        object-fit: cover;\\r\\n\\r\\n        border: 1px solid #D9D9D9;\\r\\n    } */\\r\\n\\r\\n    .conversationListItem :global(.avatarIcon) {\\r\\n        position: absolute;\\r\\n        top: 14px;\\r\\n        left: 21px;\\r\\n        width: 61px;\\r\\n        height: 61px;\\r\\n    }\\r\\n\\r\\n    .detailContent {\\r\\n        position: absolute;\\r\\n        left: 96px;\\r\\n        top: 14px;\\r\\n        bottom: 0;\\r\\n        right: 46px;\\r\\n\\r\\n\\t\\tdisplay: flex;\\r\\n        align-items: center;\\r\\n        /* padding-bottom: 3px; */\\r\\n    }\\r\\n    .detailInnerContent {\\r\\n        width: 100%;\\r\\n    }\\r\\n\\r\\n    .title {\\r\\n        font-size: 1.5rem;\\r\\n        line-height: 1.3rem;\\r\\n        font-weight: 700;\\r\\n    }\\r\\n\\r\\n    .message {\\r\\n        font-size: 1.2rem;\\r\\n        line-height: 1.3rem;\\r\\n        margin-top: 7px;\\r\\n\\r\\n        white-space: nowrap;\\r\\n        overflow: hidden;\\r\\n        text-overflow: ellipsis;\\r\\n    }\\r\\n\\r\\n    /* .messageString {\\r\\n        display: inline-block;\\r\\n        max-width: 172px;\\r\\n        white-space: nowrap;\\r\\n        overflow: hidden;\\r\\n        text-overflow: ellipsis;\\r\\n    } */\\r\\n\\r\\n    .dateString {\\r\\n        color: #999999;\\r\\n\\r\\n        /* display: inline-block; */\\r\\n    }\\r\\n\\r\\n    .info {\\r\\n        position: absolute;\\r\\n        right: 0;\\r\\n        top: 13px;\\r\\n    }\\r\\n\\r\\n    .info .unseenIcon {\\r\\n        position: absolute;\\r\\n        top: 23px;\\r\\n        right: 25px;\\r\\n        width: 16px;\\r\\n        height: 16px;\\r\\n        background-color: #DF3C3C;\\r\\n        border-radius: 999px;\\r\\n    }\\r\\n</style>\"],\"names\":[],\"mappings\":\"AA8EI,qBAAqB,4BAAC,CAAC,AACnB,QAAQ,CAAE,QAAQ,CAElB,OAAO,CAAE,GAAG,CAAC,CAAC,CACd,MAAM,CAAE,IAAI,CACZ,aAAa,CAAE,CAAC,CAEhB,MAAM,CAAE,OAAO,AACnB,CAAC,AAaD,iDAAqB,CAAC,AAAQ,WAAW,AAAE,CAAC,AACxC,QAAQ,CAAE,QAAQ,CAClB,GAAG,CAAE,IAAI,CACT,IAAI,CAAE,IAAI,CACV,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,AAChB,CAAC,AAED,cAAc,4BAAC,CAAC,AACZ,QAAQ,CAAE,QAAQ,CAClB,IAAI,CAAE,IAAI,CACV,GAAG,CAAE,IAAI,CACT,MAAM,CAAE,CAAC,CACT,KAAK,CAAE,IAAI,CAEjB,OAAO,CAAE,IAAI,CACP,WAAW,CAAE,MAAM,AAEvB,CAAC,AACD,mBAAmB,4BAAC,CAAC,AACjB,KAAK,CAAE,IAAI,AACf,CAAC,AAED,MAAM,4BAAC,CAAC,AACJ,SAAS,CAAE,MAAM,CACjB,WAAW,CAAE,MAAM,CACnB,WAAW,CAAE,GAAG,AACpB,CAAC,AAED,QAAQ,4BAAC,CAAC,AACN,SAAS,CAAE,MAAM,CACjB,WAAW,CAAE,MAAM,CACnB,UAAU,CAAE,GAAG,CAEf,WAAW,CAAE,MAAM,CACnB,QAAQ,CAAE,MAAM,CAChB,aAAa,CAAE,QAAQ,AAC3B,CAAC,AAUD,WAAW,4BAAC,CAAC,AACT,KAAK,CAAE,OAAO,AAGlB,CAAC,AAED,KAAK,4BAAC,CAAC,AACH,QAAQ,CAAE,QAAQ,CAClB,KAAK,CAAE,CAAC,CACR,GAAG,CAAE,IAAI,AACb,CAAC,AAED,mBAAK,CAAC,WAAW,cAAC,CAAC,AACf,QAAQ,CAAE,QAAQ,CAClB,GAAG,CAAE,IAAI,CACT,KAAK,CAAE,IAAI,CACX,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,gBAAgB,CAAE,OAAO,CACzB,aAAa,CAAE,KAAK,AACxB,CAAC\"}"
};

const ConversationListItem = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let $conversation;
	let $userId = get_store_value(userId);
	let $actorUser;
	let { conversation } = $$props;
	$conversation = get_store_value(conversation);

	if ($$props.conversation === void 0 && $$bindings.conversation && conversation !== void 0) $$bindings.conversation(conversation);
	$$result.css.add(css$E);
	$conversation = get_store_value(conversation);
	$actorUser = get_store_value(actorUser);
	let title = $conversation && $conversation.title || "";
	let lastSenderId = $conversation && $conversation.lastSenderId || null;
	let lastMessageText = $conversation && $conversation.lastMessageText || "";

	let lastMessageFormatted = lastMessageText && getDisplayText(lastMessageText, {
		disallowLinks: true,
		collapseBreaks: true
	});

	let lastMessagePrefixed = lastMessageFormatted && (lastSenderId === $userId
	? "you: " + lastMessageFormatted
	: lastMessageFormatted);

	let lastMessageTruncated = lastMessagePrefixed && getEllipsisText(lastMessagePrefixed, config$1.CONVERSATION_MAX_PREVIEW_LENGTH);
	let messagePreview = lastMessageTruncated || "(image)";
	let conversationId = $conversation && $conversation.id || null;
	let projectId = $conversation && $conversation.projectId || null;
	let viewed = $conversation ? $conversation.viewed : true;
	let date = $conversation && $conversation.lastMessageAt || null;
	let dateString = date && " - " + getDateAgeString(date) || "";
	let actor = $conversation && getConversationOtherUser($conversation) || null;
	let actorUser = actor && date && getUserModelFromData(actor, date) || writable$1(null);
	let actorName = $actorUser && $actorUser.name || actor && actor.name || "";
	let titleString = title || actorName || "";

	return `<div class="${"conversationListItem svelte-7jfayp"}">${validate_component(AvatarIcon, "AvatarIcon").$$render($$result, { user: actorUser, useThumb: true }, {}, {})}
    <div class="${"detailContent svelte-7jfayp"}"><div class="${"detailInnerContent svelte-7jfayp"}"><div class="${"title svelte-7jfayp"}">${escape(titleString)}</div>
            <div class="${"message svelte-7jfayp"}">${messagePreview}<span class="${"dateString svelte-7jfayp"}">${escape(dateString)}</span></div></div></div>
    <div class="${"info svelte-7jfayp"}">${!viewed
	? `<div class="${"unseenIcon svelte-7jfayp"}"></div>`
	: ``}</div>
</div>`;
});

/* src\routes\_components\ConversationList.svelte generated by Svelte v3.23.0 */

const css$F = {
	code: ".conversationList.svelte-pui8gu{padding-top:10px;padding-bottom:40px}.conversationList.svelte-pui8gu .panelContent{margin-top:-6px;margin-bottom:-6px}.noConversations.svelte-pui8gu{padding:0 20px;font-size:1.2rem;line-height:1.8rem;padding-top:10px;padding-bottom:20px}.conversationList.svelte-pui8gu .contentLoader{padding:0 20px;font-size:1.2rem;padding-top:10px;padding-bottom:30px;line-height:2.5rem}",
	map: "{\"version\":3,\"file\":\"ConversationList.svelte\",\"sources\":[\"ConversationList.svelte\"],\"sourcesContent\":[\"<script>\\r\\n    import locale from '../../locale';\\r\\n\\r\\n    import config from '../../config';\\r\\n\\r\\n\\timport { get, writable } from 'svelte/store';\\r\\n\\r\\n    import Proxy from '../../components/Proxy.svelte';\\r\\n    import Hotspot from '../../components/Hotspot.svelte';\\r\\n\\r\\n\\timport ContentPanel from './../_components/ContentPanel.svelte';\\r\\n    import ConversationListItem from './ConversationListItem.svelte';\\r\\n    import ContentLoader from './../_components/ContentLoader.svelte';\\r\\n\\r\\n\\timport { newProject } from '../../actions/appActions';\\r\\n\\r\\n    import {\\r\\n        userId,\\r\\n        user,\\r\\n        loggingIn,\\r\\n\\t\\tisUserLoaded,\\r\\n    } from '../../models/appModel';\\r\\n\\r\\n    // $: loggedOut = isUserLoaded($user, $userId) && !$user && !$userId;\\r\\n    // $: console.log('loggedOut', loggedOut, 'isUserLoaded', isUserLoaded($user, $userId), 'userId', $userId);\\r\\n    // $: console.log('isUserLoaded', isUserLoaded($user, $userId, $loggingIn));\\r\\n\\r\\n    import { getConversations, loadingConversations } from '../../models/conversationsModel';\\r\\n\\r\\n    $: isLoadingConversations = $loadingConversations && !$conversations;; // || !$conversations.length) // - don't check length as causes to flash\\r\\n    // $: isLoadingConversations = $loadingConversations && (!$conversations || !$conversations.length);\\r\\n\\r\\n    // $: console.log('isLoadingConversations', isLoadingConversations, 'loadingConversations', $loadingConversations);\\r\\n\\r\\n    let conversations = writable(null);\\r\\n    $: { conversations = getConversations({ userId: $userId }) };\\r\\n\\r\\n    // $: { console.log('conversations', $conversations, 'isLoadingConversations', isLoadingConversations) }\\r\\n\\r\\n    // (!$conversations || !isUserLoaded($user, $userId) || isLoadingConversations)\\r\\n\\r\\n    export let className = '';\\r\\n</script>\\r\\n\\r\\n<div class=\\\"conversationList {className}\\\">\\r\\n    {#if isLoadingConversations || !isUserLoaded($user, $userId, $loggingIn)}\\r\\n        <ContentLoader label=\\\"{locale.LOADING.CONVERSATIONS}\\\" />\\r\\n    {:else}\\r\\n        {#if $conversations && $conversations.length}\\r\\n            {#each $conversations as conversation}\\r\\n                <ConversationListItem {conversation} />\\r\\n            {/each}\\r\\n        {:else}\\r\\n            <div class=\\\"noConversations\\\">\\r\\n                {locale.CONVERSATIONS.NO_CONVERSATIONS}<br/><br/>\\r\\n                <a href=\\\"discover\\\">Discover</a> inspiring projects to get involved with<br/>or create a <a href=\\\"javascript:void(0)\\\" on:click=\\\"{newProject}\\\">New Project</a>\\r\\n            </div>\\r\\n        {/if}\\r\\n    {/if}\\r\\n</div>\\r\\n\\r\\n<style>\\r\\n    .conversationList {\\r\\n        /* padding-top: 44px; */\\r\\n        padding-top: 10px;\\r\\n        padding-bottom: 40px;\\r\\n        /* padding-top: 310px; */\\r\\n    }\\r\\n\\r\\n    .conversationList :global(.panelContent) {\\r\\n        margin-top: -6px;\\r\\n        margin-bottom: -6px;\\r\\n    }\\r\\n\\r\\n    .noConversations {\\r\\n        padding: 0 20px;\\r\\n        font-size: 1.2rem;\\r\\n        line-height: 1.8rem;\\r\\n        padding-top: 10px;\\r\\n        padding-bottom: 20px;\\r\\n    }\\r\\n\\r\\n    .conversationList :global(.contentLoader) {\\r\\n        padding: 0 20px;\\r\\n        font-size: 1.2rem;\\r\\n        padding-top: 10px;\\r\\n        padding-bottom: 30px;\\r\\n        line-height: 2.5rem;\\r\\n    }\\r\\n</style>\"],\"names\":[],\"mappings\":\"AA8DI,iBAAiB,cAAC,CAAC,AAEf,WAAW,CAAE,IAAI,CACjB,cAAc,CAAE,IAAI,AAExB,CAAC,AAED,+BAAiB,CAAC,AAAQ,aAAa,AAAE,CAAC,AACtC,UAAU,CAAE,IAAI,CAChB,aAAa,CAAE,IAAI,AACvB,CAAC,AAED,gBAAgB,cAAC,CAAC,AACd,OAAO,CAAE,CAAC,CAAC,IAAI,CACf,SAAS,CAAE,MAAM,CACjB,WAAW,CAAE,MAAM,CACnB,WAAW,CAAE,IAAI,CACjB,cAAc,CAAE,IAAI,AACxB,CAAC,AAED,+BAAiB,CAAC,AAAQ,cAAc,AAAE,CAAC,AACvC,OAAO,CAAE,CAAC,CAAC,IAAI,CACf,SAAS,CAAE,MAAM,CACjB,WAAW,CAAE,IAAI,CACjB,cAAc,CAAE,IAAI,CACpB,WAAW,CAAE,MAAM,AACvB,CAAC\"}"
};

const ConversationList = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let $loadingConversations = get_store_value(loadingConversations);
	let $conversations;
	let $userId = get_store_value(userId);
	let $user = get_store_value(user);
	let $loggingIn = get_store_value(loggingIn);
	 // || !$conversations.length) // - don't check length as causes to flash

	// $: isLoadingConversations = $loadingConversations && (!$conversations || !$conversations.length);
	// $: console.log('isLoadingConversations', isLoadingConversations, 'loadingConversations', $loadingConversations);
	let conversations = writable$1(null);

	$conversations = get_store_value(conversations);
	
	let { className = "" } = $$props;
	if ($$props.className === void 0 && $$bindings.className && className !== void 0) $$bindings.className(className);
	$$result.css.add(css$F);
	$conversations = get_store_value(conversations);
	let isLoadingConversations = $loadingConversations && !$conversations;

	 {
		{
			conversations = getConversations$1({ userId: $userId });
		}
	}

	return `<div class="${"conversationList " + escape(className) + " svelte-pui8gu"}">${isLoadingConversations || !isUserLoaded($user, $userId, $loggingIn)
	? `${validate_component(ContentLoader, "ContentLoader").$$render($$result, { label: locale$1.LOADING.CONVERSATIONS }, {}, {})}`
	: `${$conversations && $conversations.length
		? `${each($conversations, conversation => `${validate_component(ConversationListItem, "ConversationListItem").$$render($$result, { conversation }, {}, {})}`)}`
		: `<div class="${"noConversations svelte-pui8gu"}">${escape(locale$1.CONVERSATIONS.NO_CONVERSATIONS)}<br><br>
                <a href="${"discover"}">Discover</a> inspiring projects to get involved with<br>or create a <a href="${"javascript:void(0)"}">New Project</a></div>`}`}
</div>`;
});

/* src\routes\messages\index.svelte generated by Svelte v3.23.0 */

const Messages = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	return `${($$result.head += `${($$result.title = `<title>Flock</title>`, "")}`, "")}

<div class="${"content"}">${validate_component(ScrollView, "ScrollView").$$render($$result, { id: "messages" }, {}, {
		default: () => `

		${validate_component(ConversationList, "ConversationList").$$render($$result, {}, {}, {})}`
	})}
</div>`;
});

var index$2 = /*#__PURE__*/Object.freeze({
    __proto__: null,
    'default': Messages
});

/* src\routes\_components\MessageItem.svelte generated by Svelte v3.23.0 */

const css$G = {
	code: ".messageListItem.svelte-1oxr1ak{position:relative;padding:3px 0}.messageListItem.svelte-1oxr1ak .avatarIcon{position:absolute;top:-4px;left:13px;width:40px;height:40px}.messageContent.svelte-1oxr1ak{position:relative}.messageListItem.svelte-1oxr1ak .messageContent.userBreak{margin-top:7px}.dateHeader.svelte-1oxr1ak{font-size:1.1rem;text-align:center;color:#AAAAAA;margin-top:12px;margin-bottom:12px;user-select:text}.detailContent.svelte-1oxr1ak{display:flex;margin-left:66px}.detailInnerContent.svelte-1oxr1ak{display:inline-block;border:1px solid #ACACAC;border-radius:15px;padding:5px 12px 4px;max-width:62%}.messageListItem.svelte-1oxr1ak .messageContent.isSelf .detailContent{display:flex;flex-direction:row-reverse;margin-right:18px}.messageListItem.svelte-1oxr1ak .messageContent.isSelf .detailInnerContent{background-color:#DDDDDD;border-color:#DDDDDD}.message.svelte-1oxr1ak{font-size:1.3rem;line-height:1.8rem;user-select:text}.message.svelte-1oxr1ak a{user-select:text}.messageListItem.svelte-1oxr1ak .likeButton{margin-top:3px;margin-left:3px;margin-right:3px;width:28px;height:26px}.messageListItem.svelte-1oxr1ak .likeButton .icon{padding-left:10px;transform:scale(0.45, 0.45)}",
	map: "{\"version\":3,\"file\":\"MessageItem.svelte\",\"sources\":[\"MessageItem.svelte\"],\"sourcesContent\":[\"<script>\\r\\n    import { get, writable } from 'svelte/store';\\r\\n\\r\\n    import Button from '../../components/Button.svelte';\\r\\n\\r\\n    import config from '../../config';\\r\\n    import locale from '../../locale';\\r\\n\\r\\n    import AvatarIcon from './AvatarIcon.svelte';\\r\\n\\r\\n    import LikeSelectedIcon from \\\"../../assets/icons/post_like_selected.png\\\";\\r\\n\\r\\n    import { getDisplayText, getMessageTime, secondsDiff, getEllipsisText } from '../../utils';\\r\\n\\r\\n    import { getUser, getUserModelFromData } from '../../models/usersModel';\\r\\n\\r\\n    import { getConversationUserById } from '../../models/conversationsModel';\\r\\n\\r\\n    import {\\r\\n        userId,\\r\\n        conversation,\\r\\n        dateDebugOffset,\\r\\n    } from '../../models/appModel';\\r\\n\\r\\n    import {\\r\\n        loadPost,\\r\\n        loadChannel,\\r\\n        loadProject,\\r\\n        loadProfile,\\r\\n    } from '../../actions/appActions';\\r\\n\\r\\n    export let message;\\r\\n\\r\\n    $: lastMessage = ($message && $message.lastMessage) || writable(null);\\r\\n\\r\\n    $: messageText = ($message && $message.message && getDisplayText($message.message)) || '';\\r\\n\\r\\n    $: messageId = ($message && $message.id) || null;\\r\\n\\r\\n    // $: userConversationInfo = getUserConversationInfo($message);\\r\\n    // $: viewed = userConversationInfo ? userConversationInfo.viewed : true;\\r\\n\\r\\n    $: date = ($message && $message.createdAt) || null;\\r\\n    $: dateString = (date && getMessageTime(date)) || '';\\r\\n\\r\\n    $: actor = ($message && $conversation && getConversationUserById($conversation, $message.userId)) || null;\\r\\n    $: actorUser = (actor && date && getUserModelFromData(actor, date)) || writable(null);\\r\\n    $: actorName = ($actorUser && $actorUser.name) || (actor && actor.name) || '';\\r\\n\\r\\n    // $: console.log('actorUser', $actorUser);\\r\\n\\r\\n    $: isSelf = actor ? actor.id === $userId : true;\\r\\n\\r\\n    $: userBreak = ($lastMessage && $message.userId !== $lastMessage.userId) || false;\\r\\n    $: hideAvatarImage = ($lastMessage && $message.userId == $lastMessage.userId) || false;\\r\\n    $: displayDate = ($message && (!$lastMessage || secondsDiff($lastMessage.createdAt, $message.createdAt) > config.DATE_SHOWN_MESSAGE_DATE_DIFF)) || false;\\r\\n\\r\\n    // $: console.log('displayDate', displayDate, 'secondsDiff', $message && $lastMessage && secondsDiff($message.createdAt, $lastMessage.createdAt));\\r\\n    // $: console.log('userBreak', userBreak, 'userId', $message.userId, 'last userId', $lastMessage && $lastMessage.userId);\\r\\n\\r\\n    $: hasLikes = ($message && $message.likes && $message.likes.length) || false;\\r\\n\\r\\n    // $: displayDate = ($message && $message.displayDate) || false;\\r\\n    // $: hideAvatarImage = ($message && $message.hideAvatarImage) || false;\\r\\n    // $: userBreak = ($message && $message.userBreak) || false;\\r\\n\\r\\n    $: titleString = actorName || '';\\r\\n\\r\\n    function toggleLiked() {\\r\\n\\r\\n    }\\r\\n\\r\\n    $: userLoaded = ($actorUser && $actorUser.name) || false;\\r\\n    function viewUserProfile() {\\r\\n        if (userLoaded) {\\r\\n            loadProfile($actorUser.id);\\r\\n        }\\r\\n    }\\r\\n</script>\\r\\n\\r\\n<div class=\\\"messageListItem\\\">\\r\\n    {#if displayDate}\\r\\n        <div class=\\\"dateHeader\\\">{dateString}</div>\\r\\n    {/if}\\r\\n    <div class=\\\"messageContent\\\"\\r\\n        class:userBreak=\\\"{userBreak}\\\"\\r\\n        class:isSelf=\\\"{isSelf}\\\">\\r\\n        {#if !isSelf && !hideAvatarImage}\\r\\n            <AvatarIcon user=\\\"{actorUser}\\\" onClick=\\\"{userLoaded ? viewUserProfile : null}\\\" useThumb=\\\"{true}\\\" />\\r\\n        {/if}\\r\\n        <div class=\\\"detailContent\\\">\\r\\n            <div class=\\\"detailInnerContent\\\">\\r\\n                <div class=\\\"message\\\">{@html messageText}</div>\\r\\n            </div>\\r\\n            {#if hasLikes}\\r\\n                <Button className=\\\"likeButton\\\" icon=\\\"{LikeSelectedIcon}\\\" />\\r\\n            {/if}\\r\\n        </div>\\r\\n        <!-- <div class=\\\"info\\\">\\r\\n            {#if !viewed}\\r\\n                <div class=\\\"unseenIcon\\\" />\\r\\n            {/if}\\r\\n        </div> -->\\r\\n    </div>\\r\\n</div>\\r\\n\\r\\n<style>\\r\\n    .messageListItem {\\r\\n        position: relative;\\r\\n\\r\\n        padding: 3px 0;\\r\\n\\r\\n        /* cursor: pointer; */\\r\\n    }\\r\\n\\r\\n    .messageListItem :global(.avatarIcon) {\\r\\n        position: absolute;\\r\\n        top: -4px;\\r\\n        left: 13px;\\r\\n        width: 40px;\\r\\n        height: 40px;\\r\\n    }\\r\\n\\r\\n    .messageContent {\\r\\n        position: relative;\\r\\n    }\\r\\n\\r\\n    .messageListItem :global(.messageContent.userBreak) {\\r\\n        margin-top: 7px;\\r\\n    }\\r\\n\\r\\n    .dateHeader {\\r\\n        font-size: 1.1rem;\\r\\n        text-align: center;\\r\\n        color: #AAAAAA;\\r\\n        margin-top: 12px;\\r\\n        margin-bottom: 12px;\\r\\n\\r\\n        user-select: text;\\r\\n    }\\r\\n\\r\\n    .detailContent {\\r\\n        display: flex;\\r\\n        margin-left: 66px;\\r\\n\\r\\n        /* position: absolute; */\\r\\n        /* margin-right: 110px; */\\r\\n\\r\\n        /* top: 14px;\\r\\n        bottom: 0;\\r\\n        left: 96px;\\r\\n        right: 46px; */\\r\\n\\r\\n\\t\\t/* display: flex;\\r\\n        align-items: center; */\\r\\n        /* padding-bottom: 3px; */\\r\\n    }\\r\\n    .detailInnerContent {\\r\\n        display: inline-block;\\r\\n\\r\\n        border: 1px solid #ACACAC;\\r\\n\\r\\n        border-radius: 15px;\\r\\n        padding: 5px 12px 4px;\\r\\n        /* padding: 8px 12px; */\\r\\n        max-width: 62%;\\r\\n\\r\\n        /* width: 100%; */\\r\\n    }\\r\\n\\r\\n    .messageListItem :global(.messageContent.isSelf .detailContent)  {\\r\\n        display: flex;\\r\\n        /* justify-content: flex-end; */\\r\\n        flex-direction: row-reverse;\\r\\n        margin-right: 18px;\\r\\n    }\\r\\n    .messageListItem :global(.messageContent.isSelf .detailInnerContent)  {\\r\\n        background-color: #DDDDDD;\\r\\n        border-color: #DDDDDD;\\r\\n    }\\r\\n\\r\\n    .message {\\r\\n        font-size: 1.3rem;\\r\\n        line-height: 1.8rem;\\r\\n        /* margin-top: 7px; */\\r\\n\\r\\n        user-select: text;\\r\\n    }\\r\\n    .message :global(a) {\\r\\n        user-select: text;\\r\\n    }\\r\\n\\r\\n    /* .info {\\r\\n        position: absolute;\\r\\n        right: 0;\\r\\n        top: 13px;\\r\\n    } */\\r\\n\\r\\n    .messageListItem :global(.likeButton) {\\r\\n\\t\\t/* position: absolute;\\r\\n\\t\\ttop: 4px;\\r\\n\\t\\tleft: 10px; */\\r\\n\\r\\n        margin-top: 3px;\\r\\n        margin-left: 3px;\\r\\n        margin-right: 3px;\\r\\n\\r\\n\\t\\twidth: 28px;\\r\\n\\t\\theight: 26px;\\r\\n    }\\r\\n    .messageListItem :global(.likeButton .icon) {\\r\\n        padding-left: 10px;\\r\\n        transform: scale(0.45, 0.45);\\r\\n    }\\r\\n</style>\"],\"names\":[],\"mappings\":\"AA2GI,gBAAgB,eAAC,CAAC,AACd,QAAQ,CAAE,QAAQ,CAElB,OAAO,CAAE,GAAG,CAAC,CAAC,AAGlB,CAAC,AAED,+BAAgB,CAAC,AAAQ,WAAW,AAAE,CAAC,AACnC,QAAQ,CAAE,QAAQ,CAClB,GAAG,CAAE,IAAI,CACT,IAAI,CAAE,IAAI,CACV,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,AAChB,CAAC,AAED,eAAe,eAAC,CAAC,AACb,QAAQ,CAAE,QAAQ,AACtB,CAAC,AAED,+BAAgB,CAAC,AAAQ,yBAAyB,AAAE,CAAC,AACjD,UAAU,CAAE,GAAG,AACnB,CAAC,AAED,WAAW,eAAC,CAAC,AACT,SAAS,CAAE,MAAM,CACjB,UAAU,CAAE,MAAM,CAClB,KAAK,CAAE,OAAO,CACd,UAAU,CAAE,IAAI,CAChB,aAAa,CAAE,IAAI,CAEnB,WAAW,CAAE,IAAI,AACrB,CAAC,AAED,cAAc,eAAC,CAAC,AACZ,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,IAAI,AAarB,CAAC,AACD,mBAAmB,eAAC,CAAC,AACjB,OAAO,CAAE,YAAY,CAErB,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CAEzB,aAAa,CAAE,IAAI,CACnB,OAAO,CAAE,GAAG,CAAC,IAAI,CAAC,GAAG,CAErB,SAAS,CAAE,GAAG,AAGlB,CAAC,AAED,+BAAgB,CAAC,AAAQ,qCAAqC,AAAG,CAAC,AAC9D,OAAO,CAAE,IAAI,CAEb,cAAc,CAAE,WAAW,CAC3B,YAAY,CAAE,IAAI,AACtB,CAAC,AACD,+BAAgB,CAAC,AAAQ,0CAA0C,AAAG,CAAC,AACnE,gBAAgB,CAAE,OAAO,CACzB,YAAY,CAAE,OAAO,AACzB,CAAC,AAED,QAAQ,eAAC,CAAC,AACN,SAAS,CAAE,MAAM,CACjB,WAAW,CAAE,MAAM,CAGnB,WAAW,CAAE,IAAI,AACrB,CAAC,AACD,uBAAQ,CAAC,AAAQ,CAAC,AAAE,CAAC,AACjB,WAAW,CAAE,IAAI,AACrB,CAAC,AAQD,+BAAgB,CAAC,AAAQ,WAAW,AAAE,CAAC,AAKnC,UAAU,CAAE,GAAG,CACf,WAAW,CAAE,GAAG,CAChB,YAAY,CAAE,GAAG,CAEvB,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,AACV,CAAC,AACD,+BAAgB,CAAC,AAAQ,iBAAiB,AAAE,CAAC,AACzC,YAAY,CAAE,IAAI,CAClB,SAAS,CAAE,MAAM,IAAI,CAAC,CAAC,IAAI,CAAC,AAChC,CAAC\"}"
};

const MessageItem = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let $message;
	let $conversation = get_store_value(conversation);
	let $actorUser;
	let $userId = get_store_value(userId);
	let $lastMessage;
	let { message } = $$props;
	$message = get_store_value(message);

	function viewUserProfile() {
		if (userLoaded) {
			loadProfile($actorUser.id);
		}
	}

	if ($$props.message === void 0 && $$bindings.message && message !== void 0) $$bindings.message(message);
	$$result.css.add(css$G);
	$message = get_store_value(message);
	$actorUser = get_store_value(actorUser);
	$lastMessage = get_store_value(lastMessage);
	let lastMessage = $message && $message.lastMessage || writable$1(null);
	let messageText = $message && $message.message && getDisplayText($message.message) || "";
	let messageId = $message && $message.id || null;
	let date = $message && $message.createdAt || null;
	let dateString = date && getMessageTime(date) || "";
	let actor = $message && $conversation && getConversationUserById($conversation, $message.userId) || null;
	let actorUser = actor && date && getUserModelFromData(actor, date) || writable$1(null);
	let actorName = $actorUser && $actorUser.name || actor && actor.name || "";
	let isSelf = actor ? actor.id === $userId : true;
	let userBreak = $lastMessage && $message.userId !== $lastMessage.userId || false;
	let hideAvatarImage = $lastMessage && $message.userId == $lastMessage.userId || false;
	let displayDate = $message && (!$lastMessage || secondsDiff($lastMessage.createdAt, $message.createdAt) > config$1.DATE_SHOWN_MESSAGE_DATE_DIFF) || false;
	let hasLikes = $message && $message.likes && $message.likes.length || false;
	let userLoaded = $actorUser && $actorUser.name || false;

	return `<div class="${"messageListItem svelte-1oxr1ak"}">${displayDate
	? `<div class="${"dateHeader svelte-1oxr1ak"}">${escape(dateString)}</div>`
	: ``}
    <div class="${[
		"messageContent svelte-1oxr1ak",
		(userBreak ? "userBreak" : "") + " " + (isSelf ? "isSelf" : "")
	].join(" ").trim()}">${!isSelf && !hideAvatarImage
	? `${validate_component(AvatarIcon, "AvatarIcon").$$render(
			$$result,
			{
				user: actorUser,
				onClick: userLoaded ? viewUserProfile : null,
				useThumb: true
			},
			{},
			{}
		)}`
	: ``}
        <div class="${"detailContent svelte-1oxr1ak"}"><div class="${"detailInnerContent svelte-1oxr1ak"}"><div class="${"message svelte-1oxr1ak"}">${messageText}</div></div>
            ${hasLikes
	? `${validate_component(Button, "Button").$$render(
			$$result,
			{
				className: "likeButton",
				icon: img$l
			},
			{},
			{}
		)}`
	: ``}</div>
        </div>
</div>`;
});

/* src\routes\_components\ConversationView.svelte generated by Svelte v3.23.0 */

const css$H = {
	code: ".messageList.svelte-szvkl4{width:100%;padding-bottom:20px}.messageList.svelte-szvkl4 .panelContent{margin-top:-6px;margin-bottom:-6px}.messageList.svelte-szvkl4 .contentLoader{padding:0 20px;font-size:1.2rem;padding-top:10px;padding-bottom:30px;line-height:2.5rem}",
	map: "{\"version\":3,\"file\":\"ConversationView.svelte\",\"sources\":[\"ConversationView.svelte\"],\"sourcesContent\":[\"<script>\\r\\n    // import locale from '../../locale';\\r\\n    // import config from '../../config';\\r\\n\\t// import { get, writable } from 'svelte/store';\\r\\n\\r\\n    import Proxy from '../../components/Proxy.svelte';\\r\\n    import Hotspot from '../../components/Hotspot.svelte';\\r\\n\\r\\n\\timport ContentPanel from './../_components/ContentPanel.svelte';\\r\\n    import MessageItem from './MessageItem.svelte';\\r\\n\\r\\n    export let messages;\\r\\n\\r\\n    export let className = '';\\r\\n</script>\\r\\n\\r\\n<div class=\\\"messageList {className}\\\">\\r\\n    {#each $messages as message}\\r\\n        <MessageItem {message} />\\r\\n    {/each}\\r\\n</div>\\r\\n\\r\\n<style>\\r\\n    .messageList {\\r\\n        width: 100%;\\r\\n        padding-bottom: 20px;\\r\\n        /* padding-bottom: 40px; */\\r\\n        /* padding-top: 9px; */\\r\\n        /* padding-top: 10px; */\\r\\n        /* padding-top: 44px; */\\r\\n        /* padding-top: 310px; */\\r\\n    }\\r\\n\\r\\n    .messageList :global(.panelContent) {\\r\\n        margin-top: -6px;\\r\\n        margin-bottom: -6px;\\r\\n    }\\r\\n\\r\\n    .messageList :global(.contentLoader) {\\r\\n        padding: 0 20px;\\r\\n        font-size: 1.2rem;\\r\\n        padding-top: 10px;\\r\\n        padding-bottom: 30px;\\r\\n        line-height: 2.5rem;\\r\\n    }\\r\\n</style>\"],\"names\":[],\"mappings\":\"AAuBI,YAAY,cAAC,CAAC,AACV,KAAK,CAAE,IAAI,CACX,cAAc,CAAE,IAAI,AAMxB,CAAC,AAED,0BAAY,CAAC,AAAQ,aAAa,AAAE,CAAC,AACjC,UAAU,CAAE,IAAI,CAChB,aAAa,CAAE,IAAI,AACvB,CAAC,AAED,0BAAY,CAAC,AAAQ,cAAc,AAAE,CAAC,AAClC,OAAO,CAAE,CAAC,CAAC,IAAI,CACf,SAAS,CAAE,MAAM,CACjB,WAAW,CAAE,IAAI,CACjB,cAAc,CAAE,IAAI,CACpB,WAAW,CAAE,MAAM,AACvB,CAAC\"}"
};

const ConversationView = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let $messages;
	let { messages } = $$props;
	$messages = get_store_value(messages);
	let { className = "" } = $$props;
	if ($$props.messages === void 0 && $$bindings.messages && messages !== void 0) $$bindings.messages(messages);
	if ($$props.className === void 0 && $$bindings.className && className !== void 0) $$bindings.className(className);
	$$result.css.add(css$H);
	$messages = get_store_value(messages);

	return `<div class="${"messageList " + escape(className) + " svelte-szvkl4"}">${each($messages, message => `${validate_component(MessageItem, "MessageItem").$$render($$result, { message }, {}, {})}`)}
</div>`;
});

const img$A = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADYAAAA2CAYAAACMRWrdAAAERElEQVRoQ+2ZPa9NQRSG39soRIJW4SMRLX4BfgEqJSolEhoNfgGiIZGg0/kIpaBWoJegkogEiUJHHpk5WWf27Jm1v8655+ZOcnLvPmdm9npmrfXO2rPXtEHb2gbl0ibYqnl2lT22V9ILSbskXZZ0zy7+KoLtkHRe0hVJWwLMT0k7VxUsAl2QxP+2fZGEB2dtFTxWAoogtyQBvDJgpyVdS72REbKLkm6uApgH6LekbQHmmKTX6xnshKQbGQ99lbRd0tZg/IcgFrvD9T5Jn9cj2FFJVyXx17Zfkh5JOmUEAyj6/Sil1LLFowREzryU9MxAAXooePSV8R7fzbVlgSHN91s8BFAUgk8JFAvxXhIh+ziQvMnMs/BaESBC7kxG2R4GBSRXkHg8Ej2BpyIUQ1FK5qFdD9dL8ZgXCONSKL47HDwVjX8gCeWknZXE9ULB4ubKCqftadhUrZrloHKGI+1HwoQNqef7qXKsVC2QE4DO7TvBSPLOhmnWG5L+mlWiRqRWnNRjfYEwygvFPYpSP7bHiHnULC1Q2Xeo43IeiqucQmUFIXRGRKLUZxVxLLC28oeKm5BrJHYSNSwGjyGxoY451Yy/8xsLQSNPkf5GG5JjQ4EwxhrJdQ2KPlWp7+uxUrXATeeq7Nxqhu/6QDH0iaTjYY6T4XqQx2rlD0ANdWoBS6Fi/ecZ/85s3Fmp93qM3Z+KO1egxvLHY1BkZD6Mi60LFGOs1LemUinHatUCStcFCKOAQtGicnaFwibqRxplVqrAs9XKgdWAyKO5Z59CHtmfUigM415dFscl9WkoQk9hOXd2ECyzBaqTY65bDsoWtd45sY20qCqo9RghkuaRZ3OtGVWr1Gvj7e8uqU89RnjtydwFeeXDZtglbJhqTCjmqxa/0X7rMcKFFYl7RG4lu0DmKvXWfcfpNoQjnh+mjzJzU+TEA4MoU/gMgUxDu61SdzL97+aS+jQUczcAks2Uz8GCBdSDMVzp5q3Uu0DZ/a9x8ptO1KVWJATwYgmSHPwuab+5UeMwswuN6euWeo/H2mzwQDL2o6RLQXh68syGWUVsHGkP8VgJkv0Fb+ZUlXF4knBlP+SUqU+zjzfVKOgSih5j7kg6V+n4TdJzSbc7Qrqlfkgottluw+WupD8VT7J3IjoeT3IcEGvDxpH2FKFo52yrDFA0QrGkrEDGcM3Vom6pn9pj9tzCKhr3fSvpQHjRkPM+eQgk1Q6QdjxlXuNIexkeI3zsUbU9gImFAH95m9IGCWg8B2k9wLGDxxaPXChyxh4PXEqPKnGPLFU72F46wZqxTQ2GzMfHDG7a+ihvVrtW0rlKsynByA+7+q6VTmIxhYyvkaoPulOCWRtdCe/ZKL19FgHmXmWv0Z5+iwAb+gzm4Wj0mRqsWqz2stoxaEqwrkdrDnP9XcYGoyKIb1X6nEL5La/0HBtsNMOGTrQJNnQFFz1+w3rsHzDcDEZfXAspAAAAAElFTkSuQmCC";

function createMessage(messageDetails) {
    if (!checkLoggedIn()) { return; }

    const result = addMessage$1(messageDetails);
    result.then((result) => {
        // debugOutput.set(get(debugOutput) + '<br/>addMessage ' + result.error);
        if (result && !result.error) {
            // console.log('createMessage newConversationId', result.conversationId, 'result.conversation', result.conversation);
            //-- console.log('newConversation', result.newConversation, 'result.conversationId', result.conversationId);

			// debugOutput.set(get(debugOutput) + '<br/>newConversation ' + result.newConversation + ' conversationId ' + result.conversationId);
            if (result.newConversation) {
                if (result.conversation) {
                    addAndSetConversation(result.conversation);
                }
                if (result.conversationId) {
                    loadConversation(result.conversationId, true, true);
                }
            }
        }
    });

    return result;
}

// export function messageToggleLiked(messageId) {
//     if (!checkLoggedIn()) { return; }

//     const targetMessageModel = getMessage(messageId);
//     const targetMessage = get(targetMessageModel);

//     if (targetMessage) {
//         setLikeMessage(targetMessage, !targetMessage.liked);
//         targetMessageModel.set(targetMessage);
//     }
// }

// export function saveMessage(messageDetails) {
//     if (!checkLoggedIn()) { return; }

//     const curMessage = get(message);
//     let result = null;
//     if (curMessage) {
//         result = updateMessage(curMessage, messageDetails);
//         message.set(curMessage);

//         if (curMessage.type === 'thread') {
//             goto('messages/' + curMessage.id);
//         } else {
//             goto('messages/' + curMessage.threadId);
//         }
//         resetScrollRegionPosition('thread');
//     }
//     return result;
// }

/* src\routes\_components\MessageInput.svelte generated by Svelte v3.23.0 */

const css$I = {
	code: ".messageInput.svelte-uhjl0u{position:absolute;width:100%;bottom:0;background-color:#ffffff;box-sizing:border-box;padding:10px;padding-top:6px}.fieldRegion.svelte-uhjl0u{position:relative;min-height:38px;line-height:0;border:1px solid #B0B0B0;background-color:#ffffff;border-radius:19px}.field.svelte-uhjl0u{padding-left:16px;padding-right:42px}textarea.svelte-uhjl0u{font-size:1.5rem;color:#333333;border:none;outline:none;background:none;width:100%;max-height:120px;padding-top:10px;padding-bottom:7px;margin:0;box-sizing:border-box;resize:none;-ms-overflow-style:none}.messageInput.svelte-uhjl0u textarea::-webkit-scrollbar{display:none}.messageInput.svelte-uhjl0u .imageButton{position:absolute;left:10px;width:35px;height:37px}.messageInput.svelte-uhjl0u .imageButton .icon{margin-top:6px}.messageInput.svelte-uhjl0u .sendButton{position:absolute;right:0;bottom:0;width:35px;height:37px}.messageInput.svelte-uhjl0u .sendButton .iconInnerContainer{height:100%;width:100%}.messageInput.svelte-uhjl0u .sendButton .icon{margin-top:-1px;transform:scale(0.475, 0.475)}",
	map: "{\"version\":3,\"file\":\"MessageInput.svelte\",\"sources\":[\"MessageInput.svelte\"],\"sourcesContent\":[\"<script>\\r\\n    import { onMount, tick } from 'svelte'; // afterUpdate\\r\\n\\r\\n    import Button from '../../components/Button.svelte';\\r\\n\\r\\n    import Proxy from '../../components/Proxy.svelte';\\r\\n\\r\\n    import ImageIcon from \\\"../../assets/icons/image.png\\\";\\r\\n    import SendMessageIcon from \\\"../../assets/icons/send.png\\\";\\r\\n\\r\\n    import {\\r\\n        testInputDefocus,\\r\\n\\t\\t// getUnformattedText,\\r\\n        getFormattedText,\\r\\n        trim,\\r\\n    } from '../../utils';\\r\\n\\r\\n    import {\\r\\n        conversationId,\\r\\n        newConversation,\\r\\n        newConversationUserIds,\\r\\n    } from '../../models/appModel';\\r\\n\\r\\n    import {\\r\\n        getNewMessageId\\r\\n    } from '../../models/messagesModel';\\r\\n\\r\\n    import {\\r\\n        getNewConversationId\\r\\n    } from '../../models/conversationsModel';\\r\\n\\r\\n    import {\\r\\n        createMessage\\r\\n    } from '../../actions/messageActions';\\r\\n\\r\\n    export let message = '';\\r\\n    export let image = null;\\r\\n\\r\\n    let newMessageId = getNewMessageId();\\r\\n\\r\\n    let newConversationId = getNewConversationId();\\r\\n\\r\\n    let messageField;\\r\\n\\r\\n    $: submitEnabled = ($conversationId || $newConversation) && !!(trim(message) || image);\\r\\n\\r\\n\\tfunction createNewMessage() {\\r\\n\\t\\tif (submitEnabled) {\\r\\n            // console.log('createNewMessage', message);\\r\\n\\r\\n\\t\\t\\tconst messageDetails = {\\r\\n\\t\\t\\t\\tid: newMessageId,\\r\\n\\t\\t\\t\\tmessage: trim(message),\\r\\n\\t\\t\\t\\t// message: getUnformattedText(message),\\r\\n            };\\r\\n            if ($conversationId && !$newConversation) {\\r\\n                messageDetails.conversationId = $conversationId;\\r\\n            }\\r\\n            if (image) {\\r\\n                messageDetails.image = image;\\r\\n            }\\r\\n            if ($newConversation) {\\r\\n                messageDetails.newConversation = true;\\r\\n                messageDetails.targetUserIds = $newConversationUserIds;\\r\\n                messageDetails.conversationId = newConversationId\\r\\n            }\\r\\n\\r\\n            message = '';\\r\\n            newMessageId = getNewMessageId();\\r\\n\\r\\n            const draftId = $conversationId;\\r\\n\\r\\n            // console.log('createNewMessage', messageDetails);\\r\\n\\r\\n\\t\\t\\tcreateMessage(messageDetails).then((result) => {\\r\\n\\t\\t\\t\\tif (result && (result.success || result.addedMessage || result.duplicateKey)) {\\r\\n                    // console.log('clear draft message', draftId);\\r\\n\\t\\t\\t\\t\\t// clearDraftPost('message', draftId);\\r\\n\\t\\t\\t\\t}\\r\\n\\t\\t\\t});\\r\\n\\t\\t}\\r\\n    }\\r\\n\\r\\n    function submit() {\\r\\n        if (submitEnabled) {\\r\\n            createNewMessage();\\r\\n\\r\\n            if (messageField) {\\r\\n                messageField.focus();\\r\\n            }\\r\\n        }\\r\\n    }\\r\\n\\r\\n    function uploadImage() {\\r\\n\\r\\n    }\\r\\n\\r\\n    onMount(() => {\\r\\n        if (messageField) {\\r\\n            messageField.focus();\\r\\n        }\\r\\n    })\\r\\n\\r\\n    $: {\\r\\n        message;\\r\\n        resizeMessageField();\\r\\n    }\\r\\n\\r\\n    function resizeMessageField() {\\r\\n        (async () => {\\r\\n            await tick();\\r\\n            if (messageField && messageField.style && typeof window !== 'undefined' && window.getComputedStyle) {\\r\\n                messageField.style.height = 'inherit';\\r\\n\\r\\n                const computedStyle = window.getComputedStyle(messageField);\\r\\n                // console.log('computedStyle', computedStyle);\\r\\n\\r\\n                if (computedStyle) {\\r\\n                    const fieldHeight = messageField.scrollHeight + 4; // add extra height padding\\r\\n                    // const height = parseInt(computedStyle.getPropertyValue('border-top-width'), 10)\\r\\n                    //             + parseInt(computedStyle.getPropertyValue('padding-top'), 10)\\r\\n                    //             + messageField.scrollHeight\\r\\n                    //             + parseInt(computedStyle.getPropertyValue('padding-bottom'), 10)\\r\\n                    //             + parseInt(computedStyle.getPropertyValue('border-bottom-width'), 10);\\r\\n                    // console.log('height', fieldHeight,\\r\\n                    //     messageField.scrollHeight,\\r\\n                    //     computedStyle.getPropertyValue('border-top-width'),\\r\\n                    //     computedStyle.getPropertyValue('padding-top'),\\r\\n                    //     computedStyle.getPropertyValue('padding-bottom'),\\r\\n                    //     computedStyle.getPropertyValue('border-top-width'));\\r\\n\\r\\n                    messageField.style.height = fieldHeight + 'px';\\r\\n                }\\r\\n            }\\r\\n        })();\\r\\n    }\\r\\n</script>\\r\\n\\r\\n<div class=\\\"messageInput\\\">\\r\\n\\t<!-- <Proxy image=\\\"message_input\\\" className=\\\"proxyOverlay\\\" /> -->\\r\\n\\r\\n    <div class=\\\"fieldRegion\\\">\\r\\n        <Button className=\\\"sendButton\\\" disabled=\\\"{!submitEnabled}\\\" onClick=\\\"{submit}\\\" icon=\\\"{SendMessageIcon}\\\" />\\r\\n        <!-- <Button className=\\\"imageButton\\\" disabled=\\\"{true}\\\" onClick=\\\"{uploadImage}\\\" icon=\\\"{ImageIcon}\\\" /> -->\\r\\n        <div class=\\\"field\\\">\\r\\n            <textarea bind:value=\\\"{message}\\\" rows=\\\"1\\\" bind:this=\\\"{messageField}\\\" on:keypress=\\\"{(e) => testInputDefocus(e, {action: submit, actionOnCtrl: true, preventBlur: true})}\\\" />\\r\\n            <!-- <input type=\\\"text\\\" bind:value=\\\"{message}\\\" bind:this=\\\"{messageField}\\\" on:keypress=\\\"{(e) => testInputDefocus(e, {action: submit, actionOnCtrl: true, preventBlur: true})}\\\" /> -->\\r\\n        </div>\\r\\n    </div>\\r\\n</div>\\r\\n\\r\\n<style>\\r\\n\\t/* .messageInput :global(.proxyOverlay) {\\r\\n        position: absolute;\\r\\n        opacity: 0.5;\\r\\n\\t} */\\r\\n\\r\\n\\t.messageInput {\\r\\n\\t\\tposition: absolute;\\r\\n\\r\\n        width: 100%;\\r\\n    \\tbottom: 0;\\r\\n        background-color: #ffffff;\\r\\n\\r\\n        /* height: 54px; */\\r\\n\\r\\n        box-sizing: border-box;\\r\\n        padding: 10px;\\r\\n        padding-top: 6px;\\r\\n\\r\\n        /* padding: 5px; */\\r\\n\\r\\n        /* box-shadow: 0 -1px 6px 0 rgba(0,0,0,0.1); */\\r\\n\\t}\\r\\n\\r\\n    .fieldRegion {\\r\\n        position: relative;\\r\\n        /* position: absolute; */\\r\\n\\r\\n        /* bottom: 10px;\\r\\n        left: 10px;\\r\\n        right: 10px; */\\r\\n        /* padding-right: 50px; */\\r\\n        /* right: 10px; */\\r\\n\\r\\n        min-height: 38px;\\r\\n        line-height: 0;\\r\\n\\r\\n        /* height: 36px; */\\r\\n\\r\\n        border: 1px solid #B0B0B0;\\r\\n        background-color: #ffffff;\\r\\n\\r\\n        border-radius: 19px;\\r\\n\\r\\n        /* border-radius: 999px; */\\r\\n\\r\\n        /* margin: 7px; */\\r\\n    }\\r\\n\\r\\n    .field {\\r\\n        /* display: flex;\\r\\n        height: 100%;\\r\\n        align-items: center; */\\r\\n\\r\\n        /* padding: 6px; */\\r\\n        padding-left: 16px;\\r\\n        padding-right: 42px;\\r\\n        /* padding-left: 10px;\\r\\n        padding-right: 36px; */\\r\\n\\r\\n        /* padding-left: 40px; */\\r\\n    }\\r\\n\\r\\n    /* input { */\\r\\n    textarea {\\r\\n        font-size: 1.5rem;\\r\\n\\t\\tcolor: #333333;\\r\\n\\r\\n        border: none;\\r\\n        outline: none;\\r\\n        background: none;\\r\\n\\r\\n        width: 100%;\\r\\n        max-height: 120px;\\r\\n\\r\\n        /* padding: 6px 7px; */\\r\\n        /* padding: 9px 0; */\\r\\n\\r\\n        padding-top: 10px;\\r\\n        padding-bottom: 7px;\\r\\n\\r\\n        margin: 0;\\r\\n\\r\\n        /* height: 100px; */\\r\\n\\r\\n        box-sizing: border-box;\\r\\n\\r\\n        resize: none;\\r\\n\\r\\n        -ms-overflow-style: none; /* Hide scrollbar for IE and Edge */\\r\\n\\t}\\r\\n\\t.messageInput :global(textarea::-webkit-scrollbar) { /* Hide scrollbar for Chrome, Safari and Opera */\\r\\n        display: none;\\r\\n    }\\r\\n\\r\\n\\t.messageInput :global(.imageButton) {\\r\\n        position: absolute;\\r\\n        left: 10px;\\r\\n        width: 35px;\\r\\n        height: 37px;\\r\\n\\t}\\r\\n\\t.messageInput :global(.imageButton .icon) {\\r\\n        margin-top: 6px;\\r\\n\\t}\\r\\n\\r\\n\\t.messageInput :global(.sendButton) {\\r\\n        position: absolute;\\r\\n        right: 0;\\r\\n        bottom: 0;\\r\\n        width: 35px;\\r\\n        height: 37px;\\r\\n\\t}\\r\\n\\t.messageInput :global(.sendButton .iconInnerContainer) {\\r\\n        height: 100%;\\r\\n        width: 100%;\\r\\n\\t}\\r\\n\\t.messageInput :global(.sendButton .icon) {\\r\\n        margin-top: -1px;\\r\\n        /* margin-top: 6px; */\\r\\n        transform: scale(0.475, 0.475);\\r\\n\\t}\\r\\n\\r\\n</style>\"],\"names\":[],\"mappings\":\"AA6JC,aAAa,cAAC,CAAC,AACd,QAAQ,CAAE,QAAQ,CAEZ,KAAK,CAAE,IAAI,CACd,MAAM,CAAE,CAAC,CACN,gBAAgB,CAAE,OAAO,CAIzB,UAAU,CAAE,UAAU,CACtB,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,GAAG,AAKvB,CAAC,AAEE,YAAY,cAAC,CAAC,AACV,QAAQ,CAAE,QAAQ,CASlB,UAAU,CAAE,IAAI,CAChB,WAAW,CAAE,CAAC,CAId,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CACzB,gBAAgB,CAAE,OAAO,CAEzB,aAAa,CAAE,IAAI,AAKvB,CAAC,AAED,MAAM,cAAC,CAAC,AAMJ,YAAY,CAAE,IAAI,CAClB,aAAa,CAAE,IAAI,AAKvB,CAAC,AAGD,QAAQ,cAAC,CAAC,AACN,SAAS,CAAE,MAAM,CACvB,KAAK,CAAE,OAAO,CAER,MAAM,CAAE,IAAI,CACZ,OAAO,CAAE,IAAI,CACb,UAAU,CAAE,IAAI,CAEhB,KAAK,CAAE,IAAI,CACX,UAAU,CAAE,KAAK,CAKjB,WAAW,CAAE,IAAI,CACjB,cAAc,CAAE,GAAG,CAEnB,MAAM,CAAE,CAAC,CAIT,UAAU,CAAE,UAAU,CAEtB,MAAM,CAAE,IAAI,CAEZ,kBAAkB,CAAE,IAAI,AAC/B,CAAC,AACD,2BAAa,CAAC,AAAQ,2BAA2B,AAAE,CAAC,AAC7C,OAAO,CAAE,IAAI,AACjB,CAAC,AAEJ,2BAAa,CAAC,AAAQ,YAAY,AAAE,CAAC,AAC9B,QAAQ,CAAE,QAAQ,CAClB,IAAI,CAAE,IAAI,CACV,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,AACnB,CAAC,AACD,2BAAa,CAAC,AAAQ,kBAAkB,AAAE,CAAC,AACpC,UAAU,CAAE,GAAG,AACtB,CAAC,AAED,2BAAa,CAAC,AAAQ,WAAW,AAAE,CAAC,AAC7B,QAAQ,CAAE,QAAQ,CAClB,KAAK,CAAE,CAAC,CACR,MAAM,CAAE,CAAC,CACT,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,AACnB,CAAC,AACD,2BAAa,CAAC,AAAQ,+BAA+B,AAAE,CAAC,AACjD,MAAM,CAAE,IAAI,CACZ,KAAK,CAAE,IAAI,AAClB,CAAC,AACD,2BAAa,CAAC,AAAQ,iBAAiB,AAAE,CAAC,AACnC,UAAU,CAAE,IAAI,CAEhB,SAAS,CAAE,MAAM,KAAK,CAAC,CAAC,KAAK,CAAC,AACrC,CAAC\"}"
};

const MessageInput = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let $conversationId = get_store_value(conversationId);
	let $newConversation = get_store_value(newConversation);
	let $newConversationUserIds = get_store_value(newConversationUserIds);
	let { message = "" } = $$props;
	let { image = null } = $$props;
	let newMessageId = getNewMessageId();
	let newConversationId = getNewConversationId();
	let messageField;

	function createNewMessage() {
		if (submitEnabled) {
			// console.log('createNewMessage', message);
			const messageDetails = { id: newMessageId, message: trim(message) }; // message: getUnformattedText(message),

			if ($conversationId && !$newConversation) {
				messageDetails.conversationId = $conversationId;
			}

			if (image) {
				messageDetails.image = image;
			}

			if ($newConversation) {
				messageDetails.newConversation = true;
				messageDetails.targetUserIds = $newConversationUserIds;
				messageDetails.conversationId = newConversationId;
			}

			message = "";
			newMessageId = getNewMessageId();

			// console.log('createNewMessage', messageDetails);
			createMessage(messageDetails).then(result => {
				if (result && (result.success || result.addedMessage || result.duplicateKey)) ; // console.log('clear draft message', draftId);
				// clearDraftPost('message', draftId);
			});
		}
	}

	function submit() {
		if (submitEnabled) {
			createNewMessage();
		}
	}

	onMount(() => {
	});

	function resizeMessageField() {
		(async () => {
			await tick();
		})();
	}

	if ($$props.message === void 0 && $$bindings.message && message !== void 0) $$bindings.message(message);
	if ($$props.image === void 0 && $$bindings.image && image !== void 0) $$bindings.image(image);
	$$result.css.add(css$I);
	let submitEnabled = ($conversationId || $newConversation) && !!(trim(message) || image);

	 {
		{
			resizeMessageField();
		}
	}

	return `<div class="${"messageInput svelte-uhjl0u"}">

    <div class="${"fieldRegion svelte-uhjl0u"}">${validate_component(Button, "Button").$$render(
		$$result,
		{
			className: "sendButton",
			disabled: !submitEnabled,
			onClick: submit,
			icon: img$A
		},
		{},
		{}
	)}
        
        <div class="${"field svelte-uhjl0u"}"><textarea rows="${"1"}" class="${"svelte-uhjl0u"}"${add_attribute("this", messageField, 1)}>${message || ""}</textarea>
            </div></div>
</div>`;
});

const img$B = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAaCAYAAACzdqxAAAAB30lEQVRIS7VV0VHDMAyV6gGACYAJKBMAE0AnACaAXOT+Ar+1c4EJKBMAEwATABNQJqAMkIgzl/QcR3EoHP7JnSU/Pz89KQj/tLAPN8/z1aIo9hFxw+Uy80wpdZ8kyTx2thM4z/ONoijOAOCoA2CqlLpIkmQmxUVgY8wuIt4CwGrPi+bMPNJaP4Z5LeDJZDIcDAYPPwCtseZlWe6Nx+MXH7wFbK11T1sPGLwDQM1qV4jPiGizEzjLsiNmvvYTmPlCa33u7xljzhHR6b9YiHicpum03mgwzrLsjpn3F0HE+zRNDySdw1wAuCGiRaEbwNZap9NWDcTMe1JhXLwqsKtFvV6IaFtkbK1lnx0RRX0ey48yLstyO6x2fXHlnmePyCsRDUXGxphHRNzxpGgVro6FBWTmJ621c8z3ajA2xpwiYh64oqWzoC9EXVHNhQ/BBc5Gvo9bba6UWvPnh9QgDuRQslhkr2G1lhRuoxo+b8sAK6U2w2Ek2slauwzrFluRscfaNctKD/NPpdRQGp2dDSDNg/ASZk601pfS5dHOCn0d2LDh2xA8ClwVUpKkUwKxQaQnSaMUAEZEdBfTv/dn6g5ba52OJxXQFRGd9tnxR8AOxM1f9+2az0tp3Mfqz1L85oIv+3TcG97ba3IAAAAASUVORK5CYII=";

/* src\routes\_components\Location.svelte generated by Svelte v3.23.0 */

const css$J = {
	code: ".location.svelte-56x8ud{display:table;padding:5px;margin-left:16px;margin-top:-2px;font-size:1.2rem;color:#999999}.hidden.svelte-56x8ud{display:none}.visibilityHidden.svelte-56x8ud{visibility:hidden}.locationIcon.svelte-56x8ud{display:inline-block;background-size:contain;background-position:center;background-repeat:no-repeat;width:11px;height:13px;vertical-align:middle;margin-right:3px;margin-bottom:2px}",
	map: "{\"version\":3,\"file\":\"Location.svelte\",\"sources\":[\"Location.svelte\"],\"sourcesContent\":[\"<script>\\n    import LocationIcon from \\\"../../assets/icons/location.png\\\";\\n\\n    export let className = '';\\n\\texport let location = '';\\n\\n    export let hideWithVisibility = false;\\n</script>\\n\\n<div class=\\\"location {className}\\\" class:hidden={!hideWithVisibility && !location} class:visibilityHidden={hideWithVisibility && !location}><div class=\\\"locationIcon\\\" style=\\\"background-image: url({LocationIcon})\\\" />{location}</div>\\n\\n<style>\\n\\t.location {\\n\\t\\tdisplay: table;\\n\\n\\t\\tpadding: 5px;\\n    \\tmargin-left: 16px;\\n\\t\\tmargin-top: -2px;\\n\\n\\t\\tfont-size: 1.2rem;\\n\\t\\tcolor: #999999;\\n\\t}\\n\\n    .hidden {\\n        display: none;\\n    }\\n    .visibilityHidden {\\n        visibility: hidden;\\n    }\\n\\n\\t.locationIcon {\\n\\t\\tdisplay: inline-block;\\n\\t\\tbackground-size: contain;\\n\\t\\tbackground-position: center;\\n\\t\\tbackground-repeat: no-repeat;\\n\\t\\twidth: 11px;\\n\\t\\theight: 13px;\\n\\t\\tvertical-align: middle;\\n    \\tmargin-right: 3px;\\n    \\tmargin-bottom: 2px;\\n\\t}\\n</style>\"],\"names\":[],\"mappings\":\"AAYC,SAAS,cAAC,CAAC,AACV,OAAO,CAAE,KAAK,CAEd,OAAO,CAAE,GAAG,CACT,WAAW,CAAE,IAAI,CACpB,UAAU,CAAE,IAAI,CAEhB,SAAS,CAAE,MAAM,CACjB,KAAK,CAAE,OAAO,AACf,CAAC,AAEE,OAAO,cAAC,CAAC,AACL,OAAO,CAAE,IAAI,AACjB,CAAC,AACD,iBAAiB,cAAC,CAAC,AACf,UAAU,CAAE,MAAM,AACtB,CAAC,AAEJ,aAAa,cAAC,CAAC,AACd,OAAO,CAAE,YAAY,CACrB,eAAe,CAAE,OAAO,CACxB,mBAAmB,CAAE,MAAM,CAC3B,iBAAiB,CAAE,SAAS,CAC5B,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,cAAc,CAAE,MAAM,CACnB,YAAY,CAAE,GAAG,CACjB,aAAa,CAAE,GAAG,AACtB,CAAC\"}"
};

const Location = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let { className = "" } = $$props;
	let { location = "" } = $$props;
	let { hideWithVisibility = false } = $$props;
	if ($$props.className === void 0 && $$bindings.className && className !== void 0) $$bindings.className(className);
	if ($$props.location === void 0 && $$bindings.location && location !== void 0) $$bindings.location(location);
	if ($$props.hideWithVisibility === void 0 && $$bindings.hideWithVisibility && hideWithVisibility !== void 0) $$bindings.hideWithVisibility(hideWithVisibility);
	$$result.css.add(css$J);

	return `<div class="${[
		"location " + escape(className) + " svelte-56x8ud",
		(!hideWithVisibility && !location ? "hidden" : "") + " " + (hideWithVisibility && !location
		? "visibilityHidden"
		: "")
	].join(" ").trim()}"><div class="${"locationIcon svelte-56x8ud"}" style="${"background-image: url(" + escape(img$B) + ")"}"></div>${escape(location)}</div>`;
});

/* src\routes\_components\ConversationProfile.svelte generated by Svelte v3.23.0 */

const css$K = {
	code: ".button.svelte-yn8q53{cursor:pointer}.conversationProfile.svelte-yn8q53{width:100%;display:flex;justify-content:center}.profileInfo.svelte-yn8q53{position:absolute;top:60px;width:217px;display:flex;align-items:center;flex-direction:column}.profileRegion.svelte-yn8q53{display:flex;align-items:center;flex-direction:column}.conversationProfile.svelte-yn8q53 .avatarIcon{margin-top:17px;height:108px;width:108px}.userDisplayName.svelte-yn8q53{font-size:2.2rem;padding-top:6px;line-height:3rem;user-select:text}.username.svelte-yn8q53{font-size:1.5rem;margin-top:-6px;padding-bottom:7px;line-height:3rem;user-select:text;color:#999999}.conversationProfile.svelte-yn8q53 .location{margin-left:initial;font-size:1.1rem}",
	map: "{\"version\":3,\"file\":\"ConversationProfile.svelte\",\"sources\":[\"ConversationProfile.svelte\"],\"sourcesContent\":[\"<script>\\r\\n    import Proxy from '../../components/Proxy.svelte';\\r\\n\\r\\n    import AvatarIcon from '../_components/AvatarIcon.svelte';\\r\\n    import Location from '../_components/Location.svelte';\\r\\n\\r\\n    import {\\r\\n        viewedUser\\r\\n    } from '../../models/appModel';\\r\\n\\r\\n    import {\\r\\n        loadProfile,\\r\\n    } from '../../actions/appActions';\\r\\n\\r\\n    $: userDisplayName = ($viewedUser && $viewedUser.name) || '';\\r\\n    $: username = ($viewedUser && $viewedUser.username && '@' + $viewedUser.username) || '';\\r\\n    $: userLocation = ($viewedUser && $viewedUser.location) || '';\\r\\n\\r\\n    function loadViewedProfile() {\\r\\n        if ($viewedUser && $viewedUser.id) {\\r\\n            loadProfile($viewedUser.id); // , {owner: true});\\r\\n        }\\r\\n    }\\r\\n</script>\\r\\n\\r\\n<div class=\\\"conversationProfile\\\">\\r\\n    <div class=\\\"profileInfo\\\">\\r\\n        <!-- <Proxy image=\\\"message_new_message_profile\\\" className=\\\"proxyOverlay\\\" /> -->\\r\\n\\r\\n        <div class=\\\"profileRegion button\\\" on:click=\\\"{loadViewedProfile}\\\">\\r\\n            <AvatarIcon user=\\\"{viewedUser}\\\" useThumb=\\\"{true}\\\" />\\r\\n\\r\\n            <div class=\\\"userDisplayName\\\">{userDisplayName}</div>\\r\\n            <div class=\\\"username\\\">{username}</div>\\r\\n        </div>\\r\\n\\r\\n        {#if userLocation}\\r\\n            <Location location=\\\"{userLocation}\\\" />\\r\\n        {/if}\\r\\n    </div>\\r\\n</div>\\r\\n\\r\\n<style>\\r\\n\\t/* .conversationProfile :global(.proxyOverlay) {\\r\\n\\t\\tposition: absolute;\\r\\n\\t\\topacity: 0.5;\\r\\n\\t} */\\r\\n\\r\\n    .button {\\r\\n        cursor: pointer;\\r\\n    }\\r\\n\\r\\n\\t.conversationProfile {\\r\\n    \\twidth: 100%;\\r\\n\\t\\tdisplay: flex;\\r\\n        justify-content: center;\\r\\n\\t}\\r\\n\\r\\n\\t.profileInfo {\\r\\n\\t\\tposition: absolute;\\r\\n\\t\\ttop: 60px;\\r\\n\\t\\twidth: 217px;\\r\\n\\t\\tdisplay: flex;\\r\\n        align-items: center;\\r\\n        flex-direction: column;\\r\\n\\t}\\r\\n\\r\\n    .profileRegion {\\r\\n        display: flex;\\r\\n        align-items: center;\\r\\n        flex-direction: column;\\r\\n    }\\r\\n\\r\\n    .conversationProfile :global(.avatarIcon) {\\r\\n        margin-top: 17px;\\r\\n        height: 108px;\\r\\n        width: 108px;\\r\\n        /* position: absolute;\\r\\n        top: 0;\\r\\n        left: 16px; */\\r\\n    }\\r\\n\\r\\n    .userDisplayName {\\r\\n        font-size: 2.2rem;\\r\\n        padding-top: 6px;\\r\\n    \\tline-height: 3rem;\\r\\n\\r\\n        user-select: text;\\r\\n    }\\r\\n\\r\\n    .username {\\r\\n        font-size: 1.5rem;\\r\\n        margin-top: -6px;\\r\\n        padding-bottom: 7px;\\r\\n        line-height: 3rem;\\r\\n\\r\\n        user-select: text;\\r\\n\\r\\n        color: #999999;\\r\\n    }\\r\\n\\r\\n    .conversationProfile :global(.location) {\\r\\n        margin-left: initial;\\r\\n        font-size: 1.1rem;\\r\\n    }\\r\\n</style>\"],\"names\":[],\"mappings\":\"AAgDI,OAAO,cAAC,CAAC,AACL,MAAM,CAAE,OAAO,AACnB,CAAC,AAEJ,oBAAoB,cAAC,CAAC,AAClB,KAAK,CAAE,IAAI,CACd,OAAO,CAAE,IAAI,CACP,eAAe,CAAE,MAAM,AAC9B,CAAC,AAED,YAAY,cAAC,CAAC,AACb,QAAQ,CAAE,QAAQ,CAClB,GAAG,CAAE,IAAI,CACT,KAAK,CAAE,KAAK,CACZ,OAAO,CAAE,IAAI,CACP,WAAW,CAAE,MAAM,CACnB,cAAc,CAAE,MAAM,AAC7B,CAAC,AAEE,cAAc,cAAC,CAAC,AACZ,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,MAAM,CACnB,cAAc,CAAE,MAAM,AAC1B,CAAC,AAED,kCAAoB,CAAC,AAAQ,WAAW,AAAE,CAAC,AACvC,UAAU,CAAE,IAAI,CAChB,MAAM,CAAE,KAAK,CACb,KAAK,CAAE,KAAK,AAIhB,CAAC,AAED,gBAAgB,cAAC,CAAC,AACd,SAAS,CAAE,MAAM,CACjB,WAAW,CAAE,GAAG,CACnB,WAAW,CAAE,IAAI,CAEd,WAAW,CAAE,IAAI,AACrB,CAAC,AAED,SAAS,cAAC,CAAC,AACP,SAAS,CAAE,MAAM,CACjB,UAAU,CAAE,IAAI,CAChB,cAAc,CAAE,GAAG,CACnB,WAAW,CAAE,IAAI,CAEjB,WAAW,CAAE,IAAI,CAEjB,KAAK,CAAE,OAAO,AAClB,CAAC,AAED,kCAAoB,CAAC,AAAQ,SAAS,AAAE,CAAC,AACrC,WAAW,CAAE,OAAO,CACpB,SAAS,CAAE,MAAM,AACrB,CAAC\"}"
};

const ConversationProfile = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let $viewedUser = get_store_value(viewedUser);

	$$result.css.add(css$K);
	let userDisplayName = $viewedUser && $viewedUser.name || "";
	let username = $viewedUser && $viewedUser.username && "@" + $viewedUser.username || "";
	let userLocation = $viewedUser && $viewedUser.location || "";

	return `<div class="${"conversationProfile svelte-yn8q53"}"><div class="${"profileInfo svelte-yn8q53"}">

        <div class="${"profileRegion button svelte-yn8q53"}">${validate_component(AvatarIcon, "AvatarIcon").$$render($$result, { user: viewedUser, useThumb: true }, {}, {})}

            <div class="${"userDisplayName svelte-yn8q53"}">${escape(userDisplayName)}</div>
            <div class="${"username svelte-yn8q53"}">${escape(username)}</div></div>

        ${userLocation
	? `${validate_component(Location, "Location").$$render($$result, { location: userLocation }, {}, {})}`
	: ``}</div>
</div>`;
});

/* src\routes\messages\[conversation].svelte generated by Svelte v3.23.0 */

const css$L = {
	code: ".messagesView.svelte-ed6b4u{position:absolute;top:0;bottom:56px;width:100%}.messagesView.svelte-ed6b4u .scrollContent{display:flex;align-items:flex-end}.content.svelte-ed6b4u .newConversation .scrollContent{min-height:initial !important}.button.svelte-ed6b4u{cursor:pointer}.messagesAddedIndicatorContainer.svelte-ed6b4u{position:absolute;width:100%;bottom:2px;display:flex;justify-content:center}.messagesAddedIndicator.svelte-ed6b4u{font-size:1.3rem;color:#ffffff;background-color:#DF3C3C;border-radius:999px;padding:3px 10px}",
	map: "{\"version\":3,\"file\":\"[conversation].svelte\",\"sources\":[\"[conversation].svelte\"],\"sourcesContent\":[\"<svelte:window bind:innerHeight={viewHeight} bind:innerWidth={viewWidth} />\\r\\n\\r\\n<script>\\r\\n\\timport { tick, onMount, onDestroy } from 'svelte';\\r\\n\\timport { writable } from 'svelte/store';\\r\\n\\r\\n    import config from '../../config';\\r\\n    import locale from '../../locale';\\r\\n\\r\\n\\timport ScrollView from '../../components/ScrollView.svelte';\\r\\n\\r\\n\\timport Proxy from '../../components/Proxy.svelte';\\r\\n    import Hotspot from '../../components/Hotspot.svelte';\\r\\n\\r\\n\\timport { loadProfile } from '../../actions/appActions';\\r\\n\\r\\n    import ContentLoader from '../_components/ContentLoader.svelte';\\r\\n\\r\\n\\timport ConversationView from '../_components/ConversationView.svelte';\\r\\n\\timport MessageInput from '../_components/MessageInput.svelte';\\r\\n\\r\\n\\timport ConversationProfile from '../_components/ConversationProfile.svelte';\\r\\n\\r\\n    import {\\r\\n\\t\\tuserId,\\r\\n\\t\\tusercode,\\r\\n        conversationId,\\r\\n\\t\\tconversation,\\r\\n\\t\\tnewConversation\\r\\n\\t} from '../../models/appModel';\\r\\n\\r\\n    import ConversationsModel, {\\r\\n\\t\\tloadingConversations,\\r\\n\\t\\t// setConversationSeenTimeout,\\r\\n\\t\\t// clearConversationSeenTimeout,\\r\\n    } from '../../models/conversationsModel';\\r\\n\\r\\n\\timport MessagesModel, { getMessages, loadingMessages } from '../../models/messagesModel';\\r\\n\\r\\n\\timport {\\r\\n        loadCurrentConversation,\\r\\n    } from '../../actions/appActions';\\r\\n\\r\\n\\tloadCurrentConversation();\\r\\n\\r\\n\\tlet lastMessagesCount = 0;\\r\\n\\r\\n    export let messages = writable(null); // []);\\r\\n\\t$: {\\r\\n\\t\\t$conversation;\\r\\n\\t\\tupdateMessage();\\r\\n\\t\\t// messages = ($conversation && getMessages({ conversationId: $conversationId }, messagesLoaded, $conversation.isNew)) || messages;\\r\\n\\t\\t// console.log('$conversationId', $conversationId, $messages);\\r\\n\\t\\t// messages = ($conversationId && getMessages({ conversationId: $conversationId }, messagesLoaded)) || messages;\\r\\n\\t};\\r\\n\\r\\n\\t$: {\\r\\n\\t\\t$userId; $usercode;\\r\\n\\t\\tloadCurrentConversation();\\r\\n\\t}\\r\\n\\r\\n\\tfunction updateMessage() {\\r\\n\\t\\tmessages = ($conversation && getMessages({ conversationId: $conversationId }, null, $conversation.isNew)) || messages;\\r\\n\\t\\t// messages = ($conversation && getMessages({ conversationId: $conversationId }, messagesLoaded, $conversation.isNew)) || messages;\\r\\n\\t}\\r\\n\\r\\n\\t// $: {\\r\\n\\t// \\t$messages;\\r\\n\\t// \\tcheckMessagesUpdated();\\r\\n\\t// }\\r\\n\\r\\n\\t$: {\\r\\n\\t\\t$messages;\\r\\n\\t\\tcheckMessagesUpdated();\\r\\n\\r\\n\\t\\t// // console.log('curConversation set seen?', $conversation, mounted, $messages, $messages && $messages.length);\\r\\n\\t\\t// if ($conversation && mounted && $messages && $messages.length) { // !conversationSeenTimeout &&\\r\\n\\t\\t// \\tclearConversationSeenTimeout(conversationSeenTimeout);\\r\\n\\t\\t// \\tconversationSeenTimeout = setConversationSeenTimeout({conversationId: $conversationId});\\r\\n\\t\\t// }\\r\\n\\t}\\r\\n\\r\\n\\t// $: console.log('messages', $messages);\\r\\n\\r\\n    $: isLoadingMessages = $loadingMessages && !$messages; // (!$messages || !$messages.length);\\r\\n\\t$: isLoadingConversation = $loadingConversations && (!$conversation || ($conversation.id !== $conversationId));\\r\\n\\t$: isLoadingContent = (isLoadingMessages || isLoadingConversation) && !$newConversation;\\r\\n\\r\\n\\t$: showMessageInput = !isLoadingContent && $userId && ($conversation || $newConversation);\\r\\n\\r\\n\\t// $: { console.log('isLoadingContent', isLoadingContent, 'isLoadingMessages', isLoadingMessages, 'isLoadingConversation', isLoadingConversation, 'conversation', !!$conversation, 'messages', !!$messages, 'conv.id', $conversation && $conversation.id, '$conversationId', $conversationId); } // , '$conversation', $conversation\\r\\n\\r\\n\\t// $: console.log('isLoadingConversation', isLoadingConversation, '$conversation', $conversation);\\r\\n\\r\\n\\t$: viewingGroupConversation = ($conversation && $conversation.isGroup) || false;\\r\\n\\t// $: isNewConversation = ($conversation && $conversation.isNew) || false;\\r\\n\\r\\n\\t$: proxyMessageViewImage = viewingGroupConversation ? 'messages_group_view': 'message_view';\\r\\n\\r\\n\\tlet showMessagesAdded = false;\\r\\n\\r\\n\\tlet scrollRegion;\\r\\n\\r\\n\\tlet lastViewHeight = 0;\\r\\n\\r\\n\\tlet viewHeight, viewWidth;\\r\\n\\t$: {\\r\\n\\t\\tif (viewHeight && viewWidth < config.MOBILE_DEVICE_MAX_WIDTH && viewHeight < lastViewHeight) { // if on mobile and height adjusted (keyboard shown)\\r\\n\\t\\t\\tscrollToBottom();\\r\\n\\r\\n\\t\\t\\t(async () => {\\r\\n\\t\\t\\t\\tawait tick();\\r\\n\\t\\t\\t\\tscrollToBottom();\\r\\n\\t\\t\\t})();\\r\\n\\t\\t}\\r\\n\\t\\tlastViewHeight = viewHeight;\\r\\n\\t}\\r\\n\\r\\n\\tasync function scrollToBottom() {\\r\\n\\t\\tif (scrollRegion) {\\r\\n\\t\\t\\tawait tick();\\r\\n\\r\\n\\t\\t\\tif (scrollRegion) {\\r\\n\\t\\t\\t\\tscrollRegion.scrollTo(0, scrollRegion.scrollHeight);\\r\\n\\t\\t\\t}\\r\\n\\t\\t}\\r\\n\\t}\\r\\n\\r\\n\\tasync function checkMessagesUpdated() {\\r\\n\\t\\tif (scrollRegion) {\\r\\n\\t\\t\\tif ($messages && $messages.length > lastMessagesCount) {\\r\\n\\t\\t\\t\\t// console.log('message added')\\r\\n\\t\\t\\t\\tif (scrollRegion.scrollTop + scrollRegion.offsetHeight > scrollRegion.scrollHeight - config.MIN_AUTO_SCROLL_BOTTOM_DIST) {\\r\\n\\t\\t\\t\\t\\tawait tick();\\r\\n\\t\\t\\t\\t\\tscrollRegion.scrollTo(0, scrollRegion.scrollHeight);\\r\\n\\t\\t\\t\\t} else {\\r\\n\\t\\t\\t\\t\\tshowMessagesAdded = true;\\r\\n\\t\\t\\t\\t}\\r\\n\\t\\t\\t\\t// clearConversationSeen();\\r\\n\\t\\t\\t}\\r\\n\\t\\t}\\r\\n\\t\\tlastMessagesCount = $messages ? $messages.length : 0;\\r\\n\\t}\\r\\n\\r\\n\\t// async function messagesLoaded(result) {\\r\\n\\t// \\tcheckMessagesUpdated();\\r\\n\\t// \\tclearConversationSeen();\\r\\n\\t// }\\r\\n\\r\\n\\tfunction onScroll() {\\r\\n\\t\\tif (showMessagesAdded && scrollRegion.scrollTop + scrollRegion.offsetHeight > scrollRegion.scrollHeight - config.MIN_HIDE_MESSAGES_BOTTOM_DIST) {\\r\\n\\t\\t\\tshowMessagesAdded = false;\\r\\n\\t\\t}\\r\\n\\t}\\r\\n\\r\\n\\tlet mounted = false;\\r\\n\\tlet conversationSeenTimeout = null;\\r\\n\\r\\n\\tonMount(() => {\\r\\n\\t\\tmounted = true;\\r\\n\\r\\n\\t\\tMessagesModel.on('messagedAdded', scrollToBottom);\\r\\n\\t\\t// ConversationsModel.on('conversationUpdated', conversationUpdated);\\r\\n\\r\\n\\t\\t// conversationSeenTimeout = setConversationSeenTimeout({conversationId: $conversationId});\\r\\n\\t})\\r\\n\\r\\n\\tonDestroy(() => {\\r\\n\\t\\tmounted = false;\\r\\n\\r\\n\\t\\tMessagesModel.off('messagedAdded', scrollToBottom);\\r\\n\\t\\t// ConversationsModel.off('conversationUpdated', conversationUpdated);\\r\\n\\r\\n\\t\\t// clearConversationSeen();\\r\\n\\t})\\r\\n\\r\\n\\t// function clearConversationSeen() {\\r\\n\\t// \\tclearConversationSeenTimeout(conversationSeenTimeout); // force new timeout\\r\\n\\t// \\tconversationSeenTimeout = null;\\r\\n\\t// }\\r\\n\\r\\n\\t// function conversationUpdated() {\\r\\n\\t// \\t// console.log('conversationUpdated');\\r\\n\\r\\n\\t// \\tif ($conversationId) {\\r\\n\\t// \\t\\tmessages = getMessages({ conversationId: $conversationId, getUnloaded: true }, messagesLoaded);\\r\\n\\t// \\t}\\r\\n\\t// }\\r\\n</script>\\r\\n\\r\\n<svelte:head>\\r\\n\\t<title>Flock</title>\\r\\n</svelte:head>\\r\\n\\r\\n<div class=\\\"content\\\">\\r\\n\\t<div class=\\\"messagesView\\\" class:newConversation=\\\"{$newConversation}\\\">\\r\\n\\t\\t{#if isLoadingContent}\\r\\n\\t\\t\\t<ContentLoader label=\\\"{locale.LOADING.MESSAGES}\\\" />\\r\\n\\t\\t{:else if (!$messages || !$messages.length) && !$newConversation}\\r\\n\\t\\t\\t<ContentLoader label=\\\"{locale.CONVERSATION.NO_MESSAGES}\\\" />\\r\\n\\t\\t\\t<!-- <div class=\\\"noMessages\\\">\\r\\n\\t\\t\\t\\t{locale.CONVERSATION.NO_MESSAGES}\\r\\n\\t\\t\\t</div> -->\\r\\n\\t\\t{:else}\\r\\n\\t\\t\\t<ScrollView bind:scrollRegion=\\\"{scrollRegion}\\\" onScroll=\\\"{onScroll}\\\" anchorToBottom=\\\"{true}\\\" id=\\\"conversation\\\">\\r\\n\\t\\t\\t\\t{#if $newConversation}\\r\\n\\t\\t\\t\\t\\t<ConversationProfile />\\r\\n\\t\\t\\t\\t{:else if $messages}\\r\\n\\t\\t\\t\\t\\t<ConversationView {messages} />\\r\\n\\t\\t\\t\\t{/if}\\r\\n\\r\\n\\t\\t\\t\\t<!-- <div class=\\\"proxyOverlay\\\">\\r\\n\\t\\t\\t\\t\\t{#if isNewConversation}\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"content\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<Proxy image=\\\"message_new_message_profile\\\" className=\\\"profileInfo\\\" />\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t{:else}\\r\\n\\t\\t\\t\\t\\t\\t<Proxy image=\\\"{proxyMessageViewImage}\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t{#if viewingGroupConversation}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<Hotspot onClick=\\\"{e => loadProfile('bl20a8lm')}\\\" style=\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tleft: 6px;\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\ttop: 25px;\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\twidth: 50px;\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\theight: 307px;\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t{:else}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<Hotspot onClick=\\\"{e => loadProfile('bl20a8lm')}\\\" style=\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tleft: 6px;\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\ttop: 25px;\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\twidth: 50px;\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\theight: 691px;\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t{/if}\\r\\n\\t\\t\\t\\t\\t\\t</Proxy>\\r\\n\\t\\t\\t\\t\\t{/if}\\r\\n\\t\\t\\t\\t</div> -->\\r\\n\\t\\t\\t</ScrollView>\\r\\n\\t\\t{/if}\\r\\n\\r\\n\\t\\t{#if showMessagesAdded}\\r\\n\\t\\t\\t<div class=\\\"messagesAddedIndicatorContainer\\\">\\r\\n\\t\\t\\t\\t<div class=\\\"messagesAddedIndicator button\\\" on:click=\\\"{scrollToBottom}\\\">{locale.CONVERSATION.MESSAGES_ADDED}</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t{/if}\\r\\n\\t</div>\\r\\n\\r\\n\\t{#if showMessageInput}\\r\\n\\t\\t<MessageInput />\\r\\n\\t{/if}\\r\\n</div>\\r\\n\\r\\n<style>\\r\\n\\t.messagesView {\\r\\n\\t\\tposition: absolute;\\r\\n\\t\\ttop: 0;\\r\\n\\t\\tbottom: 56px;\\r\\n\\t\\twidth: 100%;\\r\\n\\t}\\r\\n\\t.messagesView :global(.scrollContent) {\\r\\n\\t\\tdisplay: flex;\\r\\n\\t\\talign-items: flex-end;\\r\\n\\t}\\r\\n\\r\\n\\t.content :global(.newConversation .scrollContent) {\\r\\n    \\tmin-height: initial !important; /* prevent scrolling view */\\r\\n\\t}\\r\\n\\r\\n\\t.button {\\r\\n\\t\\tcursor: pointer;\\r\\n\\t}\\r\\n\\r\\n\\t.messagesAddedIndicatorContainer {\\r\\n\\t\\tposition: absolute;\\r\\n    \\twidth: 100%;\\r\\n    \\tbottom: 2px;\\r\\n\\t\\tdisplay: flex;\\r\\n\\t\\tjustify-content: center;\\r\\n\\t}\\r\\n\\r\\n\\t.messagesAddedIndicator {\\r\\n\\t\\tfont-size: 1.3rem;\\r\\n\\r\\n\\t\\tcolor: #ffffff;\\r\\n        background-color: #DF3C3C;\\r\\n\\t\\tborder-radius: 999px;\\r\\n    \\tpadding: 3px 10px;\\r\\n\\t}\\r\\n\\r\\n    /* .noMessages {\\r\\n        padding: 0 20px;\\r\\n        font-size: 1.2rem;\\r\\n        line-height: 1.8rem;\\r\\n        padding-top: 10px;\\r\\n        padding-bottom: 20px;\\r\\n    } */\\r\\n\\r\\n\\t/* .messagesView :global(.proxyOverlay) {\\r\\n        position: absolute;\\r\\n        opacity: 0.5;\\r\\n\\t} */\\r\\n</style>\"],\"names\":[],\"mappings\":\"AA0PC,aAAa,cAAC,CAAC,AACd,QAAQ,CAAE,QAAQ,CAClB,GAAG,CAAE,CAAC,CACN,MAAM,CAAE,IAAI,CACZ,KAAK,CAAE,IAAI,AACZ,CAAC,AACD,2BAAa,CAAC,AAAQ,cAAc,AAAE,CAAC,AACtC,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,QAAQ,AACtB,CAAC,AAED,sBAAQ,CAAC,AAAQ,+BAA+B,AAAE,CAAC,AAC/C,UAAU,CAAE,OAAO,CAAC,UAAU,AAClC,CAAC,AAED,OAAO,cAAC,CAAC,AACR,MAAM,CAAE,OAAO,AAChB,CAAC,AAED,gCAAgC,cAAC,CAAC,AACjC,QAAQ,CAAE,QAAQ,CACf,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,GAAG,CACd,OAAO,CAAE,IAAI,CACb,eAAe,CAAE,MAAM,AACxB,CAAC,AAED,uBAAuB,cAAC,CAAC,AACxB,SAAS,CAAE,MAAM,CAEjB,KAAK,CAAE,OAAO,CACR,gBAAgB,CAAE,OAAO,CAC/B,aAAa,CAAE,KAAK,CACjB,OAAO,CAAE,GAAG,CAAC,IAAI,AACrB,CAAC\"}"
};

const U5Bconversationu5D = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let $conversation = get_store_value(conversation);
	let $userId = get_store_value(userId);
	let $usercode = get_store_value(usercode);
	let $conversationId = get_store_value(conversationId);
	let $messages;
	let $loadingMessages = get_store_value(loadingMessages);
	let $loadingConversations = get_store_value(loadingConversations);
	let $newConversation = get_store_value(newConversation);
	loadCurrentConversation();
	let lastMessagesCount = 0;
	let { messages = writable$1(null) } = $$props; // []);
	$messages = get_store_value(messages);

	// messages = ($conversationId && getMessages({ conversationId: $conversationId }, messagesLoaded)) || messages;
	

	function updateMessage() {
		messages = $conversation && getMessages$1({ conversationId: $conversationId }, null, $conversation.isNew) || messages;
	} // messages = ($conversation && getMessages({ conversationId: $conversationId }, messagesLoaded, $conversation.isNew)) || messages;

	let showMessagesAdded = false;
	let scrollRegion;

	async function scrollToBottom() {
		if (scrollRegion) {
			await tick();

			if (scrollRegion) {
				scrollRegion.scrollTo(0, scrollRegion.scrollHeight);
			}
		}
	}

	async function checkMessagesUpdated() {
		if (scrollRegion) {
			if ($messages && $messages.length > lastMessagesCount) {
				// console.log('message added')
				if (scrollRegion.scrollTop + scrollRegion.offsetHeight > scrollRegion.scrollHeight - config$1.MIN_AUTO_SCROLL_BOTTOM_DIST) {
					await tick();
					scrollRegion.scrollTo(0, scrollRegion.scrollHeight);
				} else {
					showMessagesAdded = true;
				}
			} // clearConversationSeen();
		}

		lastMessagesCount = $messages ? $messages.length : 0;
	}

	// async function messagesLoaded(result) {
	// 	checkMessagesUpdated();
	// 	clearConversationSeen();
	// }
	function onScroll() {
		if (showMessagesAdded && scrollRegion.scrollTop + scrollRegion.offsetHeight > scrollRegion.scrollHeight - config$1.MIN_HIDE_MESSAGES_BOTTOM_DIST) {
			showMessagesAdded = false;
		}
	}

	onMount(() => {
		MessagesModel.on("messagedAdded", scrollToBottom);
	}); // ConversationsModel.on('conversationUpdated', conversationUpdated);
	// conversationSeenTimeout = setConversationSeenTimeout({conversationId: $conversationId});

	onDestroy(() => {
		MessagesModel.off("messagedAdded", scrollToBottom);
	}); // ConversationsModel.off('conversationUpdated', conversationUpdated);
	// clearConversationSeen();

	if ($$props.messages === void 0 && $$bindings.messages && messages !== void 0) $$bindings.messages(messages);
	$$result.css.add(css$L);
	let $$settled;
	let $$rendered;

	do {
		$$settled = true;
		$messages = get_store_value(messages);

		 {
			{
				updateMessage();
			} // messages = ($conversation && getMessages({ conversationId: $conversationId }, messagesLoaded, $conversation.isNew)) || messages;
		}

		 {
			{
				loadCurrentConversation();
			}
		}

		 {
			{
				checkMessagesUpdated();
			} // // console.log('curConversation set seen?', $conversation, mounted, $messages, $messages && $messages.length);
		}

		let isLoadingMessages = $loadingMessages && !$messages;
		let isLoadingConversation = $loadingConversations && (!$conversation || $conversation.id !== $conversationId);
		let isLoadingContent = (isLoadingMessages || isLoadingConversation) && !$newConversation;
		let showMessageInput = !isLoadingContent && $userId && ($conversation || $newConversation);
		let viewingGroupConversation = $conversation && $conversation.isGroup || false;

		$$rendered = `



${($$result.head += `${($$result.title = `<title>Flock</title>`, "")}`, "")}

<div class="${"content svelte-ed6b4u"}"><div class="${["messagesView svelte-ed6b4u", $newConversation ? "newConversation" : ""].join(" ").trim()}">${isLoadingContent
		? `${validate_component(ContentLoader, "ContentLoader").$$render($$result, { label: locale$1.LOADING.MESSAGES }, {}, {})}`
		: `${(!$messages || !$messages.length) && !$newConversation
			? `${validate_component(ContentLoader, "ContentLoader").$$render($$result, { label: locale$1.CONVERSATION.NO_MESSAGES }, {}, {})}
			`
			: `${validate_component(ScrollView, "ScrollView").$$render(
					$$result,
					{
						onScroll,
						anchorToBottom: true,
						id: "conversation",
						scrollRegion
					},
					{
						scrollRegion: $$value => {
							scrollRegion = $$value;
							$$settled = false;
						}
					},
					{
						default: () => `${$newConversation
						? `${validate_component(ConversationProfile, "ConversationProfile").$$render($$result, {}, {}, {})}`
						: `${$messages
							? `${validate_component(ConversationView, "ConversationView").$$render($$result, { messages }, {}, {})}`
							: ``}`}

				`
					}
				)}`}`}

		${showMessagesAdded
		? `<div class="${"messagesAddedIndicatorContainer svelte-ed6b4u"}"><div class="${"messagesAddedIndicator button svelte-ed6b4u"}">${escape(locale$1.CONVERSATION.MESSAGES_ADDED)}</div></div>`
		: ``}</div>

	${showMessageInput
		? `${validate_component(MessageInput, "MessageInput").$$render($$result, {}, {}, {})}`
		: ``}
</div>`;
	} while (!$$settled);

	return $$rendered;
});

var _conversation_ = /*#__PURE__*/Object.freeze({
    __proto__: null,
    'default': U5Bconversationu5D
});

const img$C = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAoCAYAAACIC2hQAAACdElEQVRYR+2YsY7UMBBAZ7yhQEICJAok0LL2pqdGQoDEF1Cgg+oQUFBCxx/QAR8ACDro4A8A8QdUSIm9bMN1XAVCbDzIpwsK2Ww8vsweOunSejJ58+IZZxfhgFx4QDjhEFT6TYkbNcb8IKJfzrmTkrCioMaYZwBwJwAqpR4URfFUClYUdDqd/iaiLMAR0bakVTHQps3aoqRVMdCmzRpU0qoIaJdNaasioF02pa0OBu2zKWl1MKjW+jsinugbQxJ7dRBonuf3vfdPOLNy6ARgg04mk40sy84T0QUiOktEpxDxOAD/eyGYBYCfSqkvAFBUVfUZEd85577Gil0CDUCj0eie9z5AaKXUsXqIx5INWW8WEeDbp9oSqDHGp1gaAtd3r7X2H7Yu0L/n9bogGHmfW2vvNuM69yhn5DAetteQJciQaGUz/SfYTshe0LC4z7ArIaOg+wRLAPCivSfb+4Y1R9dolrz3N2ez2ZvYhmaBhiS7p9BjwdHFhmS9+mal4TBQSr2OVc9Z997f4Jisc7GNhhskQVPP/iTQPM8fee8fcowxYnq7fE/NVN+ktX6PiJcZENEQIvrgnLsSDdwNSDKqtf6GiKe5ySNx29Za9m//JNDw5wIAHBUCJWut4uZKBQ3DWewiognnWzRpPDE7nojoIyIWAHA7NnNTOp9tNNLxO4AAsFkb0lqfA4BXiHipB/ittfYa5xWxQXs6viSiq6teYQS4tNbm0qDtji8Xi8Wt+Xz+ifOgFcDszk8xugNKRFtVVV3nAraLGI/HF7MsewkAU0RclGV5hFMoGzQ8QCl1JuV87gMI+cI6t2A2KKfqdcYcgkrb/QOFkys4PrgvFQAAAABJRU5ErkJggg==";

const img$D = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAAoCAYAAACSN4jeAAAB80lEQVRYR+2Y4VHCQBCFd9OAWoF2IFQgVABWoHaABdxxuStAOxArECoQKxBKsAMsgFtnMxeHCSS5RXD4cTfDAJlN3pd3u5u7IJzowBPlgj+BOed6RDRARP7u8E0i4oKI5og4U0rN973xvcCMMedZlr0AwLBFeOq9fzDGrKSAYrAA9QkAVxWxr/D/cvM4O7her/tSODGYtXYBANdB/BsAjPd+UgoH8Hs+DgBn5fQqpboS10RgeZ4bRByXUN77njGGQbeGMaaTZRnnWAFHRPl4PGbYqCECs9ZyrpQu9NuSOxTHeyBZaa0voqi4iGIDgwOcWzxmWuu2xC8CrbXs2g3/9t536xyuckSDWWtHAPAknZbK9D9qrZ9jzIgG2xRAxNZpLMWdc0MiepPe0H+AcfMt8kxSAAns4I6FhskNlZsmf/h5OCKinf1rq7oQO0RUJvwEACbe+2Xbk6BxKisVFVNM0TGIaJRSed0JtWCb1RStJgxExFul1HTXabVg1lo+YSDUkobXNuomsN+OLVUTxH9orXtSxxJYcizlmMABaWiqyuRYsVY/4kg5JjU3OXZ8x5xzEyK6kypJ4hHxVSlVLNe3luR1F6rsvCV60bFNO/PGNX9498AbifLtTrRoS+CSNzRN7z6i95WHIoq9TgKLdaqMO1nHfgD8kzI4ZT83LwAAAABJRU5ErkJggg==";

/* src\routes\_components\ProjectListItem.svelte generated by Svelte v3.23.0 */

const css$M = {
	code: ".projectListItem.svelte-1rr54md{position:relative;padding:6px 0;margin-bottom:2px;cursor:pointer}.thumb.svelte-1rr54md{width:38px;height:38px;object-fit:cover;border:1px solid #D9D9D9}.detailContent.svelte-1rr54md{position:absolute;left:54px;top:2px;bottom:0;right:60px;display:flex;align-items:center}.title.svelte-1rr54md{font-size:1.4rem;font-weight:700;line-height:1.3rem}.detail.svelte-1rr54md{font-size:1.2rem;margin-top:4px;color:#888888;line-height:1.3rem}.info.svelte-1rr54md{position:absolute;right:0;top:13px}.info.svelte-1rr54md .counter{margin-right:32px}.followingIcon.svelte-1rr54md{position:absolute;right:3px;top:2px;background-size:cover;width:21px;height:20px}.info.svelte-1rr54md .privateIcon{float:right;position:relative;display:inline-block;background-size:cover;width:18px;height:18px;margin-top:3px;margin-left:10px;margin-right:2px;opacity:0.75}",
	map: "{\"version\":3,\"file\":\"ProjectListItem.svelte\",\"sources\":[\"ProjectListItem.svelte\"],\"sourcesContent\":[\"<script>\\r\\n    import { writable } from 'svelte/store';\\r\\n\\r\\n    import Counter from './Counter.svelte';\\r\\n\\r\\n    import { getDateAgeString, getDateAge, getDateString } from '../../utils';\\r\\n\\r\\n    import { getProjectHeaderImage } from '../../models/projectsModel';\\r\\n\\r\\n    import { getUnviewedProjectNotificationCount } from '../../models/notificationsModel';\\r\\n\\r\\n    import { loadProject } from '../../actions/appActions';\\r\\n\\r\\n\\timport { getIsProjectTeamMember, showBetaFeatures, user } from '../../models/appModel';\\r\\n\\r\\n    import FollowingSmallIcon from \\\"../../assets/icons/following_small.png\\\";\\r\\n\\timport PrivateIcon from \\\"../../assets/icons/private.png\\\";\\r\\n\\r\\n    export let project;\\r\\n    export let showLastActive = false;\\r\\n    export let showUpdateCounter = true;\\r\\n    export let showPrivateIcon = false;\\r\\n\\r\\n    let enableLastActive = false; // hardcode until updating project active dates\\r\\n\\r\\n    $: isTeamMember = $user && getIsProjectTeamMember($project);\\r\\n\\r\\n    $: thumbImage = getProjectHeaderImage($project, true);\\r\\n\\r\\n    $: date = $project && (showLastActive ? $project.lastActiveAt : $project.createdAt);\\r\\n    // $: detail = (showLastActive ? $project.lastActiveInfo : $project.createdInfo) || '';\\r\\n\\r\\n    $: projectUnviewedCount = ($project && getUnviewedProjectNotificationCount($project.id)) || writable(0);\\r\\n\\r\\n    let dateString = '';\\r\\n    $: {\\r\\n        if (date) {\\r\\n            if (showLastActive) {\\r\\n                dateString = 'active ' + getDateAgeString(date);\\r\\n            } else {\\r\\n                dateString = 'created ' + getDateString(date, 'd MMM yyyy');\\r\\n            }\\r\\n        }\\r\\n    }\\r\\n\\r\\n    $: detail = dateString;\\r\\n\\r\\n    $: isPrivate = ($project && !$project.public) || false;\\r\\n    // $: postCount = ($project && $project.postsCount) || 0;\\r\\n\\r\\n    function loadCurrentProject() {\\r\\n        loadProject($project.id);\\r\\n    }\\r\\n</script>\\r\\n\\r\\n<div class=\\\"projectListItem\\\" on:click=\\\"{loadCurrentProject}\\\">\\r\\n    <img class=\\\"thumb\\\" src=\\\"{thumbImage}\\\" alt=\\\"{$project.title}\\\" />\\r\\n    <div class=\\\"detailContent\\\">\\r\\n        <div class=\\\"detailInnerContent\\\">\\r\\n            <div class=\\\"title\\\">{$project.title}</div>\\r\\n            {#if detail}\\r\\n                <div class=\\\"detail\\\">{detail}</div>\\r\\n            {/if}\\r\\n        </div>\\r\\n    </div>\\r\\n    {#if ($project.following || isTeamMember)}\\r\\n        <div class=\\\"info\\\">\\r\\n            {#if showPrivateIcon && isPrivate}\\r\\n                <div class=\\\"privateIcon\\\" style=\\\"background-image: url({PrivateIcon})\\\"></div>\\r\\n            {/if}\\r\\n            {#if showUpdateCounter && ($projectUnviewedCount)}\\r\\n                <!--  || postCount -->\\r\\n                <Counter count=\\\"{$projectUnviewedCount}\\\" hasNew=\\\"{$projectUnviewedCount}\\\" />\\r\\n            {/if}\\r\\n            <div class=\\\"followingIcon\\\" style=\\\"background-image: url({FollowingSmallIcon})\\\"></div>\\r\\n        </div>\\r\\n    {/if}\\r\\n</div>\\r\\n\\r\\n<style>\\r\\n    .projectListItem {\\r\\n        position: relative;\\r\\n\\r\\n        padding: 6px 0;\\r\\n        margin-bottom: 2px;\\r\\n\\r\\n        cursor: pointer;\\r\\n    }\\r\\n\\r\\n    .thumb {\\r\\n        width: 38px;\\r\\n        height: 38px;\\r\\n        object-fit: cover;\\r\\n\\r\\n        border: 1px solid #D9D9D9;\\r\\n    }\\r\\n\\r\\n    .detailContent {\\r\\n        position: absolute;\\r\\n        left: 54px;\\r\\n        top: 2px;\\r\\n        bottom: 0;\\r\\n        right: 60px;\\r\\n\\r\\n\\t\\tdisplay: flex;\\r\\n\\t\\talign-items: center;\\r\\n    }\\r\\n\\r\\n    .title {\\r\\n        font-size: 1.4rem;\\r\\n        font-weight: 700;\\r\\n        line-height: 1.3rem;\\r\\n    }\\r\\n\\r\\n    .detail {\\r\\n        font-size: 1.2rem;\\r\\n        margin-top: 4px;\\r\\n        color: #888888;\\r\\n        line-height: 1.3rem;\\r\\n    }\\r\\n\\r\\n    .info {\\r\\n        position: absolute;\\r\\n        right: 0;\\r\\n        top: 13px;\\r\\n    }\\r\\n\\r\\n    .info :global(.counter) {\\r\\n        margin-right: 32px;\\r\\n    }\\r\\n\\r\\n    .followingIcon {\\r\\n        position: absolute;\\r\\n        right: 3px;\\r\\n        top: 2px;\\r\\n\\r\\n        background-size: cover;\\r\\n        width: 21px;\\r\\n        height: 20px;\\r\\n    }\\r\\n\\r\\n    .info :global(.privateIcon) {\\r\\n        float: right;\\r\\n        position: relative;\\r\\n        display: inline-block;\\r\\n\\r\\n        background-size: cover;\\r\\n        width: 18px;\\r\\n        height: 18px;\\r\\n        /* width: 19px;\\r\\n        height: 20px; */\\r\\n\\r\\n        margin-top: 3px;\\r\\n        margin-left: 10px;\\r\\n        margin-right: 2px;\\r\\n\\r\\n        opacity: 0.75;\\r\\n    }\\r\\n</style>\"],\"names\":[],\"mappings\":\"AAgFI,gBAAgB,eAAC,CAAC,AACd,QAAQ,CAAE,QAAQ,CAElB,OAAO,CAAE,GAAG,CAAC,CAAC,CACd,aAAa,CAAE,GAAG,CAElB,MAAM,CAAE,OAAO,AACnB,CAAC,AAED,MAAM,eAAC,CAAC,AACJ,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,UAAU,CAAE,KAAK,CAEjB,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,AAC7B,CAAC,AAED,cAAc,eAAC,CAAC,AACZ,QAAQ,CAAE,QAAQ,CAClB,IAAI,CAAE,IAAI,CACV,GAAG,CAAE,GAAG,CACR,MAAM,CAAE,CAAC,CACT,KAAK,CAAE,IAAI,CAEjB,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,MAAM,AACjB,CAAC,AAED,MAAM,eAAC,CAAC,AACJ,SAAS,CAAE,MAAM,CACjB,WAAW,CAAE,GAAG,CAChB,WAAW,CAAE,MAAM,AACvB,CAAC,AAED,OAAO,eAAC,CAAC,AACL,SAAS,CAAE,MAAM,CACjB,UAAU,CAAE,GAAG,CACf,KAAK,CAAE,OAAO,CACd,WAAW,CAAE,MAAM,AACvB,CAAC,AAED,KAAK,eAAC,CAAC,AACH,QAAQ,CAAE,QAAQ,CAClB,KAAK,CAAE,CAAC,CACR,GAAG,CAAE,IAAI,AACb,CAAC,AAED,oBAAK,CAAC,AAAQ,QAAQ,AAAE,CAAC,AACrB,YAAY,CAAE,IAAI,AACtB,CAAC,AAED,cAAc,eAAC,CAAC,AACZ,QAAQ,CAAE,QAAQ,CAClB,KAAK,CAAE,GAAG,CACV,GAAG,CAAE,GAAG,CAER,eAAe,CAAE,KAAK,CACtB,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,AAChB,CAAC,AAED,oBAAK,CAAC,AAAQ,YAAY,AAAE,CAAC,AACzB,KAAK,CAAE,KAAK,CACZ,QAAQ,CAAE,QAAQ,CAClB,OAAO,CAAE,YAAY,CAErB,eAAe,CAAE,KAAK,CACtB,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CAIZ,UAAU,CAAE,GAAG,CACf,WAAW,CAAE,IAAI,CACjB,YAAY,CAAE,GAAG,CAEjB,OAAO,CAAE,IAAI,AACjB,CAAC\"}"
};

const ProjectListItem = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let $user = get_store_value(user);
	let $project;
	let $projectUnviewedCount;
	let { project } = $$props;
	$project = get_store_value(project);
	let { showLastActive = false } = $$props;
	let { showUpdateCounter = true } = $$props;
	let { showPrivateIcon = false } = $$props;
	let dateString = "";

	if ($$props.project === void 0 && $$bindings.project && project !== void 0) $$bindings.project(project);
	if ($$props.showLastActive === void 0 && $$bindings.showLastActive && showLastActive !== void 0) $$bindings.showLastActive(showLastActive);
	if ($$props.showUpdateCounter === void 0 && $$bindings.showUpdateCounter && showUpdateCounter !== void 0) $$bindings.showUpdateCounter(showUpdateCounter);
	if ($$props.showPrivateIcon === void 0 && $$bindings.showPrivateIcon && showPrivateIcon !== void 0) $$bindings.showPrivateIcon(showPrivateIcon);
	$$result.css.add(css$M);
	$project = get_store_value(project);
	$projectUnviewedCount = get_store_value(projectUnviewedCount);
	let isTeamMember = $user && getIsProjectTeamMember($project);
	let thumbImage = getProjectHeaderImage($project, true);

	let date = $project && (showLastActive
	? $project.lastActiveAt
	: $project.createdAt);

	let projectUnviewedCount = $project && getUnviewedProjectNotificationCount($project.id) || writable$1(0);

	 {
		{
			if (date) {
				if (showLastActive) {
					dateString = "active " + getDateAgeString(date);
				} else {
					dateString = "created " + getDateString(date, "d MMM yyyy");
				}
			}
		}
	}

	let detail = dateString;
	let isPrivate = $project && !$project.public || false;

	return `<div class="${"projectListItem svelte-1rr54md"}"><img class="${"thumb svelte-1rr54md"}"${add_attribute("src", thumbImage, 0)}${add_attribute("alt", $project.title, 0)}>
    <div class="${"detailContent svelte-1rr54md"}"><div class="${"detailInnerContent"}"><div class="${"title svelte-1rr54md"}">${escape($project.title)}</div>
            ${detail
	? `<div class="${"detail svelte-1rr54md"}">${escape(detail)}</div>`
	: ``}</div></div>
    ${$project.following || isTeamMember
	? `<div class="${"info svelte-1rr54md"}">${showPrivateIcon && isPrivate
		? `<div class="${"privateIcon"}" style="${"background-image: url(" + escape(img$D) + ")"}"></div>`
		: ``}
            ${showUpdateCounter && $projectUnviewedCount
		? `
                ${validate_component(Counter, "Counter").$$render(
				$$result,
				{
					count: $projectUnviewedCount,
					hasNew: $projectUnviewedCount
				},
				{},
				{}
			)}`
		: ``}
            <div class="${"followingIcon svelte-1rr54md"}" style="${"background-image: url(" + escape(img$C) + ")"}"></div></div>`
	: ``}
</div>`;
});

/* src\routes\_components\ProjectList.svelte generated by Svelte v3.23.0 */

const css$N = {
	code: ".projectList.svelte-19jk3vm .panelContent{margin-top:-6px;margin-bottom:-6px}.noProjects.svelte-19jk3vm{font-size:1.2rem;padding-top:10px;padding-bottom:30px;line-height:2.5rem}.projectList.svelte-19jk3vm .contentLoader{padding:0;font-size:1.2rem;padding-top:10px;padding-bottom:30px;line-height:2.5rem}",
	map: "{\"version\":3,\"file\":\"ProjectList.svelte\",\"sources\":[\"ProjectList.svelte\"],\"sourcesContent\":[\"<script>\\r\\n    import locale from '../../locale';\\r\\n\\r\\n    import config from '../../config';\\r\\n\\r\\n    import Proxy from '../../components/Proxy.svelte';\\r\\n    import Hotspot from '../../components/Hotspot.svelte';\\r\\n\\r\\n\\timport ContentPanel from './../_components/ContentPanel.svelte';\\r\\n    import ProjectListItem from './ProjectListItem.svelte';\\r\\n\\timport ContentLoader from './../_components/ContentLoader.svelte';\\r\\n\\r\\n\\timport { loadingProjects } from '../../models/projectsModel';\\r\\n\\r\\n\\timport { loadProject } from '../../actions/appActions';\\r\\n\\r\\n\\r\\n    export let projects;\\r\\n\\r\\n    export let displayLimit = config.MAX_PROJECT_PREVIEW_COUNT;\\r\\n\\r\\n    export let title = 'Projects';\\r\\n    export let className = '';\\r\\n\\r\\n    export let searchString = null;\\r\\n\\r\\n    export let showLastActive = false;\\r\\n    export let showUpdateCounter = true;\\r\\n\\r\\n    export let showMoreAction = false;\\r\\n\\r\\n    export let showIfNoProjects = false;\\r\\n\\r\\n    export let hideShowMoreWithVisibility = false;\\r\\n    export let forceShowMoreShow = false;\\r\\n    export let showMoreLabel = null;\\r\\n\\r\\n    export let showPrivateIcon = false;\\r\\n\\r\\n    $: areMoreItems = displayLimit && $projects.length > displayLimit;\\r\\n\\r\\n    // $: projectItems = getProjectsByIds(projects, {limit: displayLimit ? displayLimit + 1 : 0, searchString: searchString});\\r\\n    // $: areMoreItems = displayLimit && projectItems.length > displayLimit;\\r\\n</script>\\r\\n\\r\\n{#if ($projects && $projects.length) || showIfNoProjects}\\r\\n    <div class=\\\"projectList {className}\\\">\\r\\n        <!-- <Proxy image=\\\"profile_projects\\\" className=\\\"proxyOverlay\\\" >\\r\\n            <Hotspot onClick=\\\"{e => loadProject('s7djj2s2')}\\\" style=\\\"\\r\\n                left: 0px;\\r\\n                top: 40px;\\r\\n                width: 100%;\\r\\n                height: 154px;\\\" />\\r\\n        </Proxy> -->\\r\\n\\r\\n        <ContentPanel title=\\\"{title}\\\" showMoreAction=\\\"{(areMoreItems || forceShowMoreShow) ? showMoreAction : false}\\\" {hideShowMoreWithVisibility} {forceShowMoreShow} {showMoreLabel}>\\r\\n\\t\\t\\t{#if $loadingProjects && (!$projects || !$projects.length)}\\r\\n\\t\\t\\t    <ContentLoader label=\\\"{locale.LOADING.PROJECT_ITEMS}\\\" />\\r\\n            {:else}\\r\\n                {#each $projects as project, index}\\r\\n                    {#if !displayLimit || index < displayLimit}\\r\\n                        <ProjectListItem {project} {showLastActive} {showUpdateCounter} {showPrivateIcon} />\\r\\n                    {/if}\\r\\n                {:else}\\r\\n                    <div class=\\\"noProjects\\\">\\r\\n                        {#if searchString}\\r\\n                            <slot>no projects found matching \\\"{searchString}\\\"</slot>\\r\\n                        {:else}\\r\\n                            <slot>no projects found</slot>\\r\\n                        {/if}\\r\\n                    </div>\\r\\n                {/each}\\r\\n            {/if}\\r\\n        </ContentPanel>\\r\\n    </div>\\r\\n{/if}\\r\\n\\r\\n<style>\\r\\n    /* .projectList :global(.contentPanel) {\\r\\n        background-color: rgba(255, 255, 255, 0.25);\\r\\n    } */\\r\\n\\r\\n    /* .projectList :global(.proxyOverlay) {\\r\\n        position: absolute;\\r\\n        opacity: 0.5;\\r\\n    } */\\r\\n\\r\\n    .projectList :global(.panelContent) {\\r\\n        margin-top: -6px;\\r\\n        margin-bottom: -6px;\\r\\n    }\\r\\n\\r\\n    .noProjects {\\r\\n        font-size: 1.2rem;\\r\\n        padding-top: 10px;\\r\\n        padding-bottom: 30px;\\r\\n        line-height: 2.5rem;\\r\\n    }\\r\\n\\r\\n    .projectList :global(.contentLoader) {\\r\\n        padding: 0;\\r\\n        font-size: 1.2rem;\\r\\n        padding-top: 10px;\\r\\n        padding-bottom: 30px;\\r\\n        line-height: 2.5rem;\\r\\n    }\\r\\n</style>\"],\"names\":[],\"mappings\":\"AAuFI,2BAAY,CAAC,AAAQ,aAAa,AAAE,CAAC,AACjC,UAAU,CAAE,IAAI,CAChB,aAAa,CAAE,IAAI,AACvB,CAAC,AAED,WAAW,eAAC,CAAC,AACT,SAAS,CAAE,MAAM,CACjB,WAAW,CAAE,IAAI,CACjB,cAAc,CAAE,IAAI,CACpB,WAAW,CAAE,MAAM,AACvB,CAAC,AAED,2BAAY,CAAC,AAAQ,cAAc,AAAE,CAAC,AAClC,OAAO,CAAE,CAAC,CACV,SAAS,CAAE,MAAM,CACjB,WAAW,CAAE,IAAI,CACjB,cAAc,CAAE,IAAI,CACpB,WAAW,CAAE,MAAM,AACvB,CAAC\"}"
};

const ProjectList = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let $projects;
	let $loadingProjects = get_store_value(loadingProjects);
	let { projects } = $$props;
	$projects = get_store_value(projects);
	let { displayLimit = config$1.MAX_PROJECT_PREVIEW_COUNT } = $$props;
	let { title = "Projects" } = $$props;
	let { className = "" } = $$props;
	let { searchString = null } = $$props;
	let { showLastActive = false } = $$props;
	let { showUpdateCounter = true } = $$props;
	let { showMoreAction = false } = $$props;
	let { showIfNoProjects = false } = $$props;
	let { hideShowMoreWithVisibility = false } = $$props;
	let { forceShowMoreShow = false } = $$props;
	let { showMoreLabel = null } = $$props;
	let { showPrivateIcon = false } = $$props;
	if ($$props.projects === void 0 && $$bindings.projects && projects !== void 0) $$bindings.projects(projects);
	if ($$props.displayLimit === void 0 && $$bindings.displayLimit && displayLimit !== void 0) $$bindings.displayLimit(displayLimit);
	if ($$props.title === void 0 && $$bindings.title && title !== void 0) $$bindings.title(title);
	if ($$props.className === void 0 && $$bindings.className && className !== void 0) $$bindings.className(className);
	if ($$props.searchString === void 0 && $$bindings.searchString && searchString !== void 0) $$bindings.searchString(searchString);
	if ($$props.showLastActive === void 0 && $$bindings.showLastActive && showLastActive !== void 0) $$bindings.showLastActive(showLastActive);
	if ($$props.showUpdateCounter === void 0 && $$bindings.showUpdateCounter && showUpdateCounter !== void 0) $$bindings.showUpdateCounter(showUpdateCounter);
	if ($$props.showMoreAction === void 0 && $$bindings.showMoreAction && showMoreAction !== void 0) $$bindings.showMoreAction(showMoreAction);
	if ($$props.showIfNoProjects === void 0 && $$bindings.showIfNoProjects && showIfNoProjects !== void 0) $$bindings.showIfNoProjects(showIfNoProjects);
	if ($$props.hideShowMoreWithVisibility === void 0 && $$bindings.hideShowMoreWithVisibility && hideShowMoreWithVisibility !== void 0) $$bindings.hideShowMoreWithVisibility(hideShowMoreWithVisibility);
	if ($$props.forceShowMoreShow === void 0 && $$bindings.forceShowMoreShow && forceShowMoreShow !== void 0) $$bindings.forceShowMoreShow(forceShowMoreShow);
	if ($$props.showMoreLabel === void 0 && $$bindings.showMoreLabel && showMoreLabel !== void 0) $$bindings.showMoreLabel(showMoreLabel);
	if ($$props.showPrivateIcon === void 0 && $$bindings.showPrivateIcon && showPrivateIcon !== void 0) $$bindings.showPrivateIcon(showPrivateIcon);
	$$result.css.add(css$N);
	$projects = get_store_value(projects);
	let areMoreItems = displayLimit && $projects.length > displayLimit;

	return `${$projects && $projects.length || showIfNoProjects
	? `<div class="${"projectList " + escape(className) + " svelte-19jk3vm"}">

        ${validate_component(ContentPanel, "ContentPanel").$$render(
			$$result,
			{
				title,
				showMoreAction: areMoreItems || forceShowMoreShow
				? showMoreAction
				: false,
				hideShowMoreWithVisibility,
				forceShowMoreShow,
				showMoreLabel
			},
			{},
			{
				default: () => `${$loadingProjects && (!$projects || !$projects.length)
				? `${validate_component(ContentLoader, "ContentLoader").$$render($$result, { label: locale$1.LOADING.PROJECT_ITEMS }, {}, {})}`
				: `${$projects.length
					? each($projects, (project, index) => `${!displayLimit || index < displayLimit
						? `${validate_component(ProjectListItem, "ProjectListItem").$$render(
								$$result,
								{
									project,
									showLastActive,
									showUpdateCounter,
									showPrivateIcon
								},
								{},
								{}
							)}`
						: ``}`)
					: `<div class="${"noProjects svelte-19jk3vm"}">${searchString
						? `${$$slots.default
							? $$slots.default({})
							: `no projects found matching &quot;${escape(searchString)}&quot;`}`
						: `${$$slots.default
							? $$slots.default({})
							: `no projects found`}`}
                    </div>`}`}`
			}
		)}</div>`
	: ``}`;
});

const img$E = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAEY0lEQVR4Xu2cMWwcRRSGv1AlND66hCL4OqAIhooK21BRYYEEEilsCqAi8hFBEQrbBRSJEltQAQV2ARJIiXRVKrCdioq7o0jSYShIuvgaoAL0W7v4Yu/tzOzM7C3STHm38/bNt29m3/wzsydIpZTAicSnnEACZIiQBKiBgM4CzwPPAE8CbeA00AJOZv7+BewD94FfgLvAAPgR+K3OYaGuCHoBeAV4GXjKs4F3gJtAF7jlactYPSagKeAd4K0AUMY1RLC+Ar4AhsbWVrggBiCB+RDoAKcq+FSlyp/AOnA5NKjQgN4D1oDHqrQyQJ0HwArwWQBbByZCATqXPcEXQznmaeeHLIJ/9rQTBNDbwOcBYfu2Ka//D/Au8KWPQd8Iugq87+NADXWvARer3scH0NfAm1VvXHO9b4DzVe5ZFdB14NUqNyyrMzs7e/D37u5uaNOydwN4zdVwFUDBI6fVarG9vc3MzMyB//1+n/n5efb3lUwHLc6R5AooypizvLzM+rrSmMPS6XTY2NgISicz5jQmuQDS20oZa/Cys7ND3r1y491ul4WFheD3ygwqw7d6u9kCUp7Tj/UqLwKkcWhubi4WIKUA6s/GPMkW0PdAtCRwAoAEXsnkS6YnYANI04dPTYZ8/p8QILl8wTQtMQHSxFN6TNS51QQBae4mPWqsEmAC9DFwySc6bOpOEJDc+wT4aJyfZYAUPffqkCwmDEhSyZlxUVQG6INMX7EJAq9rJgxIvku/ulLUiDJAtyMqgQ/50gBAUiafdgEkDTnKhKjIiQYAkluaCB7TuMdFUJQpxbh+2BBAhVOQcYBq616C1hBAhd2sCJDWrX71GnUdKzcEkLx+4ui6WxGg14FvHdvodXmDAL0BfDfamCJAtSSHo040CNCxpLEIUBS1sCzEGgTomOpYBOgn4FmvPuNYuUGAesBzpi72e5Z6lzZTMuni4mIQUUtSq+yNFsmtkl59i+BvbW2xt7dnY0pTq8dNgP6wmX/1er3/NGSbO0/yGsFut9s2GrfmZY+aAP1tUg6l9Elk/z8VLQIomgxFSuMjCdB4SlaAjF1M44X69NSUFJHml8FgYDscWHUxq0F6enqapaWlIMK6BumjsIfDofcgrbFH3Wpzc9Nm/NGTthqk02t+pFOkRPHhEcIqUUxTDUMEpcmqAVCSOwyA9HcSzDJISXI9jBYnyTWJ9oYIqrWbNUDucF72EaC0cGiYtaelZ5OsAdSSNE64i1XevKBulra/WIgVaQOVBaS0Bc8AKW3itIiiWrcBR97lGnwbcM4vyq6P1dVVVlZ0zOuwrK2tod8jlGgbyXNfgx9FkHyrNbBcdpXcKhnWci3LhWH0owi5M8GXp7UQMHpWI8I5jdoOs0SLJJdQcLzWOXJy+6ZtwCY/ooxJpps6/u805hy17QtI9tKRTIsnlg71WkDSJelYuAWo9GEBC0i5EpA+TWEJK33cxBKULkufx3GA1fhLQ+RBjW+kj4MJkIFeAmQA9C+bqdNY6NT7iAAAAABJRU5ErkJggg==";

/* src\routes\projects\index.svelte generated by Svelte v3.23.0 */

const css$O = {
	code: ".content.svelte-xddo5k .scrollHeader{background-color:#ffffff}.projectsContent.svelte-xddo5k{position:relative}.content.svelte-xddo5k .projectList .contentPanel{padding-top:7px;margin-bottom:0}.content.svelte-xddo5k .newProjectButton{position:relative;margin-top:-52px;float:right;padding:15px;padding-right:63px;font-size:1.5rem;font-weight:700}.content.svelte-xddo5k .newProjectButton .icon{padding-left:16px}.content.svelte-xddo5k .followingProjects{margin-top:13px;clear:both}.content.svelte-xddo5k .projectList .panelTitle{padding-bottom:8px}.content.svelte-xddo5k .projectListItem{margin-bottom:-3px}.content.svelte-xddo5k .projectListItem .thumb{width:60px;height:60px}.content.svelte-xddo5k .projectListItem .detailContent{left:74px}.content.svelte-xddo5k .projectListItem .detail{font-size:1.1rem;margin-top:5px}.content.svelte-xddo5k .projectListItem .info {top:22px}.content.svelte-xddo5k .projectListItem .counter {margin-right:0}.content.svelte-xddo5k .projectListItem .followingIcon {display:none}",
	map: "{\"version\":3,\"file\":\"index.svelte\",\"sources\":[\"index.svelte\"],\"sourcesContent\":[\"<script>\\r\\n\\timport locale from '../../locale';\\r\\n\\r\\n\\timport { goto } from '@sapper/app';\\r\\n\\timport { writable } from 'svelte/store';\\r\\n\\r\\n\\timport ScrollView from '../../components/ScrollView.svelte';\\r\\n\\r\\n\\timport Proxy from '../../components/Proxy.svelte';\\r\\n\\timport Hotspot from '../../components/Hotspot.svelte';\\r\\n\\r\\n    import Button from '../../components/Button.svelte';\\r\\n\\timport SearchBar from './../_components/SearchBar.svelte';\\r\\n\\timport ContentLoader from './../_components/ContentLoader.svelte';\\r\\n\\r\\n\\timport ProjectList from './../_components/ProjectList.svelte';\\r\\n\\r\\n    import AddProjectIcon from \\\"../../assets/icons/add_project.png\\\";\\r\\n\\r\\n\\timport {\\r\\n\\t\\tgetMyProjects,\\r\\n\\t\\tgetFollowingProjects,\\r\\n\\t\\tgetFilteredProjects,\\r\\n\\t\\tloadingProjects,\\r\\n\\t\\tgetArchivedProjects,\\r\\n\\t} from '../../models/projectsModel';\\r\\n\\r\\n\\timport {\\r\\n\\t\\tprojectsSearchString,\\r\\n\\t\\tprojectsArchiveSearchString,\\r\\n\\t\\tdisplayingAllMyProjects,\\r\\n\\t\\tdisplayingAllFollowingProjects,\\r\\n\\t} from '../../models/appModel';\\r\\n\\r\\n\\timport { newProject, loadProject } from '../../actions/appActions';\\r\\n\\r\\n\\tconst MY_PROJECTS_DISPLAY_LIMIT = 3;\\r\\n\\tconst FOLLOWED_PROJECTS_DISPLAY_LIMIT = 16;\\r\\n\\r\\n\\t$: searchString = $projectsSearchString;\\r\\n\\r\\n\\tfunction displayAllMyProjects() {\\r\\n\\t\\t$displayingAllMyProjects = true;\\r\\n\\t}\\r\\n\\r\\n\\tfunction displayAllFollowingProjects() {\\r\\n\\t\\t$displayingAllFollowingProjects = true;\\r\\n\\t}\\r\\n\\r\\n\\tfunction displayArchivedProjects() {\\r\\n\\t\\tif ($projectsSearchString) {\\r\\n\\t\\t\\t$projectsArchiveSearchString = $projectsSearchString;\\r\\n\\t\\t}\\r\\n\\t\\tgoto('projects/archive');\\r\\n\\t}\\r\\n\\r\\n\\tlet myProjects = writable([]);\\r\\n\\tlet followingProjects = writable([]);\\r\\n\\tlet archivedProjects = writable([]);\\r\\n\\r\\n\\tlet filteredMyProjects = writable([]);\\r\\n\\tlet filteredFollowingProjects = writable([]);\\r\\n\\r\\n\\t$: { myProjects = getMyProjects() }\\r\\n\\t$: { followingProjects = getFollowingProjects() }\\r\\n\\t$: { archivedProjects = getArchivedProjects() }\\r\\n\\r\\n\\t// add one to limit to ensure show more button appears\\r\\n\\t$: myProjectsLimit = $displayingAllMyProjects ? 0 : MY_PROJECTS_DISPLAY_LIMIT + 1;\\r\\n\\t$: followingProjectLimit = $displayingAllFollowingProjects ? 0 : FOLLOWED_PROJECTS_DISPLAY_LIMIT + 1;\\r\\n\\r\\n\\t$: showArchivedButton = ($archivedProjects && $archivedProjects.length) && ($displayingAllMyProjects || ($followingProjects && $filteredMyProjects.length < myProjectsLimit));\\r\\n\\r\\n\\t$: { $filteredMyProjects = getFilteredProjects($myProjects, { searchString, limit: myProjectsLimit }) }\\r\\n\\t$: { $filteredFollowingProjects = getFilteredProjects($followingProjects, { searchString, limit: followingProjectLimit }) }\\r\\n\\r\\n</script>\\r\\n\\r\\n<svelte:head>\\r\\n\\t<title>Flock</title>\\r\\n</svelte:head>\\r\\n\\r\\n<div class=\\\"content\\\">\\r\\n\\t<ScrollView id=\\\"projects\\\" headerStartHidden=\\\"{true}\\\" headerHiddenOffset=\\\"{45}\\\" hideHeaderShadowAtTop=\\\"{true}\\\" hideShadowMargin=\\\"{45}\\\">\\r\\n\\t\\t<!-- <Proxy image=\\\"projects\\\" className=\\\"proxyOverlay\\\">\\r\\n\\t\\t\\t<Hotspot onClick=\\\"{e => loadProject('n4vh55hg')}\\\" style=\\\"\\r\\n\\t\\t\\t\\tleft: 0;\\r\\n\\t\\t\\t\\twidth: 100%;\\r\\n\\t\\t\\t\\ttop: 81px;\\r\\n\\t\\t\\t\\theight: 196px;\\\" />\\r\\n\\t\\t\\t<Hotspot onClick=\\\"{e => loadProject('msl30nhg')}\\\" style=\\\"\\r\\n\\t\\t\\t\\tleft: 0px;\\r\\n\\t\\t\\t\\twidth: 100%;\\r\\n\\t\\t\\t\\ttop: 359px;\\r\\n\\t\\t\\t\\theight: 527px;\\\" />\\r\\n\\t\\t\\t<Hotspot onClick=\\\"{newProject}\\\" style=\\\"\\r\\n\\t\\t\\t\\tright: 10px;\\r\\n\\t\\t\\t\\ttop: 277px;\\r\\n\\t\\t\\t\\twidth: 142px;\\r\\n\\t\\t\\t\\theight: 46px;\\\" />\\r\\n\\t\\t</Proxy> -->\\r\\n\\r\\n\\t\\t<div slot=\\\"scrollHeader\\\">\\r\\n\\t\\t\\t<SearchBar bind:searchString={$projectsSearchString} />\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t{#if $loadingProjects && (!$myProjects || !$myProjects.length) && (!$followingProjects || !$followingProjects.length) }\\r\\n\\t\\t\\t<ContentLoader label=\\\"{locale.LOADING.FOLLOWING}\\\" />\\r\\n\\t\\t{:else}\\r\\n\\t\\t\\t<div class=\\\"projectsContent\\\">\\r\\n\\t\\t\\t\\t<ProjectList title=\\\"Projects\\\"\\r\\n\\t\\t\\t\\t\\tprojects=\\\"{filteredMyProjects}\\\"\\r\\n\\t\\t\\t\\t\\t{searchString}\\r\\n\\t\\t\\t\\t\\tshowLastActive=\\\"{true}\\\"\\r\\n\\t\\t\\t\\t\\tdisplayLimit=\\\"{$displayingAllMyProjects ? 0 : MY_PROJECTS_DISPLAY_LIMIT}\\\"\\r\\n\\t\\t\\t\\t\\tshowMoreAction=\\\"{showArchivedButton ? displayArchivedProjects : displayAllMyProjects}\\\"\\r\\n\\t\\t\\t\\t\\tforceShowMoreShow=\\\"{showArchivedButton}\\\"\\r\\n\\t\\t\\t\\t\\tshowMoreLabel=\\\"{showArchivedButton ? locale.FOLLOWING_PROJECTS.BUTTON_ARCHIVED_PROJECTS : null}\\\"\\r\\n\\t\\t\\t\\t\\tshowIfNoProjects=\\\"{true}\\\"\\r\\n\\t\\t\\t\\t\\thideShowMoreWithVisibility=\\\"{true}\\\"\\r\\n\\t\\t\\t\\t\\tshowPrivateIcon=\\\"{true}\\\">\\r\\n\\t\\t\\t\\t\\t{#if searchString}\\r\\n\\t\\t\\t\\t\\t\\t<slot>no projects found matching \\\"{searchString}\\\"</slot>\\r\\n\\t\\t\\t\\t\\t{:else}\\r\\n\\t\\t\\t\\t\\t\\t<slot>you have not shared any projects<br/>create a <a href=\\\"javascript:void(0)\\\" on:click=\\\"{newProject}\\\">New Project</a></slot>\\r\\n\\t\\t\\t\\t\\t{/if}\\r\\n\\t\\t\\t\\t</ProjectList>\\r\\n\\t\\t\\t\\t<Button className=\\\"newProjectButton\\\" onClick=\\\"{newProject}\\\" icon=\\\"{AddProjectIcon}\\\">new project</Button>\\r\\n\\t\\t\\t\\t<ProjectList title=\\\"Following\\\" className=\\\"followingProjects\\\" projects=\\\"{filteredFollowingProjects}\\\" showLastActive=\\\"{true}\\\" displayLimit=\\\"{$displayingAllFollowingProjects ? 0 : FOLLOWED_PROJECTS_DISPLAY_LIMIT}\\\" showMoreAction=\\\"{displayAllFollowingProjects}\\\" {searchString} showIfNoProjects=\\\"{true}\\\" showPrivateIcon=\\\"{true}\\\">\\r\\n\\t\\t\\t\\t\\t{#if searchString}\\r\\n\\t\\t\\t\\t\\t\\t<slot>no followed projects matching \\\"{searchString}\\\"</slot>\\r\\n\\t\\t\\t\\t\\t{:else}\\r\\n\\t\\t\\t\\t\\t\\t<slot>you aren't following any projects<br/><a href=\\\"discover\\\">Discover</a> inspiring projects to follow</slot>\\r\\n\\t\\t\\t\\t\\t{/if}\\r\\n\\t\\t\\t\\t</ProjectList>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t{/if}\\r\\n\\t</ScrollView>\\r\\n</div>\\r\\n\\r\\n<style>\\r\\n\\t/* .content :global(.proxyOverlay) {\\r\\n\\t\\tposition: absolute;\\r\\n\\t\\topacity: 0.5;\\r\\n\\t} */\\r\\n\\r\\n\\t.content :global(.searchBar) {\\r\\n\\t\\t/* height: 40px; */\\r\\n\\t}\\r\\n\\r\\n\\t.content :global(.scrollHeader) {\\r\\n    \\tbackground-color: #ffffff;\\r\\n\\t}\\r\\n\\r\\n\\t.projectsContent {\\r\\n\\t\\tposition: relative;\\r\\n\\t}\\r\\n\\r\\n\\t.content :global(.projectList .contentPanel) {\\r\\n    \\tpadding-top: 7px;\\r\\n\\t\\tmargin-bottom: 0;\\r\\n\\t}\\r\\n\\r\\n\\t.content :global(.newProjectButton) {\\r\\n\\t\\t/* position: absolute;\\r\\n\\t\\ttop: 243px;\\r\\n\\t\\tright: -1px; */\\r\\n\\r\\n\\t\\tposition: relative;\\r\\n\\t\\tmargin-top: -52px;\\r\\n\\t\\tfloat: right;\\r\\n\\r\\n\\t\\tpadding: 15px;\\r\\n    \\tpadding-right: 63px;\\r\\n\\r\\n\\t\\tfont-size: 1.5rem;\\r\\n\\t\\tfont-weight: 700;\\r\\n\\t}\\r\\n\\t.content :global(.newProjectButton .icon) {\\r\\n    \\tpadding-left: 16px;\\r\\n\\t}\\r\\n\\r\\n\\t.content :global(.followingProjects) {\\r\\n    \\tmargin-top: 13px;\\r\\n    \\tclear: both;\\r\\n\\t}\\r\\n\\r\\n\\t.content :global(.projectList .panelTitle) {\\r\\n    \\tpadding-bottom: 8px;\\r\\n\\t}\\r\\n\\r\\n\\t.content :global(.projectListItem) {\\r\\n    \\tmargin-bottom: -3px;\\r\\n\\t}\\r\\n\\r\\n\\t.content :global(.projectListItem .thumb) {\\r\\n\\t\\twidth: 60px;\\r\\n\\t\\theight: 60px;\\r\\n\\t}\\r\\n\\r\\n\\t.content :global(.projectListItem .detailContent) {\\r\\n    \\tleft: 74px;\\r\\n\\t}\\r\\n\\r\\n\\t.content :global(.projectListItem .detail) {\\r\\n\\t\\tfont-size: 1.1rem;\\r\\n\\t\\tmargin-top: 5px;\\r\\n\\t}\\r\\n\\r\\n\\t.content :global(.projectListItem .info ) {\\r\\n    \\ttop: 22px;\\r\\n\\t}\\r\\n\\r\\n\\t.content :global(.projectListItem .counter ) {\\r\\n    \\tmargin-right: 0;\\r\\n\\t}\\r\\n\\r\\n\\t.content :global(.projectListItem .followingIcon ) {\\r\\n    \\tdisplay: none;\\r\\n\\t}\\r\\n</style>\"],\"names\":[],\"mappings\":\"AAsJC,sBAAQ,CAAC,AAAQ,aAAa,AAAE,CAAC,AAC7B,gBAAgB,CAAE,OAAO,AAC7B,CAAC,AAED,gBAAgB,cAAC,CAAC,AACjB,QAAQ,CAAE,QAAQ,AACnB,CAAC,AAED,sBAAQ,CAAC,AAAQ,0BAA0B,AAAE,CAAC,AAC1C,WAAW,CAAE,GAAG,CACnB,aAAa,CAAE,CAAC,AACjB,CAAC,AAED,sBAAQ,CAAC,AAAQ,iBAAiB,AAAE,CAAC,AAKpC,QAAQ,CAAE,QAAQ,CAClB,UAAU,CAAE,KAAK,CACjB,KAAK,CAAE,KAAK,CAEZ,OAAO,CAAE,IAAI,CACV,aAAa,CAAE,IAAI,CAEtB,SAAS,CAAE,MAAM,CACjB,WAAW,CAAE,GAAG,AACjB,CAAC,AACD,sBAAQ,CAAC,AAAQ,uBAAuB,AAAE,CAAC,AACvC,YAAY,CAAE,IAAI,AACtB,CAAC,AAED,sBAAQ,CAAC,AAAQ,kBAAkB,AAAE,CAAC,AAClC,UAAU,CAAE,IAAI,CAChB,KAAK,CAAE,IAAI,AACf,CAAC,AAED,sBAAQ,CAAC,AAAQ,wBAAwB,AAAE,CAAC,AACxC,cAAc,CAAE,GAAG,AACvB,CAAC,AAED,sBAAQ,CAAC,AAAQ,gBAAgB,AAAE,CAAC,AAChC,aAAa,CAAE,IAAI,AACvB,CAAC,AAED,sBAAQ,CAAC,AAAQ,uBAAuB,AAAE,CAAC,AAC1C,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,AACb,CAAC,AAED,sBAAQ,CAAC,AAAQ,+BAA+B,AAAE,CAAC,AAC/C,IAAI,CAAE,IAAI,AACd,CAAC,AAED,sBAAQ,CAAC,AAAQ,wBAAwB,AAAE,CAAC,AAC3C,SAAS,CAAE,MAAM,CACjB,UAAU,CAAE,GAAG,AAChB,CAAC,AAED,sBAAQ,CAAC,AAAQ,uBAAuB,AAAE,CAAC,AACvC,GAAG,CAAE,IAAI,AACb,CAAC,AAED,sBAAQ,CAAC,AAAQ,0BAA0B,AAAE,CAAC,AAC1C,YAAY,CAAE,CAAC,AACnB,CAAC,AAED,sBAAQ,CAAC,AAAQ,gCAAgC,AAAE,CAAC,AAChD,OAAO,CAAE,IAAI,AACjB,CAAC\"}"
};

const MY_PROJECTS_DISPLAY_LIMIT = 3;
const FOLLOWED_PROJECTS_DISPLAY_LIMIT = 16;

const Projects = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let $projectsSearchString = get_store_value(projectsSearchString);
	let $displayingAllMyProjects = get_store_value(displayingAllMyProjects);
	let $displayingAllFollowingProjects = get_store_value(displayingAllFollowingProjects);
	let $projectsArchiveSearchString = get_store_value(projectsArchiveSearchString);
	let $archivedProjects;
	let $followingProjects;
	let $filteredMyProjects;
	let $myProjects;
	let $filteredFollowingProjects;
	let $loadingProjects = get_store_value(loadingProjects);

	function displayAllMyProjects() {
		$displayingAllMyProjects = true;
	}

	function displayAllFollowingProjects() {
		$displayingAllFollowingProjects = true;
	}

	function displayArchivedProjects() {
		if ($projectsSearchString) {
			$projectsArchiveSearchString = $projectsSearchString;
		}

		goto("projects/archive");
	}

	let myProjects = writable$1([]);
	$myProjects = get_store_value(myProjects);
	let followingProjects = writable$1([]);
	$followingProjects = get_store_value(followingProjects);
	let archivedProjects = writable$1([]);
	$archivedProjects = get_store_value(archivedProjects);
	let filteredMyProjects = writable$1([]);
	$filteredMyProjects = get_store_value(filteredMyProjects);
	let filteredFollowingProjects = writable$1([]);
	$filteredFollowingProjects = get_store_value(filteredFollowingProjects);
	$$result.css.add(css$O);
	let $$settled;
	let $$rendered;

	do {
		$$settled = true;
		$archivedProjects = get_store_value(archivedProjects);
		$followingProjects = get_store_value(followingProjects);
		$filteredMyProjects = get_store_value(filteredMyProjects);
		$myProjects = get_store_value(myProjects);
		$filteredFollowingProjects = get_store_value(filteredFollowingProjects);
		let searchString = $projectsSearchString;

		 {
			{
				myProjects = getMyProjects();
			}
		}

		 {
			{
				followingProjects = getFollowingProjects();
			}
		}

		 {
			{
				archivedProjects = getArchivedProjects();
			}
		}

		let myProjectsLimit = $displayingAllMyProjects
		? 0
		: MY_PROJECTS_DISPLAY_LIMIT + 1;

		let followingProjectLimit = $displayingAllFollowingProjects
		? 0
		: FOLLOWED_PROJECTS_DISPLAY_LIMIT + 1;

		 {
			{
				$filteredMyProjects = getFilteredProjects($myProjects, { searchString, limit: myProjectsLimit });
			}
		}

		let showArchivedButton = $archivedProjects && $archivedProjects.length && ($displayingAllMyProjects || $followingProjects && $filteredMyProjects.length < myProjectsLimit);

		 {
			{
				$filteredFollowingProjects = getFilteredProjects($followingProjects, {
					searchString,
					limit: followingProjectLimit
				});
			}
		}

		$$rendered = `${($$result.head += `${($$result.title = `<title>Flock</title>`, "")}`, "")}

<div class="${"content svelte-xddo5k"}">${validate_component(ScrollView, "ScrollView").$$render(
			$$result,
			{
				id: "projects",
				headerStartHidden: true,
				headerHiddenOffset: 45,
				hideHeaderShadowAtTop: true,
				hideShadowMargin: 45
			},
			{},
			{
				scrollHeader: () => `<div slot="${"scrollHeader"}">${validate_component(SearchBar, "SearchBar").$$render(
					$$result,
					{ searchString: $projectsSearchString },
					{
						searchString: $$value => {
							$projectsSearchString = $$value;
							$$settled = false;
						}
					},
					{}
				)}</div>`,
				default: () => `

		

		${$loadingProjects && (!$myProjects || !$myProjects.length) && (!$followingProjects || !$followingProjects.length)
				? `${validate_component(ContentLoader, "ContentLoader").$$render($$result, { label: locale$1.LOADING.FOLLOWING }, {}, {})}`
				: `<div class="${"projectsContent svelte-xddo5k"}">${validate_component(ProjectList, "ProjectList").$$render(
						$$result,
						{
							title: "Projects",
							projects: filteredMyProjects,
							searchString,
							showLastActive: true,
							displayLimit: $displayingAllMyProjects ? 0 : MY_PROJECTS_DISPLAY_LIMIT,
							showMoreAction: showArchivedButton
							? displayArchivedProjects
							: displayAllMyProjects,
							forceShowMoreShow: showArchivedButton,
							showMoreLabel: showArchivedButton
							? locale$1.FOLLOWING_PROJECTS.BUTTON_ARCHIVED_PROJECTS
							: null,
							showIfNoProjects: true,
							hideShowMoreWithVisibility: true,
							showPrivateIcon: true
						},
						{},
						{
							default: () => `${searchString
							? `${$$slots.default
								? $$slots.default({})
								: `no projects found matching &quot;${escape(searchString)}&quot;`}`
							: `${$$slots.default
								? $$slots.default({})
								: `you have not shared any projects<br>create a <a href="${"javascript:void(0)"}">New Project</a>`}`}`
						}
					)}
				${validate_component(Button, "Button").$$render(
						$$result,
						{
							className: "newProjectButton",
							onClick: newProject,
							icon: img$E
						},
						{},
						{ default: () => `new project` }
					)}
				${validate_component(ProjectList, "ProjectList").$$render(
						$$result,
						{
							title: "Following",
							className: "followingProjects",
							projects: filteredFollowingProjects,
							showLastActive: true,
							displayLimit: $displayingAllFollowingProjects
							? 0
							: FOLLOWED_PROJECTS_DISPLAY_LIMIT,
							showMoreAction: displayAllFollowingProjects,
							searchString,
							showIfNoProjects: true,
							showPrivateIcon: true
						},
						{},
						{
							default: () => `${searchString
							? `${$$slots.default
								? $$slots.default({})
								: `no followed projects matching &quot;${escape(searchString)}&quot;`}`
							: `${$$slots.default
								? $$slots.default({})
								: `you aren&#39;t following any projects<br><a href="${"discover"}">Discover</a> inspiring projects to follow`}`}`
						}
					)}</div>`}`
			}
		)}
</div>`;
	} while (!$$settled);

	return $$rendered;
});

var index$3 = /*#__PURE__*/Object.freeze({
    __proto__: null,
    'default': Projects
});

/* src\routes\projects\archive.svelte generated by Svelte v3.23.0 */

const css$P = {
	code: ".content.svelte-uv768u .projectList .contentPanel{padding-top:7px;margin-bottom:0}.content.svelte-uv768u .projectList .panelTitle{padding-bottom:8px}.content.svelte-uv768u .projectListItem{margin-bottom:-3px}.content.svelte-uv768u .projectListItem .thumb{width:60px;height:60px}.content.svelte-uv768u .projectListItem .detailContent{left:74px}.content.svelte-uv768u .projectListItem .detail{font-size:1.1rem;margin-top:5px}.content.svelte-uv768u .projectListItem .info {top:22px}.content.svelte-uv768u .projectListItem .counter {margin-right:0}.content.svelte-uv768u .projectListItem .followingIcon {display:none}",
	map: "{\"version\":3,\"file\":\"archive.svelte\",\"sources\":[\"archive.svelte\"],\"sourcesContent\":[\"<script>\\r\\n\\timport locale from '../../locale';\\r\\n\\r\\n\\timport { writable } from 'svelte/store';\\r\\n\\r\\n\\timport ScrollView from '../../components/ScrollView.svelte';\\r\\n\\r\\n\\timport Proxy from '../../components/Proxy.svelte';\\r\\n\\timport Hotspot from '../../components/Hotspot.svelte';\\r\\n\\r\\n    import Button from '../../components/Button.svelte';\\r\\n\\timport SearchBar from './../_components/SearchBar.svelte';\\r\\n\\timport ContentLoader from './../_components/ContentLoader.svelte';\\r\\n\\r\\n\\timport ProjectList from './../_components/ProjectList.svelte';\\r\\n\\r\\n    import AddProjectIcon from \\\"../../assets/icons/add_project.png\\\";\\r\\n\\r\\n\\timport {\\r\\n\\t\\tgetArchivedProjects,\\r\\n\\t\\tgetFilteredProjects,\\r\\n\\t} from '../../models/projectsModel';\\r\\n\\r\\n\\timport {\\r\\n\\t\\tprojectsArchiveSearchString,\\r\\n\\t} from '../../models/appModel';\\r\\n\\r\\n\\t$: searchString = $projectsArchiveSearchString;\\r\\n\\r\\n\\tlet archivedProjects = writable([]);\\r\\n\\tlet filteredArchivedProjects = writable([]);\\r\\n\\r\\n\\t$: { archivedProjects = getArchivedProjects() }\\r\\n\\t$: { $filteredArchivedProjects = getFilteredProjects($archivedProjects, { searchString }) }\\r\\n\\r\\n</script>\\r\\n\\r\\n<svelte:head>\\r\\n\\t<title>Flock</title>\\r\\n</svelte:head>\\r\\n\\r\\n<div class=\\\"content\\\">\\r\\n\\t<ScrollView id=\\\"projects\\\">\\r\\n\\t\\t<SearchBar bind:searchString={$projectsArchiveSearchString} />\\r\\n\\t\\t<ProjectList title=\\\"{null}\\\" projects=\\\"{filteredArchivedProjects}\\\" showLastActive=\\\"{true}\\\" showUpdateCounter=\\\"{false}\\\" {searchString} showIfNoProjects=\\\"{true}\\\" showPrivateIcon=\\\"{true}\\\"> <!--  title=\\\"Archived Projects\\\" -->\\r\\n\\t\\t\\t{#if searchString}\\r\\n\\t\\t\\t\\t<slot>no archived projects matching \\\"{searchString}\\\"</slot>\\r\\n\\t\\t\\t{:else}\\r\\n\\t\\t\\t\\t<slot>you have not archived any projects</slot>\\r\\n\\t\\t\\t{/if}\\r\\n\\t\\t</ProjectList>\\r\\n\\t</ScrollView>\\r\\n</div>\\r\\n\\r\\n<style>\\r\\n\\t.content :global(.projectList .contentPanel) {\\r\\n    \\tpadding-top: 7px;\\r\\n\\t\\tmargin-bottom: 0;\\r\\n\\t}\\r\\n\\r\\n\\t.content :global(.projectList .panelTitle) {\\r\\n    \\tpadding-bottom: 8px;\\r\\n\\t}\\r\\n\\r\\n\\t.content :global(.projectListItem) {\\r\\n    \\tmargin-bottom: -3px;\\r\\n\\t}\\r\\n\\r\\n\\t.content :global(.projectListItem .thumb) {\\r\\n\\t\\twidth: 60px;\\r\\n\\t\\theight: 60px;\\r\\n\\t}\\r\\n\\r\\n\\t.content :global(.projectListItem .detailContent) {\\r\\n    \\tleft: 74px;\\r\\n\\t}\\r\\n\\r\\n\\t.content :global(.projectListItem .detail) {\\r\\n\\t\\tfont-size: 1.1rem;\\r\\n\\t\\tmargin-top: 5px;\\r\\n\\t}\\r\\n\\r\\n\\t.content :global(.projectListItem .info ) {\\r\\n    \\ttop: 22px;\\r\\n\\t}\\r\\n\\r\\n\\t.content :global(.projectListItem .counter ) {\\r\\n    \\tmargin-right: 0;\\r\\n\\t}\\r\\n\\r\\n\\t.content :global(.projectListItem .followingIcon ) {\\r\\n    \\tdisplay: none;\\r\\n\\t}\\r\\n</style>\"],\"names\":[],\"mappings\":\"AAuDC,sBAAQ,CAAC,AAAQ,0BAA0B,AAAE,CAAC,AAC1C,WAAW,CAAE,GAAG,CACnB,aAAa,CAAE,CAAC,AACjB,CAAC,AAED,sBAAQ,CAAC,AAAQ,wBAAwB,AAAE,CAAC,AACxC,cAAc,CAAE,GAAG,AACvB,CAAC,AAED,sBAAQ,CAAC,AAAQ,gBAAgB,AAAE,CAAC,AAChC,aAAa,CAAE,IAAI,AACvB,CAAC,AAED,sBAAQ,CAAC,AAAQ,uBAAuB,AAAE,CAAC,AAC1C,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,AACb,CAAC,AAED,sBAAQ,CAAC,AAAQ,+BAA+B,AAAE,CAAC,AAC/C,IAAI,CAAE,IAAI,AACd,CAAC,AAED,sBAAQ,CAAC,AAAQ,wBAAwB,AAAE,CAAC,AAC3C,SAAS,CAAE,MAAM,CACjB,UAAU,CAAE,GAAG,AAChB,CAAC,AAED,sBAAQ,CAAC,AAAQ,uBAAuB,AAAE,CAAC,AACvC,GAAG,CAAE,IAAI,AACb,CAAC,AAED,sBAAQ,CAAC,AAAQ,0BAA0B,AAAE,CAAC,AAC1C,YAAY,CAAE,CAAC,AACnB,CAAC,AAED,sBAAQ,CAAC,AAAQ,gCAAgC,AAAE,CAAC,AAChD,OAAO,CAAE,IAAI,AACjB,CAAC\"}"
};

const Archive = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let $projectsArchiveSearchString = get_store_value(projectsArchiveSearchString);
	let $filteredArchivedProjects;
	let $archivedProjects;
	let archivedProjects = writable$1([]);
	$archivedProjects = get_store_value(archivedProjects);
	let filteredArchivedProjects = writable$1([]);
	$filteredArchivedProjects = get_store_value(filteredArchivedProjects);
	$$result.css.add(css$P);
	let $$settled;
	let $$rendered;

	do {
		$$settled = true;
		$filteredArchivedProjects = get_store_value(filteredArchivedProjects);
		$archivedProjects = get_store_value(archivedProjects);
		let searchString = $projectsArchiveSearchString;

		 {
			{
				archivedProjects = getArchivedProjects();
			}
		}

		 {
			{
				$filteredArchivedProjects = getFilteredProjects($archivedProjects, { searchString });
			}
		}

		$$rendered = `${($$result.head += `${($$result.title = `<title>Flock</title>`, "")}`, "")}

<div class="${"content svelte-uv768u"}">${validate_component(ScrollView, "ScrollView").$$render($$result, { id: "projects" }, {}, {
			default: () => `${validate_component(SearchBar, "SearchBar").$$render(
				$$result,
				{
					searchString: $projectsArchiveSearchString
				},
				{
					searchString: $$value => {
						$projectsArchiveSearchString = $$value;
						$$settled = false;
					}
				},
				{}
			)}
		${validate_component(ProjectList, "ProjectList").$$render(
				$$result,
				{
					title: null,
					projects: filteredArchivedProjects,
					showLastActive: true,
					showUpdateCounter: false,
					searchString,
					showIfNoProjects: true,
					showPrivateIcon: true
				},
				{},
				{
					default: () => `
			${searchString
					? `${$$slots.default
						? $$slots.default({})
						: `no archived projects matching &quot;${escape(searchString)}&quot;`}`
					: `${$$slots.default
						? $$slots.default({})
						: `you have not archived any projects`}`}`
				}
			)}`
		})}
</div>`;
	} while (!$$settled);

	return $$rendered;
});

var archive = /*#__PURE__*/Object.freeze({
    __proto__: null,
    'default': Archive
});

/* src\components\LimitedTextfield.svelte generated by Svelte v3.23.0 */

const css$Q = {
	code: ".charsOver.svelte-o89be7{color:#DF3C3C}",
	map: "{\"version\":3,\"file\":\"LimitedTextfield.svelte\",\"sources\":[\"LimitedTextfield.svelte\"],\"sourcesContent\":[\"<script>\\r\\n\\timport { createEventDispatcher } from 'svelte';\\r\\n    const dispatch = createEventDispatcher();\\r\\n\\r\\n    export let value = '';\\r\\n    export let field = null;\\r\\n\\texport let maxlength;\\r\\n\\r\\n    export let allowOverflow = true;\\r\\n\\r\\n    export let remainingChars = '';\\r\\n    export let charsOver = '';\\r\\n\\r\\n\\t$: { remainingChars = Math.max(0, maxlength - value.length) };\\r\\n\\t$: { charsOver = Math.max(0, value.length - maxlength) };\\r\\n\\r\\n\\t$: {\\r\\n\\t\\tif (!allowOverflow && value.length > maxlength) {\\r\\n\\t\\t\\tvalue = value.substr(0, maxlength);\\r\\n\\t\\t}\\r\\n\\t}\\r\\n\\t$: {\\r\\n        if (!allowOverflow && field) {\\r\\n            field.addEventListener('keypress', e => checkFieldLimit(e));\\r\\n        }\\r\\n\\t}\\r\\n\\r\\n\\tfunction checkFieldLimit(event) {\\r\\n\\t\\tif (value.length >= maxlength) {\\r\\n            event.preventDefault();\\r\\n\\t\\t}\\r\\n\\t}\\r\\n</script>\\r\\n\\r\\n<textarea bind:value=\\\"{value}\\\" class:charsOver=\\\"{allowOverflow && charsOver}\\\" bind:this=\\\"{field}\\\" maxlength=\\\"{maxlength && !allowOverflow ? maxlength : ''}\\\" on:keypress on:keypress />\\r\\n\\r\\n<style>\\r\\n\\t.charsOver {\\r\\n\\t\\tcolor: #DF3C3C;\\r\\n\\t}\\r\\n</style>\"],\"names\":[],\"mappings\":\"AAqCC,UAAU,cAAC,CAAC,AACX,KAAK,CAAE,OAAO,AACf,CAAC\"}"
};

const LimitedTextfield = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	const dispatch = createEventDispatcher();
	let { value = "" } = $$props;
	let { field = null } = $$props;
	let { maxlength } = $$props;
	let { allowOverflow = true } = $$props;
	let { remainingChars = "" } = $$props;
	let { charsOver = "" } = $$props;
	
	

	function checkFieldLimit(event) {
		if (value.length >= maxlength) {
			event.preventDefault();
		}
	}

	if ($$props.value === void 0 && $$bindings.value && value !== void 0) $$bindings.value(value);
	if ($$props.field === void 0 && $$bindings.field && field !== void 0) $$bindings.field(field);
	if ($$props.maxlength === void 0 && $$bindings.maxlength && maxlength !== void 0) $$bindings.maxlength(maxlength);
	if ($$props.allowOverflow === void 0 && $$bindings.allowOverflow && allowOverflow !== void 0) $$bindings.allowOverflow(allowOverflow);
	if ($$props.remainingChars === void 0 && $$bindings.remainingChars && remainingChars !== void 0) $$bindings.remainingChars(remainingChars);
	if ($$props.charsOver === void 0 && $$bindings.charsOver && charsOver !== void 0) $$bindings.charsOver(charsOver);
	$$result.css.add(css$Q);

	 {
		{
			if (!allowOverflow && value.length > maxlength) {
				value = value.substr(0, maxlength);
			}
		}
	}

	 {
		{
			remainingChars = Math.max(0, maxlength - value.length);
		}
	}

	 {
		{
			charsOver = Math.max(0, value.length - maxlength);
		}
	}

	 {
		{
			if (!allowOverflow && field) {
				field.addEventListener("keypress", e => checkFieldLimit(e));
			}
		}
	}

	return `<textarea${add_attribute("maxlength", maxlength && !allowOverflow ? maxlength : "", 0)} class="${["svelte-o89be7", allowOverflow && charsOver ? "charsOver" : ""].join(" ").trim()}"${add_attribute("this", field, 1)}>${value || ""}</textarea>`;
});

// import exifr from 'exifr';
// import EXIF from 'exif-js';

const hasBlobConstructor = typeof (Blob) !== 'undefined' && (function checkBlobConstructor() {
    try {
        return Boolean(new Blob());
    } catch (error) {
        return false;
    }
}());

const hasArrayBufferViewSupport = hasBlobConstructor && typeof (Uint8Array) !== 'undefined' && (function checkArrayBufferView() {
    try {
        return new Blob([new Uint8Array(100)]).size === 100;
    } catch (error) {
        return false;
    }
}());

const hasToBlobSupport = (typeof HTMLCanvasElement !== 'undefined' ? HTMLCanvasElement.prototype.toBlob : false);

const hasBlobSupport = (hasToBlobSupport || (typeof Uint8Array !== 'undefined' && typeof ArrayBuffer !== 'undefined' && typeof atob !== 'undefined'));

const hasReaderSupport = (typeof FileReader !== 'undefined' || typeof URL !== 'undefined');

const hasCanvasSupport = (typeof HTMLCanvasElement !== 'undefined');

class ImageTools {

    constructor() {
        this.isSupportedByBrowser = () => (hasCanvasSupport && hasBlobSupport && hasReaderSupport);

        this.browserSupport = this.isSupportedByBrowser();

        this.resize = (file, options) => new Promise((resolve) => {

            if (!this.browserSupport || !file.type.match(/image.*/)) return resolve(file);  // early exit - not supported

            if (file.type.match(/image\/gif/)) return resolve(file); // early exit - could be an animated gif

            const image = document.createElement('img');

            image.onload = async () => {
                let width  = image.width;
                let height = image.height;

                if (height > options.maxHeight) {
                    width *= options.maxHeight / height;
                    height = options.maxHeight;
                }

                if (width > options.maxWidth) {
                    height *= options.maxWidth / width;
                    width = options.maxWidth;
                }

                // if (width >= height && width > options.maxWidth) {
                //     height *= options.maxWidth / width;
                //     width = options.maxWidth;
                // } else if (height > options.maxHeight) {
                //     width *= options.maxHeight / height;
                //     height = options.maxHeight;
                // } // else return resolve(file); // early exit; no need to resize - still may need to exif rotate

                // alert('size: ' + width + ', ' + height);

                // EXIF.getData(image, () => {

                let orientation = 1;

                // if (file.type.match(/image\/jpeg/)) {
                //     orientation = await exifr.orientation(image);
                //     // exifr.getData(image, () => {
                //         // const orientation = EXIF.getTag(image, 'Orientation');
                // }

                // alert('exif orientation: ' + orientation);
                // orientation = 1; // seems they are already auto rotated

                const imageCanvas = this.drawImageToCanvas(image, orientation, 0, 0, width, height, 'contain');
                if (hasToBlobSupport) imageCanvas.toBlob(blob => resolve(blob), options.type || file.type);
                else resolve(this.toBlob(imageCanvas, file.type));

                // });
            };

            this.loadImage(image, file);

            return true;
        });

        this.crop = (file, dimensions) => new Promise((resolve) => {

            if (!this.browserSupport || !file.type.match(/image.*/)) return resolve(file); // early exit - not supported

            if (file.type.match(/image\/gif/)) return resolve(file); // early exit - could be an animated gif

            const image = document.createElement('img');

            image.onload = () => {

                if (dimensions.width > image.width && dimensions.height > image.height) return resolve(file); // early exit - no need to resize

                const width = Math.min(dimensions.width, image.width);
                const height = Math.min(dimensions.height, image.height);

                if (image.width > dimensions.width * 2 || image.height > dimensions.height * 2) {
                    return this.resize(file, { width: dimensions.width * 2, height: dimensions.height * 2 }).then((zoomedOutImage) => {
                        this.crop(zoomedOutImage, { width, height }).then(resolve);
                    });
                }

                EXIF.getData(image, () => {
                    const orientation = EXIF.getTag(image, 'Orientation');
                    const imageCanvas = this.drawImageToCanvas(image, orientation, 0, 0, width, height, 'crop');
                    if (hasToBlobSupport) imageCanvas.toBlob(blob => resolve(blob), file.type);
                    else resolve(this.toBlob(imageCanvas, file.type));
                });
            };

            this.loadImage(image, file);

            return true;
        });

        this.drawImageToCanvas = (img, orientation = 1, x = 0, y = 0, width = img.width, height = img.height, method = 'contain') => {
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');

            canvas.width = width;
            canvas.height = height;

            ctx.save();
            switch (Number(orientation)) {
                // explained here: https://i.stack.imgur.com/6cJTP.gif
                case 1:
                    break;

                case 2:
                    ctx.translate(width, 0);
                    ctx.scale(-1, 1);
                    break;

                case 3:
                    ctx.translate(width, height);
                    ctx.rotate((180 / 180) * Math.PI); // 180/180 is 1? No shit, but how else will you know its need 180 rotation?
                    break;

                case 4:
                    ctx.translate(0, height);
                    ctx.scale(1, -1);
                    break;

                case 5:
                    canvas.width = height;
                    canvas.height = width;
                    ctx.rotate((90 / 180) * Math.PI);
                    ctx.scale(1, -1);
                    break;

                case 6:
                    canvas.width = height;
                    canvas.height = width;
                    ctx.rotate((90 / 180) * Math.PI);
                    ctx.translate(0, -height);
                    break;

                case 7:
                    canvas.width = height;
                    canvas.height = width;
                    ctx.rotate((270 / 180) * Math.PI);
                    ctx.translate(-width, height);
                    ctx.scale(1, -1);
                    break;

                case 8:
                    canvas.width = height;
                    canvas.height = width;
                    ctx.translate(0, width);
                    ctx.rotate((270 / 180) * Math.PI);
                    break;
            }

            if (method === 'crop') ctx.drawImage(img, (img.width / 2) - (width / 2), (img.height / 2) - (height / 2), width, height, 0, 0, width, height);
            else ctx.drawImage(img, x, y, width, height);
            ctx.restore();

            return canvas;
        };

        this.toBlob = (canvas, type) => {
            const dataURI = canvas.toDataURL(type);
            const dataURIParts = dataURI.split(',');
            let byteString;
            if (dataURIParts[0].indexOf('base64') >= 0) {
                byteString = atob(dataURIParts[1]);
            } else {
                byteString = decodeURIComponent(dataURIParts[1]);
            }
            const arrayBuffer = new ArrayBuffer(byteString.length);
            const intArray = new Uint8Array(arrayBuffer);

            for (let i = 0; i < byteString.length; i += 1) {
                intArray[i] = byteString.charCodeAt(i);
            }

            const mimeString = dataURIParts[0].split(':')[1].split(';')[0];
            let blob = null;

            if (hasBlobConstructor) {
                blob = new Blob([hasArrayBufferViewSupport ? intArray : arrayBuffer], { type: mimeString });
            } else {
                const bb = new BlobBuilder();
                bb.append(arrayBuffer);
                blob = bb.getBlob(mimeString);
            }

            return blob;
        };

        this.loadImage = (image, file) => {
            if (typeof (URL) === 'undefined') {
                const reader = new FileReader();
                reader.onload = (event) => {
                    image.src = event.target.result;
                };
                reader.readAsDataURL(file);
            } else {
                image.src = URL.createObjectURL(file);
            }
        };
    }

}

function uploadImage(options) {
    const {
        uploadType,
        itemId,
        itemIndex,

        imageSettings,
        thumbSettings,

        onUploading,
        onImageLoaded,
        onComplete,
        onError,
    } = options;

    const uploadInput = document.createElement('input');
    uploadInput.type = "file";
    uploadInput.accept = "image/*";
    uploadInput.hidden = true;
    uploadInput.addEventListener('change', onUploadFileSelect);
    uploadInput.style = "display: none";
    document.body.appendChild(uploadInput);
    uploadInput.click();

    async function onUploadFileSelect(event) {
        if (event && event.target && event.target.files && event.target.files.length) {
            var file = event.target.files[0];

            if (imageSettings.type && file.type.includes('gif') && !imageSettings.type.includes('gif')) {
                onError({invalidType: true});
            } else {
                onUploading();

                const imageTools = new ImageTools();
                imageTools.resize(file, imageSettings).then(async (imageFile) => {
                    const maxSize = config$1.MAX_IMAGE_UPLOAD_SIZE[imageFile.type];
                    // console.log('resized type: ' + imageFile.type + ' size: ' + (imageFile.size/1000000) + ' maxSize: ' + maxSize);
                    if (maxSize) {
                        if (imageFile.size && (imageFile.size/1000000) > maxSize) {
                            onError({imageFileSizeTooLarge: true, maxSize: maxSize, type: file.type});
                        } else {
                            onImageLoaded(imageFile);

                            if (!file.type.includes('gif')) { // create thumbs for gifs
                                imageTools.resize(file, thumbSettings).then(async (thumbFile) => {
                                    getSignedRequest(imageFile, thumbFile);
                                });
                            } else {
                                getSignedRequest(imageFile);
                            }
                        }
                    } else {
                        onError({invalidType: true});
                    }
                });
            }
            document.body.removeChild(uploadInput);
        }
    }

    function getSignedRequest(imageFile, thumbFile){
        if (!itemId) {
            console.error('no itemId provided for image selector');
            return;
        }

        const options = {
            uploadType,
            itemId,
            itemIndex,
            fileType: imageFile.type,
        };

        api.requestUpload(options).then((response) => {
            if (response.signedRequest) {
                uploadFile(imageFile, thumbFile, response);
            } else {
                onError();
            }
        }).catch((error) => {
            onError(error);
        });
    }

    function uploadFile(imageFile, thumbFile, response) {
        const imageSignedRequest = response.signedRequest;
        const imageUrl = response.url;

        const request = new XMLHttpRequest();
        request.open('PUT', imageSignedRequest);
        request.onreadystatechange = () => {
            if (request.readyState === 4){
                if (request.status === 200){
                    onComplete(imageUrl);
                } else {
                    onError();
                }
            }
        };
        request.send(imageFile);

        if (response.thumbSignedRequest && thumbFile) {
            const thumbSignedRequest = response.thumbSignedRequest;

            const thumbRequest = new XMLHttpRequest();
            thumbRequest.open('PUT', thumbSignedRequest);
            thumbRequest.onreadystatechange = () => {
                if (thumbRequest.readyState === 4){
                    if (thumbRequest.status !== 200){
                        console.error('Could not upload thumb');
                    }
                }
            };
            thumbRequest.send(thumbFile);
        }
    }
}

const UploadUtil = {
    uploadImage,
};

const stopWords = 'i, me, my, myself, we, our, ours, ourselves, you, your, yours, yourself, yourselves, he, him, his, himself, she, her, hers, herself, it, its, itself, they, them, their, theirs, themselves, what, which, who, whom, this, that, these, those, am, is, are, was, were, be, been, being, have, has, had, having, do, does, did, doing, a, an, the, and, but, if, or, because, as, until, while, of, at, by, for, with, about, against, between, into, through, during, before, after, above, below, to, from, up, down, in, out, on, off, over, under, again, further, then, once, here, there, when, where, why, how, all, any, both, each, few, more, most, other, some, such, no, nor, not, only, own, same, so, than, too, very, s, t, can, will, just, don, should, now';
const stopWordsExpression = new RegExp('\\b' + stopWords.split(', ').join('\\b|\\b') + '\\b', 'ig');

const contextStopWords = 'worlds?, dream(s|ing)?, big, small, reality, realities, spaces?, places?, build(s|ing)?, creat(es|ing)?, mak(es|ing)?, discover, help, ground, provid(es|ing)?, develop(ing)?, links?'; // see(ing)?, hear(ing)?, feel(s|ing)?, projects?, support(s|ing)?, find(ing)?,
const contextStopWordsExpression = new RegExp('\\b' + contextStopWords.split(', ').join('\\b|\\b') + '\\b', 'ig');

const commonWordNounSuffixes = 'acy, cy, al, ance, ence, dom, ery, ry, er, eer, or, ism, izm, ist, ity, ty, ment, ent, ant, iness, ness, ship, sion, tion, age, th';
const commonWordVerbSuffixes = 'ate, ten, en, ted, ed, ify, fy, ise, ize, ing';
const commonWordAdverbSuffixes = 'ward, wards, wise, ly';
const commonWordAdjectiveSuffixes = 'able, ible, al, esque, est, ful, ical, ic, ious, ous, ish, ive, y'; // do not include less as means opposite
const commonWordMiscSuffixes = 'ur'; // colour, behaviour
const commonWordPluralSuffixes = 'ers, ors, ies, es, s';
const commonWordSuffixes = sortStringItemsByLength(commonWordNounSuffixes + ', ' + commonWordVerbSuffixes + ', ' + commonWordAdverbSuffixes + ', ' + commonWordAdjectiveSuffixes + ', ' + commonWordMiscSuffixes + ', ' + commonWordPluralSuffixes);

const commonWordSuffixesExpression = '(\\w{3,})(' + commonWordSuffixes.split(', ').join(')\\b|(\\w{3,})(') + ')\\b';
// const commonWordSuffixesRegex = new RegExp('(\\w{3,})' + commonWordSuffixes.split(', ').join('\\b|(\\w{3,})') + '\\b', 'ig');
// const commonWordSuffixesRegex = new RegExp('\\B' + commonWordSuffixes.split(', ').join('\\b|\\B') + '\\b', 'ig');

function sortStringItemsByLength(string) {
    const items = string.split(', ');
    items.sort(function(a, b){
        return b.length - a.length;
    });
    return items.join(', ');
}

function removeCommonWordSuffixes(string) {
    const commonWordSuffixesRegex = new RegExp(commonWordSuffixesExpression, 'i'); // 'ig');

    let outputString = string;

    let trialIndex = 0;

    let match, groupI, startIndex, endIndex;
    while((match = commonWordSuffixesRegex.exec(outputString)) !== null && trialIndex++ < 100) {
        for (groupI = 1; groupI < match.length; groupI++) {
            if (match[groupI] !== undefined) {
                startIndex = match.index + match[groupI].length;
                endIndex = startIndex + match[groupI + 1].length;
                outputString = outputString.substr(0, startIndex) + outputString.substr(endIndex);
                break;
            }
        }
    }

    return outputString;
    // return string.replace(commonWordSuffixesRegex, '');
}

function getOrWordsExpression(string, requireFullWords) {
    if (requireFullWords) {
        string = '\\b' + string.split(' ').join('\\b|\\b') + '\\b';
    } else {
        string = string.split(' ').join('|');
    }
    return new RegExp(string, 'i');
}

function getAndWordsExpression(string, requireFullWords) {
    if (requireFullWords) {
        string = '(?=.*\\b' + string.split(' ').join('\\b)(?=.*\\b') + '\\b).+';
    } else {
        string = '(?=.*' + string.split(' ').join(')(?=.*') + ').+';
        // (?=.*\bmeat\b)(?=.*\bpasta\b)(?=.*\bdinner\b).+
    }
    return new RegExp(string, 'ig');
}

function removeStopWords(string) {
    return string.replace(stopWordsExpression, '');
}

function removeContextStopWords(string) {
    return string.replace(contextStopWordsExpression, '');
}

function getSearchString(string) {
    string = string.toLowerCase();
    string = string.replace(/[^\w]+/g, ' ');
    string = removeStopWords(string);
    string = string.replace(/\s+/g, ' ');
    string = string.trim();
    return string;
}

function filterItemsBySearch(items, options) {
    let {
        searchString,
        fullWordSearchExpression,
        generalisedFullWordSearchExpression,
        searchExpression,
        generalisedSearchExpression,
        appendAllOtherItems,
    } = options;

    if (!searchString) {
        return [...items];
    } else {
        let filteredItems = [];

        let index, item;

        for (index = 0; index < items.length; index++) {
            item = items[index];
            if (itemRegexMatch(item, fullWordSearchExpression)) {
                filteredItems.push(item);
            }
        }

        for (index = 0; index < items.length; index++) {
            item = items[index];
            if (itemRegexMatch(item, generalisedFullWordSearchExpression) && !filteredItems.includes(item)) {
                filteredItems.push(item);
            }
        }

        if (searchExpression.test) {
            for (index = 0; index < items.length; index++) {
                item = items[index];
                if (itemRegexMatch(item, searchExpression) && !filteredItems.includes(item)) {
                    filteredItems.push(item);
                }
            }
        } else {
            for (index = 0; index < items.length; index++) {
                item = items[index];
                if (itemSearchMatch(item, searchExpression) && !filteredItems.includes(item)) {
                    filteredItems.push(item);
                }
            }
        }

        if (generalisedSearchExpression.test) {
            for (index = 0; index < items.length; index++) {
                item = items[index];
                if (itemRegexMatch(item, generalisedSearchExpression) && !filteredItems.includes(item)) {
                    filteredItems.push(item);
                }
            }
        } else {
            for (index = 0; index < items.length; index++) {
                item = items[index];
                if (itemSearchMatch(item, generalisedSearchExpression) && !filteredItems.includes(item)) {
                    filteredItems.push(item);
                }
            }
        }

        if (appendAllOtherItems) {
            for (index = 0; index < items.length; index++) {
                item = items[index];
                if (!filteredItems.includes(item)) {
                    filteredItems.push(item);
                }
            }
        }

        return filteredItems;
    }
}

function itemRegexMatch(item, searchExpression) {
    if (item.tags.match(searchExpression)) {
        return true;
    }
    return false;
}

function itemSearchMatch(item, searchString) {
    if (item.tags.toLowerCase().includes(searchString)) return true;
    return false;
}


function contextFilterItems(items, contextSearchString) {
    let filteredItems = [];

    let fullWordContextSearchExpression = null;
    let generalisedFullWordContextSearchExpression = null;
    let contextSearchExpression = null;
    let generalisedContextSearchExpression = null;

    let generalisedContextSearchString;

    if (contextSearchString) {
        contextSearchString = getSearchString(contextSearchString);

        generalisedContextSearchString = removeCommonWordSuffixes(contextSearchString);

        fullWordContextSearchExpression = getOrWordsExpression(contextSearchString, true);
        generalisedFullWordContextSearchExpression = getOrWordsExpression(generalisedContextSearchString, true);
        contextSearchExpression = getOrWordsExpression(contextSearchString);
        generalisedContextSearchExpression = getOrWordsExpression(generalisedContextSearchString);
    }

    filteredItems = filterItemsBySearch(items, {
        searchString: contextSearchString,
        fullWordSearchExpression: fullWordContextSearchExpression,
        generalisedFullWordSearchExpression: generalisedFullWordContextSearchExpression,
        searchExpression: contextSearchExpression,
        generalisedSearchExpression: generalisedContextSearchExpression,
        appendAllOtherItems: true,
    });

    return filteredItems;
}

function filterItems(items, searchString) {
    let filteredItems = [];

    let fullWordSearchExpression = null;
    let generalisedFullWordSearchExpression = null;
    let searchExpression = null;
    let generalisedSearchExpression = null;

    let generalisedSearchString;

    if (searchString) {
        searchString = getSearchString(searchString);

        generalisedSearchString = removeCommonWordSuffixes(searchString);

        const splitWords = searchString.split(' ');
        if (splitWords.length > 1) {
            fullWordSearchExpression = getAndWordsExpression(searchString, true);
            generalisedFullWordSearchExpression = getAndWordsExpression(generalisedSearchString, true);
            searchExpression = getAndWordsExpression(searchString);
            generalisedSearchExpression = getAndWordsExpression(generalisedSearchString);
        } else {
            fullWordSearchExpression = new RegExp('\\b' + searchString + '\\b', 'i');
            generalisedFullWordSearchExpression = new RegExp('\\b' + generalisedSearchString + '\\b', 'i');
            searchExpression = searchString;
            generalisedSearchExpression = generalisedSearchString;
        }
    }

    filteredItems = filterItemsBySearch(items, {
        searchString,
        fullWordSearchExpression,
        generalisedFullWordSearchExpression,
        searchExpression,
        generalisedSearchExpression,
    });

    return filteredItems;
}

/* src\routes\_components\ImageCarousel.svelte generated by Svelte v3.23.0 */

const css$R = {
	code: ".imageCarousel.svelte-15m1q8p{white-space:nowrap;overflow-x:scroll;overflow-y:hidden;-ms-overflow-style:none;pointer-events:auto}.imageCarousel.svelte-15m1q8p::-webkit-scrollbar{display:none}.imageCarousel.svelte-15m1q8p .imageItem{display:inline-block;position:relative;visibility:hidden;margin:0 12px;width:134px;height:80px;background-color:#666666;background-size:cover;border:3px solid #ffffff;box-shadow:0 2px 5px 0 rgba(0,0,0,0.5)}.imageContainer.svelte-15m1q8p{display:inline-block;padding:0px 45px}",
	map: "{\"version\":3,\"file\":\"ImageCarousel.svelte\",\"sources\":[\"ImageCarousel.svelte\"],\"sourcesContent\":[\"<script>\\n\\timport { createEventDispatcher } from 'svelte';\\n    const dispatch = createEventDispatcher();\\n\\n    import { onMount, tick } from 'svelte';\\n    import Button from '../../components/Button.svelte';\\n\\n    import { contextFilterItems, filterItems, removeContextStopWords } from '../../utils/searchUtils';\\n\\n    export let images = null;\\n\\n    export let image = null;\\n\\n    export let imageBasePath = '';\\n    export let imageExtension = '.jpg';\\n\\n    export let searchString = null;\\n\\n    export let contextSearchString = '';\\n\\n    const MIN_X = -1000; // -200;\\n    const MAX_X = 800; // 1500; // 400;\\n\\n    let imageElements = {};\\n\\n    let scrollRegion = null;\\n\\n    $: {\\n        for (let imageItem, itemI = 0; itemI < images.length; itemI++) {\\n            imageItem = images[itemI];\\n            imageItem.imageUrl = imageBasePath + imageItem.imageId + imageExtension;\\n        }\\n    }\\n\\n    let contextFilteredImages = null;\\n    let filteredImages = [];\\n\\n    $: {\\n        updateContextFilteredImages(images, contextSearchString);\\n    }\\n    $: {\\n        updateFilteredImages(contextFilteredImages, searchString);\\n    }\\n\\n    function updateContextFilteredImages(items, contextSearchString) {\\n        contextFilteredImages = contextFilterItems(items, removeContextStopWords(contextSearchString));\\n        // console.log('updateContextFilteredImages', contextSearchString);\\n    }\\n    function updateFilteredImages(items, searchString) {\\n        if (items) {\\n            filteredImages = filterItems(items, searchString);\\n\\n            for (let imageItem, element, itemI = 0; itemI < filteredImages.length; itemI++) {\\n                imageItem = filteredImages[itemI];\\n                imageItem.posX = undefined;\\n            }\\n\\n            (async () => {\\n                await tick();\\n                if (scrollRegion) {\\n                    scrollRegion.scrollLeft = 0;\\n                }\\n                updateScroll();\\n            })();\\n        }\\n    }\\n\\n    onMount(() => {\\n        scrollRegion.addEventListener('scroll', updateScroll);\\n        updateScroll();\\n    });\\n\\n    function updateScroll() {\\n        if (scrollRegion) {\\n            const scrollX = scrollRegion.scrollLeft;\\n            for (let imageItem, element, elementX, visible, itemI = 0; itemI < filteredImages.length; itemI++) {\\n                imageItem = filteredImages[itemI];\\n                element = imageElements[imageItem.imageId];\\n                if (element) {\\n                    if (imageItem.posX === undefined || imageItem.posX === 0) {\\n                        imageItem.posX = element.offsetLeft;\\n                    };\\n                    elementX = imageItem.posX - scrollX;\\n                    visible = (elementX > MIN_X && elementX < MAX_X)\\n                    if (element.isVisible !== visible && imageItem.imageUrl) {\\n                        element.isVisible = visible;\\n                        if (visible) {\\n                            element.style = 'visibility: visible; background-image: url(' + imageItem.imageUrl + ')';\\n                        } else {\\n                            element.style = '';\\n                        }\\n                    }\\n                }\\n            }\\n        }\\n    }\\n\\n    function selectImage(targetImage) {\\n        image = targetImage.imageId;\\n        dispatch('select', {thumbImage: imageBasePath + image + imageExtension});\\n    }\\n</script>\\n\\n<div class=\\\"imageCarousel\\\" bind:this=\\\"{scrollRegion}\\\">\\n    <div class=\\\"imageContainer\\\">\\n        {#each filteredImages as image, index (image.imageId)}\\n            {#if !image.disabled}\\n                <Button className=\\\"imageItem\\\" bind:element=\\\"{imageElements[image.imageId]}\\\" onClick=\\\"{() => { selectImage(image); } }\\\" />\\n                <!-- style=\\\"background-image: url({imageBasePath + image.imageId + imageExtension})\\\" -->\\n            {/if}\\n        {/each}\\n    </div>\\n</div>\\n\\n<style>\\n    .imageCarousel {\\n        white-space: nowrap;\\n\\n        overflow-x: scroll;\\n        overflow-y: hidden;\\n\\n        -ms-overflow-style: none; /* Hide scrollbar for IE and Edge */\\n\\n        pointer-events: auto;\\n    }\\n\\t.imageCarousel::-webkit-scrollbar { /* Hide scrollbar for Chrome, Safari and Opera */\\n        display: none;\\n    }\\n\\n    .imageCarousel :global(.imageItem) {\\n        display: inline-block;\\n        position: relative;\\n\\n        visibility: hidden;\\n\\n        margin: 0 12px;\\n\\n        width: 134px;\\n        height: 80px;\\n        /* width: 168px;\\n        height: 100px; */\\n        /* width: 94px;\\n        height: 56px; */\\n\\n        background-color: #666666;\\n        background-size: cover;\\n        border: 3px solid #ffffff;\\n\\n        box-shadow: 0 2px 5px 0 rgba(0,0,0,0.5);\\n    }\\n\\n    .imageContainer {\\n        display: inline-block;\\n\\n        padding: 0px 45px;\\n    }\\n</style>\"],\"names\":[],\"mappings\":\"AAmHI,cAAc,eAAC,CAAC,AACZ,WAAW,CAAE,MAAM,CAEnB,UAAU,CAAE,MAAM,CAClB,UAAU,CAAE,MAAM,CAElB,kBAAkB,CAAE,IAAI,CAExB,cAAc,CAAE,IAAI,AACxB,CAAC,AACJ,6BAAc,mBAAmB,AAAC,CAAC,AAC5B,OAAO,CAAE,IAAI,AACjB,CAAC,AAED,6BAAc,CAAC,AAAQ,UAAU,AAAE,CAAC,AAChC,OAAO,CAAE,YAAY,CACrB,QAAQ,CAAE,QAAQ,CAElB,UAAU,CAAE,MAAM,CAElB,MAAM,CAAE,CAAC,CAAC,IAAI,CAEd,KAAK,CAAE,KAAK,CACZ,MAAM,CAAE,IAAI,CAMZ,gBAAgB,CAAE,OAAO,CACzB,eAAe,CAAE,KAAK,CACtB,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CAEzB,UAAU,CAAE,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,AAC3C,CAAC,AAED,eAAe,eAAC,CAAC,AACb,OAAO,CAAE,YAAY,CAErB,OAAO,CAAE,GAAG,CAAC,IAAI,AACrB,CAAC\"}"
};

const ImageCarousel = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	const dispatch = createEventDispatcher();
	let { images = null } = $$props;
	let { image = null } = $$props;
	let { imageBasePath = "" } = $$props;
	let { imageExtension = ".jpg" } = $$props;
	let { searchString = null } = $$props;
	let { contextSearchString = "" } = $$props;
	let imageElements = {};
	let scrollRegion = null;
	let contextFilteredImages = null;
	let filteredImages = [];

	function updateContextFilteredImages(items, contextSearchString) {
		contextFilteredImages = contextFilterItems(items, removeContextStopWords(contextSearchString));
	} // console.log('updateContextFilteredImages', contextSearchString);

	function updateFilteredImages(items, searchString) {
		if (items) {
			filteredImages = filterItems(items, searchString);

			for (let imageItem, itemI = 0; itemI < filteredImages.length; itemI++) {
				imageItem = filteredImages[itemI];
				imageItem.posX = undefined;
			}

			(async () => {
				await tick();
			})();
		}
	}

	onMount(() => {
		scrollRegion.addEventListener("scroll", updateScroll);
	});

	function updateScroll() {
	}

	function selectImage(targetImage) {
		image = targetImage.imageId;

		dispatch("select", {
			thumbImage: imageBasePath + image + imageExtension
		});
	}

	if ($$props.images === void 0 && $$bindings.images && images !== void 0) $$bindings.images(images);
	if ($$props.image === void 0 && $$bindings.image && image !== void 0) $$bindings.image(image);
	if ($$props.imageBasePath === void 0 && $$bindings.imageBasePath && imageBasePath !== void 0) $$bindings.imageBasePath(imageBasePath);
	if ($$props.imageExtension === void 0 && $$bindings.imageExtension && imageExtension !== void 0) $$bindings.imageExtension(imageExtension);
	if ($$props.searchString === void 0 && $$bindings.searchString && searchString !== void 0) $$bindings.searchString(searchString);
	if ($$props.contextSearchString === void 0 && $$bindings.contextSearchString && contextSearchString !== void 0) $$bindings.contextSearchString(contextSearchString);
	$$result.css.add(css$R);
	let $$settled;
	let $$rendered;

	do {
		$$settled = true;

		 {
			{
				for (let imageItem, itemI = 0; itemI < images.length; itemI++) {
					imageItem = images[itemI];
					imageItem.imageUrl = imageBasePath + imageItem.imageId + imageExtension;
				}
			}
		}

		 {
			{
				updateContextFilteredImages(images, contextSearchString);
			}
		}

		 {
			{
				updateFilteredImages(contextFilteredImages, searchString);
			}
		}

		$$rendered = `<div class="${"imageCarousel svelte-15m1q8p"}"${add_attribute("this", scrollRegion, 1)}><div class="${"imageContainer svelte-15m1q8p"}">${each(filteredImages, (image, index) => `${!image.disabled
		? `${validate_component(Button, "Button").$$render(
				$$result,
				{
					className: "imageItem",
					onClick: () => {
						selectImage(image);
					},
					element: imageElements[image.imageId]
				},
				{
					element: $$value => {
						imageElements[image.imageId] = $$value;
						$$settled = false;
					}
				},
				{}
			)}
                `
		: ``}`)}</div>
</div>`;
	} while (!$$settled);

	return $$rendered;
});

const img$F = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjEyOEU0RTYzODFENzExRUE4OTY3RTk5NUNBNDIwNEVFIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjEyOEU0RTY0ODFENzExRUE4OTY3RTk5NUNBNDIwNEVFIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MTI4RTRFNjE4MUQ3MTFFQTg5NjdFOTk1Q0E0MjA0RUUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MTI4RTRFNjI4MUQ3MTFFQTg5NjdFOTk1Q0E0MjA0RUUiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5HkwarAAAAHElEQVR42mL8//8/AyWAcdSAUQNGDRguBgAEGAD9Wi/hHU5AzgAAAABJRU5ErkJggg==";

const img$G = "data:image/png;base64,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";

var imageLibrary = [
	{
		imageId: "architecture-3357028_960_720",
		tags: "3d, graphics, visual, render, visualisation, visualization, architecture, futuristic, future"
	},
	{
		imageId: "interior-2685521_960_720",
		tags: "3d, graphics, visual, render, visualisation, visualization, architecture, house, interior, fancy"
	},
	{
		imageId: "live-3104077_960_720",
		tags: "3d, graphics, visual, render, visualisation, visualization, architecture, house, interior, fancy, bed, concrete, modern"
	},
	{
		imageId: "mirroring-711926_960_720",
		tags: "3d, graphics, visual, render, visualisation, visualization, sphere, chrome, ball, reflection, reflect, shiney"
	},
	{
		imageId: "toast-759670_960_720",
		tags: "3d, graphics, visual, render, visualisation, visualization, toaster, toast, food, bread, action, breakfast"
	},
	{
		imageId: "wallpaper-866282_960_720",
		tags: "3d, graphics, visual, render, visualisation, visualization, ball, abstract, dark, shiney"
	},
	{
		imageId: "abstract-1850416_960_720",
		tags: "abstract, visual, texture, pattern, wall, concrete, rustic, weathered, worn, paint, peeling, blue"
	},
	{
		imageId: "abstract-1850417_960_720",
		tags: "abstract, visual, texture, pattern, wall, concrete, cracked, rustic, weathered, worn, paint, peeling, blue"
	},
	{
		imageId: "background-1838494_960_720",
		tags: "abstract, visual, texture, pattern, leather, skin, brown"
	},
	{
		imageId: "color-1845394_960_720",
		tags: "abstract, visual, texture, pattern, yellow, paint, wall, bright"
	},
	{
		imageId: "color-4158152_960_720",
		tags: "abstract, visual, texture, pattern, paint, oil, purple, slick, wonder, art, creative"
	},
	{
		imageId: "cube-2803223_960_720",
		tags: "abstract, visual, texture, pattern, blocks, light, tunnel, tower, bricks, 3d, render"
	},
	{
		imageId: "pencils-452238_960_720",
		tags: "abstract, visual, texture, pattern, pencils, art, water, droplets, drops, rainbow, colours, color, colors, materials, creative"
	},
	{
		imageId: "soap-bubble-3490954_960_720",
		tags: "abstract, visual, texture, pattern, bubble, soap, oil, slick, sphere"
	},
	{
		imageId: "steelwool-458842_960_720",
		tags: "abstract, visual, texture, pattern, sparks, light, glow, pattern, infinity, film, photography, steel"
	},
	{
		imageId: "steelwool-458840_960_720",
		tags: "abstract, visual, texture, pattern, sparks, light, glow, pattern, infinity, film, photography, steel"
	},
	{
		imageId: "texture-1504364_960_720",
		tags: "abstract, visual, texture, pattern, paint, wall, white, stucco"
	},
	{
		imageId: "agriculture-1807581_960_720",
		tags: "agriculture, farming, nature, food, grow, growing, fields, terraces, rice, pattern"
	},
	{
		imageId: "potatoes-1866415_960_720",
		tags: "agriculture, farming, nature, food, grow, growing, potatoes, hands, fresh"
	},
	{
		imageId: "rice-field-3490060_960_720",
		tags: "agriculture, farming, nature, food, grow, growing, fields, terraces, rice, water, sun, sky, tree, reflection"
	},
	{
		imageId: "rice-plantation-1822444_960_720",
		tags: "agriculture, farming, nature, food, grow, growing, fields, terraces, rice, fog, pattern"
	},
	{
		imageId: "sunflower-1127174_960_720",
		tags: "agriculture, farming, nature, food, grow, growing, plant, flower, sunflower, autumn, season, sunset, sunlight, light"
	},
	{
		imageId: "ara-3601194_960_720",
		tags: "animals, fauna, nature, bird, parrot, wing, macaw, yellow"
	},
	{
		imageId: "bear-422682_960_720",
		tags: "animals, fauna, nature, bear, grass, forest"
	},
	{
		imageId: "bee-85576_960_720",
		tags: "animals, fauna, nature, bee, wasp, insect, honey, hive"
	},
	{
		imageId: "bird-1045954_960_720",
		tags: "animals, fauna, nature, bird, hummingbird, flight, flying, fly, small"
	},
	{
		imageId: "bird-3183441_960_720",
		tags: "animals, fauna, nature, bird, swan, pond"
	},
	{
		imageId: "butterfly-3054736_960_720",
		tags: "animals, fauna, nature, butterfly, insect, flower, petal, drop, water"
	},
	{
		imageId: "cat-1285634_960_720",
		tags: "animals, fauna, nature, cat, pet, eyes, blue, grey, feline, stare, gaze"
	},
	{
		imageId: "cat-1647775_960_720",
		tags: "animals, fauna, nature, cat, feline, pet, kitten, tree, stuck"
	},
	{
		imageId: "cat-2083492_960_720",
		tags: "animals, fauna, nature, cat, feline, pet, kitten, outdoors, home, garden"
	},
	{
		imageId: "cat-4983967_960_720",
		tags: "animals, fauna, nature, cat, feline, pet, garden"
	},
	{
		imageId: "cats-eyes-2671903_960_720",
		tags: "animals, fauna, nature, cat, feline, eyes, pet, house, porch"
	},
	{
		imageId: "discus-fish-1943755_960_720",
		tags: "animals, fauna, nature, fish, tropical, reef, ocean, tank"
	},
	{
		imageId: "dog-1224267_960_720",
		tags: "animals, fauna, nature, dog, pug, puppy, pet, sunlight, afternoon, lazy, sleep, nap"
	},
	{
		imageId: "dog-4118585_960_720",
		tags: "animals, fauna, nature, dog, puppy, pet, dark"
	},
	{
		imageId: "dolphin-203875_960_720",
		tags: "animals, fauna, nature, ocean, sea, dolphin, ecology, environment"
	},
	{
		imageId: "dwarf-rabbit-4999611_960_720",
		tags: "animals, fauna, nature, rabbit, bunny, hare, pet"
	},
	{
		imageId: "elephants-4499210_960_720",
		tags: "animals, fauna, nature, elephants, elephant, savana, africa, nature, follow, family, wild"
	},
	{
		imageId: "forest-1818690_960_720",
		tags: "animals, fauna, nature, deer, forest, nature, follow, family, wild"
	},
	{
		imageId: "forget-me-not-257176_960_720",
		tags: "animals, fauna, nature, bee, insect, flower, flowers, garden, nature, forget"
	},
	{
		imageId: "fox-715588_960_720",
		tags: "animals, fauna, nature, fox, nautre, snow, trees, cold, wild"
	},
	{
		imageId: "friends-1149841_960_720",
		tags: "animals, fauna, nature, dog, cat, friends, family, home, garden, pet, pets"
	},
	{
		imageId: "frog-3428988_960_720",
		tags: "animals, fauna, nature, frog, jungle, leaf, nature, amphibian"
	},
	{
		imageId: "great-tit-4994143_960_720",
		tags: "animals, fauna, nature, bird, sparrow, tit, tree, nature"
	},
	{
		imageId: "horses-1414889_960_720",
		tags: "animals, fauna, nature, horsese, nature, wild, farm"
	},
	{
		imageId: "jay-548381_960_720",
		tags: "animals, fauna, nature, bird, jay, snow, cold"
	},
	{
		imageId: "kingfisher-2363879_960_720",
		tags: "animals, fauna, nature, bird, kingfisher"
	},
	{
		imageId: "mammal-3024471_960_720",
		tags: "animals, fauna, nature, deer, ibex, snow"
	},
	{
		imageId: "moose-70254_960_720",
		tags: "animals, fauna, nature, moose, forest"
	},
	{
		imageId: "northern-gannet-4926108_960_720",
		tags: "animals, fauna, nature, gannet, bird, sea, ocean, seabird"
	},
	{
		imageId: "norway-1758183_960_720",
		tags: "animals, fauna, nature, fox, baby, snow, norway, white"
	},
	{
		imageId: "pet-423398_960_720",
		tags: "animals, fauna, nature, dog, pet, shy, black"
	},
	{
		imageId: "polar-bear-404314_960_720",
		tags: "animals, fauna, nature, polar bear, bear, white, artic, snow"
	},
	{
		imageId: "pug-801826_960_720",
		tags: "animals, fauna, nature, pug, dog, wrapped, warm, blanket, garden"
	},
	{
		imageId: "rabbit-1882699_960_720",
		tags: "animals, fauna, nature, rabbit, hare, bunny, startled, aware, alert"
	},
	{
		imageId: "rabbit-4988412_960_720",
		tags: "animals, fauna, nature, pocket, shirt, rat, mouse, rodent, pet"
	},
	{
		imageId: "sparrow-9950_960_720",
		tags: "animals, fauna, nature, bird, sparrow, branch, tree, garden, country"
	},
	{
		imageId: "stork-4982704_960_720",
		tags: "animals, fauna, nature, nest, stork, bird, birds, family"
	},
	{
		imageId: "striped-core-354528_960_720",
		tags: "animals, fauna, nature, butterfly, flower, micro"
	},
	{
		imageId: "swan-2077219_960_720",
		tags: "animals, fauna, nature, swan, lake, pond, sunlight"
	},
	{
		imageId: "architecture-1477041_960_720",
		tags: "architecture, architectural, design, house, modern, contemporary"
	},
	{
		imageId: "architecture-1857175_960_720",
		tags: "architecture, architectural, design, drawing, pen, sketch"
	},
	{
		imageId: "architecture-1914309_960_720",
		tags: "architecture, architectural, design, building, black"
	},
	{
		imageId: "architecture-4978522_960_720",
		tags: "architecture, architectural, design, building, brutal, black"
	},
	{
		imageId: "columns-801715_960_720",
		tags: "architecture, architectural, design, columns, white, roman"
	},
	{
		imageId: "curve-1209392_960_720",
		tags: "architecture, architectural, design, future, futuristic, purple, light"
	},
	{
		imageId: "monastery-3130879_960_720",
		tags: "architecture, architectural, design, arches, gothic, roman, monestary, university"
	},
	{
		imageId: "stained-glass-1589648_960_720",
		tags: "architecture, architectural, design, stained glass, roof, ceiling, dome"
	},
	{
		imageId: "staircase-600468_960_720",
		tags: "architecture, architectural, design, sprial staircase, stairs, tower"
	},
	{
		imageId: "stairs-1636573_960_720",
		tags: "architecture, architectural, design, sprial staircase, stairs, black, tower"
	},
	{
		imageId: "stairs-3112405_960_720",
		tags: "architecture, architectural, design, sprial staircase, stairs, black, tower, pink, light"
	},
	{
		imageId: "tunnel-2033983_960_720",
		tags: "architecture, architectural, design, black, tower, sky, sky light"
	},
	{
		imageId: "urban-205986_960_720",
		tags: "architecture, architectural, design, tower, city, skyscraper"
	},
	{
		imageId: "vaulted-cellar-247391_960_720",
		tags: "architecture, architectural, design, tunnel, underground, arches, vault"
	},
	{
		imageId: "art-1478831_960_720",
		tags: "art, artist, creative, expression, painting, studio, color, paint, brushes"
	},
	{
		imageId: "art-1851483_960_720",
		tags: "art, artist, creative, expression, painting, studio, color, paint, brushes, paper, watercolor, watercolour"
	},
	{
		imageId: "brush-96240_960_720",
		tags: "art, artist, creative, expression, painting, studio, color, paint, brush, canvas, watercolor, watercolour"
	},
	{
		imageId: "brush-2927793_960_720",
		tags: "art, artist, creative, expression, painting, studio, color, paint, brushes, medium, chalk"
	},
	{
		imageId: "brushes-3129361_960_720",
		tags: "art, artist, creative, expression, painting, studio, color, paint, brushes, medium, jar"
	},
	{
		imageId: "paint-brushes-984434_960_720",
		tags: "art, artist, creative, expression, painting, studio, color, paint, brushes, medium, jar"
	},
	{
		imageId: "painting-3135875_960_720",
		tags: "art, artist, creative, expression, painting, studio, color, paint, green, blue, canvas, painting"
	},
	{
		imageId: "bmw-918408_960_720",
		tags: "automotive, car, bmw"
	},
	{
		imageId: "car-604019_960_720",
		tags: "automotive, car, audi"
	},
	{
		imageId: "car-1149997_960_720",
		tags: "automotive, car, wheel, dash, dashboard, driving, windsheild"
	},
	{
		imageId: "car-3046424_960_720",
		tags: "automotive, car, wheel, vintage, classic, dash, windsheild"
	},
	{
		imageId: "cuba-1197800_960_720",
		tags: "automotive, car, vintage, classic, road, drive"
	},
	{
		imageId: "bible-1868070_960_720",
		tags: "books, reading, literature, study, novel, poetry, bible"
	},
	{
		imageId: "blond-1866951_960_720",
		tags: "books, reading, literature, study, novel, poetry, girl, woman, lady, park, sitting"
	},
	{
		imageId: "book-731199_960_720",
		tags: "books, reading, literature, study, novel, poetry, pencil, desk"
	},
	{
		imageId: "book-1659717_960_720",
		tags: "books, reading, literature, study, novel, poetry, ancient, leather, bookshelf, volume, fiction, classic"
	},
	{
		imageId: "book-2020460_960_720",
		tags: "books, reading, literature, study, novel, poetry, coffee, morning, home, study, cozy"
	},
	{
		imageId: "books-918521_960_720",
		tags: "books, reading, literature, study, novel, poetry, travel, holiday, glasses, fiction"
	},
	{
		imageId: "books-1163695_960_720",
		tags: "books, reading, literature, study, novel, poetry, bookshop, stacks, library"
	},
	{
		imageId: "books-1617327_960_720",
		tags: "books, reading, literature, study, novel, poetry, shelves, bookshop"
	},
	{
		imageId: "books-2596809_960_720",
		tags: "books, reading, literature, study, novel, poetry, shelves, bookshop, library"
	},
	{
		imageId: "bookshelf-1082309_960_720",
		tags: "books, reading, literature, study, novel, poetry, shelves, library, ladder"
	},
	{
		imageId: "coffee-3025022_960_720",
		tags: "books, reading, literature, study, novel, poetry, coffee, warm, winter, leaves, fiction, scarf"
	},
	{
		imageId: "desk-1148994_960_720",
		tags: "books, reading, literature, study, novel, poetry, lantern, clock, night"
	},
	{
		imageId: "girl-3528292_960_720",
		tags: "books, reading, literature, study, novel, poetry, girl, woman, lady, water, river, nature, outdoors"
	},
	{
		imageId: "knowledge-1052010_960_720",
		tags: "books, reading, literature, study, novel, poetry, knowledge, glasses"
	},
	{
		imageId: "knowledge-1052014_960_720",
		tags: "books, reading, literature, study, novel, poetry, knowledge, glasses, clock"
	},
	{
		imageId: "open-book-1428428_960_720",
		tags: "books, reading, literature, study, novel, poetry, knowledge, study, research"
	},
	{
		imageId: "reading-925589_960_720",
		tags: "books, reading, literature, study, novel, poetry, outdoor"
	},
	{
		imageId: "tea-time-3240766_960_720",
		tags: "books, reading, literature, study, novel, poetry, coffee, flowers, poetry"
	},
	{
		imageId: "bar-984527_960_720",
		tags: "cafe, coffee, esspresso, bar, community, social"
	},
	{
		imageId: "breakfast-1209223_960_720",
		tags: "cafe, coffee, esspresso, table, breakfast, donut, community, social"
	},
	{
		imageId: "cafe-768771_960_720",
		tags: "cafe, coffee, esspresso, community, social"
	},
	{
		imageId: "cafe-984275_960_720",
		tags: "cafe, coffee, esspresso, community, social"
	},
	{
		imageId: "city-4298285_960_720",
		tags: "cafe, coffee, esspresso, italy, street, public, community, social"
	},
	{
		imageId: "coffee-802057_960_720",
		tags: "cafe, coffee, esspresso, machine"
	},
	{
		imageId: "coffee-918926_960_720",
		tags: "cafe, coffee, esspresso"
	},
	{
		imageId: "coffee-983955_960_720",
		tags: "cafe, coffee, esspresso"
	},
	{
		imageId: "coffee-984328_960_720",
		tags: "cafe, coffee, esspresso"
	},
	{
		imageId: "coffee-1209897_960_720",
		tags: "cafe, coffee, esspresso, breakfast, chocolate"
	},
	{
		imageId: "coffee-2714970_960_720",
		tags: "cafe, coffee, esspresso, beans"
	},
	{
		imageId: "coffee-shop-1209863_960_720",
		tags: "cafe, coffee, esspresso"
	},
	{
		imageId: "donuts-690281_960_720",
		tags: "cafe, coffee, esspresso, bakery, donuts"
	},
	{
		imageId: "street-cafe-4472312_960_720",
		tags: "cafe, coffee, esspresso, community, social, street"
	},
	{
		imageId: "abstract-21883_960_720",
		tags: "city, urban, glass, reflection, abstract, gold, building"
	},
	{
		imageId: "adult-1867665_960_720",
		tags: "city, urban, rain, new york, street, streets, umbrella"
	},
	{
		imageId: "alley-3453557_960_720",
		tags: "city, urban, travel, street, ancient, architecture"
	},
	{
		imageId: "architecture-768432_960_720",
		tags: "city, urban, architecture, building, glass, abstract"
	},
	{
		imageId: "architecture-1048092_960_720",
		tags: "city, urban, architecture, building, glass, abstract"
	},
	{
		imageId: "architecture-1868667_960_720",
		tags: "city, urban, night, lights, cityscape, skyline"
	},
	{
		imageId: "chicago-690364_960_720",
		tags: "city, urban, chicago, cityscape, skyline"
	},
	{
		imageId: "city-569093_960_720",
		tags: "city, urban, light, buildings"
	},
	{
		imageId: "city-647400_960_720",
		tags: "city, urban, night, lights, cityscape, skyline"
	},
	{
		imageId: "city-1209105_960_720",
		tags: "city, urban, lights, cityscape, futuristic, shanghai, skyline"
	},
	{
		imageId: "clouds-2517653_960_720",
		tags: "city, urban, night, lights, cityscape, futuristic, fog, mist"
	},
	{
		imageId: "girl-1026246_960_720",
		tags: "city, urban, street, busy, crossing, woman, lady"
	},
	{
		imageId: "hong-kong-1990268_960_720",
		tags: "city, urban, street, lights, road, highway, cars"
	},
	{
		imageId: "kuala-lumpur-1820944_960_720",
		tags: "city, urban, kuala lumpur, skyline, cityscape, night, lights"
	},
	{
		imageId: "manhattan-336708_960_720",
		tags: "city, urban, skyline, black, manhattan, new york, NY"
	},
	{
		imageId: "manhattan-407703_960_720",
		tags: "city, urban, skyline, manhattan, new york, NY"
	},
	{
		imageId: "new-york-668616_960_720",
		tags: "city, urban, skyline, manhattan, new york, NY, ice"
	},
	{
		imageId: "new-york-690868_960_720",
		tags: "city, urban, skyline, manhattan, new york, NY, lights"
	},
	{
		imageId: "paris-843229_960_720",
		tags: "city, urban, paris, sunset, sunrise, cityscape, skyline"
	},
	{
		imageId: "road-4988448_960_720",
		tags: "city, urban, road, highway, lights, night, cars"
	},
	{
		imageId: "singapore-river-255116_960_720",
		tags: "city, urban, cityscape, skyline"
	},
	{
		imageId: "station-839208_960_720",
		tags: "city, urban, station, sunset, transport"
	},
	{
		imageId: "taxi-238478_960_720",
		tags: "city, urban, taxi, cab, new york, NY, street"
	},
	{
		imageId: "taxi-cab-381233_960_720",
		tags: "city, urban, taxi, cab, new york, NY, street, buildings"
	},
	{
		imageId: "town-2430571_960_720",
		tags: "city, urban, town, buildings"
	},
	{
		imageId: "urban-438393_960_720",
		tags: "city, urban, social, community, street, shopping"
	},
	{
		imageId: "children-1822701_960_720",
		tags: "community, social, shared, share, children, fighting, light"
	},
	{
		imageId: "friendship-2366955_960_720",
		tags: "community, social, shared, share, children, play, friends, activity, sport"
	},
	{
		imageId: "girls-462072_960_720",
		tags: "community, social, shared, share, children, play, friends, girls, park"
	},
	{
		imageId: "hand-4661763_960_720",
		tags: "community, social, shared, share, hand, friendship, assistance, help, support, light, hope"
	},
	{
		imageId: "meetings-1149198_960_720",
		tags: "community, social, shared, share, meetings, coffee, business"
	},
	{
		imageId: "people-2567915_960_720",
		tags: "community, social, shared, share, people, friends, family, friendship"
	},
	{
		imageId: "picnic-1208229_960_720",
		tags: "community, social, shared, share, picnic, park"
	},
	{
		imageId: "restaurant-690975_960_720",
		tags: "community, social, shared, share, cafe, friends, wine, restaurant"
	},
	{
		imageId: "team-386673_960_720",
		tags: "community, social, shared, share, team, friends, friendship, sport, girls"
	},
	{
		imageId: "team-4529717_960_720",
		tags: "community, social, shared, share, team, friends, friendship, family"
	},
	{
		imageId: "team-spirit-2447163_960_720",
		tags: "community, social, shared, share, team, friends, friendship, support, family"
	},
	{
		imageId: "plans-1867745_960_720",
		tags: "design, sketch, book, ux, pen, experience, website, app"
	},
	{
		imageId: "woodtype-846089_960_720",
		tags: "design, typography, letters, print, book"
	},
	{
		imageId: "earth-11595_960_720",
		tags: "earth, space, world, earth, night, lights, cities"
	},
	{
		imageId: "earth-1617121_960_720",
		tags: "earth, space, world, earth, planet, globe"
	},
	{
		imageId: "earth-2113656_960_720",
		tags: "earth, space, world, earth, planet, globe"
	},
	{
		imageId: "sunrise-1756274_960_720",
		tags: "earth, space, world, earth, planet, globe, sunrise, horizon"
	},
	{
		imageId: "bavarian-forest-3385966_960_720",
		tags: "environment, environmental, ecology, nautre, conservation, eco, climate, climate change, global warming, forest, destroyed, destruction, habitat"
	},
	{
		imageId: "cyclone-2102397_960_720",
		tags: "environment, environmental, ecology, nautre, conservation, eco, climate, climate change, global warming, weather, tornado, climate, extreme, destruction, cyclone, hurricane"
	},
	{
		imageId: "desert-2227962_960_720",
		tags: "environment, environmental, ecology, nautre, conservation, eco, climate, climate change, global warming, desert, dead, destruction, destroyed, ruin, post-apocalypse, sand"
	},
	{
		imageId: "dry-4282884_960_720",
		tags: "environment, environmental, ecology, nautre, conservation, eco, climate, climate change, global warming, desert, dry, cracked, dead, destruction, destroyed, ruin, post-apocalypse"
	},
	{
		imageId: "iceberg-404966_960_720",
		tags: "environment, environmental, ecology, nautre, conservation, eco, climate, climate change, global warming, ice, iceberg, antarctica, antarctic, arctic, polar, melting, ice caps"
	},
	{
		imageId: "iceberg-4499262_960_720",
		tags: "environment, environmental, ecology, nautre, conservation, eco, climate, climate change, global warming, ice, iceberg, antarctica, antarctic, arctic, polar, melting, ice caps, boat"
	},
	{
		imageId: "iceland-2111811_960_720",
		tags: "environment, environmental, ecology, nautre, conservation, eco, climate, climate change, global warming, ice, antarctica, antarctic, arctic, polar, auroras, northern lights, light"
	},
	{
		imageId: "industry-611668_960_720",
		tags: "environment, environmental, ecology, nautre, conservation, eco, climate, climate change, global warming, pollution, factory, C02"
	},
	{
		imageId: "mountains-482689_960_720",
		tags: "environment, environmental, ecology, nautre, conservation, eco, climate, climate change, global warming, ice, iceberg, antarctica, antarctic, arctic, polar, melting, ice caps, mountains"
	},
	{
		imageId: "wind-power-4380274_960_720",
		tags: "environment, environmental, ecology, nautre, conservation, eco, climate, climate change, global warming, power, wind power, wind turbine, wind energy, energy, farm, renewable"
	},
	{
		imageId: "audience-828584_960_720",
		tags: "events, event, social, gig, theatre, concert, performance, audience, crowd, black"
	},
	{
		imageId: "audience-868074_960_720",
		tags: "events, event, social, gig, theatre, concert, performance, audience, crowd, band, lights"
	},
	{
		imageId: "audience-1867754_960_720",
		tags: "events, event, social, gig, theatre, concert, performance, audience, crowd, band, electronic, lights"
	},
	{
		imageId: "audience-1868137_960_720",
		tags: "events, event, social, gig, theatre, concert, performance, audience, crowd, band, lights"
	},
	{
		imageId: "ballet-1376250_960_720",
		tags: "events, event, social, gig, theatre, concert, performance, dance, ballet, motion"
	},
	{
		imageId: "concert-336695_960_720",
		tags: "events, event, social, gig, theatre, concert, performance, audience, crowd, band, electronic, lights, rave"
	},
	{
		imageId: "concert-1149979_960_720",
		tags: "events, event, social, gig, theatre, concert, performance, audience, crowd, band, electronic, lights, rave"
	},
	{
		imageId: "smartphone-407108_960_720",
		tags: "events, event, social, gig, theatre, concert, performance, smartphone, phone, mobile, audience, crowd, lights"
	},
	{
		imageId: "staging-258631_960_720",
		tags: "events, event, social, gig, theatre, concert, performance, team, teamwork, stage"
	},
	{
		imageId: "theater-1477670_960_720",
		tags: "events, event, social, gig, theatre, concert, performance, seats, tickets"
	},
	{
		imageId: "adorable-1866531_960_720",
		tags: "family, social, community, kids, children, couch, home, community, dog, puppy, pets, pet"
	},
	{
		imageId: "adult-1807500_960_720",
		tags: "family, social, community, kids, children, beach, parent, girl, mom, mum, mother, sea, sun, sunset, happy, joy, waves"
	},
	{
		imageId: "crayons-1209804_960_720",
		tags: "family, social, community, art, kids, children, drawing, activity, school, creativity"
	},
	{
		imageId: "crayons-1445053_960_720",
		tags: "family, social, community, art, kids, children, drawing, activity, school, creativity"
	},
	{
		imageId: "family-4989137_960_720",
		tags: "family, social, community, mother, grandmother, grandparents, park, bench"
	},
	{
		imageId: "father-656734_960_720",
		tags: "family, social, community, kids, children, beach, father, girl, parent, sea, happy, joy, waves, community"
	},
	{
		imageId: "girl-1641215_960_720",
		tags: "family, social, community, kids, children, father, parent, girl, sea, black, study, community"
	},
	{
		imageId: "love-1536226_960_720",
		tags: "family, social, community, love, support, friend, friendship, coffee, companion"
	},
	{
		imageId: "park-3089907_960_720",
		tags: "family, social, community, kids, children, parent, mom, mum, mother, girl, happy, joy, park, garden"
	},
	{
		imageId: "person-731423_960_720",
		tags: "family, social, community, old, grandparent, grandmother, sky, desert, beach, dunes, bench, relax"
	},
	{
		imageId: "art-2436545_960_720",
		tags: "fantasy, fiction, dream, girl, child, bush, flowers, garden, red"
	},
	{
		imageId: "butterfly-2049567_960_720",
		tags: "fantasy, fiction, dream, butterflies, butterfly, mushroom, forest, blue"
	},
	{
		imageId: "fantasy-3452327_960_720",
		tags: "fantasy, fiction, dream, blue, girl, forest, snow"
	},
	{
		imageId: "landscape-4961094_960_720",
		tags: "fantasy, fiction, dream, lightning, clouds, storm, road, highway"
	},
	{
		imageId: "ocean-3605547_960_720",
		tags: "fantasy, fiction, dream, ocean, stars, boat, navigation"
	},
	{
		imageId: "railroad-tracks-163518_960_720",
		tags: "fantasy, fiction, dream, railroad, rail, railway, train, mist, clouds, journey, grass, dream"
	},
	{
		imageId: "science-fiction-1674554_960_720",
		tags: "fantasy, fiction, dream, sci-fi, science fiction, stars, nebula"
	},
	{
		imageId: "spaceship-3827558_960_720",
		tags: "fantasy, fiction, dream, sci-fi, science fiction, stars, space ship, craft, planet"
	},
	{
		imageId: "tree-4503535_960_720",
		tags: "fantasy, fiction, dream, tree, forest, woods"
	},
	{
		imageId: "admission-2974645_960_720",
		tags: "film, movies, cinema, ticket, tickets, admission, event"
	},
	{
		imageId: "film-102681_960_720",
		tags: "film, movies, cinema"
	},
	{
		imageId: "popcorn-1433327_960_720",
		tags: "film, movies, cinema, popcorn, snacks, lollies"
	},
	{
		imageId: "movie-918655_960_720",
		tags: "film, movies, cinema, movie, reels"
	},
	{
		imageId: "popcorn-4885565_960_720",
		tags: "film, movies, cinema, popcorn, snacks, netflix"
	},
	{
		imageId: "crossfit-534615_960_720",
		tags: "fitness, health, excercise, fit, gym, barbell, woman, lady, black"
	},
	{
		imageId: "fitness-594143_960_720",
		tags: "fitness, health, excercise, fit, gym, barbell, dumbell, black"
	},
	{
		imageId: "fitness-1882721_960_720",
		tags: "fitness, health, excercise, fit, gym, barbell, dumbell, black"
	},
	{
		imageId: "jogging-4211946_960_720",
		tags: "fitness, health, excercise, fit, run, park, jog, jogging"
	},
	{
		imageId: "people-2592247_960_720",
		tags: "fitness, health, excercise, fit, run, park, jog, jogging, girl, woman, lady"
	},
	{
		imageId: "surfing-1210040_960_720",
		tags: "fitness, health, excercise, fit, surf, surfing, beach, girl, woman, lady"
	},
	{
		imageId: "wave-1246560_960_720",
		tags: "fitness, health, excercise, fit, surf, surfing, wave"
	},
	{
		imageId: "yoga-1842292_960_720",
		tags: "fitness, health, excercise, fit, yoga, beach"
	},
	{
		imageId: "apple-1873078_960_720",
		tags: "food, cuisine, eat, fruit, orchard, apples, farm, nature, agriculture, produce"
	},
	{
		imageId: "bananas-698608_960_720",
		tags: "food, cuisine, eat, bananas, supermarket, produce"
	},
	{
		imageId: "blueberries-2278921_960_720",
		tags: "food, cuisine, eat, cooking, fruit, berries, produce"
	},
	{
		imageId: "bread-4077812_960_720",
		tags: "food, cuisine, eat, bread, cafe, bakery, bake, patisserie, croissant, croissants, baking"
	},
	{
		imageId: "breakfast-1804457_960_720",
		tags: "food, cuisine, eat, breakfast, cafe, gourmet, fruit"
	},
	{
		imageId: "coffee-2608864_960_720",
		tags: "food, cuisine, eat, coffe, notes"
	},
	{
		imageId: "cooking-2132874_960_720",
		tags: "food, cuisine, eat, cooking, patisserie, bakery, bake, eggs, baking, kitcken"
	},
	{
		imageId: "corn-syrup-563796_960_720",
		tags: "food, cuisine, eat, corn syrup, wheat"
	},
	{
		imageId: "eat-321671_960_720",
		tags: "food, cuisine, eat, cooking, tomatoes, basil, vinegar, italian, kitchen"
	},
	{
		imageId: "fruit-1534494_960_720",
		tags: "food, cuisine, eat, fruit, pears, orchard, farm, agriculture, produce"
	},
	{
		imageId: "fruit-3048001_960_720",
		tags: "food, cuisine, eat, fruit, orange, grapefruit, produce, farm, agriculture, produce"
	},
	{
		imageId: "grapes-690230_960_720",
		tags: "food, cuisine, eat, fruit, grapes, wine, winery, orchard, farm, agriculture, produce"
	},
	{
		imageId: "gummibarchen-318362_960_720",
		tags: "food, cuisine, eat, sweets, lollies, gummy bears, gummi, candy"
	},
	{
		imageId: "gummi-bears-8464_960_720",
		tags: "food, cuisine, eat, sweets, lollies, gummy bears, gummi, candy"
	},
	{
		imageId: "hamburger-494706_960_720",
		tags: "food, cuisine, eat, cafe, roll, basil, burger, hamburge, salad"
	},
	{
		imageId: "ice-cream-cone-1274894_960_720",
		tags: "food, cuisine, eat, ice cream, beach, summer"
	},
	{
		imageId: "jam-428094_960_720",
		tags: "food, cuisine, eat, jar, jars, preserves, jam"
	},
	{
		imageId: "olive-oil-968657_960_720",
		tags: "food, cuisine, eat, oil, olive, olives, olive oil, cooking, kitchen"
	},
	{
		imageId: "pancake-1984716_960_720",
		tags: "food, cuisine, eat, cooking, fruit, pancake, pancakes, breakfast, cafe, kitchen"
	},
	{
		imageId: "pancakes-2020863_960_720",
		tags: "food, cuisine, eat, pancake, pancakes, breakfast, cafe, kitchen, eggs"
	},
	{
		imageId: "pancakes-2291908_960_720",
		tags: "food, cuisine, eat, pancake, pancakes, breakfast, cafe, kitchen, fruit"
	},
	{
		imageId: "pasta-1181189_960_720",
		tags: "food, cuisine, eat, cooking, pasta, egg, flour, kitchen"
	},
	{
		imageId: "piza-3010062_960_720",
		tags: "food, cuisine, eat, cooking, pizza, restaurant, cafe, tomatoes, italian"
	},
	{
		imageId: "raspberry-2023404_960_720",
		tags: "food, cuisine, eat, cooking, fruit, flowers, kitchen, cafe"
	},
	{
		imageId: "salad-2756467_960_720",
		tags: "food, cuisine, eat, cooking, salad, bbq, kitchen, picnic, vegetables"
	},
	{
		imageId: "salmon-518032_960_720",
		tags: "food, cuisine, eat, cooking, meal, restaurant, salmon, dish"
	},
	{
		imageId: "shish-kebab-417994_960_720",
		tags: "food, cuisine, eat, cooking, salad, bbq, shish, kebab, vegetables"
	},
	{
		imageId: "top-view-1248955_960_720",
		tags: "food, cuisine, eat, cooking, kicken, bowl, basil"
	},
	{
		imageId: "vegetables-1085063_960_720",
		tags: "food, cuisine, eat, cooking, vegetables, salad, carrot, fruit, nuts"
	},
	{
		imageId: "vegetables-1584999_960_720",
		tags: "food, cuisine, eat, cooking, vegetables, salad, broccoli, peppers, tomato"
	},
	{
		imageId: "waffles-2190961_960_720",
		tags: "food, cuisine, eat, cooking, waffles, kitchen, eggs"
	},
	{
		imageId: "board-761586_960_720",
		tags: "gaming, games, game, activity, board game"
	},
	{
		imageId: "chess-1215079_960_720",
		tags: "gaming, games, game, activity, chess, board game"
	},
	{
		imageId: "computer-1845880_960_720",
		tags: "gaming, games, game, activity, video game, computer game, console game, controller, tv, lounge"
	},
	{
		imageId: "doors-1587329_960_720",
		tags: "gaming, games, game, activity, doors, puzzle, hall, hallway, door"
	},
	{
		imageId: "game-2294201_960_720",
		tags: "gaming, games, game, activity, video game, computer game, console game, controller"
	},
	{
		imageId: "magic-cube-378543_960_720",
		tags: "gaming, games, game, activity, magic, rubix cube, cube, puzzle"
	},
	{
		imageId: "maze-2264_960_720",
		tags: "gaming, games, game, activity, maze, puzzle, adventure, lost"
	},
	{
		imageId: "tunnel-3233082_960_720",
		tags: "gaming, games, game, activity, computer game, video game, tunnel, future, futuristic, space"
	},
	{
		imageId: "gadgets-336635_960_720",
		tags: "gear, accessories, wallet, glasses, sunglasses, tie, notebook, watch, headphones, phone, devices"
	},
	{
		imageId: "alley-1690053_960_720",
		tags: "home, house, street, alley, italian, mediterranean, ivy, travel, street, ancient, architecture"
	},
	{
		imageId: "autumn-2021154_960_720",
		tags: "home, house, autumn, lake, lakeside, reflection, red, orange, cabin, woods, lodge, retreat, escape"
	},
	{
		imageId: "boat-house-192990_960_720",
		tags: "home, house, lake, boat house, stone, lakeside, cabin, lodge, isolation, retreat, escape"
	},
	{
		imageId: "brick-wall-1834784_960_720",
		tags: "home, house, kitchen, dining, table, modern, apartment, flat, decor, brick, wall, cozy"
	},
	{
		imageId: "cabin-1082063_960_720",
		tags: "home, house, horror, shed, spooky, snow, forest, remote, isolation, cabin, lodge, retreat, escape, light"
	},
	{
		imageId: "carpet-1853203_960_720",
		tags: "home, house, lounge, couch, rug, decor, flat, apartment"
	},
	{
		imageId: "chair-1840526_960_720",
		tags: "home, house, conservatory, escape, remote, isolation, plants, cozy, meditate, mindful, flat, apartment"
	},
	{
		imageId: "chair-1845270_960_720",
		tags: "home, house, lounge, table, couch, decor"
	},
	{
		imageId: "chairs-2181947_960_720",
		tags: "home, house, lounge, dining, apartment, table, modern, decor"
	},
	{
		imageId: "couch-1835923_960_720",
		tags: "home, house, lounge, couch, decor, flat, apartment"
	},
	{
		imageId: "country-house-540796_960_720",
		tags: "home, house"
	},
	{
		imageId: "furniture-998265_960_720",
		tags: "home, house, lounge, decor"
	},
	{
		imageId: "golden-791072_960_720",
		tags: "home, house, books, decor, meditate, mindful, flat, apartment"
	},
	{
		imageId: "hand-washing-4818792_960_720",
		tags: "home, house, washing, wash, hands, clean"
	},
	{
		imageId: "home-2609600_960_720",
		tags: "home, house, plants, relax, decor, cozy, meditate, mindful, flat, apartment"
	},
	{
		imageId: "house-4028391_960_720",
		tags: "home, house, seaside, remote, escape"
	},
	{
		imageId: "light-1603766_960_720",
		tags: "home, house, lights, dark, decor"
	},
	{
		imageId: "living-room-690174_960_720",
		tags: "home, house, lounge, couch, coffee table, coffee, cozy, flat, apartment"
	},
	{
		imageId: "log-cabin-1886620_960_720",
		tags: "home, house, forest, cozy, remote, shed, isolation, cabin, lodge, retreat, escape"
	},
	{
		imageId: "pots-716579_960_720",
		tags: "home, house, plants, cactus, succulents, flat, apartment"
	},
	{
		imageId: "rustic-945421_960_720",
		tags: "home, house, mountain, nordic, shed, remote, isolation, cabin, lodge, retreat, escape"
	},
	{
		imageId: "still-life-562357_960_720",
		tags: "home, house, fruit, still life, jug"
	},
	{
		imageId: "tea-rose-corolla-1871837_960_720",
		tags: "home, house, tea, glass, flower, cozy, relax, meditate, mindful, flat, apartment"
	},
	{
		imageId: "analysis-2030261_960_720",
		tags: "medical, medicine, doctor, microscope, lab, science, test"
	},
	{
		imageId: "analysis-2030265_960_720",
		tags: "medical, medicine, doctor, microscope, lab, science, test"
	},
	{
		imageId: "anesthesia-4677401_960_720",
		tags: "medical, medicine, doctor, nurse, doctor, anesthesia, hospital"
	},
	{
		imageId: "bacteria-808158_960_720",
		tags: "medical, medicine, doctor, bacteria, micro"
	},
	{
		imageId: "koli-bacteria-123081_960_720",
		tags: "medical, medicine, doctor, bacteria, micro"
	},
	{
		imageId: "lab-217043_960_720",
		tags: "medical, medicine, doctor, lab, science, test"
	},
	{
		imageId: "medic-563423_960_720",
		tags: "medical, medicine, doctor, lab, science, test"
	},
	{
		imageId: "medications-257336_960_720",
		tags: "medical, medicine, doctor, medication, drugs, pills"
	},
	{
		imageId: "medications-257346_960_720",
		tags: "medical, medicine, doctor, medication, drugs, pills"
	},
	{
		imageId: "mite-67638_960_720",
		tags: "medical, medicine, doctor, mite, micro"
	},
	{
		imageId: "stethoscope-840125_960_720",
		tags: "medical, medicine, doctor, stethoscope, doctor, hospital, gp, drugs, medication, test"
	},
	{
		imageId: "audio-1844798_960_720",
		tags: "music, performance, audio, sing, singing, record, recording, compose"
	},
	{
		imageId: "book-3510326_960_720",
		tags: "music, performance, book"
	},
	{
		imageId: "classical-music-1838390_960_720",
		tags: "music, performance, orchestra, live, violin"
	},
	{
		imageId: "dark-1850120_960_720",
		tags: "music, performance, dj, live, turntable, gig, event"
	},
	{
		imageId: "dj-720589_960_720",
		tags: "music, performance, dj, live, gig, event"
	},
	{
		imageId: "electronics-1845272_960_720",
		tags: "music, performance, dj, record, turntable, live, gig, event"
	},
	{
		imageId: "elvis-presley-1482026_960_720",
		tags: "music, performance, elvis, speakers, amps"
	},
	{
		imageId: "guitar-756326_960_720",
		tags: "music, performance, guitar, live, acoustic, country"
	},
	{
		imageId: "guitar-869217_960_720",
		tags: "music, performance, guitar, live, acoustic"
	},
	{
		imageId: "headphone-1868612_960_720",
		tags: "music, performance, headphones"
	},
	{
		imageId: "headphones-690685_960_720",
		tags: "music, performance, headphones"
	},
	{
		imageId: "mic-1132528_960_720",
		tags: "music, performance, microphone, recording, live, band, sing, singing"
	},
	{
		imageId: "microphone-2130806_960_720",
		tags: "music, performance, microphone, recording, live, sing, singing"
	},
	{
		imageId: "mixing-desk-351478_960_720",
		tags: "music, performance, dj, mixing, audio, recording, live, event"
	},
	{
		imageId: "music-1285165_960_720",
		tags: "music, performance, tape, cassette"
	},
	{
		imageId: "musician-349790_960_720",
		tags: "music, performance, guitar, live, acoustic, country, banjo"
	},
	{
		imageId: "piano-349928_960_720",
		tags: "music, performance, piano, live"
	},
	{
		imageId: "piano-801707_960_720",
		tags: "music, performance, piano, live"
	},
	{
		imageId: "piano-1655558_960_720",
		tags: "music, performance, piano, live, sheet"
	},
	{
		imageId: "piano-1846719_960_720",
		tags: "music, performance, piano, live"
	},
	{
		imageId: "piano-3505109_960_720",
		tags: "music, performance, piano, live"
	},
	{
		imageId: "record-336626_960_720",
		tags: "music, performance, turntable, record, dj"
	},
	{
		imageId: "record-player-1851576_960_720",
		tags: "music, performance, turntable, record, dj"
	},
	{
		imageId: "saxophone-546303_960_720",
		tags: "music, performance, jazz, live, band, sax, saxophone, brass"
	},
	{
		imageId: "table-1284507_960_720",
		tags: "music, performance, dj, mixing, recording, audio, live, event"
	},
	{
		imageId: "turntable-1337986_960_720",
		tags: "music, performance, dj, mixing, record, audio, live, desktop, computer, event, compose"
	},
	{
		imageId: "violin-374096_960_720",
		tags: "music, performance, orchestra, live, violin"
	},
	{
		imageId: "background-4561421_960_720",
		tags: "nature, plants, grass, grasses, pattern, texture"
	},
	{
		imageId: "conifer-1867371_960_720",
		tags: "nature, conifer, tress, forset leaves, pattern, texture, green"
	},
	{
		imageId: "conservatory-4161955_960_720",
		tags: "nature, conservatory, garden, greenhouse, glasshouse, atrium, plants, ferns"
	},
	{
		imageId: "forest-272595_960_720",
		tags: "nature, forest, tress, green"
	},
	{
		imageId: "forest-1245951_960_720",
		tags: "nature, forest, trees, green, environment, sky"
	},
	{
		imageId: "leaf-409258_960_720",
		tags: "nature, leaf, leaves, autumn"
	},
	{
		imageId: "leaf-1001679_960_720",
		tags: "nature, leaf, leaves, green, water, drops, wet, agriculture, farming, farm, plants, nuture, grow, growing, nursery"
	},
	{
		imageId: "leaf-1482948_960_720",
		tags: "nature, leaf, leaves, clover, luck, green, agriculture, farming, farm, plants, nuture, grow, growing, nursery"
	},
	{
		imageId: "leaves-4818626_960_720",
		tags: "nature, leaf, leaves, dark, brown"
	},
	{
		imageId: "light-1853025_960_720",
		tags: "nature, plant, pod, grow, glow, seed, light, gold, brown"
	},
	{
		imageId: "lights-1867437_960_720",
		tags: "nature, plants, grow, conservatory, green, hanging, lights, lamps, growth, nursery, incubation, incubator"
	},
	{
		imageId: "nature-4974546_960_720",
		tags: "nature, flowers, white, cherry blossom"
	},
	{
		imageId: "plumeria-4887944_960_720",
		tags: "nature, flowers, white, yellow, plumeria"
	},
	{
		imageId: "sandstone-467714_960_720",
		tags: "nature, stone, sandstone, canyon"
	},
	{
		imageId: "state-of-the-union-4291098_960_720",
		tags: "nature, leaves, trees, light, glow, growth, environment, eco, ecology, environmental, peace, meditation, mindfulness, relax"
	},
	{
		imageId: "tree-1209774_960_720",
		tags: "nature, tree, trees, forest, jungle, nursery, light, glow, growth, environment, eco, ecology, environmental, peace, meditation, mindfulness, relax"
	},
	{
		imageId: "amsterdam-1150319_960_720",
		tags: "night, amsterdam, canal, boats, lights, city"
	},
	{
		imageId: "clouds-323426_960_720",
		tags: "night, clouds, moon, sky, full moon"
	},
	{
		imageId: "cloudy-1869753_960_720",
		tags: "night, clouds, moon, sky, full moon"
	},
	{
		imageId: "fire-123784_960_720",
		tags: "night, fire, bonfire, beach, swamp"
	},
	{
		imageId: "forest-1031022_960_720",
		tags: "night, forest, myst, trees, horror, spooky"
	},
	{
		imageId: "lighthouse-4846854_960_720",
		tags: "night, lighthouse, clouds, search"
	},
	{
		imageId: "lights-1088141_960_720",
		tags: "night, candels, lanterns, lights, wish, dreams"
	},
	{
		imageId: "milky-way-923738_960_720",
		tags: "night, desert, cactuses, sky, milky way, galaxy, stars"
	},
	{
		imageId: "milky-way-984050_960_720",
		tags: "night, forest, sky, milky way, galaxy, stars"
	},
	{
		imageId: "moon-2762111_960_720",
		tags: "night, sea, ocean, reflection, moon, full moon"
	},
	{
		imageId: "nature-3194001_960_720",
		tags: "night, forest, valley, trees, moon, full moon"
	},
	{
		imageId: "night-4702174_960_720",
		tags: "night, forest, valley, mountains, moon, fog, mist, full moon"
	},
	{
		imageId: "sky-1246033_960_720",
		tags: "night, sky, clouds, mists, fog, stars"
	},
	{
		imageId: "stars-1246590_960_720",
		tags: "night, stars, sky, galaxy"
	},
	{
		imageId: "thunderbolt-1905603_960_720",
		tags: "night, sky, lightening, clouds, thunder, ocean, waves, sea"
	},
	{
		imageId: "tree-736877_960_720",
		tags: "night, cat, silhouette, orange, red, blood, moon, full moon"
	},
	{
		imageId: "chairs-2181960_960_720",
		tags: "office, studio, business, chairs, boardroom, meeting, meeting room, table, team"
	},
	{
		imageId: "computer-2982270_960_720",
		tags: "office, studio, business, desktop, laptop, computer, desk, table top, tech, technology, headphones, project"
	},
	{
		imageId: "conference-room-768441_960_720",
		tags: "office, studio, business, chairs, boardroom, meeting, meeting room, team, table"
	},
	{
		imageId: "desk-3076954_960_720",
		tags: "office, studio, business, desktop, notebook, notes, mobile, project"
	},
	{
		imageId: "furniture-1840463_960_720",
		tags: "office, studio, business, table, meeting, chairs, team, project"
	},
	{
		imageId: "laptop-1478822_960_720",
		tags: "office, studio, business, desktop, laptop, computer, tech, technology, desk, table top, notes, project"
	},
	{
		imageId: "macbook-336704_960_720",
		tags: "office, studio, business, laptop, glasses, computer, table, meeting, meeting room, team"
	},
	{
		imageId: "meeting-2284501_960_720",
		tags: "office, studio, business, colleague, team, table, meeting, meeting room, planning, project"
	},
	{
		imageId: "office-1081807_960_720",
		tags: "office, studio, business, colleague, team, laptop, computer, tech, technology, meeting, planning, project"
	},
	{
		imageId: "office-1834294_960_720",
		tags: "office, studio, business, creative, team, tech, technology, meeting, planning, project"
	},
	{
		imageId: "startup-593327_960_720",
		tags: "office, studio, business, laptop, notes, startup, computer, tech, technology, meeting, planning, project"
	},
	{
		imageId: "startup-593341_960_720",
		tags: "office, studio, business, colleague, team, startup, laptop, notes, computer, tech, technology, meeting, planning, project"
	},
	{
		imageId: "startup-594090_960_720",
		tags: "office, studio, business, colleague, team, startup, laptop, notes, computer, tech, technology, meeting, planning, project"
	},
	{
		imageId: "student-849824_960_720",
		tags: "office, studio, business, colleague, student, team, creative, startup, laptop, computer, tech, technology, meeting, planning, project, university"
	},
	{
		imageId: "work-731198_960_720",
		tags: "office, studio, business, laptop, startup, computer, coding, programming, code, coffee, tech, web, technology, project"
	},
	{
		imageId: "writing-336370_960_720",
		tags: "office, studio, business, colleague, team, startup, laptop, notes, computer, tech, technology, meeting, planning, project"
	},
	{
		imageId: "writing-1149962_960_720",
		tags: "office, studio, business, colleague, managment, paperwork, document, notes, meeting, planning"
	},
	{
		imageId: "young-791849_960_720",
		tags: "office, studio, business, colleague, managment, scheduling, paperwork, document, notes, meeting, planning, projet"
	},
	{
		imageId: "eye-1132531_960_720",
		tags: "people, person, human, eye, girl, child, young, green, female"
	},
	{
		imageId: "eye-4559763_960_720",
		tags: "people, person, human, eye, girl, child, young, brown, female"
	},
	{
		imageId: "girl-2119595_960_720",
		tags: "people, person, human, eye, girl, child, young, green, female"
	},
	{
		imageId: "guy-2617866_960_720",
		tags: "people, person, human, man, guy, boy, sad, depressed, upset, stress, social, mental, health, hands"
	},
	{
		imageId: "people-2561053_960_720",
		tags: "people, person, human, friendship, relationship, sunset, happy, joy, happiness"
	},
	{
		imageId: "people-2563491_960_720",
		tags: "people, person, human, girl, woman, lady, shy, face, eyes"
	},
	{
		imageId: "skin-3358873_960_720",
		tags: "people, person, human, old, skin, eye, wrinkled"
	},
	{
		imageId: "blonde-629726_960_720",
		tags: "photography, photo, camera, girl, lady, woman, female, lens"
	},
	{
		imageId: "camera-581126_960_720",
		tags: "photography, photo, camera, lens"
	},
	{
		imageId: "camera-711025_960_720",
		tags: "photography, photo, camera, vintage, classic, lens"
	},
	{
		imageId: "camera-711040_960_720",
		tags: "photography, photo, camera, vintage, classic, black, lens"
	},
	{
		imageId: "camera-820018_960_720",
		tags: "photography, photo, camera, lens"
	},
	{
		imageId: "camera-1239384_960_720",
		tags: "photography, photo, camera, lens"
	},
	{
		imageId: "camera-1246655_960_720",
		tags: "photography, photo, camera"
	},
	{
		imageId: "camera-2598507_960_720",
		tags: "photography, photo, camera, lens"
	},
	{
		imageId: "filmstrip-1850277_960_720",
		tags: "photography, photo, camera, film"
	},
	{
		imageId: "lens-1209823_960_720",
		tags: "photography, photo, camera, scenic, lens"
	},
	{
		imageId: "lens-3046269_960_720",
		tags: "photography, photo, camera, scenic, park, lens"
	},
	{
		imageId: "photo-camera-219958_960_720",
		tags: "photography, photo, camera, vintage, classic, film, lens"
	},
	{
		imageId: "photographer-455747_960_720",
		tags: "photography, photo, camera, lens"
	},
	{
		imageId: "photographer-3672010_960_720",
		tags: "photography, photo, camera, photographer, travel"
	},
	{
		imageId: "photographers-1150033_960_720",
		tags: "photography, photo, camera, photographer, travel"
	},
	{
		imageId: "photography-801891_960_720",
		tags: "photography, photo, camera, photographer, event, smartphone"
	},
	{
		imageId: "photography-1850469_960_720",
		tags: "photography, photo, camera, studio, lighting"
	},
	{
		imageId: "yashica-711794_960_720",
		tags: "photography, photo, camera, lens, tint"
	},
	{
		imageId: "anemones-4984095_960_720",
		tags: "scenery, landscape, nature, plants, flower, flowers, tree, forest"
	},
	{
		imageId: "creek-593146_960_720",
		tags: "scenery, landscape, creek, river, rocks, nature"
	},
	{
		imageId: "dawn-190055_960_720",
		tags: "scenery, landscape, sky, trails, contrails, mountains, mountain, clouds, sun, altitude"
	},
	{
		imageId: "forest-931706_960_720",
		tags: "scenery, landscape, forest, misty, mist, nature"
	},
	{
		imageId: "forest-1245692_960_720",
		tags: "scenery, landscape, forest, misty, mist, tree"
	},
	{
		imageId: "forest-3686910_960_720",
		tags: "scenery, landscape, forest, misty, mist, trees, nature"
	},
	{
		imageId: "hills-889131_960_720",
		tags: "scenery, landscape, forest, misty, mist, mountains, valley, sun"
	},
	{
		imageId: "laguna-4899802_960_720",
		tags: "scenery, landscape, lake, boat, boats, crystal, clear, water, mountains, valley"
	},
	{
		imageId: "landscape-4547734_960_720",
		tags: "scenery, landscape, lake, mist, misty, fog, valley, hills, trees, autumn, nature"
	},
	{
		imageId: "landscape-4978065_960_720",
		tags: "scenery, landscape, seaside, cliffs, sky, ocean, sea"
	},
	{
		imageId: "landscape-4990126_960_720",
		tags: "scenery, landscape, lakeside, park, trees, lake, reflection"
	},
	{
		imageId: "mountain-690104_960_720",
		tags: "scenery, landscape, mountains, snow, storm, stormy"
	},
	{
		imageId: "nature-3092017_960_720",
		tags: "scenery, landscape, forest, nature, trees"
	},
	{
		imageId: "nature-3125912_960_720",
		tags: "scenery, landscape, forest, nature, trees, sunset, sunrise, field, light"
	},
	{
		imageId: "nature-3150822_960_720",
		tags: "scenery, landscape, hills, mountain, clouds, nature"
	},
	{
		imageId: "river-977476_960_720",
		tags: "scenery, landscape, lake, swamp, river, misty, mist, nature"
	},
	{
		imageId: "plume-2428666_960_720",
		tags: "scenery, landscape, field, sunset, light"
	},
	{
		imageId: "pier-407252_960_720",
		tags: "scenery, landscape, pier, lake, jetty"
	},
	{
		imageId: "sea-4955005_960_720",
		tags: "scenery, landscape, sea, ocean, sky, sunset, sunrise"
	},
	{
		imageId: "sunrise-4987384_960_720",
		tags: "scenery, landscape, sea, ocean, sky, sunset, sunrise, coast, rd"
	},
	{
		imageId: "sunset-675847_960_720",
		tags: "scenery, landscape, sea, ocean, sky, sunset, sunrise, boat, ship, galleon, pirate"
	},
	{
		imageId: "sunset-3325080_960_720",
		tags: "scenery, landscape, mountain, valley, hills, sky, sunset, sunrise, clouds"
	},
	{
		imageId: "tree-736875_960_720",
		tags: "scenery, landscape, tree, field, clouds, sky, orange, sunset, sunrise"
	},
	{
		imageId: "winter-4987283_960_720",
		tags: "scenery, landscape, tree, field, snow, sun, light, winter, country"
	},
	{
		imageId: "wood-4885659_960_720",
		tags: "scenery, landscape, tree, misty, mist, light, sunset, sunrise, country, nature"
	},
	{
		imageId: "woods-945405_960_720",
		tags: "scenery, landscape, forest, trees, path, green, nature"
	},
	{
		imageId: "knowledge-1052011_960_720",
		tags: "science, study, knowledge, research, book, map, study, discover, glasses"
	},
	{
		imageId: "lightbulb-1875247_960_720",
		tags: "science, study, lightbulb, idea, invention, 3d"
	},
	{
		imageId: "apocalypse-2273069_960_720",
		tags: "scifi, sci-fi, science fiction, apocalypse, armageddon, fire, burn, post apocalypse, destruction, explosion"
	},
	{
		imageId: "apocalypse-2921093_960_720",
		tags: "scifi, sci-fi, science fiction, apocalypse, city, burn, post apocalypse, zombie, destruction, nuclear"
	},
	{
		imageId: "apocalyptic-374208_960_720",
		tags: "scifi, sci-fi, science fiction, apocalypse, armageddon, city, burn, post apocalypse, bomb, bombs, destruction, nuclear"
	},
	{
		imageId: "armageddon-2721568_960_720",
		tags: "scifi, sci-fi, science fiction, apocalypse, armageddon, city, burn, post apocalypse, destruction, nuclear"
	},
	{
		imageId: "city-1420442_960_720",
		tags: "scifi, sci-fi, science fiction, apocalypse, armageddon, city, burn, post apocalypse, destruction, nuclear"
	},
	{
		imageId: "city-2444516_960_720",
		tags: "scifi, sci-fi, science fiction, apocalypse, armageddon, city, burn, post apocalypse, destruction, nuclear"
	},
	{
		imageId: "explosion-123690_960_720",
		tags: "scifi, sci-fi, science fiction, apocalypse, armageddon, fire, burn, destruction, post apocalypse, explosion"
	},
	{
		imageId: "fireball-422746_960_720",
		tags: "scifi, sci-fi, science fiction, apocalypse, armageddon, fire, burn, destruction, post apocalypse, explosion"
	},
	{
		imageId: "render-3617341_960_720",
		tags: "scifi, sci-fi, science fiction, apocalypse, armageddon, city, building, post apocalypse, destruction, futuristic, future"
	},
	{
		imageId: "train-1277167_960_720",
		tags: "scifi, sci-fi, science fiction, train, destroyed, ruin, apocalypse, armageddon, post apocalypse, destruction, futuristic"
	},
	{
		imageId: "abstract-2384_960_720",
		tags: "sea, ocean, waves, water, ripples, calm, beach, travel, relax"
	},
	{
		imageId: "beach-1867285_960_720",
		tags: "sea, ocean, waves, sunset"
	},
	{
		imageId: "beach-2089936_960_720",
		tags: "sea, ocean, waves, cliffs, shore"
	},
	{
		imageId: "california-1751455_960_720",
		tags: "sea, ocean, waves, beach"
	},
	{
		imageId: "jellyfish-698521_960_720",
		tags: "sea, ocean, marine, jellyfish, underwater, nature"
	},
	{
		imageId: "sea-79606_960_720",
		tags: "sea, ocean, marine, diving, camera, nature, underwater"
	},
	{
		imageId: "sea-192988_960_720",
		tags: "sea, ocean, beach, shore, rocks"
	},
	{
		imageId: "sea-1337565_960_720",
		tags: "sea, ocean, beach, sand, starfish, shells, shore"
	},
	{
		imageId: "wave-3473335_960_720",
		tags: "sea, ocean, waves"
	},
	{
		imageId: "astronomy-1850461_960_720",
		tags: "space, astronomy, astrology, astronomy, stars, milky way, galaxy"
	},
	{
		imageId: "blood-moon-3572336_960_720",
		tags: "space, astronomy, astrology, moon, red, night, blood, full moon"
	},
	{
		imageId: "earth-11014_960_720",
		tags: "space, astronomy, astrology, earth, moon, planet"
	},
	{
		imageId: "eclipse-1492818_960_720",
		tags: "space, astronomy, astrology, eclipse, sun, sci-fi"
	},
	{
		imageId: "galaxy-3608029_960_720",
		tags: "space, astronomy, astrology, earth, planet, stars, galaxy, nebula"
	},
	{
		imageId: "lunar-eclipse-3568835_960_720",
		tags: "space, astronomy, astrology, moon, eclipse"
	},
	{
		imageId: "moon-416973_960_720",
		tags: "space, astronomy, astrology, moon, full moon"
	},
	{
		imageId: "moon-1031483_960_720",
		tags: "space, astronomy, astrology, moon"
	},
	{
		imageId: "moon-1527501_960_720",
		tags: "space, astronomy, astrology, moon"
	},
	{
		imageId: "orion-nebula-11107_960_720",
		tags: "space, astronomy, astrology, nebula, stars, galaxy, orion"
	},
	{
		imageId: "satellite-1030779_960_720",
		tags: "space, astronomy, astrology, earth, satellite, clouds, weather"
	},
	{
		imageId: "solar-system-11188_960_720",
		tags: "space, astronomy, astrology, galaxy, stars, black hole, super nova"
	},
	{
		imageId: "soccer-768685_960_720",
		tags: "sport, soccer, stadium"
	},
	{
		imageId: "the-ball-488700_960_720",
		tags: "sport, soccer, ball, stadium"
	},
	{
		imageId: "apple-1868496_960_720",
		tags: "technology, tech, computer, lamp, tabletop, desktop, desk, office, home, mac"
	},
	{
		imageId: "code-1839406_960_720",
		tags: "technology, tech, computer, code, software, programming, project"
	},
	{
		imageId: "coding-1853305_960_720",
		tags: "technology, tech, computer, code, software, programming, laptop, project"
	},
	{
		imageId: "computer-1245714_960_720",
		tags: "technology, tech, computer, code, software, programming, laptop, monitor, desk, desktop"
	},
	{
		imageId: "gears-1236578_960_720",
		tags: "technology, tech, gears, machine, cogs, mechanism, mechanical"
	},
	{
		imageId: "home-office-1867761_960_720",
		tags: "technology, tech, computer, tabletop, desktop, desk, office, home, project"
	},
	{
		imageId: "ipad-1126136_960_720",
		tags: "technology, tech, ipad, tablet, kids, children, school, education, educational, learning, game, games, teaching"
	},
	{
		imageId: "jet-engine-371412_960_720",
		tags: "technology, tech, engine, engineering, jet, air, plane"
	},
	{
		imageId: "lamp-3489395_960_720",
		tags: "technology, tech, lamp, light, bulb, light bulb, ideas, electriciy, electric"
	},
	{
		imageId: "macro-1452987_960_720",
		tags: "technology, tech, watch, mechanism, cogs, gears"
	},
	{
		imageId: "man-1718099_960_720",
		tags: "technology, tech, man, guy, ipad, tablet, productivity, app, business"
	},
	{
		imageId: "notebook-405755_960_720",
		tags: "technology, tech, computer, laptop, outside, park"
	},
	{
		imageId: "notebook-614213_960_720",
		tags: "technology, tech, computer, laptop, business, coffee, app, schedule, planning, managment, meeting, project"
	},
	{
		imageId: "office-620822_960_720",
		tags: "technology, tech, computer, laptop, business, phone, mobile, device, app, schedule, planning, managment, meeting"
	},
	{
		imageId: "person-731479_960_720",
		tags: "technology, tech, computer, report, ipad, tablet, business, planning"
	},
	{
		imageId: "solar-panels-1794467_960_720",
		tags: "technology, tech, solar, power, energy, green"
	},
	{
		imageId: "technology-792180_960_720",
		tags: "technology, tech, ipad, tablet, app, coffee, design, project"
	},
	{
		imageId: "turntable-1109588_960_720",
		tags: "technology, tech, dj, music, laptop, desktop, mixing, project"
	},
	{
		imageId: "ux-788002_960_720",
		tags: "technology, tech, creative, creativity, design, app, planning, ideas, ideation, ux, app, software, project"
	},
	{
		imageId: "workplace-2303851_960_720",
		tags: "technology, tech, workspace, keyboard, headphones, tools, desk, desktop"
	},
	{
		imageId: "airport-2373727_960_720",
		tags: "travel, international, holiday, vacation, airport"
	},
	{
		imageId: "automobile-1853936_960_720",
		tags: "travel, international, holiday, vacation, car, vintage, coke, beach, lady, woman, hippy, trip, road trip, summer"
	},
	{
		imageId: "bagan-1137015_960_720",
		tags: "travel, international, holiday, vacation, balloons, myanmar, misty, mist"
	},
	{
		imageId: "beach-84533_960_720",
		tags: "travel, international, holiday, vacation, cocktail, beach, bar, ocean, sea, seaside, resort"
	},
	{
		imageId: "beach-832346_960_720",
		tags: "travel, international, holiday, vacation, beach, ocean, sea, summer"
	},
	{
		imageId: "beach-1236581_960_720",
		tags: "travel, international, holiday, vacation, beach"
	},
	{
		imageId: "beach-2179183_960_720",
		tags: "travel, international, holiday, vacation, beach, waves, ocean, sea"
	},
	{
		imageId: "biker-407123_960_720",
		tags: "travel, international, holiday, vacation, motorbike, riding, ride, country, trip"
	},
	{
		imageId: "boats-2758962_960_720",
		tags: "travel, international, holiday, vacation, boat, yacht, ocean, mist, misty"
	},
	{
		imageId: "boots-181744_960_720",
		tags: "travel, international, holiday, vacation, boots, adventure, train, tracks, hiking"
	},
	{
		imageId: "camera-514992_960_720",
		tags: "travel, international, holiday, vacation, camea, photos, suitcase"
	},
	{
		imageId: "canal-1209808_960_720",
		tags: "travel, international, holiday, vacation, canal, venice, purple, sunset, boats"
	},
	{
		imageId: "cinque-terre-828614_960_720",
		tags: "travel, international, holiday, vacation, italy, cliffs, seaside, evening"
	},
	{
		imageId: "cuba-1638594_960_720",
		tags: "travel, international, holiday, vacation, cuba, street, classic, vintage"
	},
	{
		imageId: "dock-1365387_960_720",
		tags: "travel, international, holiday, vacation, dock, pier, jetty, lake"
	},
	{
		imageId: "florence-1066314_960_720",
		tags: "travel, international, holiday, vacation, italy, church, florence"
	},
	{
		imageId: "girl-429380_960_720",
		tags: "travel, international, holiday, vacation, ocean, waves, girl, woman, lady, beach"
	},
	{
		imageId: "go-pro-1478810_960_720",
		tags: "travel, international, holiday, vacation, gopro, adventure, summer"
	},
	{
		imageId: "holiday-2880261_960_720",
		tags: "travel, international, holiday, vacation, camera, adventure, summer"
	},
	{
		imageId: "japan-2014617_960_720",
		tags: "travel, international, holiday, vacation, japan, street, city, night, noir"
	},
	{
		imageId: "japan-2014618_960_720",
		tags: "travel, international, holiday, vacation, japan, street, city, night, noir, wet, rain, rainy, cyperpunk"
	},
	{
		imageId: "jetty-1373173_960_720",
		tags: "travel, international, holiday, vacation, jetty, ocean, seaside"
	},
	{
		imageId: "lighthouse-1872998_960_720",
		tags: "travel, international, holiday, vacation, lighthouse, shore, sea"
	},
	{
		imageId: "london-530055_960_720",
		tags: "travel, international, holiday, vacation, london"
	},
	{
		imageId: "louvre-102840_960_720",
		tags: "travel, international, holiday, vacation, paris, louvre, art"
	},
	{
		imageId: "maldives-1993704_960_720",
		tags: "travel, international, holiday, vacation, maldives, island, beach, tropical, sea, ocean"
	},
	{
		imageId: "map-4896141_960_720",
		tags: "travel, international, holiday, vacation, compass, map, navigation, coins, key"
	},
	{
		imageId: "mosque-615415_960_720",
		tags: "travel, international, holiday, vacation, mosque"
	},
	{
		imageId: "motorcycles-3045706_960_720",
		tags: "travel, international, holiday, vacation, bike, motorcycle, mural, woman, lady, adventure"
	},
	{
		imageId: "new-zealand-4355349_960_720",
		tags: "travel, international, holiday, vacation, new zealand, mountains, jetty, pier, lake, evening"
	},
	{
		imageId: "oia-416135_960_720",
		tags: "travel, international, holiday, vacation, greece, cliffs, town, village"
	},
	{
		imageId: "oia-416136_960_720",
		tags: "travel, international, holiday, vacation, greece, cliffs, town, village"
	},
	{
		imageId: "old-1130731_960_720",
		tags: "travel, international, holiday, vacation, camera, photos, , discover"
	},
	{
		imageId: "old-1130743_960_720",
		tags: "travel, international, holiday, vacation, glasses, diary, photos, map, discover"
	},
	{
		imageId: "photographer-407068_960_720",
		tags: "travel, international, holiday, vacation, camera, woman, lady, photographer"
	},
	{
		imageId: "polynesia-3021072_960_720",
		tags: "travel, international, holiday, vacation, polynesia, island, sea, kayak, tropical, beach"
	},
	{
		imageId: "road-166543_960_720",
		tags: "travel, international, holiday, vacation, road, road trip"
	},
	{
		imageId: "road-1303617_960_720",
		tags: "travel, international, holiday, vacation, road, road trip, desert"
	},
	{
		imageId: "sea-2562563_960_720",
		tags: "travel, international, holiday, vacation, beach, sea"
	},
	{
		imageId: "starfish-343791_960_720",
		tags: "travel, international, holiday, vacation, beach, sand, starfish"
	},
	{
		imageId: "street-381227_960_720",
		tags: "travel, international, holiday, vacation, road, road trip, desert"
	},
	{
		imageId: "street-4942809_960_720",
		tags: "travel, international, holiday, vacation, street, night, village, town"
	},
	{
		imageId: "sunrise-1014710_960_720",
		tags: "travel, international, holiday, vacation, evening, night, fishing, sea, purple"
	},
	{
		imageId: "sunrise-1014712_960_720",
		tags: "travel, international, holiday, vacation, evening, night, fishing, sea, purple"
	},
	{
		imageId: "train-1728537_960_720",
		tags: "travel, international, holiday, vacation, train, bridge"
	},
	{
		imageId: "train-3169964_960_720",
		tags: "travel, international, holiday, vacation, train, station"
	},
	{
		imageId: "travel-1209355_960_720",
		tags: "travel, international, holiday, vacation, passport, map, magnifying, wine, discover"
	},
	{
		imageId: "winding-road-1556177_960_720",
		tags: "travel, international, holiday, vacation, road, road trip, sunset"
	},
	{
		imageId: "yellow-mountains-532857_960_720",
		tags: "travel, international, holiday, vacation, mountains, coast, landscape, scenery, clouds"
	},
	{
		imageId: "augmented-reality-1853592_960_720",
		tags: "vr, virtual reality, tech, technology, girl, bike"
	},
	{
		imageId: "clouds-1845517_960_720",
		tags: "vr, virtual reality, tech, technology, girl, bike, woman, lady"
	},
	{
		imageId: "engineer-4904945_960_720",
		tags: "vr, virtual reality, tech, technology, game, gaming, collaboration"
	},
	{
		imageId: "people-2557494_960_720",
		tags: "vr, virtual reality, tech, technology, vive, game, gaming"
	},
	{
		imageId: "virtual-reality-1898441_960_720",
		tags: "vr, virtual reality, tech, technology, mist, outdoor"
	},
	{
		imageId: "virtual-reality-4995294_960_720",
		tags: "vr, virtual reality, tech, technology, game, gaming, entertainment"
	},
	{
		imageId: "vr-3460451_960_720",
		tags: "vr, virtual reality, tech, technology"
	},
	{
		imageId: "abstract-22122_960_720",
		tags: "water, abstract, ice"
	},
	{
		imageId: "air-bubbles-230014_960_720",
		tags: "water, bubbles, air, underwater, ocean, marine"
	},
	{
		imageId: "ice-1997289_960_720",
		tags: "water, ice, frost, cold"
	},
	{
		imageId: "rain-455124_960_720",
		tags: "water, rain, drops, window"
	},
	{
		imageId: "splashing-165192_960_720",
		tags: "water, splash, drops, droplets"
	},
	{
		imageId: "pencil-1891732_960_720",
		tags: "writing, writer, author, novel, poetry, pencil, notebook"
	},
	{
		imageId: "typewriter-407695_960_720",
		tags: "writing, writer, author, novel, poetry, typewriter"
	},
	{
		imageId: "typewriter-801921_960_720",
		tags: "writing, writer, author, novel, poetry, typewriter, desk, literature, book"
	},
	{
		imageId: "typewriter-1248088_960_720",
		tags: "writing, writer, author, novel, poetry, typewriter"
	},
	{
		imageId: "vintage-2168174_960_720",
		tags: "writing, writer, author, novel, poetry, typewriter, desk, literature, book"
	}
];

/* src\routes\_components\ImageSelectionBox.svelte generated by Svelte v3.23.0 */

const css$S = {
	code: ".imageSelectionBox.svelte-1y85pmt{width:100%;padding-top:59.6%;position:relative;background-color:#E3E3E3;border-top:1px solid #cccccc;border-bottom:1px solid #cccccc}.imageSelectionBox.opened.svelte-1y85pmt{height:245px;padding-top:0}.imageSelectionBox.svelte-1y85pmt .searchBar{position:absolute;top:102px;pointer-events:none;display:flex;justify-content:center}.imageSelectionBox.svelte-1y85pmt .searchBarField{margin:0;width:200px;background-color:#ffffff;box-shadow:0 2px 5px 0 rgba(0,0,0,0.15);pointer-events:initial}.hidden.svelte-1y85pmt{display:none}.imageSelectionBoxImage.svelte-1y85pmt{position:absolute;top:0;width:100%;height:100%;background-size:cover;background-position:center;cursor:pointer}.imageSelectionBoxImage.containMode.svelte-1y85pmt{background-size:contain;background-repeat:no-repeat}.carouselContainer.svelte-1y85pmt{position:absolute;top:0;width:100%;height:100%;pointer-events:none}.carouselShown.svelte-1y85pmt{opacity:0.2}.imageSelectionBox.svelte-1y85pmt .imageCarousel{position:absolute;top:142px;left:0;width:100%}.imageSelectionBox.svelte-1y85pmt .selectCancelButton{position:absolute;right:17px;top:17px;width:30px;height:30px;padding-left:5px;padding-top:2px;box-sizing:border-box;pointer-events:none}.imageSelectionBox.svelte-1y85pmt .uploadButton{position:absolute;top:13px;margin-left:-37.5px;width:75px;height:75px;background-color:#ffffff;border-radius:999px;left:50%;padding:10px 0;box-sizing:border-box;pointer-events:all}.imageSelectionBox.noLibrary.svelte-1y85pmt .uploadButton{top:50%;margin-top:-37.5px}.imageSelectionBox.svelte-1y85pmt .uploadButton .buttonContent{width:100%;height:100%;display:flex;justify-content:center;align-items:center;flex-direction:column}.imageSelectionBox.svelte-1y85pmt .uploadButton .uploadButtonIcon{width:43px;height:37px;background-size:cover}.imageSelectionBox.svelte-1y85pmt .uploadButton .buttonLabel{margin-top:-2px;font-size:1.2rem;font-weight:700;color:#333333}.uploadingIndicator.svelte-1y85pmt{position:absolute;right:10px;bottom:10px;padding:4px 12px;font-size:1.3rem;background-color:#ffffffcc;border-radius:999px}",
	map: "{\"version\":3,\"file\":\"ImageSelectionBox.svelte\",\"sources\":[\"ImageSelectionBox.svelte\"],\"sourcesContent\":[\"<script>\\n    import { tick } from 'svelte';\\n\\n    import locale from '../../locale';\\n    import promptIds from '../../config/promptIds';\\n\\n    import config from '../../config';\\n\\n    import { shuffle } from '../../utils';\\n\\n    import UploadUtil from '../../utils/UploadUtil';\\n\\n    import Button from '../../components/Button.svelte';\\n\\n\\timport SearchBar from '../_components/SearchBar.svelte';\\n    import ImageCarousel from './ImageCarousel.svelte';\\n\\n    import EmptyImage from \\\"../../assets/images/empty.png\\\";\\n\\n    import UploadImageIcon from \\\"../../assets/icons/upload_image.png\\\";\\n    import CancelIcon from \\\"../../assets/icons/clear.png\\\";\\n\\n    import imageLibrary from '../../data/library/images/compiled/imageLibrary.json';\\n    // import imageLibrary from '../../data/library/images/_general.json';\\n\\n    import { getHeaderImage } from '../../models/appModel';\\n    import { showPrompt } from '../../actions/appActions';\\n\\n\\n    const libraryImages = shuffle(imageLibrary);\\n\\n    export let image = null;\\n\\n    export let contextSearchString = '';\\n\\n    export let uploadType;\\n    export let itemId;\\n    export let itemIndex = '';\\n\\n    export let containMode = false;\\n\\n    export let imageType = 'image/jpeg';\\n    export let useLibrary = true;\\n\\n    export let className = '';\\n\\n    let carouselShown = true;\\n    let imageLibrarySearchString = '';\\n\\n    let uploadFileInput;\\n\\n    export let fileIsUploading = false;\\n\\n    let inited = false;\\n    $: {\\n        if (!inited) {\\n            inited = true;\\n            if (image) {\\n                carouselShown = false;\\n            }\\n        }\\n    }\\n\\n    let autoUploadTriggered = false;\\n    $: {\\n        if (!useLibrary) {\\n            if (carouselShown) {\\n                if (!autoUploadTriggered) {\\n                    autoUploadTriggered = true;\\n                    uploadHeaderImage();\\n                }\\n            } else {\\n                autoUploadTriggered = false;\\n            }\\n        }\\n    }\\n\\n    let imageSrc = null;\\n    $: {\\n        if (!fileIsUploading && typeof image === 'string') {\\n            imageSrc = getHeaderImage(image);\\n        }\\n    }\\n\\n    function toggleCarousel() {\\n        if (image) {\\n            carouselShown = !carouselShown;\\n        }\\n    }\\n\\n    function hideCarousel() {\\n        carouselShown = false;\\n    }\\n\\n    function showCarousel() {\\n        carouselShown = true;\\n    }\\n\\n    async function selectImage(event) {\\n        fileIsUploading = false;\\n\\n        await tick();\\n        imageSrc = EmptyImage; // force empty image to load first\\n\\n        await tick();\\n        imageSrc = event.detail.thumbImage; // force thumb to load in image first\\n\\n        await tick(); // then reupdate with current image\\n        imageSrc = (image && (config.SITE_CONTENT_URL + config.headerImageLibraryFolder + image + config.headerImageExtension)) || null; //TODO: find better way\\n\\n        await tick();\\n        hideCarousel();\\n    }\\n\\n    function uploadHeaderImage() {\\n        UploadUtil.uploadImage({\\n            uploadType,\\n            itemId,\\n            itemIndex,\\n\\n            imageSettings: {\\n                maxWidth: config.UPLOAD_MAX_WIDTH,\\n                maxHeight: config.UPLOAD_MAX_HEIGHT,\\n                type: imageType,\\n            },\\n            thumbSettings: {\\n                maxWidth: config.UPLOAD_THUMB_MAX_WIDTH,\\n                maxHeight: config.UPLOAD_THUMB_MAX_HEIGHT,\\n                type: imageType,\\n            },\\n\\n            onUploading: () => {\\n                imageSrc = EmptyImage;\\n                fileIsUploading = true;\\n                hideCarousel();\\n            },\\n            onImageLoaded: (imageFile) => {\\n                imageSrc = URL.createObjectURL(imageFile);\\n            },\\n            onComplete: (imageUrl) => {\\n                image = imageUrl;\\n                fileIsUploading = false;\\n            },\\n            onError: (error) => {\\n                image = null;\\n                fileIsUploading = false;\\n\\n                if (useLibrary) {\\n                    showCarousel();\\n                }\\n\\n                if (error && error.invalidType) {\\n                    showPrompt(promptIds.INVALID_IMAGE_TYPE_JPG_PNG);\\n                } else if (error && error.imageFileSizeTooLarge) {\\n                    showPrompt(promptIds.INVALID_IMAGE_FILESIZE_TOO_LARGE);\\n                } else {\\n                    console.error('Could not request image upload');\\n                }\\n            },\\n        });\\n    }\\n</script>\\n\\n<div class=\\\"imageSelectionBox {className}\\\" class:opened=\\\"{carouselShown && useLibrary}\\\" class:noLibrary=\\\"{!useLibrary}\\\">\\n    {#if imageSrc}\\n        <div class=\\\"imageSelectionBoxImage\\\" class:containMode=\\\"{containMode}\\\" style=\\\"background-image: url({imageSrc})\\\" class:carouselShown=\\\"{carouselShown}\\\" on:click=\\\"{toggleCarousel}\\\" alt=\\\"project header image\\\" />\\n        {#if carouselShown}\\n            <Button className=\\\"selectCancelButton\\\" icon=\\\"{CancelIcon}\\\" />\\n        {:else if fileIsUploading}\\n            <div class=\\\"uploadingIndicator\\\">uploading image...</div>\\n        {/if}\\n    {/if}\\n        <div class=\\\"carouselContainer\\\" class:hidden=\\\"{!carouselShown}\\\">\\n            {#if useLibrary}\\n                <SearchBar bind:searchString={imageLibrarySearchString} />\\n                <ImageCarousel\\n                    images=\\\"{libraryImages}\\\"\\n                    imageBasePath=\\\"{config.SITE_CONTENT_URL + config.headerImageLibraryThumbFolder}\\\"\\n                    imageExtension=\\\"{config.headerImageExtension}\\\"\\n                    bind:image=\\\"{image}\\\"\\n                    searchString=\\\"{imageLibrarySearchString}\\\"\\n                    {contextSearchString}\\n                    on:select=\\\"{selectImage}\\\" />\\n            {/if}\\n            <Button className=\\\"uploadButton\\\" onClick=\\\"{uploadHeaderImage}\\\">\\n                <div class=\\\"uploadButtonIcon\\\" style=\\\"background-image: url({UploadImageIcon})\\\"/>\\n                <div class=\\\"buttonLabel\\\">{locale.GENERAL.UPLOAD_IMAGE}</div>\\n            </Button>\\n        </div>\\n</div>\\n\\n<style>\\n    .imageSelectionBox {\\n\\t\\twidth: 100%;\\n        padding-top: 59.6%;\\n\\t\\t/* height: 245px; */\\n\\n        position: relative;\\n\\n    \\tbackground-color: #E3E3E3;\\n\\n        border-top: 1px solid #cccccc;\\n        border-bottom: 1px solid #cccccc;\\n    }\\n\\n\\t.imageSelectionBox.opened {\\n\\t\\theight: 245px;\\n\\t\\tpadding-top: 0;\\n\\t\\t/* height: initial; */\\n\\t\\t/* padding-top: 59.6%; */\\n\\t}\\n\\n\\t.imageSelectionBox :global(.searchBar) {\\n        position: absolute;\\n        top: 102px;\\n\\n        pointer-events: none;\\n\\n        display: flex;\\n        justify-content: center;\\n\\t}\\n\\t.imageSelectionBox :global(.searchBarField) {\\n        /* margin: 18px 100px; */\\n        /* margin: 0 100px; */\\n        margin: 0;\\n        width: 200px;\\n\\n        background-color: #ffffff;\\n        box-shadow: 0 2px 5px 0 rgba(0,0,0,0.15);\\n\\n        pointer-events: initial;\\n\\t}\\n\\n    .hidden {\\n        display: none;\\n    }\\n\\n    .imageSelectionBoxImage {\\n        position: absolute;\\n        top: 0;\\n        width: 100%;\\n        height: 100%;\\n        /* object-fit: cover; */\\n\\n    \\tbackground-size: cover;\\n        background-position: center;\\n\\n        cursor: pointer;\\n    }\\n    .imageSelectionBoxImage.containMode {\\n\\t\\tbackground-size: contain;\\n\\t\\tbackground-repeat: no-repeat;\\n    }\\n\\n    .carouselContainer {\\n        position: absolute;\\n        top: 0;\\n        width: 100%;\\n        height: 100%;\\n\\n        pointer-events: none;\\n    }\\n\\n    .carouselShown {\\n        opacity: 0.2;\\n    }\\n\\n    .imageSelectionBox :global(.imageCarousel) {\\n        position: absolute;\\n        top: 142px;\\n        /* top: 62px; */\\n        /* top: 78px; */\\n        left: 0;\\n        width: 100%;\\n\\n        /* padding-top: 78px; */\\n        /* padding-top: 40px; */\\n    }\\n\\n    .imageSelectionBox :global(.selectCancelButton) {\\n        position: absolute;\\n        right: 17px;\\n        top: 17px;\\n        width: 30px;\\n        height: 30px;\\n        padding-left: 5px;\\n        padding-top: 2px;\\n        box-sizing: border-box;\\n\\n        pointer-events: none;\\n    }\\n\\n    .imageSelectionBox :global(.uploadButton) {\\n        position: absolute;\\n\\n        top: 13px;\\n        margin-left: -37.5px;\\n        width: 75px;\\n        height: 75px;\\n\\n        background-color: #ffffff;\\n        border-radius: 999px;\\n\\n        /* margin-left: -50px;\\n        width: 100px;\\n        height: 80px; */\\n\\n        /* top: 11px; */\\n        /* top: 235px; */\\n\\n        left: 50%;\\n        padding: 10px 0;\\n        box-sizing: border-box;\\n\\n        pointer-events: all;\\n    }\\n    .imageSelectionBox.noLibrary :global(.uploadButton) {\\n        top: 50%;\\n        margin-top: -37.5px;\\n    }\\n    .imageSelectionBox :global(.uploadButton .buttonContent) {\\n        width: 100%;\\n        height: 100%;\\n\\n\\t\\tdisplay: flex;\\n\\t\\tjustify-content: center;\\n\\t\\talign-items: center;\\n        flex-direction: column;\\n    }\\n    .imageSelectionBox :global(.uploadButton .uploadButtonIcon) {\\n        /* position: absolute; */\\n        /* top: -21.5px;\\n        left: -18.5px; */\\n        width: 43px;\\n        height: 37px;\\n        background-size: cover;\\n    }\\n    .imageSelectionBox :global(.uploadButton .buttonLabel) {\\n        margin-top: -2px;\\n        /* margin-top: 2px; */\\n        /* margin-top: 5px; */\\n\\n        font-size: 1.2rem;\\n        font-weight: 700;\\n        /* color: #222222; */\\n        color: #333333;\\n    }\\n\\n    .uploadingIndicator {\\n        position: absolute;\\n        right: 10px;\\n        bottom: 10px;\\n\\n        padding: 4px 12px;\\n        font-size: 1.3rem;\\n\\n        background-color: #ffffffcc;\\n        border-radius: 999px;\\n    }\\n</style>\"],\"names\":[],\"mappings\":\"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\"}"
};

const ImageSelectionBox = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	const libraryImages = shuffle(imageLibrary);
	let { image = null } = $$props;
	let { contextSearchString = "" } = $$props;
	let { uploadType } = $$props;
	let { itemId } = $$props;
	let { itemIndex = "" } = $$props;
	let { containMode = false } = $$props;
	let { imageType = "image/jpeg" } = $$props;
	let { useLibrary = true } = $$props;
	let { className = "" } = $$props;
	let carouselShown = true;
	let imageLibrarySearchString = "";
	let { fileIsUploading = false } = $$props;
	let inited = false;
	let autoUploadTriggered = false;
	let imageSrc = null;

	function hideCarousel() {
		carouselShown = false;
	}

	function showCarousel() {
		carouselShown = true;
	}

	function uploadHeaderImage() {
		UploadUtil.uploadImage({
			uploadType,
			itemId,
			itemIndex,
			imageSettings: {
				maxWidth: config$1.UPLOAD_MAX_WIDTH,
				maxHeight: config$1.UPLOAD_MAX_HEIGHT,
				type: imageType
			},
			thumbSettings: {
				maxWidth: config$1.UPLOAD_THUMB_MAX_WIDTH,
				maxHeight: config$1.UPLOAD_THUMB_MAX_HEIGHT,
				type: imageType
			},
			onUploading: () => {
				imageSrc = img$F;
				fileIsUploading = true;
				hideCarousel();
			},
			onImageLoaded: imageFile => {
				imageSrc = URL.createObjectURL(imageFile);
			},
			onComplete: imageUrl => {
				image = imageUrl;
				fileIsUploading = false;
			},
			onError: error => {
				image = null;
				fileIsUploading = false;

				if (useLibrary) {
					showCarousel();
				}

				if (error && error.invalidType) {
					showPrompt(promptIds.INVALID_IMAGE_TYPE_JPG_PNG);
				} else if (error && error.imageFileSizeTooLarge) {
					showPrompt(promptIds.INVALID_IMAGE_FILESIZE_TOO_LARGE);
				} else {
					console.error("Could not request image upload");
				}
			}
		});
	}

	if ($$props.image === void 0 && $$bindings.image && image !== void 0) $$bindings.image(image);
	if ($$props.contextSearchString === void 0 && $$bindings.contextSearchString && contextSearchString !== void 0) $$bindings.contextSearchString(contextSearchString);
	if ($$props.uploadType === void 0 && $$bindings.uploadType && uploadType !== void 0) $$bindings.uploadType(uploadType);
	if ($$props.itemId === void 0 && $$bindings.itemId && itemId !== void 0) $$bindings.itemId(itemId);
	if ($$props.itemIndex === void 0 && $$bindings.itemIndex && itemIndex !== void 0) $$bindings.itemIndex(itemIndex);
	if ($$props.containMode === void 0 && $$bindings.containMode && containMode !== void 0) $$bindings.containMode(containMode);
	if ($$props.imageType === void 0 && $$bindings.imageType && imageType !== void 0) $$bindings.imageType(imageType);
	if ($$props.useLibrary === void 0 && $$bindings.useLibrary && useLibrary !== void 0) $$bindings.useLibrary(useLibrary);
	if ($$props.className === void 0 && $$bindings.className && className !== void 0) $$bindings.className(className);
	if ($$props.fileIsUploading === void 0 && $$bindings.fileIsUploading && fileIsUploading !== void 0) $$bindings.fileIsUploading(fileIsUploading);
	$$result.css.add(css$S);
	let $$settled;
	let $$rendered;

	do {
		$$settled = true;

		 {
			{
				if (!inited) {
					inited = true;

					if (image) {
						carouselShown = false;
					}
				}
			}
		}

		 {
			{
				if (!useLibrary) {
					if (carouselShown) {
						if (!autoUploadTriggered) {
							autoUploadTriggered = true;
							uploadHeaderImage();
						}
					} else {
						autoUploadTriggered = false;
					}
				}
			}
		}

		 {
			{
				if (!fileIsUploading && typeof image === "string") {
					imageSrc = getHeaderImage(image);
				}
			}
		}

		$$rendered = `<div class="${[
			"imageSelectionBox " + escape(className) + " svelte-1y85pmt",
			(carouselShown && useLibrary ? "opened" : "") + " " + (!useLibrary ? "noLibrary" : "")
		].join(" ").trim()}">${imageSrc
		? `<div class="${[
				"imageSelectionBoxImage svelte-1y85pmt",
				(containMode ? "containMode" : "") + " " + (carouselShown ? "carouselShown" : "")
			].join(" ").trim()}" style="${"background-image: url(" + escape(imageSrc) + ")"}" alt="${"project header image"}"></div>
        ${carouselShown
			? `${validate_component(Button, "Button").$$render(
					$$result,
					{
						className: "selectCancelButton",
						icon: img$d
					},
					{},
					{}
				)}`
			: `${fileIsUploading
				? `<div class="${"uploadingIndicator svelte-1y85pmt"}">uploading image...</div>`
				: ``}`}`
		: ``}
        <div class="${["carouselContainer svelte-1y85pmt", !carouselShown ? "hidden" : ""].join(" ").trim()}">${useLibrary
		? `${validate_component(SearchBar, "SearchBar").$$render(
				$$result,
				{ searchString: imageLibrarySearchString },
				{
					searchString: $$value => {
						imageLibrarySearchString = $$value;
						$$settled = false;
					}
				},
				{}
			)}
                ${validate_component(ImageCarousel, "ImageCarousel").$$render(
				$$result,
				{
					images: libraryImages,
					imageBasePath: config$1.SITE_CONTENT_URL + config$1.headerImageLibraryThumbFolder,
					imageExtension: config$1.headerImageExtension,
					searchString: imageLibrarySearchString,
					contextSearchString,
					image
				},
				{
					image: $$value => {
						image = $$value;
						$$settled = false;
					}
				},
				{}
			)}`
		: ``}
            ${validate_component(Button, "Button").$$render(
			$$result,
			{
				className: "uploadButton",
				onClick: uploadHeaderImage
			},
			{},
			{
				default: () => `<div class="${"uploadButtonIcon"}" style="${"background-image: url(" + escape(img$G) + ")"}"></div>
                <div class="${"buttonLabel"}">${escape(locale$1.GENERAL.UPLOAD_IMAGE)}</div>`
			}
		)}</div>
</div>`;
	} while (!$$settled);

	return $$rendered;
});

/* src\routes\projects\new.svelte generated by Svelte v3.23.0 */

const css$T = {
	code: ".panelContent.svelte-1wir4cc.svelte-1wir4cc{padding:28px 0}.field.svelte-1wir4cc.svelte-1wir4cc{position:relative;padding:0 16px;padding-bottom:30px}.descriptionField.svelte-1wir4cc.svelte-1wir4cc{padding-bottom:18px}.introField.svelte-1wir4cc.svelte-1wir4cc{padding-bottom:18px}.introField.svelte-1wir4cc input.svelte-1wir4cc{padding-top:0}.label.svelte-1wir4cc.svelte-1wir4cc{font-size:1.3rem;padding-left:7px;padding-bottom:4px;color:#555555}.fieldCharCount.svelte-1wir4cc.svelte-1wir4cc{position:absolute;right:20px;margin-top:-22px;font-size:1.2rem;color:#888888}.charCountLow.svelte-1wir4cc.svelte-1wir4cc{color:#DF3C3C}.charCountOver.svelte-1wir4cc.svelte-1wir4cc{color:#DF3C3C;font-weight:bold}.fieldNote.svelte-1wir4cc.svelte-1wir4cc{padding-left:7px;font-size:1.1rem;color:#aaaaaa}.privacyNote.svelte-1wir4cc.svelte-1wir4cc{padding-top:20px;padding-left:27px;padding-bottom:5px}input.svelte-1wir4cc.svelte-1wir4cc{border:none;outline:none;background:none;border-bottom:1px solid #cccccc;width:100%;box-sizing:border-box;font-size:1.5rem;color:#555555;padding:6px 7px}.content.svelte-1wir4cc.svelte-1wir4cc textarea{border:1px solid #cccccc;outline:none;background:none;width:100%;height:90px;box-sizing:border-box;font-size:1.5rem;line-height:2rem;color:#555555;padding:4px 6px;margin-top:4px;resize:none}.content.svelte-1wir4cc.svelte-1wir4cc textarea.charsOver{color:#DF3C3C}.headerImageField.svelte-1wir4cc.svelte-1wir4cc{padding:0}.headerImageLabel.svelte-1wir4cc.svelte-1wir4cc{padding-left:23px;padding-right:23px}.headerImageField.svelte-1wir4cc.svelte-1wir4cc .imageSelectionBox{margin-top:10px}.actions.svelte-1wir4cc.svelte-1wir4cc{position:relative;height:60px;margin-top:10px}.content.svelte-1wir4cc.svelte-1wir4cc .nextButton{position:absolute;top:3px;right:12px;padding:10px;padding-right:39px;font-size:1.5rem;font-weight:700}.content.svelte-1wir4cc.svelte-1wir4cc .nextButton .icon{padding-left:20px;margin-top:-1px}",
	map: "{\"version\":3,\"file\":\"new.svelte\",\"sources\":[\"new.svelte\"],\"sourcesContent\":[\"<script>\\r\\n\\timport locale from '../../locale';\\r\\n\\r\\n\\timport config from '../../config';\\r\\n\\r\\n\\timport { trim, testInputDefocus, delayedTimeout } from '../../utils';\\r\\n\\r\\n\\timport ScrollView from '../../components/ScrollView.svelte';\\r\\n\\timport Proxy from '../../components/Proxy.svelte';\\r\\n\\r\\n\\timport LimitedTextfield from '../../components/LimitedTextfield.svelte';\\r\\n\\timport Button from '../../components/Button.svelte';\\r\\n\\r\\n\\timport ImageSelectionBox from '../_components/ImageSelectionBox.svelte';\\r\\n\\r\\n    import NextArrowIcon from \\\"../../assets/icons/next_arrow.png\\\";\\r\\n\\r\\n\\timport { getNewProjectId } from '../../models/projectsModel';\\r\\n\\r\\n\\timport { createProject } from '../../actions/projectActions';\\r\\n\\r\\n\\tlet title = '';\\r\\n\\tlet description = '';\\r\\n\\r\\n\\tlet projectId = getNewProjectId();\\r\\n\\r\\n\\tlet image = null; // 'header2';\\r\\n\\tlet headerImageIsUploading;\\r\\n\\r\\n\\tlet titleField;\\r\\n\\tlet descriptionField;\\r\\n\\r\\n\\tlet remainingChars;\\r\\n\\tlet descriptionCharsOver;\\r\\n\\t$: charCountLow = (remainingChars !== '') && remainingChars < config.PROJECT_DESCRIPTION_CHARS_LOW;\\r\\n\\r\\n\\tlet contextSearchString = '';\\r\\n\\r\\n\\t$: {\\r\\n\\t\\tupdateContextString(title, description);\\r\\n\\t}\\r\\n\\r\\n\\tfunction updateContextString() {\\r\\n\\t\\tdelayedTimeout('updateContextString', () => {\\r\\n\\t\\t\\tcontextSearchString = (title + ' ' + description).trim();\\r\\n\\t\\t}, config.UPDATE_CONTEXT_STRING_DELAY);\\r\\n\\t}\\r\\n\\r\\n    // $: titleField && titleField.focus();\\r\\n\\r\\n\\t$: nextEnabled = trim(title) && trim(description) && !descriptionCharsOver && image && !headerImageIsUploading;\\r\\n\\r\\n\\tfunction createNewProject() {\\r\\n\\t\\tif (nextEnabled) {\\r\\n\\t\\t\\tconst projectDetails = {\\r\\n\\t\\t\\t\\ttitle: trim(title),\\r\\n\\t\\t\\t\\tdescription: trim(description),\\r\\n\\t\\t\\t\\theaderImage: image,\\r\\n\\t\\t\\t\\tid: projectId,\\r\\n\\t\\t\\t};\\r\\n\\t\\t\\tcreateProject(projectDetails);\\r\\n\\t\\t}\\r\\n\\t}\\r\\n\\r\\n\\tfunction testSubmit() {\\r\\n\\t\\tif (nextEnabled) {\\r\\n\\t\\t\\tcreateNewProject();\\r\\n\\t\\t}\\r\\n\\t}\\r\\n\\r\\n</script>\\r\\n\\r\\n<svelte:head>\\r\\n\\t<title>Flock</title>\\r\\n\\t<style>\\r\\n\\t\\tbody {\\r\\n\\t\\t\\toverscroll-behavior-y: contain; /* Disables pull-to-refresh but allows overscroll effects. */\\r\\n\\t\\t}\\r\\n\\t</style>\\r\\n</svelte:head>\\r\\n\\r\\n<ScrollView>\\r\\n\\t<div class=\\\"content\\\">\\r\\n\\t\\t<!-- <Proxy image=\\\"create_project\\\" className=\\\"proxyOverlay\\\" /> -->\\r\\n\\t\\t<div class=\\\"panelContent\\\">\\r\\n\\t\\t\\t<div class=\\\"field introField\\\">\\r\\n\\t\\t\\t\\t<div class=\\\"label\\\">{locale.NEW_PROJECT.TITLE}</div>\\r\\n        \\t\\t<input type=\\\"text\\\" bind:value=\\\"{title}\\\" bind:this=\\\"{titleField}\\\" on:keypress=\\\"{e => testInputDefocus(e, {target: descriptionField})}\\\" />\\r\\n\\t\\t\\t\\t<!-- <div class=\\\"fieldNote labelNote\\\">{@html locale.NEW_PROJECT.TITLE_NOTE}</div> -->\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=\\\"field descriptionField\\\">\\r\\n\\t\\t\\t\\t<div class=\\\"label\\\">{locale.NEW_PROJECT.DESCRIPTION}</div>\\r\\n\\t\\t\\t\\t<div class=\\\"fieldCharCount\\\" class:charCountLow=\\\"{charCountLow}\\\" class:charCountOver=\\\"{descriptionCharsOver}\\\">{descriptionCharsOver ? descriptionCharsOver : remainingChars}{descriptionCharsOver ? ' characters over': (charCountLow ? ' characters remaining' : '')}</div>\\r\\n\\t\\t\\t\\t<LimitedTextfield bind:value=\\\"{description}\\\" bind:field=\\\"{descriptionField}\\\" bind:remainingChars=\\\"{remainingChars}\\\" bind:charsOver=\\\"{descriptionCharsOver}\\\" maxlength=\\\"{config.MAX_PROJECT_DESCRIPTION_CHARS}\\\" on:keypress=\\\"{e => testInputDefocus(e, {action: testSubmit})}\\\" />\\r\\n\\t\\t\\t\\t<div class=\\\"fieldNote\\\">{@html locale.NEW_PROJECT.DESCRIPTION_NOTE}</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=\\\"field headerImageField\\\">\\r\\n\\t\\t\\t\\t<div class=\\\"label headerImageLabel\\\">{locale.NEW_PROJECT.HEADER_IMAGE}</div>\\r\\n\\t\\t\\t\\t<ImageSelectionBox bind:image {contextSearchString} bind:fileIsUploading=\\\"{headerImageIsUploading}\\\" uploadType=\\\"projectHeader\\\" itemId=\\\"{projectId}\\\" />\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=\\\"fieldNote privacyNote\\\">{@html locale.NEW_PROJECT.PRIVACY_NOTE}</div>\\r\\n\\t\\t\\t<div class=\\\"actions\\\">\\r\\n\\t\\t\\t\\t<Button className=\\\"nextButton\\\" disabled=\\\"{!nextEnabled}\\\" onClick=\\\"{createNewProject}\\\" icon=\\\"{NextArrowIcon}\\\">{locale.NEW_PROJECT.CONFIRM}</Button>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n</ScrollView>\\r\\n\\r\\n<style>\\r\\n    /* .content :global(.proxyOverlay) {\\r\\n        position: absolute;\\r\\n\\t\\tpointer-events: none;\\r\\n        opacity: 0.5;\\r\\n    } */\\r\\n\\r\\n\\t.panelContent {\\r\\n    \\tpadding: 28px 0;\\r\\n\\t}\\r\\n\\r\\n\\t.field {\\r\\n\\t\\tposition: relative;\\r\\n    \\tpadding: 0 16px;\\r\\n\\t\\tpadding-bottom: 30px;\\r\\n\\t}\\r\\n\\r\\n\\t.descriptionField {\\r\\n    \\tpadding-bottom: 18px;\\r\\n\\t}\\r\\n\\t.introField {\\r\\n    \\tpadding-bottom: 18px;\\r\\n\\t}\\r\\n\\r\\n\\t.introField input {\\r\\n\\t\\tpadding-top: 0;\\r\\n\\t}\\r\\n\\r\\n\\t.label {\\r\\n\\t\\tfont-size: 1.3rem;\\r\\n    \\tpadding-left: 7px;\\r\\n    \\tpadding-bottom: 4px;\\r\\n\\t\\tcolor: #555555;\\r\\n\\t}\\r\\n\\r\\n\\t.fieldCharCount {\\r\\n\\t\\tposition: absolute;\\r\\n\\t\\tright: 20px;\\r\\n\\t\\tmargin-top: -22px;\\r\\n\\t\\tfont-size: 1.2rem;\\r\\n\\t\\tcolor: #888888;\\r\\n\\t}\\r\\n\\t.charCountLow {\\r\\n\\t\\tcolor: #DF3C3C;\\r\\n\\t}\\r\\n\\t.charCountOver {\\r\\n\\t\\tcolor: #DF3C3C;\\r\\n\\t\\tfont-weight: bold;\\r\\n\\t}\\r\\n\\r\\n\\t.fieldNote {\\r\\n    \\tpadding-left: 7px;\\r\\n    \\tfont-size: 1.1rem;\\r\\n    \\tcolor: #aaaaaa;\\r\\n\\t}\\r\\n\\r\\n\\t/* .labelNote {\\r\\n\\t\\tpadding-top: 8px;\\r\\n\\t} */\\r\\n\\t.privacyNote {\\r\\n\\t\\tpadding-top: 20px;\\r\\n\\t\\tpadding-left: 27px;\\r\\n\\t\\tpadding-bottom: 5px;\\r\\n\\t}\\r\\n\\r\\n\\tinput {\\r\\n        border: none;\\r\\n        outline: none;\\r\\n        background: none;\\r\\n\\r\\n\\t\\tborder-bottom: 1px solid #cccccc;\\r\\n\\r\\n        width: 100%;\\r\\n        box-sizing: border-box;\\r\\n\\r\\n        font-size: 1.5rem;\\r\\n\\t\\tcolor: #555555;\\r\\n\\r\\n        padding: 6px 7px;\\r\\n\\t\\t/* padding-left: 0; */\\r\\n\\t}\\r\\n\\r\\n\\t.content :global(textarea) {\\r\\n        border: 1px solid #cccccc;\\r\\n\\r\\n        outline: none;\\r\\n        background: none;\\r\\n\\r\\n        width: 100%;\\r\\n\\t\\theight: 90px;\\r\\n\\r\\n        box-sizing: border-box;\\r\\n\\r\\n        font-size: 1.5rem;\\r\\n\\t\\tline-height: 2rem;\\r\\n    \\tcolor: #555555;\\r\\n\\r\\n        padding: 4px 6px;\\r\\n\\r\\n    \\tmargin-top: 4px;\\r\\n\\r\\n\\t\\tresize: none;\\r\\n\\t}\\r\\n\\t.content :global(textarea.charsOver) {\\r\\n\\t\\tcolor: #DF3C3C;\\r\\n\\t}\\r\\n\\r\\n\\t.headerImageField {\\r\\n    \\tpadding: 0;\\r\\n\\t}\\r\\n\\r\\n\\t.headerImageLabel {\\r\\n\\t\\tpadding-left: 23px;\\r\\n\\t\\tpadding-right: 23px;\\r\\n\\t}\\r\\n\\r\\n\\t.headerImageField :global(.imageSelectionBox) {\\r\\n\\t\\t/* height: 245px; */\\r\\n    \\tmargin-top: 10px;\\r\\n\\t}\\r\\n\\r\\n\\t.actions {\\r\\n\\t\\tposition: relative;\\r\\n\\t\\theight: 60px;\\r\\n\\t\\tmargin-top: 10px;\\r\\n\\t}\\r\\n\\r\\n\\t.content :global(.nextButton) {\\r\\n        position: absolute;\\r\\n\\t\\ttop: 3px;\\r\\n\\t\\tright: 12px;\\r\\n\\r\\n\\t\\tpadding: 10px;\\r\\n\\t\\tpadding-right: 39px;\\r\\n\\r\\n        font-size: 1.5rem;\\r\\n        font-weight: 700;\\r\\n    }\\r\\n    /* .content :global(.nextButton.disabled) {\\r\\n\\t\\topacity: 0.15;\\r\\n    } */\\r\\n    .content :global(.nextButton .icon) {\\r\\n    \\tpadding-left: 20px;\\r\\n    \\tmargin-top: -1px;\\r\\n    }\\r\\n</style>\"],\"names\":[],\"mappings\":\"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\"}"
};

const New = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let title = "";
	let description = "";
	let projectId = getNewProjectId();
	let image = null; // 'header2';
	let headerImageIsUploading;
	let titleField;
	let descriptionField;
	let remainingChars;
	let descriptionCharsOver;
	let contextSearchString = "";

	function updateContextString() {
		delayedTimeout(
			"updateContextString",
			() => {
				contextSearchString = (title + " " + description).trim();
			},
			config$1.UPDATE_CONTEXT_STRING_DELAY
		);
	}

	function createNewProject() {
		if (nextEnabled) {
			const projectDetails = {
				title: trim(title),
				description: trim(description),
				headerImage: image,
				id: projectId
			};

			createProject(projectDetails);
		}
	}

	$$result.css.add(css$T);
	let $$settled;
	let $$rendered;

	do {
		$$settled = true;
		let charCountLow = remainingChars !== "" && remainingChars < config$1.PROJECT_DESCRIPTION_CHARS_LOW;

		 {
			{
				updateContextString();
			}
		}

		let nextEnabled = trim(title) && trim(description) && !descriptionCharsOver && image && !headerImageIsUploading;

		$$rendered = `${($$result.head += `${($$result.title = `<title>Flock</title>`, "")}<style>body {
			overscroll-behavior-y: contain; /* Disables pull-to-refresh but allows overscroll effects. */
		}
	</style>`, "")}

${validate_component(ScrollView, "ScrollView").$$render($$result, {}, {}, {
			default: () => `<div class="${"content svelte-1wir4cc"}">
		<div class="${"panelContent svelte-1wir4cc"}"><div class="${"field introField svelte-1wir4cc"}"><div class="${"label svelte-1wir4cc"}">${escape(locale$1.NEW_PROJECT.TITLE)}</div>
        		<input type="${"text"}" class="${"svelte-1wir4cc"}"${add_attribute("value", title, 1)}${add_attribute("this", titleField, 1)}>
				</div>
			<div class="${"field descriptionField svelte-1wir4cc"}"><div class="${"label svelte-1wir4cc"}">${escape(locale$1.NEW_PROJECT.DESCRIPTION)}</div>
				<div class="${[
				"fieldCharCount svelte-1wir4cc",
				(charCountLow ? "charCountLow" : "") + " " + (descriptionCharsOver ? "charCountOver" : "")
			].join(" ").trim()}">${escape(descriptionCharsOver
			? descriptionCharsOver
			: remainingChars)}${escape(descriptionCharsOver
			? " characters over"
			: charCountLow ? " characters remaining" : "")}</div>
				${validate_component(LimitedTextfield, "LimitedTextfield").$$render(
				$$result,
				{
					maxlength: config$1.MAX_PROJECT_DESCRIPTION_CHARS,
					value: description,
					field: descriptionField,
					remainingChars,
					charsOver: descriptionCharsOver
				},
				{
					value: $$value => {
						description = $$value;
						$$settled = false;
					},
					field: $$value => {
						descriptionField = $$value;
						$$settled = false;
					},
					remainingChars: $$value => {
						remainingChars = $$value;
						$$settled = false;
					},
					charsOver: $$value => {
						descriptionCharsOver = $$value;
						$$settled = false;
					}
				},
				{}
			)}
				<div class="${"fieldNote svelte-1wir4cc"}">${locale$1.NEW_PROJECT.DESCRIPTION_NOTE}</div></div>
			<div class="${"field headerImageField svelte-1wir4cc"}"><div class="${"label headerImageLabel svelte-1wir4cc"}">${escape(locale$1.NEW_PROJECT.HEADER_IMAGE)}</div>
				${validate_component(ImageSelectionBox, "ImageSelectionBox").$$render(
				$$result,
				{
					contextSearchString,
					uploadType: "projectHeader",
					itemId: projectId,
					image,
					fileIsUploading: headerImageIsUploading
				},
				{
					image: $$value => {
						image = $$value;
						$$settled = false;
					},
					fileIsUploading: $$value => {
						headerImageIsUploading = $$value;
						$$settled = false;
					}
				},
				{}
			)}</div>
			<div class="${"fieldNote privacyNote svelte-1wir4cc"}">${locale$1.NEW_PROJECT.PRIVACY_NOTE}</div>
			<div class="${"actions svelte-1wir4cc"}">${validate_component(Button, "Button").$$render(
				$$result,
				{
					className: "nextButton",
					disabled: !nextEnabled,
					onClick: createNewProject,
					icon: img$q
				},
				{},
				{
					default: () => `${escape(locale$1.NEW_PROJECT.CONFIRM)}`
				}
			)}</div></div></div>
`
		})}`;
	} while (!$$settled);

	return $$rendered;
});

var _new = /*#__PURE__*/Object.freeze({
    __proto__: null,
    'default': New
});

const img$H = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAABTElEQVRoQ+XbSwqEMBBF0RSO3f/qdAOCE8eSpoQWxF8SU99kA3LwkcklMM9zDAJnXdewLEuIkefzABD6vg8gAZbCdl3HD5bE4pBZ/7A0lhWsAcsG1oJlAWvCkoO1YUnBGrFkYK1YErBmbHWwdmxVsAVsNbAVbBWwJexnsDXsJ7BFbDHYKrYIbBmbDbaOzQJ7wCaDvWCTwJ6wr2Bv2EewR+wt2Cv2EuwZewJ7xx7ALWB3cCvYDTxNU5SoeBi2JA6M4xi5k6UUFpcMwzCwBNp/n5XE4pJZwFqwuGRysCbsdmlRTloblhSsEUsG1oolAWvGVgdrx1YFW8BWA1vBVgFbwn4GW8N+AlvEFoOtYovAlrHZYOvYLLAHbDLYCzYJ7An7CvaGfQR7xN6CvWIvwZ6xJ7B37AHcAnYHt4LdwJha8MWWdBFgyz0Y05rBAoQfD5rw14XYb9MAAAAASUVORK5CYII=";

/* src\routes\_components\ArchivedBar.svelte generated by Svelte v3.23.0 */

const css$U = {
	code: ".archiveBar.svelte-ta2l8a{height:52px;padding:14px 20px;box-sizing:border-box;box-sizing:border-box;background-color:#dddddd;background-size:30px 30px}.label.svelte-ta2l8a{font-size:1.5rem;font-weight:700;color:#888888}.archiveBar.svelte-ta2l8a .unarchiveButton{position:absolute;top:0;right:0;font-size:1.5rem;font-weight:700;padding:14px 20px}",
	map: "{\"version\":3,\"file\":\"ArchivedBar.svelte\",\"sources\":[\"ArchivedBar.svelte\"],\"sourcesContent\":[\"<script>\\r\\n    import Button from '../../components/Button.svelte';\\r\\n\\r\\n    import ArchiveBarBg from \\\"../../assets/icons/archiveBarBg.png\\\";\\r\\n\\r\\n    export let onClick = null;\\r\\n\\r\\n    function unarchive() {\\r\\n        if (onClick) {\\r\\n            onClick();\\r\\n        }\\r\\n    }\\r\\n</script>\\r\\n\\r\\n<div class=\\\"archiveBar\\\" style=\\\"background-image: url({ArchiveBarBg})\\\">\\r\\n\\t<div class=\\\"label\\\">this project has been archived</div>\\r\\n    {#if onClick}\\r\\n        <Button className=\\\"unarchiveButton\\\" onClick=\\\"{unarchive}\\\">Unarchive</Button>\\r\\n    {/if}\\r\\n</div>\\r\\n\\r\\n<style>\\r\\n\\t.archiveBar {\\r\\n\\t\\theight: 52px;\\r\\n\\r\\n        padding: 14px 20px;\\r\\n        box-sizing: border-box;\\r\\n\\r\\n        box-sizing: border-box;\\r\\n\\r\\n        background-color: #dddddd;\\r\\n        background-size: 30px 30px;\\r\\n\\t}\\r\\n\\r\\n\\t.label {\\r\\n        font-size: 1.5rem;\\r\\n        font-weight: 700;\\r\\n        color: #888888;\\r\\n\\t}\\r\\n\\r\\n\\t.archiveBar :global(.unarchiveButton) {\\r\\n        position: absolute;\\r\\n        top: 0;\\r\\n        right: 0;\\r\\n\\r\\n        font-size: 1.5rem;\\r\\n        font-weight: 700;\\r\\n\\r\\n        padding: 14px 20px;\\r\\n\\t}\\r\\n</style>\"],\"names\":[],\"mappings\":\"AAsBC,WAAW,cAAC,CAAC,AACZ,MAAM,CAAE,IAAI,CAEN,OAAO,CAAE,IAAI,CAAC,IAAI,CAClB,UAAU,CAAE,UAAU,CAEtB,UAAU,CAAE,UAAU,CAEtB,gBAAgB,CAAE,OAAO,CACzB,eAAe,CAAE,IAAI,CAAC,IAAI,AACjC,CAAC,AAED,MAAM,cAAC,CAAC,AACD,SAAS,CAAE,MAAM,CACjB,WAAW,CAAE,GAAG,CAChB,KAAK,CAAE,OAAO,AACrB,CAAC,AAED,yBAAW,CAAC,AAAQ,gBAAgB,AAAE,CAAC,AAChC,QAAQ,CAAE,QAAQ,CAClB,GAAG,CAAE,CAAC,CACN,KAAK,CAAE,CAAC,CAER,SAAS,CAAE,MAAM,CACjB,WAAW,CAAE,GAAG,CAEhB,OAAO,CAAE,IAAI,CAAC,IAAI,AACzB,CAAC\"}"
};

const ArchivedBar = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let { onClick = null } = $$props;

	function unarchive() {
		if (onClick) {
			onClick();
		}
	}

	if ($$props.onClick === void 0 && $$bindings.onClick && onClick !== void 0) $$bindings.onClick(onClick);
	$$result.css.add(css$U);

	return `<div class="${"archiveBar svelte-ta2l8a"}" style="${"background-image: url(" + escape(img$H) + ")"}"><div class="${"label svelte-ta2l8a"}">this project has been archived</div>
    ${onClick
	? `${validate_component(Button, "Button").$$render(
			$$result,
			{
				className: "unarchiveButton",
				onClick: unarchive
			},
			{},
			{ default: () => `Unarchive` }
		)}`
	: ``}
</div>`;
});

const img$I = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAAoCAYAAACSN4jeAAAD1klEQVRYR+1Y7VEbMRDdPRcQUkGggpAKCBVAKghUQChAOllXAHYFcSoIVBCoAKggUEGgAGsz70by6GTpPuAPP9AMg8enWz29fftlpje6+I3iondgUz3zYsaMMbuz2exIRI79oV/9/wciav9E5LKu66upoLB/MrCmaQDgQkT2Rx74RESXzrlzYww+j1qjgRlj9ququiCiwMzQAVci8sDMJ0T0gYiemHmhlJoPvTiaMbAkIr+JaGeM0dYw851S6osxZqeqKoAzHiDYOx1ib5Axay2M/hwLKN6ntd7Y9wAviegAoNfr9WEfuF5g3n23LwFFRI9a69343eSS11rrw5LtIjB/w79T3Bcd8gxtKaXAULv8Jf/E9kRkWdf1jxy4IrCmaVYi8n0CW/dID8z85Jy7NMYgZQRQ0BmY7zDotXiolLpOz8kC82LH7W6IaMXMEH8vSGb+FjPU48IUQ9alWWDWWrjgiJk3t7HW4lYHRU1Ee9M98/ncMHM95d0tYF5b/4joXmu9SaLWWrjmU8H4s3NutxRl1lroCDkwu3Ja2wIWRc651noRLFlrpWD33jl3Yoy5Kx2M8lVVFQKptB601nvxwxyw1o3OOSTHzWHWWnz+nFjuZSre2zTNsYggyaY22m3peTlgrZbi5BiFO56hvIR1o7UeW6LiCIVUOivWMx7kgLVhniZHDw5hvwKjwSq6CxG5j9NDj8vaRwVZdKSTAwYt9TLhdQj9xeyhSBul1PIlwERkXtc1XN2uLLBQgPsO8IKG7mJwlB6Q2vBaQ0PQWWOAZTWWA1nKT6mQ43dL76QJuih+59zHodYkynkpbjSEqBhtY7her5fBVqlbGRT/fD5fMPNZX4kJKEbkp3Zr7CZ/GXilkzZSInKZH53qLTP/UkqhFyuuQm7b2p/TnW/RT3wN3gq2Uq2EC8Q5t1dy51i2UsYKeuukimxU4ssg0KEIm9Ddnmqtkf82K+r3OFdns4z5l5BowRpa4GIdHNG3ZctW0HLp8sVGMbAxlNOGWEujDZRFuezRObefk0tvzx+xsdJan+aiIGoqc49zLkRwoQmFC7+WvDE0jKA2htBe5YbWErBcVCdj4Bbo+GaD41uSdzDAnqY9urUWURyXpk6TCRuz2ezMtz04vxdUMSoLLouHEwwdywAwDYCgKwBiZrToKM4YRBAIRfdNYize7F2BriJkbURuiNjw40r7U4CIoE/b9GqIPhFZDJW5cN6gK3PsIRL95AQwne4i2Y+R7toD2oxzfdXkVcBSFjHEIuxbbTCDMfwE8DCleUzBvoixMTd+7Z53YFMZfLOM/Qf+vGhH0gTr7AAAAABJRU5ErkJggg==";

/* src\routes\_components\Audience.svelte generated by Svelte v3.23.0 */

const css$V = {
	code: ".audienceButton.svelte-1yeiei .button{padding:8px;padding-right:29px;font-size:1.1rem;color:#333333}.audienceButton.svelte-1yeiei .icon{padding-left:6px}",
	map: "{\"version\":3,\"file\":\"Audience.svelte\",\"sources\":[\"Audience.svelte\"],\"sourcesContent\":[\"<script>\\n    import Button from '../../components/Button.svelte';\\n\\n\\timport PublicIcon from \\\"../../assets/icons/public.png\\\";\\n\\timport PrivateIcon from \\\"../../assets/icons/private.png\\\";\\n\\n    export let isPublic = true;\\n    export let onClick = null;\\n    export let disabled = false;\\n</script>\\n\\n<div class=\\\"audienceButton\\\">\\n    <Button className=\\\"button\\\" {onClick} {disabled} icon=\\\"{isPublic ? PublicIcon : PrivateIcon}\\\">{isPublic ? 'public' : 'private'}</Button>\\n</div>\\n\\n<style>\\n    .audienceButton :global(.button) {\\n\\t\\tpadding: 8px;\\n\\t\\tpadding-right: 29px;\\n\\n\\t\\tfont-size: 1.1rem;\\n\\n\\t\\tcolor: #333333;\\n\\t}\\n    .audienceButton :global(.icon) {\\n    \\tpadding-left: 6px;\\n\\t}\\n</style>\"],\"names\":[],\"mappings\":\"AAgBI,6BAAe,CAAC,AAAQ,OAAO,AAAE,CAAC,AACpC,OAAO,CAAE,GAAG,CACZ,aAAa,CAAE,IAAI,CAEnB,SAAS,CAAE,MAAM,CAEjB,KAAK,CAAE,OAAO,AACf,CAAC,AACE,6BAAe,CAAC,AAAQ,KAAK,AAAE,CAAC,AAC/B,YAAY,CAAE,GAAG,AACrB,CAAC\"}"
};

const Audience = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let { isPublic = true } = $$props;
	let { onClick = null } = $$props;
	let { disabled = false } = $$props;
	if ($$props.isPublic === void 0 && $$bindings.isPublic && isPublic !== void 0) $$bindings.isPublic(isPublic);
	if ($$props.onClick === void 0 && $$bindings.onClick && onClick !== void 0) $$bindings.onClick(onClick);
	if ($$props.disabled === void 0 && $$bindings.disabled && disabled !== void 0) $$bindings.disabled(disabled);
	$$result.css.add(css$V);

	return `<div class="${"audienceButton svelte-1yeiei"}">${validate_component(Button, "Button").$$render(
		$$result,
		{
			className: "button",
			onClick,
			disabled,
			icon: isPublic ? img$I : img$D
		},
		{},
		{
			default: () => `${escape(isPublic ? "public" : "private")}`
		}
	)}
</div>`;
});

/* src\routes\_components\TagSet.svelte generated by Svelte v3.23.0 */

const css$W = {
	code: ".tagSet.svelte-ouwm5z{margin-bottom:-8px}.tagSet.svelte-ouwm5z .tag{display:inline-block;background-color:#EEEEEE;border-radius:100px;font-size:1.5rem;margin-right:5px;padding:1px 11px;margin-bottom:8px;color:#0D0D0D}.tagSet.svelte-ouwm5z .buttonContent{display:inline-block;user-select:text}.invisibleSeparator.svelte-ouwm5z{display:inline-block;overflow:hidden;opacity:0;width:1px;font-size:1px}",
	map: "{\"version\":3,\"file\":\"TagSet.svelte\",\"sources\":[\"TagSet.svelte\"],\"sourcesContent\":[\"<script>\\n    import Button from '../../components/Button.svelte';\\n\\n    export let tags = null;\\n\\n    export let displayLimit = 0;\\n</script>\\n\\n{#if tags}\\n    <div class=\\\"tagSet\\\">\\n        {#each tags as tag, index}\\n            {#if !displayLimit || index < displayLimit}\\n                <Button className=\\\"tag\\\">{tag}{#if index < tags.length - 1 && (!displayLimit || index < displayLimit-1)}<span class=\\\"invisibleSeparator\\\">,&nbsp;</span>{/if}</Button>\\n            {/if}\\n        {/each}\\n    </div>\\n{/if}\\n\\n<style>\\n    .tagSet {\\n        margin-bottom: -8px;\\n    }\\n\\n    .tagSet :global(.tag) {\\n        display: inline-block;\\n        background-color: #EEEEEE;\\n\\n        border-radius: 100px;\\n\\n        font-size: 1.5rem;\\n\\n        margin-right: 5px;\\n        padding: 1px 11px;\\n        margin-bottom: 8px;\\n\\n        color: #0D0D0D;\\n    }\\n\\n    .tagSet :global(.buttonContent) {\\n        display: inline-block;\\n        user-select: text;\\n    }\\n\\n    .invisibleSeparator {\\n        display: inline-block;\\n        overflow: hidden;\\n        opacity: 0;\\n        width: 1px;\\n        font-size: 1px;\\n    }\\n</style>\"],\"names\":[],\"mappings\":\"AAmBI,OAAO,cAAC,CAAC,AACL,aAAa,CAAE,IAAI,AACvB,CAAC,AAED,qBAAO,CAAC,AAAQ,IAAI,AAAE,CAAC,AACnB,OAAO,CAAE,YAAY,CACrB,gBAAgB,CAAE,OAAO,CAEzB,aAAa,CAAE,KAAK,CAEpB,SAAS,CAAE,MAAM,CAEjB,YAAY,CAAE,GAAG,CACjB,OAAO,CAAE,GAAG,CAAC,IAAI,CACjB,aAAa,CAAE,GAAG,CAElB,KAAK,CAAE,OAAO,AAClB,CAAC,AAED,qBAAO,CAAC,AAAQ,cAAc,AAAE,CAAC,AAC7B,OAAO,CAAE,YAAY,CACrB,WAAW,CAAE,IAAI,AACrB,CAAC,AAED,mBAAmB,cAAC,CAAC,AACjB,OAAO,CAAE,YAAY,CACrB,QAAQ,CAAE,MAAM,CAChB,OAAO,CAAE,CAAC,CACV,KAAK,CAAE,GAAG,CACV,SAAS,CAAE,GAAG,AAClB,CAAC\"}"
};

const TagSet = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let { tags = null } = $$props;
	let { displayLimit = 0 } = $$props;
	if ($$props.tags === void 0 && $$bindings.tags && tags !== void 0) $$bindings.tags(tags);
	if ($$props.displayLimit === void 0 && $$bindings.displayLimit && displayLimit !== void 0) $$bindings.displayLimit(displayLimit);
	$$result.css.add(css$W);

	return `${tags
	? `<div class="${"tagSet svelte-ouwm5z"}">${each(tags, (tag, index) => `${!displayLimit || index < displayLimit
		? `${validate_component(Button, "Button").$$render($$result, { className: "tag" }, {}, {
				default: () => `${escape(tag)}${index < tags.length - 1 && (!displayLimit || index < displayLimit - 1)
				? `<span class="${"invisibleSeparator svelte-ouwm5z"}">, </span>`
				: ``}`
			})}`
		: ``}`)}</div>`
	: ``}`;
});

/* src\routes\_components\ProjectSkillsList.svelte generated by Svelte v3.23.0 */

const css$X = {
	code: ".content.svelte-147e5ae .panelTitle{font-size:1.3rem;font-weight:normal}",
	map: "{\"version\":3,\"file\":\"ProjectSkillsList.svelte\",\"sources\":[\"ProjectSkillsList.svelte\"],\"sourcesContent\":[\"<script>\\n\\timport ContentPanel from './ContentPanel.svelte';\\n    import TagSet from './TagSet.svelte';\\n\\n    import config from '../../config';\\n\\n\\timport { getSplitItems } from '../../utils';\\n\\n    import {\\n        getIsProjectTeamMember,\\n        user,\\n        showBetaFeatures,\\n    } from '../../models/appModel';\\n\\n    export let project = null;\\n\\n    let displayAllTags = false;\\n\\n    $: displayLimit = displayAllTags ? 0 : config.MAX_SKILL_TAG_COUNT;\\n\\n    // $: skills = (project && project.skills) || null;\\n\\t$: skills = (project && project.skills && getSplitItems(project.skills)) || null;\\n    $: isTeamMember = $user && getIsProjectTeamMember(project);\\n\\n\\t$: canEdit = (isTeamMember && !project.archived) || false;\\n\\n    $: areMoreItems = skills && displayLimit && skills.length > displayLimit;\\n\\n    // $: console.log('areMoreItems: ', !!(skills && skills.length > displayLimit), skills && skills.length, displayLimit);\\n    // $: console.log('show more items: ', !!(areMoreItems ? displayAllSkills : false));\\n\\n\\tfunction displayAllSkills() {\\n        displayAllTags = true;\\n\\t}\\n</script>\\n\\n{#if skills && skills.length}\\n    <div class=\\\"content\\\">\\n        <ContentPanel title=\\\"Seeking Skills:\\\" showEdit=\\\"{canEdit && $showBetaFeatures}\\\" showMoreAction=\\\"{areMoreItems ? displayAllSkills : false}\\\">\\n            <TagSet tags=\\\"{skills}\\\" displayLimit=\\\"{displayLimit}\\\" />\\n        </ContentPanel>\\n    </div>\\n{/if}\\n\\n<style>\\n    .content :global(.panelTitle) {\\n        font-size: 1.3rem;\\n        font-weight: normal;\\n    }\\n</style>\"],\"names\":[],\"mappings\":\"AA6CI,uBAAQ,CAAC,AAAQ,WAAW,AAAE,CAAC,AAC3B,SAAS,CAAE,MAAM,CACjB,WAAW,CAAE,MAAM,AACvB,CAAC\"}"
};

const ProjectSkillsList = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let $user = get_store_value(user);
	let $showBetaFeatures = get_store_value(showBetaFeatures);
	let { project = null } = $$props;
	let displayAllTags = false;

	// $: console.log('areMoreItems: ', !!(skills && skills.length > displayLimit), skills && skills.length, displayLimit);
	// $: console.log('show more items: ', !!(areMoreItems ? displayAllSkills : false));
	function displayAllSkills() {
		displayAllTags = true;
	}

	if ($$props.project === void 0 && $$bindings.project && project !== void 0) $$bindings.project(project);
	$$result.css.add(css$X);
	let displayLimit = displayAllTags ? 0 : config$1.MAX_SKILL_TAG_COUNT;
	let skills = project && project.skills && getSplitItems(project.skills) || null;
	let isTeamMember = $user && getIsProjectTeamMember(project);
	let canEdit = isTeamMember && !project.archived || false;
	let areMoreItems = skills && displayLimit && skills.length > displayLimit;

	return `${skills && skills.length
	? `<div class="${"content svelte-147e5ae"}">${validate_component(ContentPanel, "ContentPanel").$$render(
			$$result,
			{
				title: "Seeking Skills:",
				showEdit: canEdit && $showBetaFeatures,
				showMoreAction: areMoreItems ? displayAllSkills : false
			},
			{},
			{
				default: () => `${validate_component(TagSet, "TagSet").$$render($$result, { tags: skills, displayLimit }, {}, {})}`
			}
		)}</div>`
	: ``}`;
});

const img$J = "data:image/png;base64,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";

const img$K = "data:image/png;base64,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";

/* src\routes\_components\ProjectLinks.svelte generated by Svelte v3.23.0 */

const css$Y = {
	code: ".content.svelte-147rdmu.svelte-147rdmu .panelContent{margin-bottom:-16px}.content.svelte-147rdmu.svelte-147rdmu .showMoreButton{padding-top:16px}.content.isEditable.svelte-147rdmu.svelte-147rdmu .panelContent{margin-bottom:27px}.content.svelte-147rdmu.svelte-147rdmu .editButton{top:initial;bottom:5px}.linkItem.svelte-147rdmu.svelte-147rdmu{position:relative;padding-top:4px;padding-bottom:4px;margin-bottom:16px}.linkLabel.svelte-147rdmu.svelte-147rdmu{font-size:1.4rem}.linkButtonContainer.svelte-147rdmu.svelte-147rdmu{position:absolute;right:0;font-size:1.4rem}.linkButtonContainer.svelte-147rdmu a.svelte-147rdmu{padding:10px;margin-top:-10px;margin-right:-10px}.linkImageButton.svelte-147rdmu.svelte-147rdmu{position:absolute;right:0}.linkImageButton.svelte-147rdmu img.svelte-147rdmu{width:100%}.patreonButton.svelte-147rdmu.svelte-147rdmu{width:154.5px;height:36px;top:-8px}.gitHubButton.svelte-147rdmu.svelte-147rdmu{width:134px;height:26px;top:-4px}",
	map: "{\"version\":3,\"file\":\"ProjectLinks.svelte\",\"sources\":[\"ProjectLinks.svelte\"],\"sourcesContent\":[\"<script>\\n\\timport ContentPanel from './ContentPanel.svelte';\\n\\n\\timport PatreonButton from \\\"../../assets/icons/patreon_button.png\\\";\\n    import GitHubButton from \\\"../../assets/icons/github_button.png\\\";\\n\\n    import {\\n        getIsProjectTeamMember,\\n        user,\\n    } from '../../models/appModel';\\n\\n    export let project = null;\\n\\n    const MAX_DISPLAYED_LINK_COUNT = 3;\\n\\n    $: links = (project && project.links) || null;\\n    $: isTeamMember = $user && getIsProjectTeamMember(project);\\n\\n\\t$: canEdit = (isTeamMember && !project.archived) || false;\\n\\n    $: areMoreItems = links && links.length > MAX_DISPLAYED_LINK_COUNT;\\n\\n    function getUrlLabel(url) {\\n        const protocolIndex = url.indexOf('://');\\n        if (protocolIndex !== -1) {\\n            return url.substring(protocolIndex + 3);\\n        } else {\\n            return url;\\n        }\\n    }\\n    function getUrlHref(url) {\\n        const protocolIndex = url.indexOf('://');\\n        if (protocolIndex === -1) {\\n            return 'https://' + url;\\n        } else {\\n            return url;\\n        }\\n    }\\n</script>\\n\\n{#if links && links.length}\\n    <div class=\\\"content\\\" class:isEditable=\\\"{canEdit}\\\">\\n        <ContentPanel showEdit=\\\"{canEdit}\\\" showMoreAction=\\\"{areMoreItems}\\\">\\n            {#each links as link, index}\\n                {#if index < MAX_DISPLAYED_LINK_COUNT}\\n                    <div class=\\\"linkItem\\\">\\n                        <div class=\\\"linkButtonContainer\\\">\\n                            {#if link.type === 'patreon'}\\n                                <a class=\\\"linkImageButton patreonButton\\\" href=\\\"{getUrlHref(link.url)}\\\" target=\\\"_blank\\\"><img src=\\\"{PatreonButton}\\\" alt=\\\"Become a Patron\\\"></a>\\n                            {:else if link.type === 'github'}\\n                                <a class=\\\"linkImageButton gitHubButton\\\" href=\\\"{getUrlHref(link.url)}\\\" target=\\\"_blank\\\"><img src=\\\"{GitHubButton}\\\" alt=\\\"View on GitHub\\\"></a>\\n                            {:else}\\n                                <a href=\\\"{getUrlHref(link.url)}\\\" target=\\\"_blank\\\">{getUrlLabel(link.url)}</a>\\n                            {/if}\\n                        </div>\\n                        <div class=\\\"linkLabel\\\">\\n                            {#if link.type === 'patreon'}\\n                                Support on Patreon\\n                            {:else if link.type === 'github'}\\n                                Contribute on Github\\n                            {:else}\\n                                {link.label || 'Visit Website'}\\n                            {/if}\\n                        </div>\\n                    </div>\\n                {/if}\\n            {/each}\\n        </ContentPanel>\\n    </div>\\n{/if}\\n\\n<style>\\n    .content :global(.panelContent) {\\n        margin-bottom: -16px;\\n    }\\n\\n    .content :global(.showMoreButton) {\\n        padding-top: 16px;\\n    }\\n\\n    .content.isEditable :global(.panelContent) {\\n        margin-bottom: 27px;\\n    }\\n\\n    .content :global(.editButton) {\\n        top: initial;\\n        bottom: 5px;\\n    }\\n\\n    .linkItem {\\n        position: relative;\\n        padding-top: 4px;\\n        padding-bottom: 4px;\\n        margin-bottom: 16px;\\n    }\\n\\n    .linkLabel {\\n        font-size: 1.4rem;\\n    }\\n\\n    .linkButtonContainer {\\n        position: absolute;\\n        right: 0;\\n        font-size: 1.4rem;\\n    }\\n\\n    .linkButtonContainer a {\\n        padding: 10px;\\n        margin-top: -10px;\\n        margin-right: -10px;\\n    }\\n\\n    .linkImageButton {\\n        position: absolute;\\n        right: 0;\\n    }\\n\\n    .linkImageButton img {\\n        width: 100%;\\n    }\\n\\n    .patreonButton {\\n        width: 154.5px;\\n        height: 36px;\\n\\n        top: -8px;\\n    }\\n    .gitHubButton {\\n        width: 134px;\\n        height: 26px;\\n\\n        top: -4px;\\n    }\\n</style>\"],\"names\":[],\"mappings\":\"AAwEI,sCAAQ,CAAC,AAAQ,aAAa,AAAE,CAAC,AAC7B,aAAa,CAAE,KAAK,AACxB,CAAC,AAED,sCAAQ,CAAC,AAAQ,eAAe,AAAE,CAAC,AAC/B,WAAW,CAAE,IAAI,AACrB,CAAC,AAED,QAAQ,yCAAW,CAAC,AAAQ,aAAa,AAAE,CAAC,AACxC,aAAa,CAAE,IAAI,AACvB,CAAC,AAED,sCAAQ,CAAC,AAAQ,WAAW,AAAE,CAAC,AAC3B,GAAG,CAAE,OAAO,CACZ,MAAM,CAAE,GAAG,AACf,CAAC,AAED,SAAS,8BAAC,CAAC,AACP,QAAQ,CAAE,QAAQ,CAClB,WAAW,CAAE,GAAG,CAChB,cAAc,CAAE,GAAG,CACnB,aAAa,CAAE,IAAI,AACvB,CAAC,AAED,UAAU,8BAAC,CAAC,AACR,SAAS,CAAE,MAAM,AACrB,CAAC,AAED,oBAAoB,8BAAC,CAAC,AAClB,QAAQ,CAAE,QAAQ,CAClB,KAAK,CAAE,CAAC,CACR,SAAS,CAAE,MAAM,AACrB,CAAC,AAED,mCAAoB,CAAC,CAAC,eAAC,CAAC,AACpB,OAAO,CAAE,IAAI,CACb,UAAU,CAAE,KAAK,CACjB,YAAY,CAAE,KAAK,AACvB,CAAC,AAED,gBAAgB,8BAAC,CAAC,AACd,QAAQ,CAAE,QAAQ,CAClB,KAAK,CAAE,CAAC,AACZ,CAAC,AAED,+BAAgB,CAAC,GAAG,eAAC,CAAC,AAClB,KAAK,CAAE,IAAI,AACf,CAAC,AAED,cAAc,8BAAC,CAAC,AACZ,KAAK,CAAE,OAAO,CACd,MAAM,CAAE,IAAI,CAEZ,GAAG,CAAE,IAAI,AACb,CAAC,AACD,aAAa,8BAAC,CAAC,AACX,KAAK,CAAE,KAAK,CACZ,MAAM,CAAE,IAAI,CAEZ,GAAG,CAAE,IAAI,AACb,CAAC\"}"
};

const MAX_DISPLAYED_LINK_COUNT = 3;

function getUrlLabel(url) {
	const protocolIndex = url.indexOf("://");

	if (protocolIndex !== -1) {
		return url.substring(protocolIndex + 3);
	} else {
		return url;
	}
}

function getUrlHref(url) {
	const protocolIndex = url.indexOf("://");

	if (protocolIndex === -1) {
		return "https://" + url;
	} else {
		return url;
	}
}

const ProjectLinks = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let $user = get_store_value(user);
	let { project = null } = $$props;
	if ($$props.project === void 0 && $$bindings.project && project !== void 0) $$bindings.project(project);
	$$result.css.add(css$Y);
	let links = project && project.links || null;
	let isTeamMember = $user && getIsProjectTeamMember(project);
	let canEdit = isTeamMember && !project.archived || false;
	let areMoreItems = links && links.length > MAX_DISPLAYED_LINK_COUNT;

	return `${links && links.length
	? `<div class="${["content svelte-147rdmu", canEdit ? "isEditable" : ""].join(" ").trim()}">${validate_component(ContentPanel, "ContentPanel").$$render(
			$$result,
			{
				showEdit: canEdit,
				showMoreAction: areMoreItems
			},
			{},
			{
				default: () => `${each(links, (link, index) => `${index < MAX_DISPLAYED_LINK_COUNT
				? `<div class="${"linkItem svelte-147rdmu"}"><div class="${"linkButtonContainer svelte-147rdmu"}">${link.type === "patreon"
					? `<a class="${"linkImageButton patreonButton svelte-147rdmu"}"${add_attribute("href", getUrlHref(link.url), 0)} target="${"_blank"}"><img${add_attribute("src", img$J, 0)} alt="${"Become a Patron"}" class="${"svelte-147rdmu"}"></a>`
					: `${link.type === "github"
						? `<a class="${"linkImageButton gitHubButton svelte-147rdmu"}"${add_attribute("href", getUrlHref(link.url), 0)} target="${"_blank"}"><img${add_attribute("src", img$K, 0)} alt="${"View on GitHub"}" class="${"svelte-147rdmu"}"></a>`
						: `<a${add_attribute("href", getUrlHref(link.url), 0)} target="${"_blank"}" class="${"svelte-147rdmu"}">${escape(getUrlLabel(link.url))}</a>`}`}</div>
                        <div class="${"linkLabel svelte-147rdmu"}">${link.type === "patreon"
					? `Support on Patreon`
					: `${link.type === "github"
						? `Contribute on Github`
						: `${escape(link.label || "Visit Website")}`}`}</div>
                    </div>`
				: ``}`)}`
			}
		)}</div>`
	: ``}`;
});

const img$L = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4CAYAAACohjseAAADdElEQVRoQ+2az08TURDHv1MbJKEaYwzhYKAtIR680BiiyW4i0Qv9B7iJgavSg3pVoyaclEPRP0C80T+AkwaT3URCDCcPBiiFgyGEcMCSKKkd89ZWl3a37e7bLfDkJXvbN+99ZubNzPtBULyR4nw4BTzpFg7Fgmua1ktENyPMQwxcBVGcgW4CuoTCGNgnYBvMBQK+lImWmPljv2luBq3QwAC/Dg9fOlsqjTEwCuC6z4kuEjD3MxqdvbKwsONTxqFu0oDCWmeAR0x0HwhsTTMxv/4FvJS1qhRgXtMeE9GzAMFqjcbM/DRpmi/8WtMX4IauXysDbyRc0et8FyPAvT7D+Oy1o2fAvK7fIeBtiFZzY2AG7iYN450XSE+ABV1/wMArLwME/S8BD+OGMd2q3JYBZeFi6TQuZjIoF4vYy+WwNzfX6hzr/vMC2RJgxS1n/c4o2tODy7nc3+7l/X1sjoz4FWf1Y2CsFXdtClgJKEsya64zlUJPNnsIaCuTwY/lZRlIjgBDzQJPU8B1Xf8kGy1DAhTKWUwYxo1GWmoIWMlzz2XULPqGCAhmftIoT7oCigolQlSQcc2qYsIEFMuxzBx3q3hcAQualmWiSVnrhW1BIZ+YZ+KmmXGaqyOgKJw7SqXtIKzXDkBhxYNotNupQHcElM15tZoM2UWt4dxyoyNgEJHTDtkOQLeIWgdYCS4bQay9NgWZfwUEc19tsKkDlK1anBTTJgs6Vjd1gEFGz3Zb0Cma1gGua9p7EN06iS4K5g8J07xtn3s9oK6vAUg2AuwcHPTE3zEwYO0k7G03m8XByoonOaWtLYivQcsnDKO/IWBe178TEHMScn50FBcmJhDpsg7HjqTtTE2hOD/vODYDxaRhnGtmwbJbghdbHrH1Ocom9pOb6bTbFDhhGJETDXiwuopv4+P+Af8HF20eZFIpT15qBZnJw3X77syM5yAjgpJwUakgo3yaUD7RK1+qKV9siwWs9HZJACq/4VX+yMKyosqHTgJQ+WNDAan0wW+1HAoiooZ4ZCF3dC8glb98sVz1z62u7+uzSCyGXtsm9Vhdn1VdVTY3igtQcSIgYI/dBWhQkJ72WC4/e7ndFSKa3g/WjqP0I4QqrNLPSOwWVfYhkB1S6adcdlBlH+M5BTsln1MGkQLCkOE5TYQxiTBlngKGqd12yP4NfhBPV2wXo6QAAAAASUVORK5CYII=";

/* src\routes\_components\ChannelListItem.svelte generated by Svelte v3.23.0 */

const css$Z = {
	code: ".channelListItem.svelte-1ejj6nf .channelListItemButton{padding-top:9px;padding-bottom:6px;padding-left:20px;padding-right:16px;font-size:1.6rem;font-weight:700;color:#000000}.channelListItem.svelte-1ejj6nf .channelListItemButton:hover{background-color:#f9f9f9}.channelListItem.noPosts.svelte-1ejj6nf .channelListItemButton{color:#666666}.channelListItem.svelte-1ejj6nf .channelListItemButton .counterContainer{float:right;margin-right:7px}.channelListItem.svelte-1ejj6nf .channelListItemButton .counter{margin-left:42px}.channelListItem.svelte-1ejj6nf .channelListItemButton .counter.default{background-color:initial}.buttonIcon.svelte-1ejj6nf{float:right;background-size:cover;width:18px;height:21px}.channelListItem.svelte-1ejj6nf .addFirstPostCTA{float:right;margin-right:40px;font-size:1.3rem;margin-top:1px;font-weight:700;color:#DF3C3C}.channelListItem.svelte-1ejj6nf .addFirstPostCTA .icon{padding-left:16px;margin-top:-2px}",
	map: "{\"version\":3,\"file\":\"ChannelListItem.svelte\",\"sources\":[\"ChannelListItem.svelte\"],\"sourcesContent\":[\"<script>\\n    import Button from '../../components/Button.svelte';\\n    import Counter from '../_components/Counter.svelte';\\n\\n    import ArrowIcon from \\\"../../assets/icons/next_arrow.png\\\";\\n\\timport AddDetailsIcon from \\\"../../assets/icons/add_highlight.png\\\";\\n\\n\\timport {\\n        project,\\n        getIsProjectTeamMember,\\n        user,\\n\\t} from '../../models/appModel';\\n\\n\\timport {\\n\\t\\tgetIsPrimaryChannel,\\n\\t} from '../../models/channelsModel';\\n\\n\\timport {\\n\\t\\tgetUnviewedChannelNotificationCount,\\n\\t} from '../../models/notificationsModel';\\n\\n\\timport {\\n\\t\\tloadChannel,\\n\\t} from '../../actions/appActions';\\n\\n    export let channel;\\n\\n    $: channelTitle = ($channel && $channel.title) || '';\\n    $: channelId = ($channel && $channel.id) || null;\\n\\n    $: messageCount = ($channel && $channel.postCount) || 0;\\n    $: unviewedCount = ($channel && getUnviewedChannelNotificationCount($channel.id)) || writable(0);\\n\\n    $: isTeamMember = $user && getIsProjectTeamMember($project);\\n\\n    $: isNew = ($project && $project.isNew) || false;\\n\\t$: isArchived = (isTeamMember && $project && $project.archived) || false;\\n\\n    $: isPrimaryChannel = getIsPrimaryChannel($channel);\\n\\n    function loadCurrentChannel() {\\n        if (channelId) {\\n            loadChannel(channelId);\\n        }\\n    }\\n</script>\\n\\n<div class=\\\"channelListItem\\\" class:noPosts=\\\"{!messageCount}\\\">\\n    <Button className=\\\"channelListItemButton\\\" onClick=\\\"{loadCurrentChannel}\\\"># {channelTitle}\\n        <div class=\\\"buttonIcon\\\" style=\\\"background-image: url({ArrowIcon})\\\"/>\\n        {#if $unviewedCount || messageCount}\\n            <Counter count=\\\"{$unviewedCount || messageCount}\\\" hasNew=\\\"{$unviewedCount}\\\" />\\n        {:else if isTeamMember && isPrimaryChannel && !isArchived}\\n\\t\\t\\t<Button className=\\\"addFirstPostCTA\\\" icon=\\\"{AddDetailsIcon}\\\">add first post</Button>\\n        {/if}\\n        <!-- <Counter count=\\\"{unreadMessageCount ? unreadMessageCount : messageCount}\\\" hasNew=\\\"{unreadMessageCount}\\\" /> -->\\n    </Button>\\n</div>\\n\\n<style>\\n\\n    .channelListItem :global(.channelListItemButton) {\\n        padding-top: 9px;\\n        padding-bottom: 6px;\\n\\n    \\tpadding-left: 20px;\\n    \\tpadding-right: 16px;\\n\\n\\t\\tfont-size: 1.6rem;\\n\\t\\tfont-weight: 700;\\n        color: #000000;\\n    }\\n    .channelListItem :global(.channelListItemButton:hover) {\\n        background-color: #f9f9f9;\\n    }\\n\\n    .channelListItem.noPosts :global(.channelListItemButton) {\\n        color: #666666;\\n    }\\n\\n    .channelListItem :global(.channelListItemButton .counterContainer) {\\n        float: right;\\n        margin-right: 7px;\\n    }\\n    .channelListItem :global(.channelListItemButton .counter) {\\n    \\tmargin-left: 42px;\\n    }\\n    .channelListItem :global(.channelListItemButton .counter.default) {\\n        background-color: initial;\\n    }\\n\\n    .buttonIcon {\\n        float: right;\\n        background-size: cover;\\n        width: 18px;\\n        height: 21px;\\n    }\\n\\n    .channelListItem :global(.addFirstPostCTA) {\\n        float: right;\\n\\n        margin-right: 40px;\\n\\n\\t\\tfont-size: 1.3rem;\\n        margin-top: 1px;\\n\\t\\tfont-weight: 700;\\n\\n\\t\\tcolor: #DF3C3C;\\n\\t}\\n    .channelListItem :global(.addFirstPostCTA .icon) {\\n    \\tpadding-left: 16px;\\n        margin-top: -2px;\\n\\t}\\n</style>\"],\"names\":[],\"mappings\":\"AA6DI,+BAAgB,CAAC,AAAQ,sBAAsB,AAAE,CAAC,AAC9C,WAAW,CAAE,GAAG,CAChB,cAAc,CAAE,GAAG,CAEtB,YAAY,CAAE,IAAI,CAClB,aAAa,CAAE,IAAI,CAEtB,SAAS,CAAE,MAAM,CACjB,WAAW,CAAE,GAAG,CACV,KAAK,CAAE,OAAO,AAClB,CAAC,AACD,+BAAgB,CAAC,AAAQ,4BAA4B,AAAE,CAAC,AACpD,gBAAgB,CAAE,OAAO,AAC7B,CAAC,AAED,gBAAgB,uBAAQ,CAAC,AAAQ,sBAAsB,AAAE,CAAC,AACtD,KAAK,CAAE,OAAO,AAClB,CAAC,AAED,+BAAgB,CAAC,AAAQ,wCAAwC,AAAE,CAAC,AAChE,KAAK,CAAE,KAAK,CACZ,YAAY,CAAE,GAAG,AACrB,CAAC,AACD,+BAAgB,CAAC,AAAQ,+BAA+B,AAAE,CAAC,AAC1D,WAAW,CAAE,IAAI,AAClB,CAAC,AACD,+BAAgB,CAAC,AAAQ,uCAAuC,AAAE,CAAC,AAC/D,gBAAgB,CAAE,OAAO,AAC7B,CAAC,AAED,WAAW,eAAC,CAAC,AACT,KAAK,CAAE,KAAK,CACZ,eAAe,CAAE,KAAK,CACtB,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,AAChB,CAAC,AAED,+BAAgB,CAAC,AAAQ,gBAAgB,AAAE,CAAC,AACxC,KAAK,CAAE,KAAK,CAEZ,YAAY,CAAE,IAAI,CAExB,SAAS,CAAE,MAAM,CACX,UAAU,CAAE,GAAG,CACrB,WAAW,CAAE,GAAG,CAEhB,KAAK,CAAE,OAAO,AACf,CAAC,AACE,+BAAgB,CAAC,AAAQ,sBAAsB,AAAE,CAAC,AACjD,YAAY,CAAE,IAAI,CACf,UAAU,CAAE,IAAI,AACvB,CAAC\"}"
};

const ChannelListItem = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let $channel;
	let $user = get_store_value(user);
	let $project = get_store_value(project);
	let $unviewedCount;
	let { channel } = $$props;
	$channel = get_store_value(channel);

	function loadCurrentChannel() {
		if (channelId) {
			loadChannel(channelId);
		}
	}

	if ($$props.channel === void 0 && $$bindings.channel && channel !== void 0) $$bindings.channel(channel);
	$$result.css.add(css$Z);
	$channel = get_store_value(channel);
	$unviewedCount = get_store_value(unviewedCount);
	let channelTitle = $channel && $channel.title || "";
	let channelId = $channel && $channel.id || null;
	let messageCount = $channel && $channel.postCount || 0;
	let unviewedCount = $channel && getUnviewedChannelNotificationCount($channel.id) || writable(0);
	let isTeamMember = $user && getIsProjectTeamMember($project);
	let isNew = $project && $project.isNew || false;
	let isArchived = isTeamMember && $project && $project.archived || false;
	let isPrimaryChannel = getIsPrimaryChannel($channel);

	return `<div class="${["channelListItem svelte-1ejj6nf", !messageCount ? "noPosts" : ""].join(" ").trim()}">${validate_component(Button, "Button").$$render(
		$$result,
		{
			className: "channelListItemButton",
			onClick: loadCurrentChannel
		},
		{},
		{
			default: () => `# ${escape(channelTitle)}
        <div class="${"buttonIcon svelte-1ejj6nf"}" style="${"background-image: url(" + escape(img$q) + ")"}"></div>
        ${$unviewedCount || messageCount
			? `${validate_component(Counter, "Counter").$$render(
					$$result,
					{
						count: $unviewedCount || messageCount,
						hasNew: $unviewedCount
					},
					{},
					{}
				)}`
			: `${isTeamMember && isPrimaryChannel && !isArchived
				? `${validate_component(Button, "Button").$$render(
						$$result,
						{
							className: "addFirstPostCTA",
							icon: img$L
						},
						{},
						{ default: () => `add first post` }
					)}`
				: ``}`}
        `
		}
	)}
</div>`;
});

/* src\routes\_components\ChannelList.svelte generated by Svelte v3.23.0 */

const css$_ = {
	code: ".channelList.svelte-14xiuya.svelte-14xiuya .panelContent{position:relative}.channelList.svelte-14xiuya.svelte-14xiuya .contentLoader{padding:0 20px;font-size:1.2rem}.channelListContainer.svelte-14xiuya.svelte-14xiuya{border-bottom:1px solid #eeeeee}.channelListContainer.svelte-14xiuya.svelte-14xiuya .channelListItem{border-top:1px solid #eeeeee}.channelList.svelte-14xiuya.svelte-14xiuya .contentPanel{padding:20px 0}.getTheConversationStarted.svelte-14xiuya.svelte-14xiuya{position:absolute;top:-30px;right:20px;color:#aaaaaa;font-size:1.3rem}.channelsFollowCta.svelte-14xiuya.svelte-14xiuya{padding-top:0px;padding-left:20px;padding-bottom:0px;font-size:1.2rem;font-weight:initial;color:#999999}.channelsActive.svelte-14xiuya .channelsFollowCta.svelte-14xiuya{padding-top:10px}.getStartedOwner.svelte-14xiuya.svelte-14xiuya{font-weight:700;color:#DF3C3C}.getStartedOwnerOffset.svelte-14xiuya.svelte-14xiuya{right:56px}.channelList.svelte-14xiuya.svelte-14xiuya .contentPanel .panelTitle{padding-left:20px;padding-bottom:10px;margin-top:-5px}.channelList.channelsActive.svelte-14xiuya.svelte-14xiuya .contentPanel .panelTitle{padding-left:20px;padding-bottom:10px;font-size:1.3rem;font-weight:initial;margin-top:-4px}.channelList.svelte-14xiuya.svelte-14xiuya .contentPanel .showMoreButton {padding-left:30px;margin-top:5px}.channelList.svelte-14xiuya.svelte-14xiuya .editButton{top:0;bottom:5px}",
	map: "{\"version\":3,\"file\":\"ChannelList.svelte\",\"sources\":[\"ChannelList.svelte\"],\"sourcesContent\":[\"<script>\\n    import locale from '../../locale';\\n\\n    import { get, writable } from 'svelte/store';\\n\\n    import Proxy from '../../components/Proxy.svelte';\\n\\n    import ContentPanel from './ContentPanel.svelte';\\n    import ChannelListItem from './ChannelListItem.svelte';\\n\\timport ContentLoader from './ContentLoader.svelte';\\n\\n\\timport {\\n\\t\\tgetIsProjectTeamMember,\\n        showBetaFeatures,\\n        user,\\n    } from '../../models/appModel';\\n\\n\\timport {\\n\\t\\tgetChannels,\\n        getIsTeamManagedChannel,\\n        loadingChannels,\\n    } from '../../models/channelsModel';\\n\\n\\timport {\\n\\t\\tprojectToggleFollowing,\\n\\t} from '../../actions/projectActions';\\n\\n    export let project;\\n\\n    let channels = writable(null);\\n    $: { channels = $project && getChannels( { projectId: $project.id } ) };\\n\\n\\t$: isNew = (isTeamMember && $project && $project.isNew) || false;\\n    $: isTeamMember = $user && getIsProjectTeamMember($project);\\n    $: canEdit = (isTeamMember && !$project.archived) || false;\\n    $: following = ($project && $project.following) || false;\\n    $: isArchived = (isTeamMember && $project && $project.archived) || false;\\n    $: viewAllChannels = following || isTeamMember;\\n    $: channelsLoading = $loadingChannels && !$channels;\\n\\n    let hasActiveChannels = true; // false;\\n    let hasInactiveChannels = false;\\n\\n    $: {\\n        let hasActiveChannel = false;\\n        let hasInactiveChannel = false;\\n        if ($channels) {\\n            for (let i = 0; i < $channels.length; i++) {\\n                if (get($channels[i]).postCount) {\\n                    hasActiveChannel = true;\\n                    // break;\\n                } else {\\n                    hasInactiveChannel = true;\\n                }\\n            }\\n        }\\n        hasActiveChannels = hasActiveChannel;\\n        hasInactiveChannels = hasInactiveChannel;\\n    }\\n\\n    let areMoreItems = false;\\n\\n\\tfunction followProject() {\\n        if ($project) {\\n            projectToggleFollowing($project.id);\\n        }\\n\\t}\\n\\n    // let proxyChannelsImage;\\n\\n\\t// $: {\\n\\t// \\tif (isTeamMember) {\\n\\t// \\t\\tif (isNew) {\\n\\t// \\t\\t\\tproxyChannelsImage = 'project_channels_populate';\\n\\t// \\t\\t} else {\\n\\t// \\t\\t\\tproxyChannelsImage = 'project_channels_owner';\\n\\t// \\t\\t}\\n\\t// \\t} else {\\n\\t// \\t\\tif (following) {\\n\\t// \\t\\t\\tproxyChannelsImage = 'project_channels_following';\\n\\t// \\t\\t} else {\\n\\t// \\t\\t\\tproxyChannelsImage = 'project_channels';\\n\\t// \\t\\t}\\n\\t// \\t}\\n\\t// }\\n</script>\\n\\n<!-- {#if $channels && $channels.length} -->\\n    <!-- && (hasActiveChannels || isTeamMember || following) -->\\n    <div class=\\\"channelList\\\" class:isEditable=\\\"{canEdit}\\\" class:channelsActive=\\\"{channelsLoading || hasActiveChannels || viewAllChannels}\\\">\\n        <!-- <Proxy image=\\\"{proxyChannelsImage}\\\" className=\\\"proxyOverlay\\\" /> -->\\n        <ContentPanel title=\\\"{locale.PROJECT.CHANNELS_TITLE}\\\" showEdit=\\\"{canEdit && $showBetaFeatures}\\\" showMoreAction=\\\"{areMoreItems}\\\">\\n            {#if (!hasActiveChannels || isNew) && viewAllChannels && !isArchived}\\n                {#if isTeamMember}\\n                    <div class=\\\"getTheConversationStarted getStartedOwner\\\" class:getStartedOwnerOffset=\\\"{canEdit && $showBetaFeatures}\\\">{locale.PROJECT.GET_STARTED}</div>\\n                {:else}\\n                    <div class=\\\"getTheConversationStarted\\\">{locale.PROJECT.FOLLOWER_GET_STARTED}</div>\\n                {/if}\\n            {/if}\\n\\n            {#if channelsLoading}\\n                <ContentLoader label=\\\"{locale.LOADING.CHANNELS}\\\" />\\n            {:else}\\n                {#if $channels && $channels.length && (hasActiveChannels || viewAllChannels)}\\n                    <div class=\\\"channelListContainer\\\">\\n                        {#each $channels as channel}\\n                            {#if isTeamMember || get(channel).postCount || (following && !getIsTeamManagedChannel(get(channel)))}\\n                                <ChannelListItem channel=\\\"{channel}\\\" />\\n                            {/if}\\n                        {/each}\\n                    </div>\\n                <!-- {:else}\\n                    <ContentLoader label=\\\"This project has no channels\\\" /> -->\\n                {/if}\\n                {#if (hasInactiveChannels && !following && !isTeamMember) && !isArchived}\\n                    <div class=\\\"channelsFollowCta\\\"><a href=\\\"javascript:void(0)\\\" on:click=\\\"{followProject}\\\">{@html locale.PROJECT.CHANNELS_FOLLOW_LINK}</a>{@html hasActiveChannels ? locale.PROJECT.CHANNELS_FOLLOW_ALL : locale.PROJECT.CHANNELS_FOLLOW}</div>\\n                {/if}\\n            {/if}\\n        </ContentPanel>\\n    </div>\\n<!-- {/if} -->\\n\\n<style>\\n\\t/* .channelList :global(.proxyOverlay) {\\n\\t\\tposition: absolute;\\n\\t\\topacity: 0.5;\\n\\t} */\\n\\n\\t.channelList :global(.panelContent) {\\n\\t\\tposition: relative;\\n\\t}\\n\\n\\t.channelList :global(.contentLoader) {\\n        padding: 0 20px;\\n        font-size: 1.2rem;\\n\\t}\\n\\n    .channelListContainer {\\n        border-bottom: 1px solid #eeeeee;\\n    }\\n    .channelListContainer :global(.channelListItem) {\\n        border-top: 1px solid #eeeeee;\\n    }\\n\\n    .channelList :global(.contentPanel) {\\n        /* background-color: rgba(255, 255, 255, 0.25); */\\n        padding: 20px 0;\\n    }\\n\\n    .getTheConversationStarted {\\n        position: absolute;\\n        top: -30px;\\n\\n        right: 20px;\\n        color: #aaaaaa;\\n\\n        font-size: 1.3rem;\\n    }\\n\\n    .channelsFollowCta {\\n        padding-top: 0px;\\n        padding-left: 20px;\\n        padding-bottom: 0px;\\n        font-size: 1.2rem;\\n        font-weight: initial;\\n        color: #999999;\\n    }\\n    .channelsActive .channelsFollowCta {\\n        padding-top: 10px;\\n    }\\n\\n    .getStartedOwner {\\n        /* right: 41px; */\\n        font-weight: 700;\\n\\t\\tcolor: #DF3C3C;\\n    }\\n\\n    .getStartedOwnerOffset {\\n        right: 56px;\\n    }\\n\\n\\t.channelList :global(.contentPanel .panelTitle) {\\n        padding-left: 20px;\\n        padding-bottom: 10px;\\n        margin-top: -5px;\\n\\t}\\n\\t.channelList.channelsActive :global(.contentPanel .panelTitle) {\\n        padding-left: 20px;\\n        padding-bottom: 10px;\\n\\n        font-size: 1.3rem;\\n        font-weight: initial;\\n        margin-top: -4px;\\n\\t}\\n\\t.channelList :global(.contentPanel .showMoreButton ) {\\n        padding-left: 30px;\\n        margin-top: 5px;\\n\\t}\\n\\n    /* .channelList :global(.showMoreButton) {\\n        padding-top: 16px;\\n    } */\\n\\n    .channelList :global(.editButton) {\\n        top: 0;\\n        bottom: 5px;\\n    }\\n</style>\"],\"names\":[],\"mappings\":\"AAgIC,0CAAY,CAAC,AAAQ,aAAa,AAAE,CAAC,AACpC,QAAQ,CAAE,QAAQ,AACnB,CAAC,AAED,0CAAY,CAAC,AAAQ,cAAc,AAAE,CAAC,AAC/B,OAAO,CAAE,CAAC,CAAC,IAAI,CACf,SAAS,CAAE,MAAM,AACxB,CAAC,AAEE,qBAAqB,8BAAC,CAAC,AACnB,aAAa,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,AACpC,CAAC,AACD,mDAAqB,CAAC,AAAQ,gBAAgB,AAAE,CAAC,AAC7C,UAAU,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,AACjC,CAAC,AAED,0CAAY,CAAC,AAAQ,aAAa,AAAE,CAAC,AAEjC,OAAO,CAAE,IAAI,CAAC,CAAC,AACnB,CAAC,AAED,0BAA0B,8BAAC,CAAC,AACxB,QAAQ,CAAE,QAAQ,CAClB,GAAG,CAAE,KAAK,CAEV,KAAK,CAAE,IAAI,CACX,KAAK,CAAE,OAAO,CAEd,SAAS,CAAE,MAAM,AACrB,CAAC,AAED,kBAAkB,8BAAC,CAAC,AAChB,WAAW,CAAE,GAAG,CAChB,YAAY,CAAE,IAAI,CAClB,cAAc,CAAE,GAAG,CACnB,SAAS,CAAE,MAAM,CACjB,WAAW,CAAE,OAAO,CACpB,KAAK,CAAE,OAAO,AAClB,CAAC,AACD,8BAAe,CAAC,kBAAkB,eAAC,CAAC,AAChC,WAAW,CAAE,IAAI,AACrB,CAAC,AAED,gBAAgB,8BAAC,CAAC,AAEd,WAAW,CAAE,GAAG,CACtB,KAAK,CAAE,OAAO,AACZ,CAAC,AAED,sBAAsB,8BAAC,CAAC,AACpB,KAAK,CAAE,IAAI,AACf,CAAC,AAEJ,0CAAY,CAAC,AAAQ,yBAAyB,AAAE,CAAC,AAC1C,YAAY,CAAE,IAAI,CAClB,cAAc,CAAE,IAAI,CACpB,UAAU,CAAE,IAAI,AACvB,CAAC,AACD,YAAY,6CAAe,CAAC,AAAQ,yBAAyB,AAAE,CAAC,AACzD,YAAY,CAAE,IAAI,CAClB,cAAc,CAAE,IAAI,CAEpB,SAAS,CAAE,MAAM,CACjB,WAAW,CAAE,OAAO,CACpB,UAAU,CAAE,IAAI,AACvB,CAAC,AACD,0CAAY,CAAC,AAAQ,8BAA8B,AAAE,CAAC,AAC/C,YAAY,CAAE,IAAI,CAClB,UAAU,CAAE,GAAG,AACtB,CAAC,AAME,0CAAY,CAAC,AAAQ,WAAW,AAAE,CAAC,AAC/B,GAAG,CAAE,CAAC,CACN,MAAM,CAAE,GAAG,AACf,CAAC\"}"
};

let areMoreItems = false;

const ChannelList = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let $project;
	let $user = get_store_value(user);
	let $loadingChannels = get_store_value(loadingChannels);
	let $channels;
	let $showBetaFeatures = get_store_value(showBetaFeatures);
	let { project } = $$props;
	$project = get_store_value(project);
	let channels = writable$1(null);
	$channels = get_store_value(channels);
	
	let hasActiveChannels = true; // false;
	let hasInactiveChannels = false;

	if ($$props.project === void 0 && $$bindings.project && project !== void 0) $$bindings.project(project);
	$$result.css.add(css$_);
	$project = get_store_value(project);
	$channels = get_store_value(channels);

	 {
		{
			channels = $project && getChannels$1({ projectId: $project.id });
		}
	}

	let isTeamMember = $user && getIsProjectTeamMember($project);
	let isNew = isTeamMember && $project && $project.isNew || false;
	let canEdit = isTeamMember && !$project.archived || false;
	let following = $project && $project.following || false;
	let isArchived = isTeamMember && $project && $project.archived || false;
	let viewAllChannels = following || isTeamMember;
	let channelsLoading = $loadingChannels && !$channels;

	 {
		{
			let hasActiveChannel = false;
			let hasInactiveChannel = false;

			if ($channels) {
				for (let i = 0; i < $channels.length; i++) {
					if (get_store_value($channels[i]).postCount) {
						hasActiveChannel = true;
					} else {
						hasInactiveChannel = true; // break;
					}
				}
			}

			hasActiveChannels = hasActiveChannel;
			hasInactiveChannels = hasInactiveChannel;
		}
	}

	return `
    
    <div class="${[
		"channelList svelte-14xiuya",
		(canEdit ? "isEditable" : "") + " " + (channelsLoading || hasActiveChannels || viewAllChannels
		? "channelsActive"
		: "")
	].join(" ").trim()}">
        ${validate_component(ContentPanel, "ContentPanel").$$render(
		$$result,
		{
			title: locale$1.PROJECT.CHANNELS_TITLE,
			showEdit: canEdit && $showBetaFeatures,
			showMoreAction: areMoreItems
		},
		{},
		{
			default: () => `${(!hasActiveChannels || isNew) && viewAllChannels && !isArchived
			? `${isTeamMember
				? `<div class="${[
						"getTheConversationStarted getStartedOwner svelte-14xiuya",
						canEdit && $showBetaFeatures
						? "getStartedOwnerOffset"
						: ""
					].join(" ").trim()}">${escape(locale$1.PROJECT.GET_STARTED)}</div>`
				: `<div class="${"getTheConversationStarted svelte-14xiuya"}">${escape(locale$1.PROJECT.FOLLOWER_GET_STARTED)}</div>`}`
			: ``}

            ${channelsLoading
			? `${validate_component(ContentLoader, "ContentLoader").$$render($$result, { label: locale$1.LOADING.CHANNELS }, {}, {})}`
			: `${$channels && $channels.length && (hasActiveChannels || viewAllChannels)
				? `<div class="${"channelListContainer svelte-14xiuya"}">${each($channels, channel => `${isTeamMember || get_store_value(channel).postCount || following && !getIsTeamManagedChannel(get_store_value(channel))
					? `${validate_component(ChannelListItem, "ChannelListItem").$$render($$result, { channel }, {}, {})}`
					: ``}`)}</div>
                `
				: ``}
                ${hasInactiveChannels && !following && !isTeamMember && !isArchived
				? `<div class="${"channelsFollowCta svelte-14xiuya"}"><a href="${"javascript:void(0)"}">${locale$1.PROJECT.CHANNELS_FOLLOW_LINK}</a>${hasActiveChannels
					? locale$1.PROJECT.CHANNELS_FOLLOW_ALL
					: locale$1.PROJECT.CHANNELS_FOLLOW}</div>`
				: ``}`}`
		}
	)}</div>
`;
});

/* src\routes\_components\TeamMemberItem.svelte generated by Svelte v3.23.0 */

const css$$ = {
	code: ".teamMemberItem.svelte-ewxqpz{display:inline-block;position:relative;padding-top:6px;height:50px;cursor:pointer}.teamMemberItem.svelte-ewxqpz .avatarIcon{position:absolute;height:42px;width:42px}.detailContent.svelte-ewxqpz{padding-top:9px;height:100%;padding-left:53px;padding-right:25px}.title.svelte-ewxqpz{font-size:1.6rem;font-weight:700;line-height:1.3rem;max-width:180px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding-bottom:5px;margin-bottom:-5px}.username.svelte-ewxqpz{font-size:1.1rem;margin-top:4px;color:#666666;line-height:1.3rem}",
	map: "{\"version\":3,\"file\":\"TeamMemberItem.svelte\",\"sources\":[\"TeamMemberItem.svelte\"],\"sourcesContent\":[\"<script>\\n    import AvatarIcon from './AvatarIcon.svelte';\\n\\n    import { loadProfile } from '../../actions/appActions';\\n\\n    export let user;\\n\\n    $: name = ($user && $user.name) || '';\\n    $: username = ($user && $user.username && '@' + $user.username) || '';\\n\\n    function loadCurrentUser() {\\n        if ($user) {\\n            loadProfile($user.id);\\n        }\\n    }\\n</script>\\n\\n<div class=\\\"teamMemberItem\\\" on:click=\\\"{(loadCurrentUser)}\\\">\\n    <AvatarIcon {user} useThumb=\\\"{true}\\\" />\\n    <div class=\\\"detailContent\\\">\\n        <div class=\\\"detailInnerContent\\\">\\n            <div class=\\\"title\\\">{name}</div>\\n            <div class=\\\"username\\\">{username}</div>\\n        </div>\\n    </div>\\n</div>\\n\\n<style>\\n    .teamMemberItem {\\n        display: inline-block;\\n        position: relative;\\n\\n        padding-top: 6px;\\n\\n        height: 50px;\\n        /* width: 177px; */\\n\\n        cursor: pointer;\\n    }\\n\\n    .teamMemberItem :global(.avatarIcon) {\\n        position: absolute;\\n        height: 42px;\\n        width: 42px;\\n    }\\n\\n    .detailContent {\\n        /* position: absolute;\\n        left: 54px;\\n        right: 60px;\\n        top: 2px;\\n        bottom: 0; */\\n\\n\\t\\t/* display: flex;\\n\\t\\talign-items: center; */\\n\\n        padding-top: 9px;\\n        height: 100%;\\n        padding-left: 53px;\\n        padding-right: 25px;\\n    }\\n\\n    .detailInnerContent {\\n\\n    }\\n\\n    .title {\\n        font-size: 1.6rem;\\n        font-weight: 700;\\n        line-height: 1.3rem;\\n\\n        max-width: 180px;\\n        overflow: hidden;\\n        text-overflow: ellipsis;\\n        white-space: nowrap;\\n        padding-bottom: 5px; margin-bottom: -5px; /* fix clipping decenders */\\n    }\\n\\n    .username {\\n        font-size: 1.1rem;\\n        margin-top: 4px;\\n        color: #666666;\\n        line-height: 1.3rem;\\n    }\\n</style>\"],\"names\":[],\"mappings\":\"AA4BI,eAAe,cAAC,CAAC,AACb,OAAO,CAAE,YAAY,CACrB,QAAQ,CAAE,QAAQ,CAElB,WAAW,CAAE,GAAG,CAEhB,MAAM,CAAE,IAAI,CAGZ,MAAM,CAAE,OAAO,AACnB,CAAC,AAED,6BAAe,CAAC,AAAQ,WAAW,AAAE,CAAC,AAClC,QAAQ,CAAE,QAAQ,CAClB,MAAM,CAAE,IAAI,CACZ,KAAK,CAAE,IAAI,AACf,CAAC,AAED,cAAc,cAAC,CAAC,AAUZ,WAAW,CAAE,GAAG,CAChB,MAAM,CAAE,IAAI,CACZ,YAAY,CAAE,IAAI,CAClB,aAAa,CAAE,IAAI,AACvB,CAAC,AAMD,MAAM,cAAC,CAAC,AACJ,SAAS,CAAE,MAAM,CACjB,WAAW,CAAE,GAAG,CAChB,WAAW,CAAE,MAAM,CAEnB,SAAS,CAAE,KAAK,CAChB,QAAQ,CAAE,MAAM,CAChB,aAAa,CAAE,QAAQ,CACvB,WAAW,CAAE,MAAM,CACnB,cAAc,CAAE,GAAG,CAAE,aAAa,CAAE,IAAI,AAC5C,CAAC,AAED,SAAS,cAAC,CAAC,AACP,SAAS,CAAE,MAAM,CACjB,UAAU,CAAE,GAAG,CACf,KAAK,CAAE,OAAO,CACd,WAAW,CAAE,MAAM,AACvB,CAAC\"}"
};

const TeamMemberItem = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let $user;
	let { user } = $$props;
	$user = get_store_value(user);

	if ($$props.user === void 0 && $$bindings.user && user !== void 0) $$bindings.user(user);
	$$result.css.add(css$$);
	$user = get_store_value(user);
	let name = $user && $user.name || "";
	let username = $user && $user.username && "@" + $user.username || "";

	return `<div class="${"teamMemberItem svelte-ewxqpz"}">${validate_component(AvatarIcon, "AvatarIcon").$$render($$result, { user, useThumb: true }, {}, {})}
    <div class="${"detailContent svelte-ewxqpz"}"><div class="${"detailInnerContent svelte-ewxqpz"}"><div class="${"title svelte-ewxqpz"}">${escape(name)}</div>
            <div class="${"username svelte-ewxqpz"}">${escape(username)}</div></div></div>
</div>`;
});

/* src\routes\_components\ProjectTeamList.svelte generated by Svelte v3.23.0 */

const css$10 = {
	code: ".content.svelte-1h8w8s4 .contentItem{width:100%;margin-bottom:10px}.content.svelte-1h8w8s4 .contentPanel{padding:20px 0}.content.svelte-1h8w8s4 .contentPanel .panelTitle{padding-left:20px;padding-bottom:10px}.content.svelte-1h8w8s4 .contentPanel .showMoreButton {padding-left:30px;margin-top:-6px}.content.svelte-1h8w8s4 .panelContent{white-space:nowrap;overflow-x:scroll;overflow-y:hidden;padding:0 20px;-ms-overflow-style:none}.content.svelte-1h8w8s4 .panelContent::-webkit-scrollbar{display:none}",
	map: "{\"version\":3,\"file\":\"ProjectTeamList.svelte\",\"sources\":[\"ProjectTeamList.svelte\"],\"sourcesContent\":[\"<script>\\n    import ContentPanel from './ContentPanel.svelte';\\n\\n    import TeamMemberItem from './TeamMemberItem.svelte';\\n\\n\\timport Proxy from '../../components/Proxy.svelte';\\n    import Hotspot from '../../components/Hotspot.svelte';\\n\\n    import { getUser } from '../../models/usersModel';\\n\\n    import { loadProfile } from '../../actions/appActions';\\n\\n    import {\\n        getIsProjectTeamMember,\\n        showBetaFeatures,\\n        user,\\n    } from '../../models/appModel';\\n\\n    import {\\n        loadUsers,\\n    } from '../../models/usersModel';\\n\\n    export let project = null;\\n\\n    const MAX_TEAM_MEMBERS = 10;\\n\\n\\t$: isTeamMember = $user && getIsProjectTeamMember(project);\\n    $: isNew = (project && project.isNew) || false;\\n\\n\\t$: canEdit = (isTeamMember && !project.archived) || false;\\n\\n    $: teamMembers = (project && project.team) || null;\\n\\n    $: {\\n        if (teamMembers && teamMembers.length) {\\n            loadUsers( { ids: teamMembers } );\\n        }\\n    }\\n\\n    $: areMoreItems = teamMembers && teamMembers.length > MAX_TEAM_MEMBERS;\\n\\n    let proxyImage = 'project_team';\\n    $: {\\n        if (isNew) {\\n            proxyImage = 'project_team_populate';\\n        } else {\\n            if (isTeamMember) {\\n                proxyImage = 'project_team_owner';\\n            } else {\\n                proxyImage = 'project_team';\\n            }\\n        }\\n    }\\n</script>\\n\\n{#if teamMembers && teamMembers.length}\\n    <div class=\\\"content\\\">\\n        <!-- <Proxy image=\\\"{proxyImage}\\\" className=\\\"contentItem proxyOverlay\\\" >\\n            <Hotspot onClick=\\\"{e => loadProfile('bl20a8lm')}\\\" style=\\\"\\n                left: 0;\\n                top: 31px;\\n                width: 100%;\\n                height: 56px;\\\" />\\n        </Proxy> -->\\n\\n        <ContentPanel title=\\\"Team\\\" showEdit=\\\"{canEdit && $showBetaFeatures}\\\" showMoreAction=\\\"{areMoreItems}\\\">\\n            {#each teamMembers as teamMember, index}\\n                {#if index < MAX_TEAM_MEMBERS}\\n                    <TeamMemberItem user=\\\"{getUser(teamMember)}\\\" />\\n                {/if}\\n            {/each}\\n        </ContentPanel>\\n    </div>\\n{/if}\\n\\n<style>\\n\\t.content :global(.contentItem) {\\n\\t\\twidth: 100%;\\n\\n\\t\\tmargin-bottom: 10px;\\n\\t}\\n\\n\\t/* .content :global(.proxyOverlay) {\\n        position: absolute;\\n        opacity: 0.5;\\n\\t} */\\n\\n\\t.content :global(.contentPanel) {\\n        /* background-color: initial; */\\n        padding: 20px 0;\\n\\t}\\n\\n\\t.content :global(.contentPanel .panelTitle) {\\n        padding-left: 20px;\\n        padding-bottom: 10px;\\n\\t}\\n\\t.content :global(.contentPanel .showMoreButton ) {\\n        padding-left: 30px;\\n        margin-top: -6px;\\n\\t}\\n\\n\\t.content :global(.panelContent) {\\n        white-space: nowrap;\\n\\n        overflow-x: scroll;\\n        overflow-y: hidden;\\n\\n        /* margin-top: -19px; */\\n        padding: 0 20px;\\n\\n        -ms-overflow-style: none; /* Hide scrollbar for IE and Edge */\\n\\t}\\n\\t.content :global(.panelContent::-webkit-scrollbar) { /* Hide scrollbar for Chrome, Safari and Opera */\\n        display: none;\\n    }\\n</style>\"],\"names\":[],\"mappings\":\"AA4EC,uBAAQ,CAAC,AAAQ,YAAY,AAAE,CAAC,AAC/B,KAAK,CAAE,IAAI,CAEX,aAAa,CAAE,IAAI,AACpB,CAAC,AAOD,uBAAQ,CAAC,AAAQ,aAAa,AAAE,CAAC,AAE1B,OAAO,CAAE,IAAI,CAAC,CAAC,AACtB,CAAC,AAED,uBAAQ,CAAC,AAAQ,yBAAyB,AAAE,CAAC,AACtC,YAAY,CAAE,IAAI,CAClB,cAAc,CAAE,IAAI,AAC3B,CAAC,AACD,uBAAQ,CAAC,AAAQ,8BAA8B,AAAE,CAAC,AAC3C,YAAY,CAAE,IAAI,CAClB,UAAU,CAAE,IAAI,AACvB,CAAC,AAED,uBAAQ,CAAC,AAAQ,aAAa,AAAE,CAAC,AAC1B,WAAW,CAAE,MAAM,CAEnB,UAAU,CAAE,MAAM,CAClB,UAAU,CAAE,MAAM,CAGlB,OAAO,CAAE,CAAC,CAAC,IAAI,CAEf,kBAAkB,CAAE,IAAI,AAC/B,CAAC,AACD,uBAAQ,CAAC,AAAQ,gCAAgC,AAAE,CAAC,AAC7C,OAAO,CAAE,IAAI,AACjB,CAAC\"}"
};

const MAX_TEAM_MEMBERS = 10;

const ProjectTeamList = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let $user = get_store_value(user);
	let $showBetaFeatures = get_store_value(showBetaFeatures);
	let { project = null } = $$props;
	if ($$props.project === void 0 && $$bindings.project && project !== void 0) $$bindings.project(project);
	$$result.css.add(css$10);
	let isTeamMember = $user && getIsProjectTeamMember(project);
	let isNew = project && project.isNew || false;
	let canEdit = isTeamMember && !project.archived || false;
	let teamMembers = project && project.team || null;

	 {
		{
			if (teamMembers && teamMembers.length) {
				loadUsers({ ids: teamMembers });
			}
		}
	}

	let areMoreItems = teamMembers && teamMembers.length > MAX_TEAM_MEMBERS;

	return `${teamMembers && teamMembers.length
	? `<div class="${"content svelte-1h8w8s4"}">

        ${validate_component(ContentPanel, "ContentPanel").$$render(
			$$result,
			{
				title: "Team",
				showEdit: canEdit && $showBetaFeatures,
				showMoreAction: areMoreItems
			},
			{},
			{
				default: () => `${each(teamMembers, (teamMember, index) => `${index < MAX_TEAM_MEMBERS
				? `${validate_component(TeamMemberItem, "TeamMemberItem").$$render($$result, { user: getUser(teamMember) }, {}, {})}`
				: ``}`)}`
			}
		)}</div>`
	: ``}`;
});

/* src\routes\projects\[project]\index.svelte generated by Svelte v3.23.0 */

const css$11 = {
	code: ".content.svelte-1h865aq.svelte-1h865aq{width:100%}.content.svelte-1h865aq.svelte-1h865aq .contentItem{width:100%;margin-bottom:10px}.headerImage.svelte-1h865aq.svelte-1h865aq{width:100%;padding-top:59.6%;background-size:cover;background-position:center;background-color:#dedede}.contentContainer.svelte-1h865aq.svelte-1h865aq{position:relative;padding-left:23px}.overviewContent.svelte-1h865aq.svelte-1h865aq{position:relative;background-color:#ffffff}.archived.svelte-1h865aq .overviewContent.svelte-1h865aq{background-color:#eeeeee}.contentContainer.svelte-1h865aq.svelte-1h865aq .optionsButton{position:absolute;top:16px;right:0;width:28px;height:26px;padding:8px}.contentContainer.svelte-1h865aq.svelte-1h865aq .optionsButton .icon{margin-top:1px;margin-left:4px}.contentContainer.svelte-1h865aq.svelte-1h865aq .editButton{position:absolute;top:16px;right:41px;width:28px;height:26px;padding:8px 6px}.contentContainer.svelte-1h865aq.svelte-1h865aq .audienceButton{position:absolute;top:21px;right:84px}.overviewContent.svelte-1h865aq.svelte-1h865aq .readMoreButton{display:table;padding:10px;padding-right:30px;margin-top:-11px;margin-left:-10px;font-size:1.5rem;font-weight:700}.overviewHeader.svelte-1h865aq.svelte-1h865aq{padding:10px;padding-right:30px;padding-top:4px;margin-left:-10px;font-size:1.5rem;font-weight:700;color:#666666;user-select:text}.overviewContent.svelte-1h865aq.svelte-1h865aq .addProjectDetailsButton{display:table;padding:10px;padding-right:45px;padding-left:23px;font-size:1.5rem;font-weight:700;color:#DF3C3C}.overviewContent.svelte-1h865aq.svelte-1h865aq .addProjectDetailsButton .icon{padding-left:16px}.projectInfo.svelte-1h865aq.svelte-1h865aq{padding-top:5px}.projectDetailImage.svelte-1h865aq.svelte-1h865aq{width:100%}.projectDetailImage.soloImage.svelte-1h865aq.svelte-1h865aq{margin-bottom:30px}.projectInfoDetail.svelte-1h865aq.svelte-1h865aq{padding:22px 23px;padding-bottom:32px;font-size:1.5rem;line-height:2rem;user-select:text}.projectInfoDetail.svelte-1h865aq.svelte-1h865aq a{user-select:text}.projectInfoDetail.noImage.svelte-1h865aq.svelte-1h865aq{padding-top:0}.contentContainer.svelte-1h865aq.svelte-1h865aq .infoCollapseButton{float:left;margin-top:-7px;padding:10px;padding-left:20px;padding-right:105px;margin-left:-22px}.projectActions.svelte-1h865aq.svelte-1h865aq{position:relative;width:100%;padding-bottom:6px}.projectActionButtons.svelte-1h865aq.svelte-1h865aq{height:50px}.projectActions.svelte-1h865aq.svelte-1h865aq .sendMessageButton{position:absolute;padding:10px;padding-right:40px;margin-left:13px;font-size:1.5rem;font-weight:700;margin-top:4px}.projectActions.svelte-1h865aq.svelte-1h865aq .sendMessageButton .icon{padding-left:12px}.projectActions.svelte-1h865aq.svelte-1h865aq .messagesButton{position:absolute;padding:10px;padding-right:79px;top:0;right:2px;font-size:1.5rem;font-weight:700;margin-top:4px}.projectActions.svelte-1h865aq.svelte-1h865aq .messagesButton .icon{margin-left:-3px;margin-top:-2px}.projectActions.svelte-1h865aq.svelte-1h865aq .messagesButton .counterContainer{position:absolute}.projectActions.svelte-1h865aq.svelte-1h865aq .messagesButton .counter{margin-left:42px}.projectActions.svelte-1h865aq.svelte-1h865aq .makePublicButton{position:absolute;padding:3px 11px;top:7px;right:22px;font-size:1.5rem;font-weight:700}.projectActions.svelte-1h865aq.svelte-1h865aq .likeButton {position:absolute;top:4px;right:140px;width:28px;height:26px;padding:8px}.projectActions.svelte-1h865aq.svelte-1h865aq .followButton{position:absolute;top:8px;right:24px;padding:6px 41px 6px 18px;font-size:1.5rem;font-weight:700;margin-right:-6px}.projectActions.svelte-1h865aq.svelte-1h865aq .followButton .icon{margin-left:5px;margin-top:-2px}.projectActions.svelte-1h865aq.svelte-1h865aq .isButton{border:2px solid #0B0B0B;margin-right:-2px;margin-top:-2px;border-radius:999px}.content.svelte-1h865aq .collapsedHeader.svelte-1h865aq{margin-bottom:3px}.pageContent.svelte-1h865aq.svelte-1h865aq .proxyOverlay{position:absolute;opacity:0.5}.header.svelte-1h865aq.svelte-1h865aq{font-size:2.4rem;padding-top:23px;padding-right:60px;padding-bottom:5px;line-height:3rem;user-select:text}.headerOwner.svelte-1h865aq.svelte-1h865aq{padding-right:160px}.description.svelte-1h865aq.svelte-1h865aq{padding:10px;padding-top:12px;padding-right:23px;padding-bottom:18px;font-size:1.5rem;line-height:2rem;margin-left:-10px;min-height:40px;color:#555555;user-select:text}.description.svelte-1h865aq.svelte-1h865aq a{user-select:text}.button.svelte-1h865aq.svelte-1h865aq{cursor:pointer}.pageContent.svelte-1h865aq.svelte-1h865aq .actionBar .actionButtonMiddle .buttonContent{margin-right:-11px}.pageContent.svelte-1h865aq.svelte-1h865aq .actionBar .actionButtonRight .buttonContent{margin-right:-20px}.projectActions.svelte-1h865aq.svelte-1h865aq .followButton.isButton .count{left:49px}.projectActions.svelte-1h865aq.svelte-1h865aq .followButton .count{left:43px}.projectActions.svelte-1h865aq.svelte-1h865aq .followButton.isButton .count{left:49px}.collapsedOptions.svelte-1h865aq.svelte-1h865aq .readMoreButton{padding-left:23px;margin-top:0;margin-left:0}.collapsedOptions.svelte-1h865aq .projectActionButtons.svelte-1h865aq{height:44px;margin-top:-6px}.collapsedOptions.svelte-1h865aq.svelte-1h865aq .sendMessageButton{top:0;right:18px;margin-top:0}.collapsedOptions.svelte-1h865aq.svelte-1h865aq .messagesButton{top:0;margin-top:0}.projectActions.svelte-1h865aq.svelte-1h865aq .ownerLocation{padding-bottom:14px;margin-top:-37px}.archived.svelte-1h865aq.svelte-1h865aq .contentPanel{background-color:#eeeeee}.archived.svelte-1h865aq.svelte-1h865aq .projectPost{opacity:0.5}",
	map: "{\"version\":3,\"file\":\"index.svelte\",\"sources\":[\"index.svelte\"],\"sourcesContent\":[\"<script>\\r\\n\\timport locale from '../../../locale';\\r\\n\\timport config from '../../../config';\\r\\n\\timport { menuIds } from '../../../config/menus';\\r\\n\\timport { getDisplayText } from '../../../utils';\\r\\n\\r\\n\\timport { onMount } from 'svelte';\\r\\n\\r\\n    import Button from '../../../components/Button.svelte';\\r\\n\\r\\n\\timport ScrollView from '../../../components/ScrollView.svelte';\\r\\n\\r\\n\\timport ActionBar from '../../_components/ActionBar.svelte';\\r\\n\\timport ActionButton from '../../_components/ActionButton.svelte';\\r\\n\\timport ArchivedBar from '../../_components/ArchivedBar.svelte';\\r\\n\\timport Counter from '../../_components/Counter.svelte';\\r\\n\\timport Location from '../../_components/Location.svelte';\\r\\n\\timport Audience from '../../_components/Audience.svelte';\\r\\n\\timport ProjectSkillsList from '../../_components/ProjectSkillsList.svelte';\\r\\n\\timport ProjectLinks from '../../_components/ProjectLinks.svelte';\\r\\n\\timport ChannelList from '../../_components/ChannelList.svelte';\\r\\n\\timport ContentLoader from '../../_components/ContentLoader.svelte';\\r\\n\\r\\n    import SendMessageIcon from \\\"../../../assets/icons/send.png\\\";\\r\\n\\timport OptionsMenuIcon from \\\"../../../assets/icons/menu.png\\\";\\r\\n\\timport HideInfoIcon from \\\"../../../assets/icons/collapse.png\\\";\\r\\n\\timport AddDetailsIcon from \\\"../../../assets/icons/add_highlight.png\\\";\\r\\n\\timport EditIcon from \\\"../../../assets/icons/edit.png\\\";\\r\\n\\timport MessagesIcon from \\\"../../../assets/icons/nav_messages.png\\\";\\r\\n\\r\\n    import LikeIcon from \\\"../../../assets/icons/like.png\\\";\\r\\n    import LikeSelectedIcon from \\\"../../../assets/icons/like_selected.png\\\";\\r\\n    import FollowIcon from \\\"../../../assets/icons/follow.png\\\";\\r\\n\\timport FollowSelectedIcon from \\\"../../../assets/icons/follow_selected.png\\\";\\r\\n\\r\\n    import LikesIcon from \\\"../../../assets/icons/likes.png\\\";\\r\\n    import FollowerIcon from \\\"../../../assets/icons/followers.png\\\";\\r\\n\\r\\n\\timport Proxy from '../../../components/Proxy.svelte';\\r\\n\\timport Hotspot from '../../../components/Hotspot.svelte';\\r\\n\\r\\n\\timport {\\r\\n\\t\\tprojectId,\\r\\n\\t\\tproject,\\r\\n\\t\\tprojectReturnView,\\r\\n\\t\\tprojectShowingInfo,\\r\\n\\t\\tgetIsProjectTeamMember,\\r\\n\\t\\tshowBetaFeatures,\\r\\n\\t\\tuser,\\r\\n\\t\\tuserId,\\r\\n\\t\\tisProjectLoaded,\\r\\n\\t\\tisUserLoaded,\\r\\n\\t\\tloggingIn,\\r\\n\\t\\tgetHeaderImage,\\r\\n\\t} from '../../../models/appModel';\\r\\n\\r\\n\\timport {\\r\\n\\t\\tgetProjectHeaderImage,\\r\\n\\t\\tgetProjectHasDetails,\\r\\n\\t\\tloadingProjects,\\r\\n\\t} from '../../../models/projectsModel';\\r\\n\\r\\n\\timport {\\r\\n\\t\\t// loadChannel,\\r\\n\\t\\tloadConversationByProject,\\r\\n\\t\\teditProjectDetails,\\r\\n\\t\\tshowProjectInfo,\\r\\n\\t\\thideProjectInfo,\\r\\n\\t\\ttoggleProjectInfo,\\r\\n\\t\\tshowProjectFollowers,\\r\\n\\t\\tshowMenu,\\r\\n\\t\\tshowTogglePublicDialog,\\r\\n\\t} from '../../../actions/appActions';\\r\\n\\r\\n\\timport {\\r\\n\\t\\tprojectToggleFollowing,\\r\\n\\t\\tprojectToggleLiked,\\r\\n\\t\\tunarchiveProject,\\r\\n\\t} from '../../../actions/projectActions';\\r\\n\\r\\n\\timport Feed from './../../_components/Feed.svelte';\\r\\n\\r\\n\\timport ProjectTeamList from './../../_components/ProjectTeamList.svelte';\\r\\n\\r\\n\\timport NewPostButton from '../../_components/NewPostButton.svelte';\\r\\n\\r\\n\\t//$: userLoading = (!($user && $user.loaded) && $userId);\\r\\n\\r\\n\\tfunction toggleFollowing() {\\r\\n\\t\\tprojectToggleFollowing($projectId);\\r\\n\\t}\\r\\n\\tfunction toggleLiked() {\\r\\n\\t\\tprojectToggleLiked($projectId);\\r\\n\\t}\\r\\n\\r\\n\\tfunction showProjectOptions() {\\r\\n\\t\\tif (isTeamMember) {\\r\\n\\t\\t\\tshowMenu(menuIds.PROJECT_OWNER_MENU);\\r\\n\\t\\t} else {\\r\\n\\t\\t\\tshowMenu(menuIds.PROJECT_MENU);\\r\\n\\t\\t}\\r\\n\\t}\\r\\n\\r\\n\\tfunction unarchiveCurrentProject() {\\r\\n\\t\\tunarchiveProject($projectId);\\r\\n\\t}\\r\\n\\r\\n\\tfunction getProjectDetailImage(imageId) {\\r\\n\\t\\treturn getHeaderImage(imageId);\\r\\n\\t\\t// return config.SITE_CONTENT_URL + config.headerImageLibraryFolder + imageId + config.headerImageExtension;\\r\\n\\t}\\r\\n\\r\\n\\t// let proxyChannelsImage;\\r\\n\\r\\n\\t$: isTeamMember = $user && getIsProjectTeamMember($project);\\r\\n\\t$: isNew = ($project && $project.isNew) || false;\\r\\n\\t$: following = ($project && $project.following) || false;\\r\\n\\t$: liked = ($project && $project.liked) || false;\\r\\n\\t$: isPublic = ($project && $project.public) || false;\\r\\n\\r\\n\\t$: canEdit = (isTeamMember && !$project.archived) || false;\\r\\n\\t$: isArchived = (isTeamMember && $project && $project.archived) || false;\\r\\n\\r\\n\\t$: unreadMessageCount = ($project && $project.unreadMessageCount) || 0;\\r\\n\\t$: messageCount = ($project && $project.messageCount) || 0;\\r\\n\\r\\n\\t$: likeCount = ($project && $project.likeCount) || 0;\\r\\n\\t$: followCount = ($project && $project.followCount) || 0;\\r\\n\\r\\n\\t$: projectSlug = ($project && $project.slug) || null;\\r\\n\\r\\n    $: headerImage = getProjectHeaderImage($project);\\r\\n\\r\\n    $: projectTitle = ($project && $project.title) || '';\\r\\n\\t$: projectDescription = ($project && $project.description) || '';\\r\\n\\t$: projectLocation = ($project && $project.location) || '';\\r\\n\\r\\n    $: projectDescriptionHTML = getDisplayText(projectDescription);\\r\\n\\r\\n\\t$: projectDetails = ($project && $project.details) || null;\\r\\n\\r\\n\\t$: projectTitleString = ($project && $project.title && $project.title + ' - ') || '';\\r\\n\\r\\n\\t// $: forceShowInfo = !following && !isTeamMember;\\r\\n\\r\\n\\t$: projectHasDetails = getProjectHasDetails($project);\\r\\n\\t$: showInfo = ($projectShowingInfo || forceProjectShowingInfo) && projectHasDetails;\\r\\n\\r\\n\\tlet forceProjectShowingInfo = false;\\r\\n\\tlet projectStateLoaded = false;\\r\\n\\r\\n\\t$: {\\r\\n\\t\\tif (!projectStateLoaded) {\\r\\n\\t\\t\\tif (isProjectLoaded($project, $projectId) && isUserLoaded($user, $userId, $loggingIn)) {\\r\\n\\t\\t\\t\\tif (!isTeamMember && !following) {\\r\\n\\t\\t\\t\\t\\tforceProjectShowingInfo = true;\\r\\n\\t\\t\\t\\t}\\r\\n\\t\\t\\t\\tprojectStateLoaded = true;\\r\\n\\t\\t\\t}\\r\\n\\t\\t}\\r\\n\\t}\\r\\n\\r\\n\\r\\n\\t// $: {\\r\\n\\t// \\tif (isTeamMember) {\\r\\n\\t// \\t\\tif (isNew) {\\r\\n\\t// \\t\\t\\tproxyChannelsImage = 'project_channels_populate';\\r\\n\\t// \\t\\t} else {\\r\\n\\t// \\t\\t\\tproxyChannelsImage = 'project_channels_owner';\\r\\n\\t// \\t\\t}\\r\\n\\t// \\t} else {\\r\\n\\t// \\t\\tif (following) {\\r\\n\\t// \\t\\t\\tproxyChannelsImage = 'project_channels_following';\\r\\n\\t// \\t\\t} else {\\r\\n\\t// \\t\\t\\tproxyChannelsImage = 'project_channels';\\r\\n\\t// \\t\\t}\\r\\n\\t// \\t}\\r\\n\\t// }\\r\\n</script>\\r\\n\\r\\n<svelte:head>\\r\\n\\t<title>{projectTitleString}Flock</title>\\r\\n</svelte:head>\\r\\n\\r\\n<div class=\\\"pageContent\\\" class:archived=\\\"{isArchived}\\\">\\r\\n\\t{#if ($loadingProjects && (!$project || $project.id !== $projectId )) || !isUserLoaded($user, $userId, $loggingIn) || (!$project && $loadingProjects) }\\r\\n\\t\\t<ContentLoader label=\\\"{locale.LOADING.PROJECT}\\\" />\\r\\n\\t{:else if !$project || !$project.id}\\r\\n\\t\\t<ContentLoader label=\\\"{locale.PROJECT.NOT_FOUND}\\\" />\\r\\n\\t{:else}\\r\\n\\t\\t<ScrollView id=\\\"project\\\" headerStartHidden=\\\"{!isArchived}\\\" headerHideOffset=\\\"{$projectReturnView ? config.RETURN_PROJECT_HEADER_OFFSET : 0}\\\">\\r\\n\\t\\t\\t<div class=\\\"content\\\">\\r\\n\\t\\t\\t\\t<div class=\\\"contentItem\\\" class:collapsedOptions=\\\"{$projectReturnView && !showInfo}\\\" class:collapsedHeader=\\\"{$projectReturnView && !showInfo && !isNew && $showBetaFeatures}\\\">\\r\\n\\t\\t\\t\\t\\t<div style=\\\"background-image: url({headerImage})\\\" class=\\\"headerImage\\\" alt=\\\"project header image\\\" />\\r\\n\\t\\t\\t\\t\\t <!-- class:headerImageCollapsed=\\\"{$projectReturnView}\\\" -->\\r\\n\\r\\n\\t\\t\\t\\t\\t<div class=\\\"overviewContent\\\" class:returnView=\\\"{$projectReturnView}\\\">\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"contentContainer\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<Button className=\\\"optionsButton\\\" icon=\\\"{OptionsMenuIcon}\\\" onClick=\\\"{showProjectOptions}\\\"></Button>\\r\\n\\t\\t\\t\\t\\t\\t\\t{#if isTeamMember}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<Button className=\\\"editButton\\\" onClick=\\\"{editProjectDetails}\\\" icon=\\\"{EditIcon}\\\" disabled=\\\"{!canEdit}\\\"></Button>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<Audience {isPublic} onClick=\\\"{showTogglePublicDialog}\\\" disabled=\\\"{!canEdit}\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t{/if}\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"itemContent\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"header\\\" class:headerOwner=\\\"{isTeamMember}\\\">{projectTitle}</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"description\\\" class:button=\\\"{projectHasDetails && !forceProjectShowingInfo}\\\" on:click=\\\"{(projectHasDetails && !forceProjectShowingInfo) ? toggleProjectInfo : null}\\\">{@html projectDescriptionHTML}</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t{#if projectHasDetails}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t{#if !showInfo}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t{#if !$projectReturnView}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<Button className=\\\"readMoreButton\\\" onClick=\\\"{showProjectInfo}\\\">read more</Button>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t{/if}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t{:else}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"overviewHeader\\\" class:button=\\\"{!forceProjectShowingInfo}\\\" on:click=\\\"{!forceProjectShowingInfo ? hideProjectInfo : null}\\\">Overview</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t{/if}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<!-- {:else if !forceProjectShowingInfo}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<Button className=\\\"infoCollapseButton\\\" onClick=\\\"{hideProjectInfo}\\\" icon=\\\"{HideInfoIcon}\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t{/if} -->\\r\\n\\t\\t\\t\\t\\t\\t\\t{/if}\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t{#if showInfo}\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"projectInfo\\\" class:forceShowInfo=\\\"{forceProjectShowingInfo}\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t{#each projectDetails as projectDetailItem, index}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t{#if projectDetailItem.detail || projectDetailItem.image}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{#if projectDetailItem.image}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{#if projectDetailItem.image === true}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<Proxy image=\\\"project_info_image_{index + 1}\\\" className=\\\"projectDetailImage {!projectDetailItem.detail ? 'soloImage' : ''}\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{:else}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"projectDetailImage {!projectDetailItem.detail ? 'soloImage' : ''}\\\" src=\\\"{getProjectDetailImage(projectDetailItem.image)}\\\" alt=\\\"project header image\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{/if}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{/if}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<!-- <Proxy image=\\\"project_info_content_3\\\" className=\\\"proxyOverlay\\\" /> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{#if projectDetailItem.detail}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"projectInfoDetail\\\" class:noImage=\\\"{!projectDetailItem.image}\\\">{@html getDisplayText(projectDetailItem.detail)}</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{/if}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t{/if}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t{/each}\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t{/if}\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"projectActions\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"projectActionButtons\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t{#if projectHasDetails && !showInfo && $projectReturnView}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<Button className=\\\"readMoreButton\\\" onClick=\\\"{showProjectInfo}\\\">read more</Button>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t{:else if !projectHasDetails && isTeamMember && !isArchived}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<Button className=\\\"addProjectDetailsButton\\\" onClick=\\\"{() => editProjectDetails({editingProjectMode: 'addDetails'})}\\\" icon=\\\"{AddDetailsIcon}\\\">add project details</Button>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t{/if}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t{#if !isTeamMember}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<Button disabled=\\\"{!$showBetaFeatures}\\\" className=\\\"sendMessageButton\\\" onClick=\\\"{e => loadConversationByProject($projectId)}\\\" icon=\\\"{SendMessageIcon}\\\">message</Button>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t{:else if isNew && !isPublic}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t{#if !isArchived}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<Button className=\\\"makePublicButton isButton\\\" onClick=\\\"{showTogglePublicDialog}\\\">make public</Button>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t{/if}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t{:else}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<Button disabled=\\\"{!$showBetaFeatures}\\\" className=\\\"messagesButton\\\" href=\\\"projects/{$projectId}/messages\\\" icon=\\\"{MessagesIcon}\\\">messages\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<Counter count=\\\"{unreadMessageCount ? unreadMessageCount : messageCount}\\\" hasNew=\\\"{unreadMessageCount}\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</Button>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t{/if}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t{#if (!$projectReturnView || showInfo) && !isTeamMember}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<Button className=\\\"likeButton\\\" onClick=\\\"{toggleLiked}\\\" icon=\\\"{liked ? LikeSelectedIcon : LikeIcon}\\\"><!--<div class=\\\"countContainer\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"count\\\">{likeCount}</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>--></Button>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<Button className=\\\"followButton {!following ? 'isButton' : ''}\\\" onClick=\\\"{toggleFollowing}\\\" icon=\\\"{following ? FollowSelectedIcon : FollowIcon}\\\">{following ? 'following' : 'follow'}<!-- <div class=\\\"countContainer\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"count\\\">{followCount}</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>--></Button>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t{/if}\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t{#if (!$projectReturnView || showInfo) && projectLocation}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<Location className=\\\"{(isTeamMember && showInfo) ? 'ownerLocation' : ''}\\\" location=\\\"{projectLocation}\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t{/if}\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t\\t{#if isNew}\\r\\n\\t\\t\\t\\t\\t<ProjectTeamList project=\\\"{$project}\\\" />\\r\\n\\t\\t\\t\\t\\t<ProjectSkillsList project=\\\"{$project}\\\" />\\r\\n\\t\\t\\t\\t\\t{#if $showBetaFeatures}\\r\\n\\t\\t\\t\\t\\t\\t<ProjectLinks project=\\\"{$project}\\\" />\\r\\n\\t\\t\\t\\t\\t{/if}\\r\\n\\t\\t\\t\\t\\t<!-- <Proxy image=\\\"{proxyChannelsImage}\\\" className=\\\"contentItem channelsItem\\\" onClick=\\\"{e => loadChannel('7m2ldksm')}\\\" /> -->\\r\\n\\t\\t\\t\\t\\t<ChannelList project=\\\"{project}\\\" />\\r\\n\\t\\t\\t\\t\\t{#if $showBetaFeatures}\\r\\n\\t\\t\\t\\t\\t\\t{#if canEdit}\\r\\n\\t\\t\\t\\t\\t\\t\\t<NewPostButton label=\\\"{locale.PROJECT.POST_UPDATE}\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t <!-- type=\\\"project_post_update\\\" -->\\r\\n\\t\\t\\t\\t\\t\\t{/if}\\r\\n\\t\\t\\t\\t\\t{/if}\\r\\n\\t\\t\\t\\t{:else if $projectReturnView}\\r\\n\\t\\t\\t\\t\\t<!-- <Proxy image=\\\"{proxyChannelsImage}\\\" className=\\\"contentItem channelsItem\\\" onClick=\\\"{e => loadChannel('7m2ldksm')}\\\" /> -->\\r\\n\\t\\t\\t\\t\\t<ChannelList project=\\\"{project}\\\" />\\r\\n\\t\\t\\t\\t\\t{#if $showBetaFeatures}\\r\\n\\t\\t\\t\\t\\t\\t{#if canEdit}\\r\\n\\t\\t\\t\\t\\t\\t\\t<NewPostButton label=\\\"{locale.PROJECT.POST_UPDATE}\\\" />\\r\\n\\t\\t\\t\\t\\t\\t{/if}\\r\\n\\t\\t\\t\\t\\t\\t<ProjectLinks project=\\\"{$project}\\\" />\\r\\n\\t\\t\\t\\t\\t{/if}\\r\\n\\t\\t\\t\\t\\t<ProjectSkillsList project=\\\"{$project}\\\" />\\r\\n\\t\\t\\t\\t\\t<ProjectTeamList project=\\\"{$project}\\\" />\\r\\n\\t\\t\\t\\t\\t{#if $showBetaFeatures}\\r\\n\\t\\t\\t\\t\\t\\t<div>\\r\\n\\t\\t\\t\\t\\t\\t\\t<Proxy image=\\\"project_post_1\\\" className=\\\"contentItem projectPost\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t<Proxy image=\\\"project_post_2\\\" className=\\\"contentItem projectPost\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t<Proxy image=\\\"project_post_3\\\" className=\\\"contentItem projectPost\\\" />\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t{#if canEdit}\\r\\n\\t\\t\\t\\t\\t\\t\\t<NewPostButton label=\\\"{locale.PROJECT.POST_UPDATE}\\\" />\\r\\n\\t\\t\\t\\t\\t\\t{/if}\\r\\n\\t\\t\\t\\t\\t{/if}\\r\\n\\t\\t\\t\\t{:else}\\r\\n\\t\\t\\t\\t\\t<ProjectSkillsList project=\\\"{$project}\\\" />\\r\\n\\t\\t\\t\\t\\t<ProjectTeamList project=\\\"{$project}\\\" />\\r\\n\\t\\t\\t\\t\\t{#if $showBetaFeatures}\\r\\n\\t\\t\\t\\t\\t\\t<ProjectLinks project=\\\"{$project}\\\" />\\r\\n\\t\\t\\t\\t\\t{/if}\\r\\n\\t\\t\\t\\t\\t<!-- <Proxy image=\\\"{proxyChannelsImage}\\\" className=\\\"contentItem channelsItem\\\" onClick=\\\"{e => loadChannel('7m2ldksm')}\\\" /> -->\\r\\n\\t\\t\\t\\t\\t<ChannelList project=\\\"{project}\\\" />\\r\\n\\t\\t\\t\\t\\t{#if $showBetaFeatures}\\r\\n\\t\\t\\t\\t\\t\\t<div id=\\\"post\\\" />\\r\\n\\t\\t\\t\\t\\t\\t<div>\\r\\n\\t\\t\\t\\t\\t\\t\\t<Proxy image=\\\"project_post_1\\\" className=\\\"contentItem projectPost\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t<Proxy image=\\\"project_post_2\\\" className=\\\"contentItem projectPost\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t<Proxy image=\\\"project_post_3\\\" className=\\\"contentItem projectPost\\\" />\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t{/if}\\r\\n\\t\\t\\t\\t{/if}\\r\\n\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t<div slot=\\\"scrollHeader\\\">\\r\\n\\t\\t\\t\\t{#if isArchived}\\r\\n\\t\\t\\t\\t\\t<ArchivedBar onClick=\\\"{unarchiveCurrentProject}\\\"/>\\r\\n\\t\\t\\t\\t{:else}\\r\\n\\t\\t\\t\\t\\t{#if isTeamMember}\\r\\n\\t\\t\\t\\t\\t\\t<ActionBar targetItemId=\\\"{$projectId}\\\" targetItem=\\\"{$project}\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div slot=\\\"buttonLeft\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<ActionButton\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tlabel = \\\"likes\\\"\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\ticon = \\\"{LikesIcon}\\\"\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\ttargetItem = \\\"{$project}\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\ttargetItemId = \\\"{$projectId}\\\"\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tcountProperty = \\\"likeCount\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tdisplayZeroCountValue = \\\"{true}\\\"\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tbuttonContentStyle = \\\"padding-right: 56px;\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\ticonStyle = \\\"padding-bottom: 4px; margin-top: 1px;\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tcountStyle = \\\"left: 40px\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t/>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t<div slot=\\\"buttonMiddle\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<ActionButton\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tlabel = \\\"followers\\\"\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\ticon = \\\"{FollowerIcon}\\\"\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\ttargetItem = \\\"{$project}\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\ttargetItemId = \\\"{$projectId}\\\"\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tcountProperty = \\\"followCount\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tdisplayZeroCountValue = \\\"{true}\\\"\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tbuttonContentStyle = \\\"padding-right: 56px;\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\ticonStyle = \\\"padding-bottom: 4px\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tcountStyle = \\\"left: 40px\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t/>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<!-- action = \\\"{showProjectFollowers}\\\" -->\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</ActionBar>\\r\\n\\t\\t\\t\\t\\t{:else}\\r\\n\\t\\t\\t\\t\\t\\t<ActionBar targetItemId=\\\"{$projectId}\\\" targetItem=\\\"{$project}\\\" />\\r\\n\\t\\t\\t\\t\\t{/if}\\r\\n\\t\\t\\t\\t{/if}\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</ScrollView>\\r\\n\\t{/if}\\r\\n</div>\\r\\n\\r\\n<style>\\r\\n\\t.content {\\r\\n\\t\\twidth: 100%;\\r\\n\\r\\n    \\t/* line-height: 0; */\\r\\n\\t}\\r\\n\\r\\n\\t.content :global(.contentItem) {\\r\\n\\t\\twidth: 100%;\\r\\n\\r\\n\\t\\tmargin-bottom: 10px;\\r\\n\\t}\\r\\n\\r\\n\\t/* .pageContent :global(.actionBar .actionButtonMiddle .buttonContent) {\\r\\n\\t\\tpadding-right: 44px;\\r\\n\\t} */\\r\\n\\r\\n\\t.headerImage {\\r\\n\\t\\twidth: 100%;\\r\\n    \\tpadding-top: 59.6%;\\r\\n    \\tbackground-size: cover;\\r\\n        background-position: center;\\r\\n\\r\\n\\t\\t/* height: 245px;\\r\\n    \\tobject-fit: cover; */\\r\\n\\r\\n        background-color: #dedede;\\r\\n\\t}\\r\\n\\r\\n\\t/* .headerImageCollapsed {\\r\\n\\t\\theight: 150px;\\r\\n\\t} */\\r\\n\\r\\n    .contentContainer {\\r\\n        position: relative;\\r\\n\\r\\n\\t\\tpadding-left: 23px;\\r\\n\\t}\\r\\n\\r\\n\\t.overviewContent {\\r\\n\\t\\tposition: relative;\\r\\n\\t\\tbackground-color: #ffffff;\\r\\n\\t}\\r\\n\\t.archived .overviewContent {\\r\\n    \\tbackground-color: #eeeeee;\\r\\n\\t}\\r\\n\\r\\n    .contentContainer :global(.optionsButton) {\\r\\n\\t\\tposition: absolute;\\r\\n\\r\\n    \\ttop: 16px;\\r\\n    \\tright: 0;\\r\\n\\r\\n\\t\\twidth: 28px;\\r\\n\\t\\theight: 26px;\\r\\n\\t\\tpadding: 8px;\\r\\n\\t}\\r\\n    .contentContainer :global(.optionsButton .icon) {\\r\\n\\t\\tmargin-top: 1px;\\r\\n    \\tmargin-left: 4px;\\r\\n\\t}\\r\\n\\r\\n    .contentContainer :global(.editButton) {\\r\\n\\t\\tposition: absolute;\\r\\n\\r\\n\\t\\ttop: 16px;\\r\\n    \\tright: 41px;\\r\\n\\r\\n\\t\\twidth: 28px;\\r\\n\\t\\theight: 26px;\\r\\n    \\tpadding: 8px 6px;\\r\\n\\t}\\r\\n\\r\\n    .contentContainer :global(.audienceButton) {\\r\\n\\t\\tposition: absolute;\\r\\n\\t\\ttop: 21px;\\r\\n    \\tright: 84px;\\r\\n\\t}\\r\\n\\r\\n    .overviewContent :global(.readMoreButton) {\\r\\n\\t\\tdisplay: table;\\r\\n\\r\\n\\t\\tpadding: 10px;\\r\\n\\t\\tpadding-right: 30px;\\r\\n\\r\\n    \\tmargin-top: -11px;\\r\\n\\t\\tmargin-left: -10px;\\r\\n\\r\\n\\t\\tfont-size: 1.5rem;\\r\\n\\t\\tfont-weight: 700;\\r\\n\\t}\\r\\n\\r\\n\\t.overviewHeader {\\r\\n\\t\\tpadding: 10px;\\r\\n\\t\\tpadding-right: 30px;\\r\\n    \\tpadding-top: 4px;\\r\\n\\r\\n\\t\\tmargin-left: -10px;\\r\\n\\r\\n\\t\\tfont-size: 1.5rem;\\r\\n\\t\\tfont-weight: 700;\\r\\n\\r\\n    \\tcolor: #666666;\\r\\n\\r\\n\\t\\tuser-select: text;\\r\\n\\t}\\r\\n\\r\\n    .overviewContent :global(.addProjectDetailsButton) {\\r\\n\\t\\tdisplay: table;\\r\\n\\r\\n\\t\\tpadding: 10px;\\r\\n\\t\\tpadding-right: 45px;\\r\\n\\r\\n    \\tpadding-left: 23px;\\r\\n\\r\\n\\t\\tfont-size: 1.5rem;\\r\\n\\t\\tfont-weight: 700;\\r\\n\\r\\n\\t\\tcolor: #DF3C3C;\\r\\n\\t}\\r\\n    .overviewContent :global(.addProjectDetailsButton .icon) {\\r\\n    \\tpadding-left: 16px;\\r\\n\\t}\\r\\n\\r\\n\\r\\n\\t.projectInfo {\\r\\n    \\tpadding-top: 5px;\\r\\n    \\t/* padding-top: 30px; */\\r\\n\\t}\\r\\n\\t/* .projectInfo.forceShowInfo {\\r\\n    \\tpadding-top: 20px;\\r\\n\\t} */\\r\\n\\r\\n\\t.projectDetailImage {\\r\\n\\t\\twidth: 100%;\\r\\n\\t}\\r\\n\\t.projectDetailImage.soloImage {\\r\\n\\t\\tmargin-bottom: 30px;\\r\\n\\t}\\r\\n\\r\\n\\t.projectInfoDetail {\\r\\n\\t\\tpadding: 22px 23px;\\r\\n\\t\\t/* padding-right: 35px; */\\r\\n    \\tpadding-bottom: 32px;\\r\\n\\r\\n\\t\\tfont-size: 1.5rem;\\r\\n\\t\\tline-height: 2rem;\\r\\n\\r\\n\\t\\tuser-select: text;\\r\\n\\t}\\r\\n    .projectInfoDetail :global(a) {\\r\\n        user-select: text;\\r\\n    }\\r\\n\\t.projectInfoDetail.noImage {\\r\\n\\t\\tpadding-top: 0;\\r\\n\\t}\\r\\n\\r\\n    .contentContainer :global(.infoCollapseButton) {\\r\\n\\t\\t/* display: table; */\\r\\n\\t\\t/* position: absolute;\\r\\n\\t\\tright: 0; */\\r\\n\\r\\n\\t\\tfloat: left;\\r\\n\\t\\tmargin-top: -7px;\\r\\n\\r\\n\\t\\tpadding: 10px;\\r\\n\\t\\tpadding-left: 20px;\\r\\n    \\tpadding-right: 105px;\\r\\n\\t\\tmargin-left: -22px;\\r\\n\\r\\n    \\t/* float: right;\\r\\n    \\tmargin-top: -14px;\\r\\n\\r\\n\\t\\tpadding: 10px;\\r\\n    \\tpadding-left: 20px;\\r\\n    \\tpadding-right: 40px;\\r\\n\\t\\tmargin-left: -12px; */\\r\\n\\t}\\r\\n\\r\\n\\t.projectActions {\\r\\n\\t\\tposition: relative;\\r\\n\\r\\n\\t\\twidth: 100%;\\r\\n\\r\\n    \\tpadding-bottom: 6px;\\r\\n\\t}\\r\\n\\r\\n\\t.projectActionButtons {\\r\\n\\t\\theight: 50px;\\r\\n\\t}\\r\\n\\r\\n    .projectActions :global(.sendMessageButton) {\\r\\n    \\tposition: absolute;\\r\\n\\t\\tpadding: 10px;\\r\\n    \\tpadding-right: 40px;\\r\\n\\r\\n\\t\\tmargin-left: 13px;\\r\\n\\r\\n\\t\\tfont-size: 1.5rem;\\r\\n\\t\\tfont-weight: 700;\\r\\n\\r\\n    \\tmargin-top: 4px;\\r\\n    }\\r\\n    .projectActions :global(.sendMessageButton .icon) {\\r\\n    \\tpadding-left: 12px;\\r\\n\\t}\\r\\n\\r\\n    .projectActions :global(.messagesButton) {\\r\\n    \\tposition: absolute;\\r\\n\\t\\tpadding: 10px;\\r\\n    \\tpadding-right: 79px;\\r\\n\\r\\n    \\ttop: 0;\\r\\n    \\tright: 2px;\\r\\n\\r\\n\\t\\tfont-size: 1.5rem;\\r\\n\\t\\tfont-weight: 700;\\r\\n\\r\\n    \\tmargin-top: 4px;\\r\\n    }\\r\\n    .projectActions :global(.messagesButton .icon) {\\r\\n    \\tmargin-left: -3px;\\r\\n\\t\\tmargin-top: -2px;\\r\\n\\t}\\r\\n    .projectActions :global(.messagesButton .counterContainer) {\\r\\n    \\tposition: absolute;\\r\\n    }\\r\\n    .projectActions :global(.messagesButton .counter) {\\r\\n    \\tmargin-left: 42px;\\r\\n    }\\r\\n\\r\\n    .projectActions :global(.makePublicButton) {\\r\\n\\t\\tposition: absolute;\\r\\n\\t\\tpadding: 3px 11px;\\r\\n\\r\\n\\t\\ttop: 7px;\\r\\n\\t\\tright: 22px;\\r\\n\\r\\n\\t\\tfont-size: 1.5rem;\\r\\n\\t\\tfont-weight: 700;\\r\\n    }\\r\\n\\r\\n    .projectActions :global(.likeButton ) {\\r\\n\\t\\tposition: absolute;\\r\\n\\t\\ttop: 4px;\\r\\n    \\tright: 140px;\\r\\n\\t\\t/* right: 180px; */\\r\\n\\t\\twidth: 28px;\\r\\n\\t\\theight: 26px;\\r\\n\\t\\tpadding: 8px;\\r\\n    }\\r\\n\\r\\n    .projectActions :global(.followButton) {\\r\\n\\t\\tposition: absolute;\\r\\n\\t\\ttop: 8px;\\r\\n    \\tright: 24px;\\r\\n\\t\\t/* right: 48px; */\\r\\n\\t\\tpadding: 6px 41px 6px 18px;\\r\\n\\r\\n\\t\\tfont-size: 1.5rem;\\r\\n\\t\\tfont-weight: 700;\\r\\n\\r\\n    \\tmargin-right: -6px;\\r\\n    }\\r\\n    .projectActions :global(.followButton .icon) {\\r\\n\\t\\tmargin-left: 5px;\\r\\n\\t\\tmargin-top: -2px;\\r\\n    }\\r\\n    .projectActions :global(.isButton) {\\r\\n\\t\\tborder: 2px solid #0B0B0B;\\r\\n\\t\\tmargin-right: -2px; margin-top: -2px; /* factor in border */\\r\\n\\t\\tborder-radius: 999px;\\r\\n    }\\r\\n\\r\\n\\t.content .collapsedHeader {\\r\\n\\t\\tmargin-bottom: 3px;\\r\\n\\t}\\r\\n\\r\\n\\t.pageContent :global(.proxyOverlay) {\\r\\n\\t\\tposition: absolute;\\r\\n\\t\\topacity: 0.5;\\r\\n\\t}\\r\\n\\r\\n    .header {\\r\\n\\t\\tfont-size: 2.4rem;\\r\\n\\t\\tpadding-top: 23px;\\r\\n\\t\\tpadding-right: 60px;\\r\\n\\t\\tpadding-bottom: 5px;\\r\\n\\t\\tline-height: 3rem;\\r\\n\\r\\n\\t\\tuser-select: text;\\r\\n\\t}\\r\\n\\r\\n    .headerOwner {\\r\\n    \\tpadding-right: 160px;\\r\\n\\t}\\r\\n\\r\\n    .description {\\r\\n\\t\\tpadding: 10px;\\r\\n\\t\\tpadding-top: 12px;\\r\\n        padding-right: 23px;\\r\\n    \\tpadding-bottom: 18px;\\r\\n        /* padding-right: 50px; */\\r\\n\\r\\n        font-size: 1.5rem;\\r\\n\\t\\tline-height: 2rem;\\r\\n\\r\\n\\t\\tmargin-left: -10px;\\r\\n\\r\\n    \\tmin-height: 40px;\\r\\n\\r\\n\\t\\tcolor: #555555;\\r\\n\\r\\n\\t\\tuser-select: text;\\r\\n\\t}\\r\\n    .description :global(a) {\\r\\n        user-select: text;\\r\\n    }\\r\\n\\r\\n\\t.button {\\r\\n\\t\\tcursor: pointer;\\r\\n\\t}\\r\\n\\r\\n    .pageContent :global(.actionBar .actionButtonMiddle .buttonContent) {\\r\\n        margin-right: -11px;\\r\\n    }\\r\\n\\r\\n    .pageContent :global(.actionBar .actionButtonRight .buttonContent) {\\r\\n        margin-right: -20px;\\r\\n\\t}\\r\\n\\r\\n\\t/* .countContainer {\\r\\n\\t\\tvertical-align: bottom;\\r\\n\\t\\tdisplay: inline-block;\\r\\n\\t\\tposition: relative;\\r\\n\\t}\\r\\n\\r\\n\\t.count {\\r\\n\\t\\tposition: absolute;\\r\\n\\t\\tleft: 35px;\\r\\n\\t\\tbottom: 1px;\\r\\n\\r\\n\\t\\tfont-size: 1.2rem;\\r\\n\\t\\tfont-weight: 700;\\r\\n\\r\\n\\t\\tcolor: #777777;\\r\\n\\t} */\\r\\n\\r\\n    .projectActions :global(.followButton.isButton .count) {\\r\\n    \\tleft: 49px;\\r\\n    }\\r\\n    .projectActions :global(.followButton .count) {\\r\\n    \\tleft: 43px;\\r\\n\\t}\\r\\n\\r\\n    .projectActions :global(.followButton.isButton .count) {\\r\\n    \\tleft: 49px;\\r\\n\\t}\\r\\n\\r\\n\\t.collapsedOptions :global(.readMoreButton) {\\r\\n    \\tpadding-left: 23px;\\r\\n\\t\\tmargin-top: 0;\\r\\n\\t\\tmargin-left: 0;\\r\\n\\t}\\r\\n\\t.collapsedOptions .projectActionButtons {\\r\\n\\t\\theight: 44px;\\r\\n    \\tmargin-top: -6px;\\r\\n\\t}\\r\\n\\t.collapsedOptions :global(.sendMessageButton) {\\r\\n    \\ttop: 0;\\r\\n    \\tright: 18px;\\r\\n    \\tmargin-top: 0;\\r\\n\\t}\\r\\n\\t.collapsedOptions :global(.messagesButton) {\\r\\n    \\ttop: 0;\\r\\n    \\tmargin-top: 0;\\r\\n\\t}\\r\\n\\r\\n\\t.projectActions :global(.ownerLocation) {\\r\\n\\t\\tpadding-bottom: 14px;\\r\\n\\t\\tmargin-top: -37px;\\r\\n\\t}\\r\\n\\r\\n\\t.archived :global(.contentPanel) {\\r\\n    \\tbackground-color: #eeeeee;\\r\\n\\t}\\r\\n\\r\\n\\t/* .archived :global(.channelsItem) {\\r\\n    \\topacity: 0.75;\\r\\n\\t} */\\r\\n\\t.archived :global(.projectPost) {\\r\\n    \\topacity: 0.5;\\r\\n\\t}\\r\\n</style>\"],\"names\":[],\"mappings\":\"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\"}"
};

const U5Bprojectu5D = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let $projectId = get_store_value(projectId);
	let $user = get_store_value(user);
	let $project = get_store_value(project);
	let $projectShowingInfo = get_store_value(projectShowingInfo);
	let $userId = get_store_value(userId);
	let $loggingIn = get_store_value(loggingIn);
	let $loadingProjects = get_store_value(loadingProjects);
	let $projectReturnView = get_store_value(projectReturnView);
	let $showBetaFeatures = get_store_value(showBetaFeatures);

	//$: userLoading = (!($user && $user.loaded) && $userId);
	function toggleFollowing() {
		projectToggleFollowing($projectId);
	}

	function toggleLiked() {
		projectToggleLiked($projectId);
	}

	function showProjectOptions() {
		if (isTeamMember) {
			showMenu(menuIds.PROJECT_OWNER_MENU);
		} else {
			showMenu(menuIds.PROJECT_MENU);
		}
	}

	function unarchiveCurrentProject() {
		unarchiveProject($projectId);
	}

	function getProjectDetailImage(imageId) {
		return getHeaderImage(imageId);
	} // return config.SITE_CONTENT_URL + config.headerImageLibraryFolder + imageId + config.headerImageExtension;

	let forceProjectShowingInfo = false;
	let projectStateLoaded = false;
	$$result.css.add(css$11);
	let isTeamMember = $user && getIsProjectTeamMember($project);
	let isNew = $project && $project.isNew || false;
	let following = $project && $project.following || false;
	let liked = $project && $project.liked || false;
	let isPublic = $project && $project.public || false;
	let canEdit = isTeamMember && !$project.archived || false;
	let isArchived = isTeamMember && $project && $project.archived || false;
	let unreadMessageCount = $project && $project.unreadMessageCount || 0;
	let messageCount = $project && $project.messageCount || 0;
	let likeCount = $project && $project.likeCount || 0;
	let followCount = $project && $project.followCount || 0;
	let projectSlug = $project && $project.slug || null;
	let headerImage = getProjectHeaderImage($project);
	let projectTitle = $project && $project.title || "";
	let projectDescription = $project && $project.description || "";
	let projectLocation = $project && $project.location || "";
	let projectDescriptionHTML = getDisplayText(projectDescription);
	let projectDetails = $project && $project.details || null;
	let projectTitleString = $project && $project.title && $project.title + " - " || "";
	let projectHasDetails = getProjectHasDetails($project);

	 {
		{
			if (!projectStateLoaded) {
				if (isProjectLoaded($project, $projectId) && isUserLoaded($user, $userId, $loggingIn)) {
					if (!isTeamMember && !following) {
						forceProjectShowingInfo = true;
					}

					projectStateLoaded = true;
				}
			}
		}
	}

	let showInfo = ($projectShowingInfo || forceProjectShowingInfo) && projectHasDetails;

	return `${($$result.head += `${($$result.title = `<title>${escape(projectTitleString)}Flock</title>`, "")}`, "")}

<div class="${["pageContent svelte-1h865aq", isArchived ? "archived" : ""].join(" ").trim()}">${$loadingProjects && (!$project || $project.id !== $projectId) || !isUserLoaded($user, $userId, $loggingIn) || !$project && $loadingProjects
	? `${validate_component(ContentLoader, "ContentLoader").$$render($$result, { label: locale$1.LOADING.PROJECT }, {}, {})}`
	: `${!$project || !$project.id
		? `${validate_component(ContentLoader, "ContentLoader").$$render($$result, { label: locale$1.PROJECT.NOT_FOUND }, {}, {})}`
		: `${validate_component(ScrollView, "ScrollView").$$render(
				$$result,
				{
					id: "project",
					headerStartHidden: !isArchived,
					headerHideOffset: $projectReturnView
					? config$1.RETURN_PROJECT_HEADER_OFFSET
					: 0
				},
				{},
				{
					scrollHeader: () => `<div slot="${"scrollHeader"}">${isArchived
					? `${validate_component(ArchivedBar, "ArchivedBar").$$render($$result, { onClick: unarchiveCurrentProject }, {}, {})}`
					: `${isTeamMember
						? `${validate_component(ActionBar, "ActionBar").$$render(
								$$result,
								{
									targetItemId: $projectId,
									targetItem: $project
								},
								{},
								{
									buttonLeft: () => `<div slot="${"buttonLeft"}">${validate_component(ActionButton, "ActionButton").$$render(
										$$result,
										{
											label: "likes",
											icon: img$x,
											targetItem: $project,
											targetItemId: $projectId,
											countProperty: "likeCount",
											displayZeroCountValue: true,
											buttonContentStyle: "padding-right: 56px;",
											iconStyle: "padding-bottom: 4px; margin-top: 1px;",
											countStyle: "left: 40px"
										},
										{},
										{}
									)}</div>`,
									buttonMiddle: () => `<div slot="${"buttonMiddle"}">${validate_component(ActionButton, "ActionButton").$$render(
										$$result,
										{
											label: "followers",
											icon: img$y,
											targetItem: $project,
											targetItemId: $projectId,
											countProperty: "followCount",
											displayZeroCountValue: true,
											buttonContentStyle: "padding-right: 56px;",
											iconStyle: "padding-bottom: 4px",
											countStyle: "left: 40px"
										},
										{},
										{}
									)}
									</div>`,
									default: () => `
							`
								}
							)}`
						: `${validate_component(ActionBar, "ActionBar").$$render(
								$$result,
								{
									targetItemId: $projectId,
									targetItem: $project
								},
								{},
								{}
							)}`}`}</div>`,
					default: () => `<div class="${"content svelte-1h865aq"}"><div class="${[
						"contentItem svelte-1h865aq",
						($projectReturnView && !showInfo
						? "collapsedOptions"
						: "") + " " + ($projectReturnView && !showInfo && !isNew && $showBetaFeatures
						? "collapsedHeader"
						: "")
					].join(" ").trim()}"><div style="${"background-image: url(" + escape(headerImage) + ")"}" class="${"headerImage svelte-1h865aq"}" alt="${"project header image"}"></div>
					 

					<div class="${[
						"overviewContent svelte-1h865aq",
						$projectReturnView ? "returnView" : ""
					].join(" ").trim()}"><div class="${"contentContainer svelte-1h865aq"}">${validate_component(Button, "Button").$$render(
						$$result,
						{
							className: "optionsButton",
							icon: img,
							onClick: showProjectOptions
						},
						{},
						{}
					)}
							${isTeamMember
					? `${validate_component(Button, "Button").$$render(
							$$result,
							{
								className: "editButton",
								onClick: editProjectDetails,
								icon: img$i,
								disabled: !canEdit
							},
							{},
							{}
						)}
								${validate_component(Audience, "Audience").$$render(
							$$result,
							{
								isPublic,
								onClick: showTogglePublicDialog,
								disabled: !canEdit
							},
							{},
							{}
						)}`
					: ``}
							<div class="${"itemContent"}"><div class="${["header svelte-1h865aq", isTeamMember ? "headerOwner" : ""].join(" ").trim()}">${escape(projectTitle)}</div>
								<div class="${[
						"description svelte-1h865aq",
						projectHasDetails && !forceProjectShowingInfo
						? "button"
						: ""
					].join(" ").trim()}">${projectDescriptionHTML}</div></div>
							${projectHasDetails
					? `${!showInfo
						? `${!$projectReturnView
							? `${validate_component(Button, "Button").$$render(
									$$result,
									{
										className: "readMoreButton",
										onClick: showProjectInfo
									},
									{},
									{ default: () => `read more` }
								)}`
							: ``}`
						: `<div class="${[
								"overviewHeader svelte-1h865aq",
								!forceProjectShowingInfo ? "button" : ""
							].join(" ").trim()}">Overview</div>`}
								`
					: ``}</div>
						${showInfo
					? `<div class="${[
							"projectInfo svelte-1h865aq",
							forceProjectShowingInfo ? "forceShowInfo" : ""
						].join(" ").trim()}">${each(projectDetails, (projectDetailItem, index) => `${projectDetailItem.detail || projectDetailItem.image
						? `${projectDetailItem.image
							? `${projectDetailItem.image === true
								? `${validate_component(Proxy, "Proxy").$$render(
										$$result,
										{
											image: "project_info_image_" + (index + 1),
											className: "projectDetailImage " + (!projectDetailItem.detail ? "soloImage" : "")
										},
										{},
										{}
									)}`
								: `<img class="${"projectDetailImage " + escape(!projectDetailItem.detail ? "soloImage" : "") + " svelte-1h865aq"}"${add_attribute("src", getProjectDetailImage(projectDetailItem.image), 0)} alt="${"project header image"}">`}`
							: ``}
										
										${projectDetailItem.detail
							? `<div class="${[
									"projectInfoDetail svelte-1h865aq",
									!projectDetailItem.image ? "noImage" : ""
								].join(" ").trim()}">${getDisplayText(projectDetailItem.detail)}</div>`
							: ``}`
						: ``}`)}</div>`
					: ``}
						<div class="${"projectActions svelte-1h865aq"}"><div class="${"projectActionButtons svelte-1h865aq"}">${projectHasDetails && !showInfo && $projectReturnView
					? `${validate_component(Button, "Button").$$render(
							$$result,
							{
								className: "readMoreButton",
								onClick: showProjectInfo
							},
							{},
							{ default: () => `read more` }
						)}`
					: `${!projectHasDetails && isTeamMember && !isArchived
						? `${validate_component(Button, "Button").$$render(
								$$result,
								{
									className: "addProjectDetailsButton",
									onClick: () => editProjectDetails({ editingProjectMode: "addDetails" }),
									icon: img$L
								},
								{},
								{ default: () => `add project details` }
							)}`
						: ``}`}
								${!isTeamMember
					? `${validate_component(Button, "Button").$$render(
							$$result,
							{
								disabled: !$showBetaFeatures,
								className: "sendMessageButton",
								onClick: e => loadConversationByProject($projectId),
								icon: img$A
							},
							{},
							{ default: () => `message` }
						)}`
					: `${isNew && !isPublic
						? `${!isArchived
							? `${validate_component(Button, "Button").$$render(
									$$result,
									{
										className: "makePublicButton isButton",
										onClick: showTogglePublicDialog
									},
									{},
									{ default: () => `make public` }
								)}`
							: ``}`
						: `${validate_component(Button, "Button").$$render(
								$$result,
								{
									disabled: !$showBetaFeatures,
									className: "messagesButton",
									href: "projects/" + $projectId + "/messages",
									icon: img$7
								},
								{},
								{
									default: () => `messages
										${validate_component(Counter, "Counter").$$render(
										$$result,
										{
											count: unreadMessageCount ? unreadMessageCount : messageCount,
											hasNew: unreadMessageCount
										},
										{},
										{}
									)}`
								}
							)}`}`}
								${(!$projectReturnView || showInfo) && !isTeamMember
					? `${validate_component(Button, "Button").$$render(
							$$result,
							{
								className: "likeButton",
								onClick: toggleLiked,
								icon: liked ? img$t : img$s
							},
							{},
							{}
						)}
									${validate_component(Button, "Button").$$render(
							$$result,
							{
								className: "followButton " + (!following ? "isButton" : ""),
								onClick: toggleFollowing,
								icon: following ? img$v : img$u
							},
							{},
							{
								default: () => `${escape(following ? "following" : "follow")}`
							}
						)}`
					: ``}</div>
							${(!$projectReturnView || showInfo) && projectLocation
					? `${validate_component(Location, "Location").$$render(
							$$result,
							{
								className: isTeamMember && showInfo ? "ownerLocation" : "",
								location: projectLocation
							},
							{},
							{}
						)}`
					: ``}</div></div></div>

				${isNew
					? `${validate_component(ProjectTeamList, "ProjectTeamList").$$render($$result, { project: $project }, {}, {})}
					${validate_component(ProjectSkillsList, "ProjectSkillsList").$$render($$result, { project: $project }, {}, {})}
					${$showBetaFeatures
						? `${validate_component(ProjectLinks, "ProjectLinks").$$render($$result, { project: $project }, {}, {})}`
						: ``}
					
					${validate_component(ChannelList, "ChannelList").$$render($$result, { project }, {}, {})}
					${$showBetaFeatures
						? `${canEdit
							? `${validate_component(NewPostButton, "NewPostButton").$$render($$result, { label: locale$1.PROJECT.POST_UPDATE }, {}, {})}
							 `
							: ``}`
						: ``}`
					: `${$projectReturnView
						? `
					${validate_component(ChannelList, "ChannelList").$$render($$result, { project }, {}, {})}
					${$showBetaFeatures
							? `${canEdit
								? `${validate_component(NewPostButton, "NewPostButton").$$render($$result, { label: locale$1.PROJECT.POST_UPDATE }, {}, {})}`
								: ``}
						${validate_component(ProjectLinks, "ProjectLinks").$$render($$result, { project: $project }, {}, {})}`
							: ``}
					${validate_component(ProjectSkillsList, "ProjectSkillsList").$$render($$result, { project: $project }, {}, {})}
					${validate_component(ProjectTeamList, "ProjectTeamList").$$render($$result, { project: $project }, {}, {})}
					${$showBetaFeatures
							? `<div>${validate_component(Proxy, "Proxy").$$render(
									$$result,
									{
										image: "project_post_1",
										className: "contentItem projectPost"
									},
									{},
									{}
								)}
							${validate_component(Proxy, "Proxy").$$render(
									$$result,
									{
										image: "project_post_2",
										className: "contentItem projectPost"
									},
									{},
									{}
								)}
							${validate_component(Proxy, "Proxy").$$render(
									$$result,
									{
										image: "project_post_3",
										className: "contentItem projectPost"
									},
									{},
									{}
								)}</div>
						${canEdit
								? `${validate_component(NewPostButton, "NewPostButton").$$render($$result, { label: locale$1.PROJECT.POST_UPDATE }, {}, {})}`
								: ``}`
							: ``}`
						: `${validate_component(ProjectSkillsList, "ProjectSkillsList").$$render($$result, { project: $project }, {}, {})}
					${validate_component(ProjectTeamList, "ProjectTeamList").$$render($$result, { project: $project }, {}, {})}
					${$showBetaFeatures
							? `${validate_component(ProjectLinks, "ProjectLinks").$$render($$result, { project: $project }, {}, {})}`
							: ``}
					
					${validate_component(ChannelList, "ChannelList").$$render($$result, { project }, {}, {})}
					${$showBetaFeatures
							? `<div id="${"post"}"></div>
						<div>${validate_component(Proxy, "Proxy").$$render(
									$$result,
									{
										image: "project_post_1",
										className: "contentItem projectPost"
									},
									{},
									{}
								)}
							${validate_component(Proxy, "Proxy").$$render(
									$$result,
									{
										image: "project_post_2",
										className: "contentItem projectPost"
									},
									{},
									{}
								)}
							${validate_component(Proxy, "Proxy").$$render(
									$$result,
									{
										image: "project_post_3",
										className: "contentItem projectPost"
									},
									{},
									{}
								)}</div>`
							: ``}`}`}</div>

			`
				}
			)}`}`}
</div>`;
});

var index$4 = /*#__PURE__*/Object.freeze({
    __proto__: null,
    'default': U5Bprojectu5D
});

/* src\routes\projects\[project]\followers.svelte generated by Svelte v3.23.0 */

const Followers = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let $project = get_store_value(project);
	let projectTitleString = $project && $project.title && $project.title + " - " || "";

	return `${($$result.head += `${($$result.title = `<title>${escape(projectTitleString)}Flock</title>`, "")}`, "")}

${validate_component(ScrollView, "ScrollView").$$render($$result, { id: "followers" }, {}, {
		default: () => `${validate_component(Proxy, "Proxy").$$render($$result, { image: "contacts" }, {}, {
			default: () => `
		${validate_component(Hotspot, "Hotspot").$$render(
				$$result,
				{
					onClick: e => loadProfile("bl20a8lm"),
					style: "\r\n\t\t\tleft: 9px;\r\n\t\t\ttop: 46px;\r\n\t\t\twidth: 256px;\r\n\t\t\theight: 693px;"
				},
				{},
				{}
			)}

		
		${validate_component(Hotspot, "Hotspot").$$render(
				$$result,
				{
					onClick: e => loadConversation("r70dp2bf"),
					style: "\r\n\t\t\tright: 7px;\r\n\t\t\ttop: 51px;\r\n\t\t\twidth: 59px;\r\n\t\t\theight: 678px;"
				},
				{},
				{}
			)}`
		})}
`
	})}`;
});

var followers = /*#__PURE__*/Object.freeze({
    __proto__: null,
    'default': Followers
});

/* src\routes\projects\[project]\messages.svelte generated by Svelte v3.23.0 */

const css$12 = {
	code: ".content.svelte-1v038cr .proxyOverlay{position:absolute;opacity:0.5}",
	map: "{\"version\":3,\"file\":\"messages.svelte\",\"sources\":[\"messages.svelte\"],\"sourcesContent\":[\"<script>\\r\\n\\timport ScrollView from '../../../components/ScrollView.svelte';\\r\\n\\timport Proxy from '../../../components/Proxy.svelte';\\r\\n\\r\\n\\timport Hotspots from '../../../components/Hotspots.svelte';\\r\\n\\timport Hotspot from '../../../components/Hotspot.svelte';\\r\\n\\r\\n\\timport { project } from '../../../models/appModel';\\r\\n\\r\\n\\timport { loadConversation } from '../../../actions/appActions';\\r\\n\\r\\n\\t$: projectTitleString = ($project && $project.title && $project.title + ' - ') || '';\\r\\n\\r\\n\\t// import NotificationList from '../../_components/NotificationList.svelte';\\r\\n</script>\\r\\n\\r\\n<svelte:head>\\r\\n\\t<title>{projectTitleString}Flock</title>\\r\\n</svelte:head>\\r\\n\\r\\n<div class=\\\"content\\\">\\r\\n\\t<ScrollView id=\\\"messages\\\">\\r\\n\\t\\t<div class=\\\"proxyOverlay\\\">\\r\\n\\t\\t\\t<Hotspots>\\r\\n\\t\\t\\t\\t<!-- Connections -->\\r\\n\\t\\t\\t\\t<Hotspot href=\\\"contacts\\\" style=\\\"\\r\\n\\t\\t\\t\\t\\tleft: 7px;\\r\\n\\t\\t\\t\\t\\ttop: 5px;\\r\\n\\t\\t\\t\\t\\twidth: 44px;\\r\\n\\t\\t\\t\\t\\theight: 40px;\\\" />\\r\\n\\r\\n\\t\\t\\t\\t<!-- New Message -->\\r\\n\\t\\t\\t\\t<!-- <Hotspot onClick=\\\"{e => loadConversation('a4kcmsd3')}\\\" style=\\\" -->\\r\\n\\t\\t\\t\\t<Hotspot href=\\\"contacts\\\" style=\\\"\\r\\n\\t\\t\\t\\t\\tright: 5px;\\r\\n\\t\\t\\t\\t\\ttop: 4px;\\r\\n\\t\\t\\t\\t\\twidth: 50px;\\r\\n\\t\\t\\t\\t\\theight: 48px;\\\" />\\r\\n\\r\\n\\t\\t\\t\\t<!-- Load Conversation -->\\r\\n\\t\\t\\t\\t<Hotspot onClick=\\\"{e => loadConversation('a4kcmsd3')}\\\" style=\\\"\\r\\n\\t\\t\\t\\t\\tleft: 0;\\r\\n\\t\\t\\t\\t\\ttop: 49px;\\r\\n\\t\\t\\t\\t\\twidth: 100%;\\r\\n\\t\\t\\t\\t\\theight: 281px;\\\" />\\r\\n\\t\\t\\t</Hotspots>\\r\\n\\r\\n\\t\\t\\t<Proxy image=\\\"messages_group\\\" />\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<!-- <ConversationList /> -->\\r\\n\\t</ScrollView>\\r\\n</div>\\r\\n\\r\\n<style>\\r\\n\\t.content :global(.proxyOverlay) {\\r\\n        position: absolute;\\r\\n        opacity: 0.5;\\r\\n\\t}\\r\\n</style>\"],\"names\":[],\"mappings\":\"AAuDC,uBAAQ,CAAC,AAAQ,aAAa,AAAE,CAAC,AAC1B,QAAQ,CAAE,QAAQ,CAClB,OAAO,CAAE,GAAG,AACnB,CAAC\"}"
};

const Messages$1 = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let $project = get_store_value(project);
	$$result.css.add(css$12);
	let projectTitleString = $project && $project.title && $project.title + " - " || "";

	return `${($$result.head += `${($$result.title = `<title>${escape(projectTitleString)}Flock</title>`, "")}`, "")}

<div class="${"content svelte-1v038cr"}">${validate_component(ScrollView, "ScrollView").$$render($$result, { id: "messages" }, {}, {
		default: () => `<div class="${"proxyOverlay"}">${validate_component(Hotspots, "Hotspots").$$render($$result, {}, {}, {
			default: () => `
				${validate_component(Hotspot, "Hotspot").$$render(
				$$result,
				{
					href: "contacts",
					style: "\r\n\t\t\t\t\tleft: 7px;\r\n\t\t\t\t\ttop: 5px;\r\n\t\t\t\t\twidth: 44px;\r\n\t\t\t\t\theight: 40px;"
				},
				{},
				{}
			)}

				
				
				${validate_component(Hotspot, "Hotspot").$$render(
				$$result,
				{
					href: "contacts",
					style: "\r\n\t\t\t\t\tright: 5px;\r\n\t\t\t\t\ttop: 4px;\r\n\t\t\t\t\twidth: 50px;\r\n\t\t\t\t\theight: 48px;"
				},
				{},
				{}
			)}

				
				${validate_component(Hotspot, "Hotspot").$$render(
				$$result,
				{
					onClick: e => loadConversation("a4kcmsd3"),
					style: "\r\n\t\t\t\t\tleft: 0;\r\n\t\t\t\t\ttop: 49px;\r\n\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\theight: 281px;"
				},
				{},
				{}
			)}`
		})}

			${validate_component(Proxy, "Proxy").$$render($$result, { image: "messages_group" }, {}, {})}</div>

		`
	})}
</div>`;
});

var messages$1 = /*#__PURE__*/Object.freeze({
    __proto__: null,
    'default': Messages$1
});

const img$M = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAYAAAAehFoBAAACYUlEQVRYR9WZMYsTQRTHf/FqSTpBtAgoclYBa718A3OtrVp4TRIOtDk5RBsPhKTRQg9S2aqfIKj1kVR3HGcR8BDsEq4+c7zgwmRvNjszO4G8LXffvPnN2zfv/Xe2hLKrpIyXGMD3gQ3gHnAHuA5c/R+IM+APcAwcAN+Bn0WCFAp8C3gKPAJueAKcAp+Bj8Avz7HeEb4G7ALPfCfKsP8AvAL+uvrzifBj4B1QdnXuaDcBtoF9F3tX4PcRo5rFJdHeyoN2Af4KPMxzZD6v1+uMx2OGw6HPMLH9BjQWDcoD9obtdDo0m83ZnN1ul1arFRV6EXBQGkyn0znAUikvJtb1ZKZHljfZYJ98QyP2kYDF1RPbRrQBS+mSQh9UDSICS/WQRjRX8mzAQamQvI2IwOLyUmqkgaWDnYSkwpKAxe1tsyOmgd8Cz1cMeA94kTClgX8HaIO59UVOCfEt2uOmDVhU148i0Y1cJUyUB4nKMyO8A7xeUeCXwBthM4G/5LVFl8UsISVkWum4m2ngQ2DdBWqRzZKAj4C7aeCxrVmY2qDoYhaNF7HU6/Vot9s2M2kilTTwOXDFtBbV1e/3l8l5yXe1WmU0GqXv/wPWcoFrtRqDwWBlga0pIa+p0WhQLgdJC+fFTiaTWUpkyFFrSqjbdOrKmrrGoa41ywZRJX4EWJ28VCfgJcqqPpEEWN1HqECr+sxP2mlQapjyUtptpTITWb6X90FKMoGqo6pgaFF5om8tMjEv0oUPAwulRx5d6nm049bEr6oD7QRa1S8D8w2q+SljS0sVv70891M886Dj8XjT+3u6AOyr3S28YB0TAAAAAElFTkSuQmCC";

const img$N = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAB6UlEQVRoQ+2YfU0FMRDE5zkAJeAAUAAoAAeAApCAA5CAA8ABDkACoIBMck1eLvcx286+kJfe33ez/e10273dYE+ezZ5woIP8Nye7I92RpAz0rZWU2GrZ7kh16pI+jDpyAOAJwAWANwB3AD5Ma6P2PYBbAF+D9ouqHQFhoFcAx1vi3wDODDBT2gxzCUCCiYA8A7iayFArzBwEQ1H7UHElAsKtdDIjWguzBFFC0XHGXnwiII8AbhbUojAKxA8Avrf6REAoyMwcLagy8KlQMwrE77ADpMMkAsL1O2DsEFxYFKQVJgWiFqQWJg2iBSQKwwtufAeNSy1UE+OPa7bWtoZaM5+ji9QK0epIWYwCs3R8NjlRhFsdaYWxQLgcqYWxQbhB1AOA71khskDWTifGVTuA1dbEXSPFDQWixLbCOIs9AmGHcYAoN/bSFrE40wqiQLCweSE6uubZhLSAqBD8GWOL4voFmISpBYlAlP8JpQOo3mY1IArE3ILSYKIgLRCRDiDsTATEAZEGEwFZGz5Es6hss52Pg6IQEWfs46C5AV0thAKzs3FQK8QaTMrItDSGdOYcwPswcJbmTkIby5p5AHA9jEo5zJbmvhltvLDenFcip1bOCkyqHcSUSJtMd8SWSpNQd8SUSJvM3jjyBzChkjNydQf7AAAAAElFTkSuQmCC";

const img$O = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAABq0lEQVRoQ+3Y3VHDMBAE4E0FUAIdAB1QAnQAFQAVECqADoAOKAE6oAMogRIyNyMxwZGs1c+dNR75JQ+R7fu0lnzJBis5NitxYEB6S3IkMhJRmoHxaClNbPFlRyLFU8efeAngCcAJgHcANwB+Y6f3msg1gJdJ0V8OI58HR4+QEMIX/gPgPJRMb5A5hMfcA3ieRtIThEFI/Y8Atr1CWITUf+UW/z9LD4nIznRHbmZvAATd3WKXnSlYWKDWKELGLplIM8SSkKaIpSDNETmQYwCnAD7JRRkbpoJgIQ97+7b0OtLzSO+Te6ghGEjs5oJ5zZCoIlIQeXtKGrGDxagjUpBv10LPTXwKY4JIQWQ9HBGPTwxjhkhBpMO8JSAyZIoxRaQgsuV+uG2X8XiMOSIFke9zMQK/YNQAZnsn8hp/w5heKxfD1NAUwSTii2qJaY7IgZQ8ZqFkVBC5kFqMGqIEUopRRZRCcjHqiBoIizFB1EJSGDNEC0gMY4poBfEYafvP3I+ug38CmbdkzRjmzV5zfbNzB8RsqskbjUTIiTIbNhIxm2ryRiMRcqLMhq0mkR0pMVAzrox07wAAAABJRU5ErkJggg==";

/* src\routes\projects\[project]\details.svelte generated by Svelte v3.23.0 */

const css$13 = {
	code: ".panelContent.svelte-5t8ucs{padding-top:4px}.field.svelte-5t8ucs{padding:0 16px;padding-top:18px}.imageField.svelte-5t8ucs{position:relative;height:44px;margin-bottom:-20px}.content.svelte-5t8ucs .detailImageSelector{margin-top:20px}.sectionTitle.svelte-5t8ucs{font-size:1.5rem;font-weight:700;color:#444444;padding-left:23px;padding-bottom:6px;padding-top:13px}.label.svelte-5t8ucs{font-size:1.3rem;padding-left:7px;padding-bottom:4px;color:#555555}.labelDetails.svelte-5t8ucs{font-weight:700}.fieldCharCount.svelte-5t8ucs{position:absolute;right:20px;margin-top:-22px;font-size:1.2rem;color:#888888}.charCountLow.svelte-5t8ucs{color:#DF3C3C}.charCountOver.svelte-5t8ucs{color:#DF3C3C;font-weight:bold}.tip.svelte-5t8ucs{padding-left:13px;font-size:1.2rem;font-weight:initial;color:#999999}input.svelte-5t8ucs{border:none;outline:none;background:none;border-bottom:1px solid #cccccc;width:100%;box-sizing:border-box;font-size:1.5rem;color:#555555;padding:6px 7px}.content.svelte-5t8ucs textarea{border:1px solid #cccccc;outline:none;background:none;width:100%;height:90px;box-sizing:border-box;font-size:1.5rem;line-height:2rem;color:#555555;padding:4px 6px;margin-top:4px;resize:none}.content.svelte-5t8ucs textarea.charsOver{color:#DF3C3C}.headerImageField.svelte-5t8ucs{padding:0;padding-top:10px}.headerImageLabel.svelte-5t8ucs{padding-left:23px;padding-right:23px}.headerImageField.svelte-5t8ucs .imageSelectionBox{margin-top:10px}.mainProjectDetails.svelte-5t8ucs{padding-bottom:20px}.content.svelte-5t8ucs .addImage{position:absolute;top:6px;right:5px;padding:10px;padding-right:45px;padding-left:13px;font-size:1.2rem;font-weight:700}.content.svelte-5t8ucs .addImage .icon{padding-left:14px;margin-top:-1px}.content.svelte-5t8ucs .addImage.removeImage .icon{transform:scale(0.4, 0.4);opacity:0.6;padding-left:24px}.actions.svelte-5t8ucs{position:relative;height:60px;margin-top:10px}.topActions.svelte-5t8ucs{height:0;margin-top:0}.content.svelte-5t8ucs .saveButton{position:absolute;top:3px;right:8px;padding:10px;padding-right:46px;font-size:1.5rem;font-weight:700}.content.svelte-5t8ucs .saveButton .icon{padding-left:20px;margin-top:-1px}.content.svelte-5t8ucs .cancelButton{position:absolute;top:3px;left:13px;padding:10px;padding-right:39px;font-size:1.5rem;font-weight:700}.content.svelte-5t8ucs .cancelButton .icon{padding-left:12px;margin-top:-1px}.errorLabel.svelte-5t8ucs{padding-left:13px;font-weight:initial;font-size:1.2rem;color:#DF3C3C}",
	map: "{\"version\":3,\"file\":\"details.svelte\",\"sources\":[\"details.svelte\"],\"sourcesContent\":[\"<script>\\r\\n    import { tick } from 'svelte';\\r\\n\\timport { goto } from '@sapper/app';\\r\\n\\r\\n\\timport config from '../../../config';\\r\\n\\timport { gotoAnchor } from '../../../utils';\\r\\n\\timport locale from '../../../locale';\\r\\n\\r\\n\\timport { trim, testInputDefocus, getFormattedText } from '../../../utils';\\r\\n\\r\\n\\timport ScrollView from '../../../components/ScrollView.svelte';\\r\\n\\timport Proxy from '../../../components/Proxy.svelte';\\r\\n\\timport Hotspot from '../../../components/Hotspot.svelte';\\r\\n\\r\\n\\timport LimitedTextfield from '../../../components/LimitedTextfield.svelte';\\r\\n\\timport Button from '../../../components/Button.svelte';\\r\\n\\timport ImageSelectionBox from '../../_components/ImageSelectionBox.svelte';\\r\\n\\timport FilterBar from './../../_components/FilterBar.svelte';\\r\\n\\r\\n\\timport AddImageIcon from \\\"../../../assets/icons/add_small.png\\\";\\r\\n\\timport RemoveImageIcon from \\\"../../../assets/icons/clear.png\\\";\\r\\n    import CancelIcon from \\\"../../../assets/icons/cancel.png\\\";\\r\\n\\timport SaveIcon from \\\"../../../assets/icons/save.png\\\";\\r\\n    import NextArrowIcon from \\\"../../../assets/icons/next_arrow.png\\\";\\r\\n\\r\\n\\timport { project, projectId, editingProjectMode, showBetaFeatures } from '../../../models/appModel';\\r\\n\\timport { saveProjectDetails } from '../../../actions/projectActions';\\r\\n\\r\\n\\tlet title = ($project && $project.title) || '';\\r\\n\\tlet description = ($project && $project.description) || '';\\r\\n\\tlet image = ($project && $project.headerImage) || '';\\r\\n\\tlet categories = ($project && $project.categories) || '';\\r\\n\\tlet tags = ($project && $project.tags) || '';\\r\\n\\tlet skills = ($project && $project.skills) || '';\\r\\n\\t// let skills = ($project && $project.skills && (typeof $project.skills === 'string' ? $project.skills : $project.skills.join(', '))) || '';\\r\\n\\tlet location = ($project && $project.location) || '';\\r\\n\\r\\n\\t$: projectTitleString = ($project && $project.title && $project.title + ' - ') || '';\\r\\n\\r\\n    let categoriesInvalid = false;\\r\\n\\r\\n\\tlet headerImageIsUploading;\\r\\n\\tlet detail1ImageIsUploading;\\r\\n\\tlet detail2ImageIsUploading;\\r\\n\\tlet detail3ImageIsUploading;\\r\\n\\tlet detail4ImageIsUploading;\\r\\n\\r\\n\\t$: imageIsUploading = headerImageIsUploading || detail1ImageIsUploading || detail2ImageIsUploading || detail3ImageIsUploading || detail4ImageIsUploading;\\r\\n\\r\\n\\tlet remainingChars;\\r\\n\\tlet descriptionCharsOver;\\r\\n\\t$: charCountLow = (remainingChars !== '') && remainingChars < config.PROJECT_DESCRIPTION_CHARS_LOW;\\r\\n\\r\\n\\t$: saveEnabled = (($editingProjectMode !== 'edit') || (trim(title) && trim(description) && !descriptionCharsOver)) && !imageIsUploading;\\r\\n\\t// $: saveEnabled = (!editingProject || (title && description)) && !imageIsUploading;\\r\\n\\r\\n\\tlet detail1 = '';\\r\\n\\tlet detail2 = '';\\r\\n\\tlet detail3 = '';\\r\\n\\tlet detail4 = '';\\r\\n\\r\\n\\tlet detailImage1 = null;\\r\\n\\tlet detailImage2 = null;\\r\\n\\tlet detailImage3 = null;\\r\\n\\tlet detailImage4 = null;\\r\\n\\r\\n\\tlet addingDetailImage = [];\\r\\n\\r\\n\\tlet descriptionInput;\\r\\n\\tlet tagsInput;\\r\\n\\tlet skillsInput;\\r\\n\\tlet locationInput;\\r\\n\\r\\n\\tlet detailInput1;\\r\\n\\tlet detailInput2;\\r\\n\\tlet detailInput3;\\r\\n\\tlet detailInput4;\\r\\n\\r\\n\\tlet detailInitialized = false;\\r\\n\\r\\n\\tconst MIN_DETAIL_INPUT_HEIGHT = 130; // 140;\\r\\n\\tconst MAX_DETAIL_INPUT_HEIGHT = 388; // 385;\\r\\n\\tconst DETAIL_INPUT_PADDING = 4;\\r\\n\\r\\n\\tconst detailImageType = null; // /image\\\\/jpeg|image\\\\/gif/; // null;\\r\\n\\r\\n\\t$: {\\r\\n\\t\\tif (!detailInitialized) {\\r\\n\\t\\t\\tdetailInitialized= true;\\r\\n\\t\\t\\tdetail1 = getFormattedDetail($project, 0);\\r\\n\\t\\t\\tdetail2 = getFormattedDetail($project, 1);\\r\\n\\t\\t\\tdetail3 = getFormattedDetail($project, 2);\\r\\n\\t\\t\\tdetail4 = getFormattedDetail($project, 3);\\r\\n\\r\\n\\t\\t\\tdetailImage1 = getDetailImage($project, 0);\\r\\n\\t\\t\\tdetailImage2 = getDetailImage($project, 1);\\r\\n\\t\\t\\tdetailImage3 = getDetailImage($project, 2);\\r\\n\\t\\t\\tdetailImage4 = getDetailImage($project, 3);\\r\\n\\r\\n\\t\\t\\tupdateRegionSizes();\\r\\n\\t\\t}\\r\\n\\t}\\r\\n\\r\\n\\tasync function updateRegionSizes() {\\r\\n        await tick();\\r\\n\\r\\n\\t\\t// if (descriptionInput) { descriptionInput.style = 'height: ' + getRegionHeight(descriptionInput.scrollHeight) + 'px'; }\\r\\n\\t\\tif (detailInput1) { detailInput1.style = 'height: ' + getRegionHeight(detailInput1.scrollHeight) + 'px'; }\\r\\n\\t\\tif (detailInput2) { detailInput2.style = 'height: ' + getRegionHeight(detailInput2.scrollHeight) + 'px'; }\\r\\n\\t\\tif (detailInput3) { detailInput3.style = 'height: ' + getRegionHeight(detailInput3.scrollHeight) + 'px'; }\\r\\n\\t\\tif (detailInput4) { detailInput4.style = 'height: ' + getRegionHeight(detailInput4.scrollHeight) + 'px'; }\\r\\n\\t}\\r\\n\\r\\n\\tfunction getRegionHeight(height) {\\r\\n\\t\\treturn Math.min(Math.max(height + DETAIL_INPUT_PADDING, MIN_DETAIL_INPUT_HEIGHT), MAX_DETAIL_INPUT_HEIGHT);\\r\\n\\t}\\r\\n\\r\\n\\tfunction getFormattedDetail(project, index) {\\r\\n\\t\\tconst text = (project && project.details && project.details[index] && project.details[index].detail) || '';\\r\\n\\t\\tif (text) {\\r\\n\\t\\t\\treturn getFormattedText(text); // text.replace(/<br\\\\/>/g, '\\\\r\\\\n');\\r\\n\\t\\t} else {\\r\\n\\t\\t\\treturn text;\\r\\n\\t\\t}\\r\\n\\t}\\r\\n\\r\\n\\tfunction getDetailImage(project, index) {\\r\\n\\t\\tconst image = (project && project.details && project.details[index] && project.details[index].image) || null;\\r\\n\\t\\treturn image;\\r\\n\\t}\\r\\n\\r\\n\\tfunction save() {\\r\\n\\t\\tif (!saveEnabled) {\\r\\n\\t\\t\\treturn;\\r\\n\\t\\t}\\r\\n\\r\\n\\t\\tif (!categories.trim()) {\\r\\n\\t\\t\\tcategoriesInvalid = true;\\r\\n\\t\\t\\tgotoAnchor('categories');\\r\\n\\t\\t\\treturn;\\r\\n\\t\\t}\\r\\n\\r\\n\\t\\tlet details = null;\\r\\n\\t\\tif ($project.details) {\\r\\n\\t\\t\\tdetails = JSON.parse(JSON.stringify($project.details));\\r\\n\\t\\t}\\r\\n\\r\\n\\t\\tif (!details) {\\r\\n\\t\\t\\tdetails = [];\\r\\n\\t\\t}\\r\\n\\r\\n\\t\\tconst sourceDetails = [\\r\\n\\t\\t\\tdetail1,\\r\\n\\t\\t\\tdetail2,\\r\\n\\t\\t\\tdetail3,\\r\\n\\t\\t\\tdetail4,\\r\\n\\t\\t];\\r\\n\\t\\tconst sourceDetailsImages = [\\r\\n\\t\\t\\tdetailImage1,\\r\\n\\t\\t\\tdetailImage2,\\r\\n\\t\\t\\tdetailImage3,\\r\\n\\t\\t\\tdetailImage4,\\r\\n\\t\\t];\\r\\n\\r\\n\\t\\tfor (let detailI = 0; detailI < 4; detailI++) {\\r\\n\\t\\t\\tdetails[detailI] = details[detailI] || {};\\r\\n\\t\\t\\tdetails[detailI].detail = trim(sourceDetails[detailI]);\\r\\n\\t\\t\\tdetails[detailI].image = sourceDetailsImages[detailI];\\r\\n\\t\\t}\\r\\n\\r\\n\\t\\tconst projectDetails = {\\r\\n\\t\\t\\tdetails,\\r\\n\\t\\t};\\r\\n\\r\\n\\t\\tif ($editingProjectMode === 'edit') {\\r\\n\\t\\t\\tObject.assign(projectDetails, {\\r\\n\\t\\t\\t\\ttitle: trim(title),\\r\\n\\t\\t\\t\\tdescription: trim(description),\\r\\n\\t\\t\\t\\theaderImage: image,\\r\\n\\t\\t\\t\\tcategories: trim(categories),\\r\\n\\t\\t\\t\\ttags: trim(tags),\\r\\n\\t\\t\\t\\tskills: trim(skills),\\r\\n\\t\\t\\t\\tlocation: trim(location),\\r\\n\\t\\t\\t});\\r\\n\\t\\t} else if ($editingProjectMode === 'details2') {\\r\\n\\t\\t\\tObject.assign(projectDetails, {\\r\\n\\t\\t\\t\\tcategories: trim(categories),\\r\\n\\t\\t\\t\\ttags: trim(tags),\\r\\n\\t\\t\\t\\tskills: trim(skills),\\r\\n\\t\\t\\t\\tlocation: trim(location),\\r\\n\\t\\t\\t});\\r\\n\\t\\t}\\r\\n\\r\\n\\t\\tsaveProjectDetails(projectDetails, {editProjectDetails: ($editingProjectMode === 'details2'), showProjectInfo: ($editingProjectMode === 'addDetails' || $editingProjectMode === 'details3')});\\r\\n\\t}\\r\\n\\r\\n\\tfunction addImage(index) {\\r\\n\\t\\taddingDetailImage[index] = true;\\r\\n\\t}\\r\\n\\r\\n\\tfunction removeImage(index) {\\r\\n\\t\\taddingDetailImage[index] = false;\\r\\n\\t\\tswitch (index) {\\r\\n\\t\\t\\tcase 0:\\r\\n\\t\\t\\t\\tdetailImage1 = null;\\r\\n\\t\\t\\t\\tbreak;\\r\\n\\t\\t\\tcase 1:\\r\\n\\t\\t\\t\\tdetailImage2 = null;\\r\\n\\t\\t\\t\\tbreak;\\r\\n\\t\\t\\tcase 2:\\r\\n\\t\\t\\t\\tdetailImage3 = null;\\r\\n\\t\\t\\t\\tbreak;\\r\\n\\t\\t\\tcase 3:\\r\\n\\t\\t\\t\\tdetailImage4 = null;\\r\\n\\t\\t\\t\\tbreak;\\r\\n\\t\\t}\\r\\n\\t}\\r\\n\\r\\n\\tfunction cancel() {\\r\\n\\t\\tgoto('projects/' + $projectId);\\r\\n\\t}\\r\\n</script>\\r\\n\\r\\n<svelte:head>\\r\\n\\t<title>{projectTitleString}Flock</title>\\r\\n\\t<style>\\r\\n\\t\\tbody {\\r\\n\\t\\t\\toverscroll-behavior-y: contain; /* Disables pull-to-refresh but allows overscroll effects. */\\r\\n\\t\\t}\\r\\n\\t</style>\\r\\n</svelte:head>\\r\\n\\r\\n<ScrollView>\\r\\n\\t<div class=\\\"content\\\">\\r\\n\\t\\t<!-- <Proxy image=\\\"create_project_2\\\" className=\\\"proxyOverlay\\\">\\r\\n\\t\\t\\t<Hotspot onClick=\\\"{save}\\\" style=\\\"\\r\\n\\t\\t\\t\\tright: 10px;\\r\\n\\t\\t\\t\\ttop: 827px;\\r\\n\\t\\t\\t\\twidth: 108px;\\r\\n\\t\\t\\t\\theight: 48px;\\\" />\\r\\n\\t\\t\\t<Hotspot onClick=\\\"{cancel}\\\" style=\\\"\\r\\n\\t\\t\\t\\tleft: 10px;\\r\\n\\t\\t\\t\\ttop: 827px;\\r\\n\\t\\t\\t\\twidth: 108px;\\r\\n\\t\\t\\t\\theight: 48px;\\\" />\\r\\n\\t\\t</Proxy> -->\\r\\n\\r\\n\\t\\t<div class=\\\"panelContent\\\">\\r\\n\\t\\t\\t{#if ($editingProjectMode === 'edit' || $editingProjectMode === 'addDetails')}\\r\\n\\t\\t\\t\\t<div class=\\\"actions topActions\\\">\\r\\n\\t\\t\\t\\t\\t<Button className=\\\"saveButton\\\" onClick=\\\"{save}\\\" icon=\\\"{SaveIcon}\\\" disabled=\\\"{!saveEnabled}\\\">{locale.EDIT_PROJECT_DETAILS.CONFIRM}</Button>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t{/if}\\r\\n\\r\\n\\t\\t\\t{#if ($editingProjectMode === 'edit' || $editingProjectMode === 'details2')}\\r\\n\\t\\t\\t\\t<div class=\\\"mainProjectDetails\\\">\\r\\n\\t\\t\\t\\t\\t{#if ($editingProjectMode === 'edit')}\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"field\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"label\\\">{locale.NEW_PROJECT.TITLE}</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t<input type=\\\"text\\\" bind:value=\\\"{title}\\\" on:keypress=\\\"{(e) => testInputDefocus(e, {target: descriptionInput})}\\\" />\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"field descriptionField\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"label\\\">{locale.NEW_PROJECT.DESCRIPTION}</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t<!-- <textarea bind:value=\\\"{description}\\\" bind:this=\\\"{descriptionInput}\\\" on:keypress=\\\"{testInputDefocus}\\\" /> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"fieldCharCount\\\" class:charCountLow=\\\"{charCountLow}\\\" class:charCountOver=\\\"{descriptionCharsOver}\\\">{descriptionCharsOver ? descriptionCharsOver : remainingChars}{descriptionCharsOver ? ' characters over': (charCountLow ? ' characters remaining' : '')}</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t<LimitedTextfield bind:value=\\\"{description}\\\" bind:field=\\\"{descriptionInput}\\\" bind:remainingChars=\\\"{remainingChars}\\\" bind:charsOver=\\\"{descriptionCharsOver}\\\" maxlength=\\\"{config.MAX_PROJECT_DESCRIPTION_CHARS}\\\" on:keypress=\\\"{testInputDefocus}\\\" />\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"field headerImageField\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"label headerImageLabel\\\">{locale.NEW_PROJECT.HEADER_IMAGE}</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t<ImageSelectionBox bind:image bind:fileIsUploading=\\\"{headerImageIsUploading}\\\" uploadType=\\\"projectHeader\\\" itemId=\\\"{$projectId}\\\" />\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t{/if}\\r\\n\\r\\n\\t\\t\\t\\t\\t<div class=\\\"field\\\">\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"label labelDetails\\\">{locale.EDIT_PROJECT_DETAILS.LOCATION}<span class=\\\"tip\\\">{@html locale.EDIT_PROJECT_DETAILS.LOCATION_TIP}</span></div>\\r\\n\\t\\t\\t\\t\\t\\t<input type=\\\"text\\\" bind:value=\\\"{location}\\\" bind:this=\\\"{locationInput}\\\" on:keypress=\\\"{(e) => testInputDefocus(e, {target: detailInput1})}\\\" />\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t<div id=\\\"categories\\\" class=\\\"field descriptionField\\\">\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"label labelDetails\\\">{locale.EDIT_PROJECT_DETAILS.CATEGORIES}\\r\\n\\t\\t\\t\\t\\t\\t\\t{#if categoriesInvalid}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\\"errorLabel\\\">please select at least one category</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t{:else}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\\"tip\\\">{@html locale.EDIT_PROJECT_DETAILS.CATEGORIES_TIP}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t{/if}\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<FilterBar bind:filterString={categories} isCategorySelector=\\\"{true}\\\" />\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"field descriptionField\\\">\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"label labelDetails\\\">{locale.EDIT_PROJECT_DETAILS.TAGS}<span class=\\\"tip\\\">{@html locale.EDIT_PROJECT_DETAILS.TAGS_TIP}</span></div>\\r\\n\\t\\t\\t\\t\\t\\t<textarea bind:value=\\\"{tags}\\\" bind:this=\\\"{tagsInput}\\\" />\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"field descriptionField\\\">\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"label labelDetails\\\">{locale.EDIT_PROJECT_DETAILS.SKILLS}<span class=\\\"tip\\\">{@html locale.EDIT_PROJECT_DETAILS.SKILLS_TIP}</span></div>\\r\\n\\t\\t\\t\\t\\t\\t<textarea bind:value=\\\"{skills}\\\" bind:this=\\\"{skillsInput}\\\" />\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t{/if}\\r\\n\\r\\n\\t\\t\\t{#if ($editingProjectMode !== 'details2')}\\r\\n\\t\\t\\t\\t<div class=\\\"sectionTitle\\\">{locale.EDIT_PROJECT_DETAILS.OVERVIEW_HEADING}</div>\\r\\n\\r\\n\\t\\t\\t\\t{#if detailImage1 || addingDetailImage[0]}\\r\\n\\t\\t\\t\\t\\t<div class=\\\"imageField\\\">\\r\\n\\t\\t\\t\\t\\t\\t<Button className=\\\"addImage removeImage\\\" icon=\\\"{RemoveImageIcon}\\\" onClick=\\\"{() => removeImage(0) }\\\">{locale.EDIT_PROJECT_DETAILS.REMOVE_IMAGE}</Button>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t<ImageSelectionBox className=\\\"detailImageSelector\\\" bind:image=\\\"{detailImage1}\\\" containMode=\\\"{true}\\\" imageType=\\\"{detailImageType}\\\" bind:fileIsUploading=\\\"{detail1ImageIsUploading}\\\" itemIndex=\\\"1\\\" uploadType=\\\"projectDetail\\\" itemId=\\\"{$projectId}\\\" />\\r\\n\\t\\t\\t\\t{:else}\\r\\n\\t\\t\\t\\t\\t<div class=\\\"imageField\\\">\\r\\n\\t\\t\\t\\t\\t\\t<Button className=\\\"addImage\\\" icon=\\\"{AddImageIcon}\\\" onClick=\\\"{() => addImage(0) }\\\">{locale.EDIT_PROJECT_DETAILS.ADD_IMAGE}</Button>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t{/if}\\r\\n\\r\\n\\t\\t\\t\\t<div class=\\\"field\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"label labelDetails\\\">{locale.EDIT_PROJECT_DETAILS.DETAIL_1_LABEL}<span class=\\\"tip\\\">{@html locale.EDIT_PROJECT_DETAILS.DETAIL_1_TIP}</span></div>\\r\\n\\t\\t\\t\\t\\t<textarea bind:this=\\\"{detailInput1}\\\" bind:value=\\\"{detail1}\\\" class=\\\"detailTextarea\\\" />\\r\\n\\t\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t\\t{#if detailImage2 || addingDetailImage[1]}\\r\\n\\t\\t\\t\\t\\t<div class=\\\"imageField\\\">\\r\\n\\t\\t\\t\\t\\t\\t<Button className=\\\"addImage\\\" onClick=\\\"{() => removeImage(1) }\\\">{locale.EDIT_PROJECT_DETAILS.REMOVE_IMAGE}</Button>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t<ImageSelectionBox className=\\\"detailImageSelector\\\" bind:image=\\\"{detailImage2}\\\" containMode=\\\"{true}\\\" imageType=\\\"{detailImageType}\\\" bind:fileIsUploading=\\\"{detail2ImageIsUploading}\\\" itemIndex=\\\"2\\\" uploadType=\\\"projectDetail\\\" itemId=\\\"{$projectId}\\\" />\\r\\n\\t\\t\\t\\t{:else}\\r\\n\\t\\t\\t\\t\\t<div class=\\\"imageField\\\">\\r\\n\\t\\t\\t\\t\\t\\t<Button className=\\\"addImage\\\" icon=\\\"{AddImageIcon}\\\" onClick=\\\"{() => addImage(1) }\\\">{locale.EDIT_PROJECT_DETAILS.ADD_IMAGE}</Button>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t{/if}\\r\\n\\t\\t\\t\\t<div class=\\\"field\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"label labelDetails\\\">{locale.EDIT_PROJECT_DETAILS.DETAIL_2_LABEL}<span class=\\\"tip\\\">{@html locale.EDIT_PROJECT_DETAILS.DETAIL_2_TIP}</span></div>\\r\\n\\t\\t\\t\\t\\t<textarea bind:this=\\\"{detailInput2}\\\" bind:value=\\\"{detail2}\\\" class=\\\"detailTextarea\\\" />\\r\\n\\t\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t\\t{#if detailImage3 || addingDetailImage[2]}\\r\\n\\t\\t\\t\\t\\t<div class=\\\"imageField\\\">\\r\\n\\t\\t\\t\\t\\t\\t<Button className=\\\"addImage\\\" onClick=\\\"{() => removeImage(2) }\\\">{locale.EDIT_PROJECT_DETAILS.REMOVE_IMAGE}</Button>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t<ImageSelectionBox className=\\\"detailImageSelector\\\" bind:image=\\\"{detailImage3}\\\" containMode=\\\"{true}\\\" imageType=\\\"{detailImageType}\\\" bind:fileIsUploading=\\\"{detail3ImageIsUploading}\\\" itemIndex=\\\"3\\\" uploadType=\\\"projectDetail\\\" itemId=\\\"{$projectId}\\\" />\\r\\n\\t\\t\\t\\t{:else}\\r\\n\\t\\t\\t\\t\\t<div class=\\\"imageField\\\">\\r\\n\\t\\t\\t\\t\\t\\t<Button className=\\\"addImage\\\" icon=\\\"{AddImageIcon}\\\" onClick=\\\"{() => addImage(2) }\\\">{locale.EDIT_PROJECT_DETAILS.ADD_IMAGE}</Button>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t{/if}\\r\\n\\t\\t\\t\\t<div class=\\\"field\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"label labelDetails\\\">{locale.EDIT_PROJECT_DETAILS.DETAIL_3_LABEL}<span class=\\\"tip\\\">{@html locale.EDIT_PROJECT_DETAILS.DETAIL_3_TIP}</span></div>\\r\\n\\t\\t\\t\\t\\t<textarea bind:this=\\\"{detailInput3}\\\" bind:value=\\\"{detail3}\\\" class=\\\"detailTextarea\\\" />\\r\\n\\t\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t\\t{#if detailImage4 || addingDetailImage[3]}\\r\\n\\t\\t\\t\\t\\t<div class=\\\"imageField\\\">\\r\\n\\t\\t\\t\\t\\t\\t<Button className=\\\"addImage\\\" onClick=\\\"{() => removeImage(3) }\\\">{locale.EDIT_PROJECT_DETAILS.REMOVE_IMAGE}</Button>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t<ImageSelectionBox className=\\\"detailImageSelector\\\" bind:image=\\\"{detailImage4}\\\" containMode=\\\"{true}\\\" imageType=\\\"{detailImageType}\\\" bind:fileIsUploading=\\\"{detail4ImageIsUploading}\\\" itemIndex=\\\"4\\\" uploadType=\\\"projectDetail\\\" itemId=\\\"{$projectId}\\\" />\\r\\n\\t\\t\\t\\t{:else}\\r\\n\\t\\t\\t\\t\\t<div class=\\\"imageField\\\">\\r\\n\\t\\t\\t\\t\\t\\t<Button className=\\\"addImage\\\" icon=\\\"{AddImageIcon}\\\" onClick=\\\"{() => addImage(3) }\\\">{locale.EDIT_PROJECT_DETAILS.ADD_IMAGE}</Button>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t{/if}\\r\\n\\t\\t\\t\\t<div class=\\\"field\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"label labelDetails\\\">{locale.EDIT_PROJECT_DETAILS.DETAIL_4_LABEL}<span class=\\\"tip\\\">{@html locale.EDIT_PROJECT_DETAILS.DETAIL_4_TIP}</span></div>\\r\\n\\t\\t\\t\\t\\t<textarea bind:this=\\\"{detailInput4}\\\" bind:value=\\\"{detail4}\\\" class=\\\"detailTextarea\\\" />\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t{/if}\\r\\n\\r\\n\\t\\t\\t<div class=\\\"actions\\\">\\r\\n\\t\\t\\t\\t{#if ($editingProjectMode === 'edit' || $editingProjectMode === 'addDetails')}\\r\\n\\t\\t\\t\\t\\t<Button className=\\\"cancelButton\\\" onClick=\\\"{cancel}\\\" icon=\\\"{CancelIcon}\\\">{locale.EDIT_PROJECT_DETAILS.CANCEL}</Button>\\r\\n\\t\\t\\t\\t{/if}\\r\\n\\r\\n\\t\\t\\t\\t{#if ($editingProjectMode === 'details2')}\\r\\n\\t\\t\\t\\t\\t<Button className=\\\"saveButton\\\" onClick=\\\"{save}\\\" disabled=\\\"{!saveEnabled}\\\" icon=\\\"{SaveIcon}\\\">{locale.NEW_PROJECT.DETAILS_2_CONFIRM}</Button>\\r\\n\\t\\t\\t\\t{:else if ( $editingProjectMode === 'details3')}\\r\\n\\t\\t\\t\\t\\t<Button className=\\\"saveButton\\\" onClick=\\\"{save}\\\" disabled=\\\"{!saveEnabled}\\\" icon=\\\"{SaveIcon}\\\">{locale.NEW_PROJECT.DETAILS_3_CONFIRM}</Button>\\r\\n\\t\\t\\t\\t{:else}\\r\\n\\t\\t\\t\\t\\t<Button className=\\\"saveButton\\\" onClick=\\\"{save}\\\" disabled=\\\"{!saveEnabled}\\\" icon=\\\"{SaveIcon}\\\">{locale.EDIT_PROJECT_DETAILS.CONFIRM}</Button>\\r\\n\\t\\t\\t\\t{/if}\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n</ScrollView>\\r\\n\\r\\n<style>\\r\\n    /* .content :global(.proxyOverlay) {\\r\\n        position: absolute;\\r\\n\\t\\tpointer-events: none;\\r\\n        opacity: 0.5;\\r\\n    } */\\r\\n\\r\\n\\t.panelContent {\\r\\n    \\tpadding-top: 4px;\\r\\n\\t}\\r\\n\\r\\n\\t.field {\\r\\n    \\tpadding: 0 16px;\\r\\n    \\tpadding-top: 18px;\\r\\n\\t}\\r\\n\\r\\n\\t.imageField {\\r\\n\\t\\tposition: relative;\\r\\n\\t\\theight: 44px;\\r\\n\\t\\tmargin-bottom: -20px;\\r\\n\\t}\\r\\n\\t.content :global(.detailImageSelector) {\\r\\n\\t\\tmargin-top: 20px;\\r\\n\\t}\\r\\n\\r\\n\\t.sectionTitle {\\r\\n        font-size: 1.5rem;\\r\\n        font-weight: 700;\\r\\n\\t\\tcolor: #444444;\\r\\n\\r\\n\\t\\tpadding-left: 23px;\\r\\n\\t\\tpadding-bottom: 6px;\\r\\n\\t\\tpadding-top: 13px;\\r\\n\\t}\\r\\n\\r\\n\\r\\n\\t.label {\\r\\n\\t\\tfont-size: 1.3rem;\\r\\n    \\tpadding-left: 7px;\\r\\n    \\tpadding-bottom: 4px;\\r\\n\\t\\tcolor: #555555;\\r\\n\\t}\\r\\n\\r\\n\\t.labelDetails {\\r\\n\\t\\tfont-weight: 700;\\r\\n\\t}\\r\\n\\r\\n\\t.fieldCharCount {\\r\\n\\t\\tposition: absolute;\\r\\n\\t\\tright: 20px;\\r\\n\\t\\tmargin-top: -22px;\\r\\n\\t\\tfont-size: 1.2rem;\\r\\n\\t\\tcolor: #888888;\\r\\n\\t}\\r\\n\\t.charCountLow {\\r\\n\\t\\tcolor: #DF3C3C;\\r\\n\\t}\\r\\n\\t.charCountOver {\\r\\n\\t\\tcolor: #DF3C3C;\\r\\n\\t\\tfont-weight: bold;\\r\\n\\t}\\r\\n\\r\\n\\t.tip {\\r\\n    \\tpadding-left: 13px;\\r\\n\\r\\n    \\tfont-size: 1.2rem;\\r\\n\\t\\tfont-weight: initial;\\r\\n\\r\\n\\t\\tcolor: #999999;\\r\\n\\t}\\r\\n\\r\\n\\r\\n\\tinput {\\r\\n        border: none;\\r\\n        outline: none;\\r\\n        background: none;\\r\\n\\r\\n\\t\\tborder-bottom: 1px solid #cccccc;\\r\\n\\r\\n        width: 100%;\\r\\n        box-sizing: border-box;\\r\\n\\r\\n        font-size: 1.5rem;\\r\\n\\t\\tcolor: #555555;\\r\\n\\r\\n        padding: 6px 7px;\\r\\n\\t\\t/* padding-left: 0; */\\r\\n\\t}\\r\\n\\r\\n\\t.content :global(textarea) {\\r\\n        border: 1px solid #cccccc;\\r\\n\\r\\n        outline: none;\\r\\n        background: none;\\r\\n\\r\\n        width: 100%;\\r\\n\\t\\theight: 90px;\\r\\n\\r\\n        box-sizing: border-box;\\r\\n\\r\\n        font-size: 1.5rem;\\r\\n\\t\\tline-height: 2rem;\\r\\n    \\tcolor: #555555;\\r\\n\\r\\n        padding: 4px 6px;\\r\\n\\r\\n    \\tmargin-top: 4px;\\r\\n\\r\\n\\t\\tresize: none;\\r\\n\\t}\\r\\n\\t.content :global(textarea.charsOver) {\\r\\n\\t\\tcolor: #DF3C3C;\\r\\n\\t}\\r\\n\\r\\n\\t.headerImageField {\\r\\n    \\tpadding: 0;\\r\\n    \\tpadding-top: 10px;\\r\\n\\t}\\r\\n\\r\\n\\t.headerImageLabel {\\r\\n\\t\\tpadding-left: 23px;\\r\\n\\t\\tpadding-right: 23px;\\r\\n\\t}\\r\\n\\r\\n\\r\\n\\t.headerImageField :global(.imageSelectionBox) {\\r\\n\\t\\t/* height: 245px; */\\r\\n    \\tmargin-top: 10px;\\r\\n\\t}\\r\\n\\r\\n\\t.mainProjectDetails {\\r\\n\\t\\tpadding-bottom: 20px;\\r\\n\\t}\\r\\n\\r\\n\\t.content :global(.addImage) {\\r\\n\\t\\tposition: absolute;\\r\\n    \\ttop: 6px;\\r\\n\\t\\tright: 5px;\\r\\n\\r\\n\\t\\tpadding: 10px;\\r\\n\\t\\tpadding-right: 45px;\\r\\n\\t\\tpadding-left: 13px;\\r\\n\\r\\n\\t\\tfont-size: 1.2rem;\\r\\n\\t\\tfont-weight: 700;\\r\\n    }\\r\\n    .content :global(.addImage .icon) {\\r\\n    \\tpadding-left: 14px;\\r\\n\\t\\tmargin-top: -1px;\\r\\n    }\\r\\n    .content :global(.addImage.removeImage .icon) {\\r\\n\\t\\ttransform: scale(0.4, 0.4);\\r\\n\\t\\topacity: 0.6;\\r\\n    \\tpadding-left: 24px;\\r\\n    }\\r\\n\\r\\n\\t.actions {\\r\\n\\t\\tposition: relative;\\r\\n\\t\\theight: 60px;\\r\\n\\t\\tmargin-top: 10px;\\r\\n\\t}\\r\\n\\t.topActions {\\r\\n\\t\\theight: 0;\\r\\n\\t\\tmargin-top: 0;\\r\\n\\t}\\r\\n\\r\\n\\r\\n\\t.content :global(.saveButton) {\\r\\n        position: absolute;\\r\\n\\t\\ttop: 3px;\\r\\n\\t\\tright: 8px;\\r\\n\\r\\n\\t\\tpadding: 10px;\\r\\n\\t\\tpadding-right: 46px;\\r\\n\\r\\n        font-size: 1.5rem;\\r\\n        font-weight: 700;\\r\\n    }\\r\\n    .content :global(.saveButton .icon) {\\r\\n    \\tpadding-left: 20px;\\r\\n    \\tmargin-top: -1px;\\r\\n    }\\r\\n\\r\\n\\r\\n\\t.content :global(.cancelButton) {\\r\\n        position: absolute;\\r\\n\\t\\ttop: 3px;\\r\\n    \\tleft: 13px;\\r\\n\\r\\n\\t\\tpadding: 10px;\\r\\n\\t\\tpadding-right: 39px;\\r\\n\\r\\n        font-size: 1.5rem;\\r\\n        font-weight: 700;\\r\\n    }\\r\\n    .content :global(.cancelButton .icon) {\\r\\n    \\tpadding-left: 12px;\\r\\n    \\tmargin-top: -1px;\\r\\n    }\\r\\n\\r\\n    .errorLabel {\\r\\n    \\tpadding-left: 13px;\\r\\n\\t\\tfont-weight: initial;\\r\\n\\r\\n    \\t/* padding-left: 7px;\\r\\n\\t\\tpadding-bottom: 12px;\\r\\n\\t\\tpadding-top: 2px;\\r\\n\\t\\tmargin-bottom: -18px; */\\r\\n\\r\\n        /* position: absolute;\\r\\n        right: 20px; */\\r\\n\\r\\n        font-size: 1.2rem;\\r\\n\\r\\n        color: #DF3C3C;\\r\\n    }\\r\\n</style>\"],\"names\":[],\"mappings\":\"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\"}"
};
const detailImageType = null; // /image\/jpeg|image\/gif/; // null;

function getDetailImage(project, index) {
	const image = project && project.details && project.details[index] && project.details[index].image || null;
	return image;
}

const Details = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let $project = get_store_value(project);
	let $editingProjectMode = get_store_value(editingProjectMode);
	let $projectId = get_store_value(projectId);
	let title = $project && $project.title || "";
	let description = $project && $project.description || "";
	let image = $project && $project.headerImage || "";
	let categories = $project && $project.categories || "";
	let tags = $project && $project.tags || "";
	let skills = $project && $project.skills || "";

	// let skills = ($project && $project.skills && (typeof $project.skills === 'string' ? $project.skills : $project.skills.join(', '))) || '';
	let location = $project && $project.location || "";

	let categoriesInvalid = false;
	let headerImageIsUploading;
	let detail1ImageIsUploading;
	let detail2ImageIsUploading;
	let detail3ImageIsUploading;
	let detail4ImageIsUploading;
	let remainingChars;
	let descriptionCharsOver;

	// $: saveEnabled = (!editingProject || (title && description)) && !imageIsUploading;
	let detail1 = "";

	let detail2 = "";
	let detail3 = "";
	let detail4 = "";
	let detailImage1 = null;
	let detailImage2 = null;
	let detailImage3 = null;
	let detailImage4 = null;
	let addingDetailImage = [];
	let descriptionInput;
	let tagsInput;
	let skillsInput;
	let locationInput;
	let detailInput1;
	let detailInput2;
	let detailInput3;
	let detailInput4;
	let detailInitialized = false;

	async function updateRegionSizes() {
		await tick();
	}

	function getFormattedDetail(project, index) {
		const text = project && project.details && project.details[index] && project.details[index].detail || "";

		if (text) {
			return getFormattedText(text); // text.replace(/<br\/>/g, '\r\n');
		} else {
			return text;
		}
	}

	function save() {
		if (!saveEnabled) {
			return;
		}

		if (!categories.trim()) {
			categoriesInvalid = true;
			gotoAnchor("categories");
			return;
		}

		let details = null;

		if ($project.details) {
			details = JSON.parse(JSON.stringify($project.details));
		}

		if (!details) {
			details = [];
		}

		const sourceDetails = [detail1, detail2, detail3, detail4];
		const sourceDetailsImages = [detailImage1, detailImage2, detailImage3, detailImage4];

		for (let detailI = 0; detailI < 4; detailI++) {
			details[detailI] = details[detailI] || {};
			details[detailI].detail = trim(sourceDetails[detailI]);
			details[detailI].image = sourceDetailsImages[detailI];
		}

		const projectDetails = { details };

		if ($editingProjectMode === "edit") {
			Object.assign(projectDetails, {
				title: trim(title),
				description: trim(description),
				headerImage: image,
				categories: trim(categories),
				tags: trim(tags),
				skills: trim(skills),
				location: trim(location)
			});
		} else if ($editingProjectMode === "details2") {
			Object.assign(projectDetails, {
				categories: trim(categories),
				tags: trim(tags),
				skills: trim(skills),
				location: trim(location)
			});
		}

		saveProjectDetails(projectDetails, {
			editProjectDetails: $editingProjectMode === "details2",
			showProjectInfo: $editingProjectMode === "addDetails" || $editingProjectMode === "details3"
		});
	}

	function addImage(index) {
		addingDetailImage[index] = true;
	}

	function removeImage(index) {
		addingDetailImage[index] = false;

		switch (index) {
			case 0:
				detailImage1 = null;
				break;
			case 1:
				detailImage2 = null;
				break;
			case 2:
				detailImage3 = null;
				break;
			case 3:
				detailImage4 = null;
				break;
		}
	}

	function cancel() {
		goto("projects/" + $projectId);
	}

	$$result.css.add(css$13);
	let $$settled;
	let $$rendered;

	do {
		$$settled = true;
		let projectTitleString = $project && $project.title && $project.title + " - " || "";
		let imageIsUploading = headerImageIsUploading || detail1ImageIsUploading || detail2ImageIsUploading || detail3ImageIsUploading || detail4ImageIsUploading;
		let charCountLow = remainingChars !== "" && remainingChars < config$1.PROJECT_DESCRIPTION_CHARS_LOW;
		let saveEnabled = ($editingProjectMode !== "edit" || trim(title) && trim(description) && !descriptionCharsOver) && !imageIsUploading;

		 {
			{
				if (!detailInitialized) {
					detailInitialized = true;
					detail1 = getFormattedDetail($project, 0);
					detail2 = getFormattedDetail($project, 1);
					detail3 = getFormattedDetail($project, 2);
					detail4 = getFormattedDetail($project, 3);
					detailImage1 = getDetailImage($project, 0);
					detailImage2 = getDetailImage($project, 1);
					detailImage3 = getDetailImage($project, 2);
					detailImage4 = getDetailImage($project, 3);
					updateRegionSizes();
				}
			}
		}

		$$rendered = `${($$result.head += `${($$result.title = `<title>${escape(projectTitleString)}Flock</title>`, "")}<style>body {
			overscroll-behavior-y: contain; /* Disables pull-to-refresh but allows overscroll effects. */
		}
	</style>`, "")}

${validate_component(ScrollView, "ScrollView").$$render($$result, {}, {}, {
			default: () => `<div class="${"content svelte-5t8ucs"}">

		<div class="${"panelContent svelte-5t8ucs"}">${$editingProjectMode === "edit" || $editingProjectMode === "addDetails"
			? `<div class="${"actions topActions svelte-5t8ucs"}">${validate_component(Button, "Button").$$render(
					$$result,
					{
						className: "saveButton",
						onClick: save,
						icon: img$O,
						disabled: !saveEnabled
					},
					{},
					{
						default: () => `${escape(locale$1.EDIT_PROJECT_DETAILS.CONFIRM)}`
					}
				)}</div>`
			: ``}

			${$editingProjectMode === "edit" || $editingProjectMode === "details2"
			? `<div class="${"mainProjectDetails svelte-5t8ucs"}">${$editingProjectMode === "edit"
				? `<div class="${"field svelte-5t8ucs"}"><div class="${"label svelte-5t8ucs"}">${escape(locale$1.NEW_PROJECT.TITLE)}</div>
							<input type="${"text"}" class="${"svelte-5t8ucs"}"${add_attribute("value", title, 1)}></div>
						<div class="${"field descriptionField svelte-5t8ucs"}"><div class="${"label svelte-5t8ucs"}">${escape(locale$1.NEW_PROJECT.DESCRIPTION)}</div>
							
							<div class="${[
						"fieldCharCount svelte-5t8ucs",
						(charCountLow ? "charCountLow" : "") + " " + (descriptionCharsOver ? "charCountOver" : "")
					].join(" ").trim()}">${escape(descriptionCharsOver
					? descriptionCharsOver
					: remainingChars)}${escape(descriptionCharsOver
					? " characters over"
					: charCountLow ? " characters remaining" : "")}</div>
							${validate_component(LimitedTextfield, "LimitedTextfield").$$render(
						$$result,
						{
							maxlength: config$1.MAX_PROJECT_DESCRIPTION_CHARS,
							value: description,
							field: descriptionInput,
							remainingChars,
							charsOver: descriptionCharsOver
						},
						{
							value: $$value => {
								description = $$value;
								$$settled = false;
							},
							field: $$value => {
								descriptionInput = $$value;
								$$settled = false;
							},
							remainingChars: $$value => {
								remainingChars = $$value;
								$$settled = false;
							},
							charsOver: $$value => {
								descriptionCharsOver = $$value;
								$$settled = false;
							}
						},
						{}
					)}</div>
						<div class="${"field headerImageField svelte-5t8ucs"}"><div class="${"label headerImageLabel svelte-5t8ucs"}">${escape(locale$1.NEW_PROJECT.HEADER_IMAGE)}</div>
							${validate_component(ImageSelectionBox, "ImageSelectionBox").$$render(
						$$result,
						{
							uploadType: "projectHeader",
							itemId: $projectId,
							image,
							fileIsUploading: headerImageIsUploading
						},
						{
							image: $$value => {
								image = $$value;
								$$settled = false;
							},
							fileIsUploading: $$value => {
								headerImageIsUploading = $$value;
								$$settled = false;
							}
						},
						{}
					)}</div>`
				: ``}

					<div class="${"field svelte-5t8ucs"}"><div class="${"label labelDetails svelte-5t8ucs"}">${escape(locale$1.EDIT_PROJECT_DETAILS.LOCATION)}<span class="${"tip svelte-5t8ucs"}">${locale$1.EDIT_PROJECT_DETAILS.LOCATION_TIP}</span></div>
						<input type="${"text"}" class="${"svelte-5t8ucs"}"${add_attribute("value", location, 1)}${add_attribute("this", locationInput, 1)}></div>
					<div id="${"categories"}" class="${"field descriptionField svelte-5t8ucs"}"><div class="${"label labelDetails svelte-5t8ucs"}">${escape(locale$1.EDIT_PROJECT_DETAILS.CATEGORIES)}
							${categoriesInvalid
				? `<span class="${"errorLabel svelte-5t8ucs"}">please select at least one category</span>`
				: `<span class="${"tip svelte-5t8ucs"}">${locale$1.EDIT_PROJECT_DETAILS.CATEGORIES_TIP}</span>`}</div>
						${validate_component(FilterBar, "FilterBar").$$render(
					$$result,
					{
						isCategorySelector: true,
						filterString: categories
					},
					{
						filterString: $$value => {
							categories = $$value;
							$$settled = false;
						}
					},
					{}
				)}</div>
					<div class="${"field descriptionField svelte-5t8ucs"}"><div class="${"label labelDetails svelte-5t8ucs"}">${escape(locale$1.EDIT_PROJECT_DETAILS.TAGS)}<span class="${"tip svelte-5t8ucs"}">${locale$1.EDIT_PROJECT_DETAILS.TAGS_TIP}</span></div>
						<textarea${add_attribute("this", tagsInput, 1)}>${tags || ""}</textarea></div>
					<div class="${"field descriptionField svelte-5t8ucs"}"><div class="${"label labelDetails svelte-5t8ucs"}">${escape(locale$1.EDIT_PROJECT_DETAILS.SKILLS)}<span class="${"tip svelte-5t8ucs"}">${locale$1.EDIT_PROJECT_DETAILS.SKILLS_TIP}</span></div>
						<textarea${add_attribute("this", skillsInput, 1)}>${skills || ""}</textarea></div></div>`
			: ``}

			${$editingProjectMode !== "details2"
			? `<div class="${"sectionTitle svelte-5t8ucs"}">${escape(locale$1.EDIT_PROJECT_DETAILS.OVERVIEW_HEADING)}</div>

				${detailImage1 || addingDetailImage[0]
				? `<div class="${"imageField svelte-5t8ucs"}">${validate_component(Button, "Button").$$render(
						$$result,
						{
							className: "addImage removeImage",
							icon: img$d,
							onClick: () => removeImage(0)
						},
						{},
						{
							default: () => `${escape(locale$1.EDIT_PROJECT_DETAILS.REMOVE_IMAGE)}`
						}
					)}</div>
					${validate_component(ImageSelectionBox, "ImageSelectionBox").$$render(
						$$result,
						{
							className: "detailImageSelector",
							containMode: true,
							imageType: detailImageType,
							itemIndex: "1",
							uploadType: "projectDetail",
							itemId: $projectId,
							image: detailImage1,
							fileIsUploading: detail1ImageIsUploading
						},
						{
							image: $$value => {
								detailImage1 = $$value;
								$$settled = false;
							},
							fileIsUploading: $$value => {
								detail1ImageIsUploading = $$value;
								$$settled = false;
							}
						},
						{}
					)}`
				: `<div class="${"imageField svelte-5t8ucs"}">${validate_component(Button, "Button").$$render(
						$$result,
						{
							className: "addImage",
							icon: img$M,
							onClick: () => addImage(0)
						},
						{},
						{
							default: () => `${escape(locale$1.EDIT_PROJECT_DETAILS.ADD_IMAGE)}`
						}
					)}</div>`}

				<div class="${"field svelte-5t8ucs"}"><div class="${"label labelDetails svelte-5t8ucs"}">${escape(locale$1.EDIT_PROJECT_DETAILS.DETAIL_1_LABEL)}<span class="${"tip svelte-5t8ucs"}">${locale$1.EDIT_PROJECT_DETAILS.DETAIL_1_TIP}</span></div>
					<textarea class="${"detailTextarea"}"${add_attribute("this", detailInput1, 1)}>${detail1 || ""}</textarea></div>

				${detailImage2 || addingDetailImage[1]
				? `<div class="${"imageField svelte-5t8ucs"}">${validate_component(Button, "Button").$$render(
						$$result,
						{
							className: "addImage",
							onClick: () => removeImage(1)
						},
						{},
						{
							default: () => `${escape(locale$1.EDIT_PROJECT_DETAILS.REMOVE_IMAGE)}`
						}
					)}</div>
					${validate_component(ImageSelectionBox, "ImageSelectionBox").$$render(
						$$result,
						{
							className: "detailImageSelector",
							containMode: true,
							imageType: detailImageType,
							itemIndex: "2",
							uploadType: "projectDetail",
							itemId: $projectId,
							image: detailImage2,
							fileIsUploading: detail2ImageIsUploading
						},
						{
							image: $$value => {
								detailImage2 = $$value;
								$$settled = false;
							},
							fileIsUploading: $$value => {
								detail2ImageIsUploading = $$value;
								$$settled = false;
							}
						},
						{}
					)}`
				: `<div class="${"imageField svelte-5t8ucs"}">${validate_component(Button, "Button").$$render(
						$$result,
						{
							className: "addImage",
							icon: img$M,
							onClick: () => addImage(1)
						},
						{},
						{
							default: () => `${escape(locale$1.EDIT_PROJECT_DETAILS.ADD_IMAGE)}`
						}
					)}</div>`}
				<div class="${"field svelte-5t8ucs"}"><div class="${"label labelDetails svelte-5t8ucs"}">${escape(locale$1.EDIT_PROJECT_DETAILS.DETAIL_2_LABEL)}<span class="${"tip svelte-5t8ucs"}">${locale$1.EDIT_PROJECT_DETAILS.DETAIL_2_TIP}</span></div>
					<textarea class="${"detailTextarea"}"${add_attribute("this", detailInput2, 1)}>${detail2 || ""}</textarea></div>

				${detailImage3 || addingDetailImage[2]
				? `<div class="${"imageField svelte-5t8ucs"}">${validate_component(Button, "Button").$$render(
						$$result,
						{
							className: "addImage",
							onClick: () => removeImage(2)
						},
						{},
						{
							default: () => `${escape(locale$1.EDIT_PROJECT_DETAILS.REMOVE_IMAGE)}`
						}
					)}</div>
					${validate_component(ImageSelectionBox, "ImageSelectionBox").$$render(
						$$result,
						{
							className: "detailImageSelector",
							containMode: true,
							imageType: detailImageType,
							itemIndex: "3",
							uploadType: "projectDetail",
							itemId: $projectId,
							image: detailImage3,
							fileIsUploading: detail3ImageIsUploading
						},
						{
							image: $$value => {
								detailImage3 = $$value;
								$$settled = false;
							},
							fileIsUploading: $$value => {
								detail3ImageIsUploading = $$value;
								$$settled = false;
							}
						},
						{}
					)}`
				: `<div class="${"imageField svelte-5t8ucs"}">${validate_component(Button, "Button").$$render(
						$$result,
						{
							className: "addImage",
							icon: img$M,
							onClick: () => addImage(2)
						},
						{},
						{
							default: () => `${escape(locale$1.EDIT_PROJECT_DETAILS.ADD_IMAGE)}`
						}
					)}</div>`}
				<div class="${"field svelte-5t8ucs"}"><div class="${"label labelDetails svelte-5t8ucs"}">${escape(locale$1.EDIT_PROJECT_DETAILS.DETAIL_3_LABEL)}<span class="${"tip svelte-5t8ucs"}">${locale$1.EDIT_PROJECT_DETAILS.DETAIL_3_TIP}</span></div>
					<textarea class="${"detailTextarea"}"${add_attribute("this", detailInput3, 1)}>${detail3 || ""}</textarea></div>

				${detailImage4 || addingDetailImage[3]
				? `<div class="${"imageField svelte-5t8ucs"}">${validate_component(Button, "Button").$$render(
						$$result,
						{
							className: "addImage",
							onClick: () => removeImage(3)
						},
						{},
						{
							default: () => `${escape(locale$1.EDIT_PROJECT_DETAILS.REMOVE_IMAGE)}`
						}
					)}</div>
					${validate_component(ImageSelectionBox, "ImageSelectionBox").$$render(
						$$result,
						{
							className: "detailImageSelector",
							containMode: true,
							imageType: detailImageType,
							itemIndex: "4",
							uploadType: "projectDetail",
							itemId: $projectId,
							image: detailImage4,
							fileIsUploading: detail4ImageIsUploading
						},
						{
							image: $$value => {
								detailImage4 = $$value;
								$$settled = false;
							},
							fileIsUploading: $$value => {
								detail4ImageIsUploading = $$value;
								$$settled = false;
							}
						},
						{}
					)}`
				: `<div class="${"imageField svelte-5t8ucs"}">${validate_component(Button, "Button").$$render(
						$$result,
						{
							className: "addImage",
							icon: img$M,
							onClick: () => addImage(3)
						},
						{},
						{
							default: () => `${escape(locale$1.EDIT_PROJECT_DETAILS.ADD_IMAGE)}`
						}
					)}</div>`}
				<div class="${"field svelte-5t8ucs"}"><div class="${"label labelDetails svelte-5t8ucs"}">${escape(locale$1.EDIT_PROJECT_DETAILS.DETAIL_4_LABEL)}<span class="${"tip svelte-5t8ucs"}">${locale$1.EDIT_PROJECT_DETAILS.DETAIL_4_TIP}</span></div>
					<textarea class="${"detailTextarea"}"${add_attribute("this", detailInput4, 1)}>${detail4 || ""}</textarea></div>`
			: ``}

			<div class="${"actions svelte-5t8ucs"}">${$editingProjectMode === "edit" || $editingProjectMode === "addDetails"
			? `${validate_component(Button, "Button").$$render(
					$$result,
					{
						className: "cancelButton",
						onClick: cancel,
						icon: img$N
					},
					{},
					{
						default: () => `${escape(locale$1.EDIT_PROJECT_DETAILS.CANCEL)}`
					}
				)}`
			: ``}

				${$editingProjectMode === "details2"
			? `${validate_component(Button, "Button").$$render(
					$$result,
					{
						className: "saveButton",
						onClick: save,
						disabled: !saveEnabled,
						icon: img$O
					},
					{},
					{
						default: () => `${escape(locale$1.NEW_PROJECT.DETAILS_2_CONFIRM)}`
					}
				)}`
			: `${$editingProjectMode === "details3"
				? `${validate_component(Button, "Button").$$render(
						$$result,
						{
							className: "saveButton",
							onClick: save,
							disabled: !saveEnabled,
							icon: img$O
						},
						{},
						{
							default: () => `${escape(locale$1.NEW_PROJECT.DETAILS_3_CONFIRM)}`
						}
					)}`
				: `${validate_component(Button, "Button").$$render(
						$$result,
						{
							className: "saveButton",
							onClick: save,
							disabled: !saveEnabled,
							icon: img$O
						},
						{},
						{
							default: () => `${escape(locale$1.EDIT_PROJECT_DETAILS.CONFIRM)}`
						}
					)}`}`}</div></div></div>
`
		})}`;
	} while (!$$settled);

	return $$rendered;
});

var details = /*#__PURE__*/Object.freeze({
    __proto__: null,
    'default': Details
});

/* src\routes\profile\index.svelte generated by Svelte v3.23.0 */

const Profile = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	if (typeof window !== "undefined") {
		goto("./");
	}

	return ``;
});

var index$5 = /*#__PURE__*/Object.freeze({
    __proto__: null,
    'default': Profile
});

const img$P = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD4AAAA2CAYAAACfkiopAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkJCOTFBM0IyNjcxRjExRUFBRDgwRjVFNTk5QkQ0MkMyIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkJCOTFBM0IzNjcxRjExRUFBRDgwRjVFNTk5QkQ0MkMyIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QkI5MUEzQjA2NzFGMTFFQUFEODBGNUU1OTlCRDQyQzIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QkI5MUEzQjE2NzFGMTFFQUFEODBGNUU1OTlCRDQyQzIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz50mkqLAAAEtklEQVR42uxaS0hVQRg+x0emXk3NVMweElFIuYleVIuColpkQat2PRatItDaRpCLCNqpUUYrq00ERUELF6VCD3t4yUjICiO7lvayutnr9A/9F/5+59wzc+6cK+X54eOec+/MP/PNzP+YX23HcazJKBnWJJWQeEg8JB4SD4n/T5Ll9oNt26o68gC/ADWAZYDFgJ+ALsBNwDvARwNzXQgoBXSS76YAvql0HpeviC9k0CB9EPBKqHJBFLABUORjQxoBPYBRplN81wYoVlU4jl8KxMXq32UTEhN8BhiQLMApQERxnvORnOMBMV5dOomL3XtOJnAbsB6P3nRclGzAfkCMtLusQH6XZIeH0HSuAp5KFqA5HcTzkWhi0JNJjlw+4hZpfxRQKGmbCShhpAXJlZK2JWjrlHxd0MT3kcEuKNpuDtupuS7tOkibK2RB3KSBtI8ls/lUiUeI/b5FQqqyhUzyPOtr447Ro12oqPcs6dcUFPEaMkirjldF2+/DvsOAXPZ7M9G91WOnub8ZJd4+EOL0mK/VjMMi9J0m/WckOea60uPVl/PTzdxqyHOfZt8vgH7yXs1+H8PPZz6Id5HnVUGkrLZkojrywyNaWHhsdcXR5aRL/BF5nuNjglXkecClTa0PvbXMZIwTv0Get6PdqkoFYDk+fwC8Z7/fZ5lblobu+fgZVT8jes5tCnpk0eCJRsgRsoA4IJGBFTAT2slycVVpksR+415d7PBxMtAhRfIi7F0n/dwcUD9p06igdwUJZaO4uJlBZW5C8UsywT2S0MRJn2H5eqHLjWwNXmETbdtIW26WR1jbhnRcUlajh04MegLNoAITE5FUVOIOtJN2jxVst5Hl4DE8woJoPS4Gv6h06pq07UbSoxAxFRBn330F3AO8QHKC9CLWphzwWuEId+DiqsgQjjMcdCEiD3fls8J9mUMkJ9tcLjaZaBZtPvT2EM8eyFEvA3S7DP4ViYlJPAQMJploK0lYqNx0qeBEMZdvwYgQdSlK1AdBfC5zaglcAmzENjOwCFGKiyRC1l6XxWpHv8CrOkOIFnx3kxJ0aDGmt0NW7PBLvEBSTrqDuXuFgh2KRdiB9u2wuMuP/RKNGJ5YuBaJ3pSJT8OMzWFhJmLpSR4uAK+lHUZnSSXbR9rawKo3zakQF6HpAJvoObxb+5VcDGtUZ7Whcvlupnd9Iv7rEhcxbYQo6tbMz5Pl1nGi95qLs/MjTczefe34fraCtYYmVyxJVOZY5oQ6vHm6xEsxLFGHUW5wctnM2R0zqLue+SMt4gVsRzZZZoXn8L2aNTzLI9T9ddPTIb6OdI5rFP90ZDMZY8yw7r/qcDo1t6Xk+QWuomm5xWJymUHdvX4rMDPJ84hmRURVRG3+O3mvNKj7XbICZIaH81EpEqYis60/f1Kmd3JTYrNU2FfNzWaKTMmgFZw4fo867xhP9+QM7ri03KMis7C+leMyeZt8JiPJ21UFdJI8JUvDFq9OwPx6DGWLjs5Rj04A0TfsPWJI71udHb+IV73KNJHulEzwE26ALTEZ1fcuWTHSq9hYRBwbtVHuRBzJu53Etnl78ReWB5aZ/45SKjba4b9th8RD4iHxkHhI/N+X3wIMABGsby6e1oLaAAAAAElFTkSuQmCC";

/* src\routes\_components\ProfileOverview.svelte generated by Svelte v3.23.0 */

const css$14 = {
	code: ".profileOverview.svelte-1sqmjsb{background-color:#ffffff}.coverImage.svelte-1sqmjsb{width:100%;padding-top:48.7%;background-size:cover;background-position:center;background-color:#dedede}.profileOverviewHeader.svelte-1sqmjsb{position:relative}.avatarContainer.svelte-1sqmjsb{position:absolute;top:0;left:0;height:52px}.content.svelte-1sqmjsb .avatarIcon{position:absolute;left:16px;bottom:0;min-width:108px;min-height:108px;max-width:156px;max-height:156px;width:40vw;height:40vw;border:4px solid #ffffff;box-sizing:content-box;overflow:initial}.content.svelte-1sqmjsb .avatarIconImage{border:1px solid #cacaca;border-radius:999px;overflow:hidden;box-sizing:border-box}.itemContent.svelte-1sqmjsb{padding-top:60px;padding-left:23px;padding-bottom:18px}.header.svelte-1sqmjsb{font-size:2.2rem;padding-top:3px;padding-right:136px;line-height:3rem;user-select:text}.username.svelte-1sqmjsb{font-size:1.5rem;padding-right:60px;padding-bottom:5px;margin-top:-6px;line-height:3rem;user-select:text;color:#999999}.description.svelte-1sqmjsb{padding:10px;padding-top:12px;padding-right:23px;font-size:1.5rem;line-height:2rem;margin-left:-10px;user-select:text;color:#555555}.description.svelte-1sqmjsb a{user-select:text}.content.svelte-1sqmjsb .addDetailsButton{display:table;padding:10px;padding-right:45px;padding-left:0;padding-top:20px;font-size:1.5rem;font-weight:700;color:#DF3C3C}.content.svelte-1sqmjsb .addDetailsButton .icon{padding-left:16px}.content.svelte-1sqmjsb .optionsButton{position:absolute;top:67px;right:0;width:28px;height:26px;padding:8px}.content.svelte-1sqmjsb .optionsButton .icon{margin-top:1px;margin-left:4px}.content.svelte-1sqmjsb .editButton{position:absolute;top:69px;right:45px;width:28px;height:26px;padding:8px;font-size:1.5rem;font-weight:700;padding-right:33px}.content.svelte-1sqmjsb .editButton .icon{padding-left:12px}.userStats.svelte-1sqmjsb{position:absolute;top:12px;left:135px;right:16px;display:flex;justify-content:space-between}.userStats.svelte-1sqmjsb .button{width:33%;display:flex;justify-content:center;align-items:center;padding:8px 0;font-size:1.3rem;font-weight:700;color:#0D0D0D;white-space:nowrap;min-width:65px}.userStats.svelte-1sqmjsb .count{display:inline-block;vertical-align:bottom;position:relative;padding-bottom:1px;padding-left:6px;font-size:1.2rem;font-weight:700;color:#666666}.userStats.svelte-1sqmjsb .label{border-bottom:2px solid #CCCCCC;padding-bottom:2px}.overviewActions.svelte-1sqmjsb{position:relative;width:100%;height:54px}.overviewActions.svelte-1sqmjsb .sendMessageButton{position:absolute;padding:10px;padding-right:40px;margin-left:13px;font-size:1.5rem;font-weight:700;margin-top:4px}.overviewActions.svelte-1sqmjsb .sendMessageButton .icon{padding-left:12px}.overviewActions.svelte-1sqmjsb .connectButton{position:absolute;top:8px;right:18px;padding:6px 41px 6px 18px;font-size:1.5rem;font-weight:700;margin-right:-6px}.overviewActions.svelte-1sqmjsb .connectButton .icon{margin-left:5px;margin-top:-2px}.overviewActions.svelte-1sqmjsb .isButton{border:2px solid #0B0B0B;margin-right:-2px;margin-top:-2px;border-radius:999px}.footerActions.svelte-1sqmjsb{position:relative;padding-bottom:10px;margin-top:-4px}.footerActions.svelte-1sqmjsb .audienceButton{position:absolute;top:-3px;right:8px}",
	map: "{\"version\":3,\"file\":\"ProfileOverview.svelte\",\"sources\":[\"ProfileOverview.svelte\"],\"sourcesContent\":[\"<script>\\n    import { menuIds } from '../../config/menus';\\n\\n    import { getDisplayText } from '../../utils';\\n\\n    import Button from '../../components/Button.svelte';\\n\\n    import Proxy from '../../components/Proxy.svelte';\\n    import Hotspot from '../../components/Hotspot.svelte';\\n\\n    import AvatarIcon from '../_components/AvatarIcon.svelte';\\n\\timport Location from '../_components/Location.svelte';\\n\\timport Audience from '../_components/Audience.svelte';\\n\\n\\timport OptionsMenuIcon from \\\"../../assets/icons/menu.png\\\";\\n    import EditIcon from \\\"../../assets/icons/edit.png\\\";\\n\\n    import SendMessageIcon from \\\"../../assets/icons/send.png\\\";\\n    import ConnectIcon from \\\"../../assets/icons/connect.png\\\";\\n\\n    import ProfileDefaultImage from \\\"../../assets/icons/profileDefault.png\\\";\\n\\n\\timport AddDetailsIcon from \\\"../../assets/icons/add_highlight.png\\\";\\n\\n    import { viewedUser } from '../../models/appModel';\\n\\n    import {\\n        getIsCurrentUser,\\n        showBetaFeatures,\\n        user,\\n    } from '../../models/appModel';\\n\\n    import {\\n        getProfileCoverImage,\\n    } from '../../models/usersModel';\\n\\n    import {\\n        showLikes,\\n        messageUser,\\n        showMenu,\\n        editProfile,\\n    } from '../../actions/appActions'\\n\\n\\timport { requestConnection } from '../../actions/userActions';\\n\\n\\t$: requestedConnection = ($viewedUser && $viewedUser.requestedConnection) || false;\\n\\t$: connected = ($viewedUser && $viewedUser.connected) || false;\\n    $: isCurrentUser = $user && getIsCurrentUser($viewedUser && $viewedUser.id);\\n    // $: isCurrentUser = ($viewedUser && $viewedUser.isCurrentUser) || false;\\n\\n    $: showConnect = !requestedConnection && !connected;\\n\\n    $: userId = ($viewedUser && $viewedUser.id) || '';\\n    $: username = ($viewedUser && $viewedUser.username && '@' + $viewedUser.username) || '';\\n\\n    $: userName = ($viewedUser && $viewedUser.name) || '';\\n    $: userFirstName = ($viewedUser && $viewedUser.firstName) || '';\\n    $: userBio = ($viewedUser && $viewedUser.bio) || '';\\n    $: userLocation = ($viewedUser && $viewedUser.location) || '';\\n\\n    $: userBioHTML = getDisplayText(userBio);\\n\\n    $: postsCount = ($viewedUser && $viewedUser.postsCount) || 0;\\n    $: likesCount = ($viewedUser && $viewedUser.likesCount) || 0;\\n    $: followsCount = ($viewedUser && $viewedUser.followsCount) || 0;\\n\\n    // $: coverImageId = ($viewedUser && $viewedUser.coverImage !== false) ? username : '_default';\\n    // $: coverImage = 'content/users/' + coverImageId + '/cover.jpg';\\n\\n    $: coverImage = getProfileCoverImage($viewedUser, true);\\n\\n\\t// $: profileImageSrc = 'content/users/' + username + '/profile.jpg';\\n    // $: profileImageSrc = ProfileDefaultImage;\\n    // $: profileImageBgStyling = userStyle ? 'background-image: linear-gradient(' + userStyle.profileTop + ', ' + userStyle.profileBottom + ');' : '';\\n\\n    $: userStyle = ($viewedUser && $viewedUser.style) || null;\\n    $: coverBgStyling = (userStyle && userStyle.coverTop) ? 'background-image: linear-gradient(' + userStyle.coverTop + ', ' + userStyle.coverBottom + ');' : null;\\n\\n    // $: proxyImage = isCurrentUser ? 'profile_overview_owner' : 'profile_overview';\\n    // $: proxyOverviewActionsImage = isCurrentUser ? 'profile_overview_owner_actions' : 'profile_overview_actions';\\n\\n    function userRequestConnection() {\\n        requestConnection(userId);\\n    }\\n\\n    function messageCurrentUser() {\\n        messageUser(userId);\\n    }\\n\\n    function showProfileOptions() {\\n\\t\\tif (isCurrentUser) {\\n\\t\\t\\tshowMenu(menuIds.PROFILE_OWNER_MENU);\\n\\t\\t} else {\\n\\t\\t\\tshowMenu(menuIds.PROFILE_MENU);\\n\\t\\t}\\n    }\\n</script>\\n\\n<div class=\\\"content\\\">\\n    <div class=\\\"profileOverview\\\">\\n        <!-- <Proxy image=\\\"{proxyImage}\\\" className=\\\"proxyOverview\\\">\\n            <Hotspot onClick=\\\"{showLikes}\\\" style=\\\"\\n                left: 199px;\\n                top: 144px;\\n                width: 77px;\\n                height: 39px;\\\" />\\n        </Proxy> -->\\n        {#if coverImage}\\n            <div style=\\\"background-image: url({coverImage})\\\" class=\\\"coverImage\\\" alt=\\\"cover image\\\" />\\n        {:else}\\n            <div class=\\\"coverImage\\\" style=\\\"{coverBgStyling}\\\" />\\n        {/if}\\n        <div class=\\\"profileOverviewHeader\\\">\\n            <!-- <div class=\\\"profileImage\\\" style=\\\"{profileImageBgStyling}\\\">\\n                <img src=\\\"{profileImageSrc}\\\" alt=\\\"{userFirstName}\\\" />\\n            </div> -->\\n            <div class=\\\"avatarContainer\\\">\\n                <AvatarIcon user=\\\"{viewedUser}\\\" />\\n            </div>\\n            <Button className=\\\"optionsButton\\\" icon=\\\"{OptionsMenuIcon}\\\" onClick=\\\"{showProfileOptions}\\\"></Button>\\n            {#if isCurrentUser}\\n                <Button className=\\\"editButton\\\" icon=\\\"{EditIcon}\\\" onClick=\\\"{editProfile}\\\">edit</Button>\\n            {/if}\\n            {#if $showBetaFeatures}\\n                <div class=\\\"userStats\\\">\\n                    <Button><span class=\\\"label\\\">posts</span><div class=\\\"count\\\">{postsCount}</div></Button>\\n                    <Button onClick=\\\"{showLikes}\\\"><span class=\\\"label\\\">likes</span><div class=\\\"count\\\">{likesCount}</div></Button>\\n                    <Button><span class=\\\"label\\\">follows</span><div class=\\\"count\\\">{followsCount}</div></Button>\\n                </div>\\n            {/if}\\n            <div class=\\\"itemContent\\\">\\n                <div class=\\\"header\\\">{userName}</div>\\n                <div class=\\\"username\\\">{username}</div>\\n\\n                {#if userBio}\\n                    <div class=\\\"description\\\">{@html userBioHTML}</div>\\n                {:else if isCurrentUser}\\n                    <Button className=\\\"addDetailsButton\\\" onClick=\\\"{editProfile}\\\" icon=\\\"{AddDetailsIcon}\\\">add bio</Button>\\n                {/if}\\n            </div>\\n\\n            <!-- <Proxy image=\\\"{proxyOverviewActionsImage}\\\" className=\\\"proxyOverview\\\">\\n                {#if !isCurrentUser}\\n                    <Hotspot onClick=\\\"{e => loadConversation('r70dp2bf')}\\\" style=\\\"\\n                        left: 11px;\\n                        top: 7px;\\n                        width: 116px;\\n                        height: 40px;\\\" />\\n\\n                    {#if requestedConnection}\\n                        <Proxy image=\\\"profile_invitation_sent\\\" absolutePlacement=\\\"true\\\" style=\\\"\\n                            width: 336px;\\n                            height: 104px;\\n\\n                            left: 209.5px;\\n                            top: 2.5px;\\\" />\\n                    {:else}\\n                        <Hotspot onClick=\\\"{userRequestConnection}\\\" style=\\\"\\n                            right: 5px;\\n                            top: 7px;\\n                            width: 137px;\\n                            height: 40px;\\\" />\\n                    {/if}\\n                {/if}\\n            </Proxy> -->\\n\\n            {#if !isCurrentUser}\\n                    <div class=\\\"overviewActions\\\">\\n                        <Button className=\\\"sendMessageButton\\\" onClick=\\\"{messageCurrentUser}\\\" icon=\\\"{SendMessageIcon}\\\">message</Button>\\n                        {#if $showBetaFeatures}\\n                            <Button className=\\\"connectButton {showConnect ? 'isButton' : ''}\\\" onClick=\\\"{showConnect ? userRequestConnection : null}\\\" icon=\\\"{ConnectIcon}\\\">{showConnect ? 'connect' : (requestedConnection ? 'request sent' : 'connected')}</Button>\\n                        {/if}\\n                    </div>\\n            {/if}\\n\\n            {#if userLocation}\\n                <!-- {#if $showBetaFeatures} -->\\n                    <div class=\\\"footerActions\\\">\\n                        <Location location=\\\"{userLocation}\\\" hideWithVisibility=\\\"{isCurrentUser}\\\" />\\n                        {#if isCurrentUser && $showBetaFeatures}\\n                            <Audience />\\n                        {/if}\\n                    </div>\\n                <!-- {/if} -->\\n            {/if}\\n        </div>\\n    </div>\\n</div>\\n\\n<style>\\n    .profileOverview {\\n        background-color: #ffffff;\\n        /* height: 377px; */\\n    }\\n\\n\\t/* .content :global(.proxyOverview) {\\n\\t\\tposition: absolute;\\n        opacity: 0.5;\\n\\t} */\\n\\n\\t.coverImage {\\n\\t\\twidth: 100%;\\n        padding-top: 48.7%;\\n    \\tbackground-size: cover;\\n        background-position: center;\\n\\n        /* height: 200px; */\\n        /* object-fit: cover; */\\n\\n        background-color: #dedede;\\n\\t}\\n\\n    .profileOverviewHeader {\\n        position: relative;\\n    }\\n\\n    .avatarContainer {\\n        position: absolute;\\n        top: 0;\\n        left: 0;\\n        height: 52px;\\n    }\\n\\n    .content :global(.avatarIcon) {\\n        position: absolute;\\n        left: 16px;\\n        bottom: 0;\\n        /* margin-top: -48px; */\\n\\n        /* width: 108px;\\n        height: 108px; */\\n        min-width: 108px;\\n        min-height: 108px;\\n        max-width: 156px;\\n        max-height: 156px;\\n        width: 40vw;\\n        height: 40vw;\\n\\n        border: 4px solid #ffffff;\\n        box-sizing: content-box;\\n        overflow: initial;\\n    }\\n    .content :global(.avatarIconImage) {\\n        border: 1px solid #cacaca;\\n        border-radius: 999px;\\n        overflow: hidden;\\n        box-sizing: border-box;\\n    }\\n\\n    /* .profileImage {\\n        position: absolute;\\n        left: 14px;\\n        margin-top: -48px;\\n\\n        width: 108px;\\n        height: 108px;\\n\\n        border-radius: 999px;\\n        border: 4px solid #ffffff;\\n\\n        background-color: #C8C8C8;\\n    }\\n    .profileImage img {\\n        width: 100%;\\n        height: 100%;\\n        object-fit: cover;\\n\\n        border-radius: 999px;\\n        overflow: hidden;\\n        border: 1px solid #cacaca;\\n\\n        margin-left: -1px;\\n        margin-top: -1px;\\n    } */\\n\\n    .itemContent {\\n        padding-top: 60px;\\n        padding-left: 23px;\\n        padding-bottom: 18px;\\n    }\\n\\n    .header {\\n        font-size: 2.2rem;\\n        padding-top: 3px;\\n        padding-right: 136px;\\n    \\tline-height: 3rem;\\n\\n        user-select: text;\\n\\t}\\n\\n    .username {\\n        font-size: 1.5rem;\\n        padding-right: 60px;\\n        padding-bottom: 5px;\\n        margin-top: -6px;\\n        line-height: 3rem;\\n\\n        user-select: text;\\n\\n        color: #999999;\\n    }\\n\\n    .description {\\n\\t\\tpadding: 10px;\\n        padding-top: 12px;\\n        padding-right: 23px;\\n        /* padding-right: 50px; */\\n\\n        font-size: 1.5rem;\\n\\t\\tline-height: 2rem;\\n\\n\\t\\tmargin-left: -10px;\\n\\n        user-select: text;\\n\\n\\t\\tcolor: #555555;\\n\\t}\\n    .description :global(a) {\\n        user-select: text;\\n    }\\n\\n    .content :global(.addDetailsButton) {\\n\\t\\tdisplay: table;\\n\\n\\t\\tpadding: 10px;\\n\\t\\tpadding-right: 45px;\\n\\n        padding-left: 0;\\n        padding-top: 20px;\\n\\n\\t\\tfont-size: 1.5rem;\\n\\t\\tfont-weight: 700;\\n\\n\\t\\tcolor: #DF3C3C;\\n\\t}\\n    .content :global(.addDetailsButton .icon) {\\n    \\tpadding-left: 16px;\\n\\t}\\n\\n    .content :global(.optionsButton) {\\n\\t\\tposition: absolute;\\n\\n        top: 67px;\\n\\t\\tright: 0;\\n\\n\\t\\twidth: 28px;\\n\\t\\theight: 26px;\\n\\t\\tpadding: 8px;\\n\\t}\\n    .content :global(.optionsButton .icon) {\\n\\t\\tmargin-top: 1px;\\n    \\tmargin-left: 4px;\\n\\t}\\n\\n    .content :global(.editButton) {\\n\\t\\tposition: absolute;\\n\\n\\t\\ttop: 69px;\\n    \\tright: 45px;\\n\\n\\t\\twidth: 28px;\\n\\t\\theight: 26px;\\n\\t\\tpadding: 8px;\\n\\n\\t\\tfont-size: 1.5rem;\\n\\t\\tfont-weight: 700;\\n\\n        padding-right: 33px;\\n\\t}\\n    .content :global(.editButton .icon) {\\n        padding-left: 12px;\\n\\t}\\n\\n    .userStats {\\n        position: absolute;\\n        top: 12px;\\n        left: 135px;\\n        right: 16px;\\n\\n\\t\\tdisplay: flex;\\n\\t\\tjustify-content: space-between;\\n    }\\n\\n    .userStats :global(.button) {\\n\\t\\twidth: 33%;\\n\\t\\tdisplay: flex;\\n\\t\\tjustify-content: center;\\n\\t\\talign-items: center;\\n\\n        padding: 8px 0;\\n\\n        font-size: 1.3rem;\\n\\t\\tfont-weight: 700;\\n        color: #0D0D0D;\\n\\n        white-space: nowrap;\\n        min-width: 65px;\\n    }\\n\\n    .userStats :global(.count) {\\n\\t\\tdisplay: inline-block;\\n\\t\\tvertical-align: bottom;\\n\\t\\tposition: relative;\\n\\n        padding-bottom: 1px;\\n        padding-left: 6px;\\n\\n        font-size: 1.2rem;\\n        font-weight: 700;\\n        color: #666666;\\n    }\\n\\n    .userStats :global(.label) {\\n        border-bottom: 2px solid #CCCCCC;\\n        padding-bottom: 2px;\\n    }\\n\\n    .overviewActions  {\\n        position: relative;\\n        width: 100%;\\n        height: 54px;\\n        /* margin-top: 4px; */\\n    }\\n\\n    .overviewActions :global(.sendMessageButton) {\\n    \\tposition: absolute;\\n\\t\\tpadding: 10px;\\n    \\tpadding-right: 40px;\\n\\n\\t\\tmargin-left: 13px;\\n\\n\\t\\tfont-size: 1.5rem;\\n\\t\\tfont-weight: 700;\\n\\n    \\tmargin-top: 4px;\\n    }\\n    .overviewActions :global(.sendMessageButton .icon) {\\n    \\tpadding-left: 12px;\\n\\t}\\n\\n    .overviewActions :global(.connectButton) {\\n\\t\\tposition: absolute;\\n\\t\\ttop: 8px;\\n        right: 18px;\\n\\n\\t\\tpadding: 6px 41px 6px 18px;\\n\\n\\t\\tfont-size: 1.5rem;\\n\\t\\tfont-weight: 700;\\n\\n    \\tmargin-right: -6px;\\n    }\\n    .overviewActions :global(.connectButton .icon) {\\n\\t\\tmargin-left: 5px;\\n\\t\\tmargin-top: -2px;\\n    }\\n    .overviewActions :global(.isButton) {\\n\\t\\tborder: 2px solid #0B0B0B;\\n\\t\\tmargin-right: -2px; margin-top: -2px; /* factor in border */\\n\\t\\tborder-radius: 999px;\\n    }\\n\\n    .footerActions {\\n        position: relative;\\n        padding-bottom: 10px;\\n        margin-top: -4px;\\n    }\\n\\n    .footerActions :global(.audienceButton) {\\n\\t\\tposition: absolute;\\n        top: -3px;\\n        right: 8px;\\n\\t}\\n</style>\"],\"names\":[],\"mappings\":\"AA8LI,gBAAgB,eAAC,CAAC,AACd,gBAAgB,CAAE,OAAO,AAE7B,CAAC,AAOJ,WAAW,eAAC,CAAC,AACZ,KAAK,CAAE,IAAI,CACL,WAAW,CAAE,KAAK,CACrB,eAAe,CAAE,KAAK,CACnB,mBAAmB,CAAE,MAAM,CAK3B,gBAAgB,CAAE,OAAO,AAChC,CAAC,AAEE,sBAAsB,eAAC,CAAC,AACpB,QAAQ,CAAE,QAAQ,AACtB,CAAC,AAED,gBAAgB,eAAC,CAAC,AACd,QAAQ,CAAE,QAAQ,CAClB,GAAG,CAAE,CAAC,CACN,IAAI,CAAE,CAAC,CACP,MAAM,CAAE,IAAI,AAChB,CAAC,AAED,uBAAQ,CAAC,AAAQ,WAAW,AAAE,CAAC,AAC3B,QAAQ,CAAE,QAAQ,CAClB,IAAI,CAAE,IAAI,CACV,MAAM,CAAE,CAAC,CAKT,SAAS,CAAE,KAAK,CAChB,UAAU,CAAE,KAAK,CACjB,SAAS,CAAE,KAAK,CAChB,UAAU,CAAE,KAAK,CACjB,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CAEZ,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CACzB,UAAU,CAAE,WAAW,CACvB,QAAQ,CAAE,OAAO,AACrB,CAAC,AACD,uBAAQ,CAAC,AAAQ,gBAAgB,AAAE,CAAC,AAChC,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CACzB,aAAa,CAAE,KAAK,CACpB,QAAQ,CAAE,MAAM,CAChB,UAAU,CAAE,UAAU,AAC1B,CAAC,AA4BD,YAAY,eAAC,CAAC,AACV,WAAW,CAAE,IAAI,CACjB,YAAY,CAAE,IAAI,CAClB,cAAc,CAAE,IAAI,AACxB,CAAC,AAED,OAAO,eAAC,CAAC,AACL,SAAS,CAAE,MAAM,CACjB,WAAW,CAAE,GAAG,CAChB,aAAa,CAAE,KAAK,CACvB,WAAW,CAAE,IAAI,CAEd,WAAW,CAAE,IAAI,AACxB,CAAC,AAEE,SAAS,eAAC,CAAC,AACP,SAAS,CAAE,MAAM,CACjB,aAAa,CAAE,IAAI,CACnB,cAAc,CAAE,GAAG,CACnB,UAAU,CAAE,IAAI,CAChB,WAAW,CAAE,IAAI,CAEjB,WAAW,CAAE,IAAI,CAEjB,KAAK,CAAE,OAAO,AAClB,CAAC,AAED,YAAY,eAAC,CAAC,AAChB,OAAO,CAAE,IAAI,CACP,WAAW,CAAE,IAAI,CACjB,aAAa,CAAE,IAAI,CAGnB,SAAS,CAAE,MAAM,CACvB,WAAW,CAAE,IAAI,CAEjB,WAAW,CAAE,KAAK,CAEZ,WAAW,CAAE,IAAI,CAEvB,KAAK,CAAE,OAAO,AACf,CAAC,AACE,2BAAY,CAAC,AAAQ,CAAC,AAAE,CAAC,AACrB,WAAW,CAAE,IAAI,AACrB,CAAC,AAED,uBAAQ,CAAC,AAAQ,iBAAiB,AAAE,CAAC,AACvC,OAAO,CAAE,KAAK,CAEd,OAAO,CAAE,IAAI,CACb,aAAa,CAAE,IAAI,CAEb,YAAY,CAAE,CAAC,CACf,WAAW,CAAE,IAAI,CAEvB,SAAS,CAAE,MAAM,CACjB,WAAW,CAAE,GAAG,CAEhB,KAAK,CAAE,OAAO,AACf,CAAC,AACE,uBAAQ,CAAC,AAAQ,uBAAuB,AAAE,CAAC,AAC1C,YAAY,CAAE,IAAI,AACtB,CAAC,AAEE,uBAAQ,CAAC,AAAQ,cAAc,AAAE,CAAC,AACpC,QAAQ,CAAE,QAAQ,CAEZ,GAAG,CAAE,IAAI,CACf,KAAK,CAAE,CAAC,CAER,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,OAAO,CAAE,GAAG,AACb,CAAC,AACE,uBAAQ,CAAC,AAAQ,oBAAoB,AAAE,CAAC,AAC1C,UAAU,CAAE,GAAG,CACZ,WAAW,CAAE,GAAG,AACpB,CAAC,AAEE,uBAAQ,CAAC,AAAQ,WAAW,AAAE,CAAC,AACjC,QAAQ,CAAE,QAAQ,CAElB,GAAG,CAAE,IAAI,CACN,KAAK,CAAE,IAAI,CAEd,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,OAAO,CAAE,GAAG,CAEZ,SAAS,CAAE,MAAM,CACjB,WAAW,CAAE,GAAG,CAEV,aAAa,CAAE,IAAI,AAC1B,CAAC,AACE,uBAAQ,CAAC,AAAQ,iBAAiB,AAAE,CAAC,AACjC,YAAY,CAAE,IAAI,AACzB,CAAC,AAEE,UAAU,eAAC,CAAC,AACR,QAAQ,CAAE,QAAQ,CAClB,GAAG,CAAE,IAAI,CACT,IAAI,CAAE,KAAK,CACX,KAAK,CAAE,IAAI,CAEjB,OAAO,CAAE,IAAI,CACb,eAAe,CAAE,aAAa,AAC5B,CAAC,AAED,yBAAU,CAAC,AAAQ,OAAO,AAAE,CAAC,AAC/B,KAAK,CAAE,GAAG,CACV,OAAO,CAAE,IAAI,CACb,eAAe,CAAE,MAAM,CACvB,WAAW,CAAE,MAAM,CAEb,OAAO,CAAE,GAAG,CAAC,CAAC,CAEd,SAAS,CAAE,MAAM,CACvB,WAAW,CAAE,GAAG,CACV,KAAK,CAAE,OAAO,CAEd,WAAW,CAAE,MAAM,CACnB,SAAS,CAAE,IAAI,AACnB,CAAC,AAED,yBAAU,CAAC,AAAQ,MAAM,AAAE,CAAC,AAC9B,OAAO,CAAE,YAAY,CACrB,cAAc,CAAE,MAAM,CACtB,QAAQ,CAAE,QAAQ,CAEZ,cAAc,CAAE,GAAG,CACnB,YAAY,CAAE,GAAG,CAEjB,SAAS,CAAE,MAAM,CACjB,WAAW,CAAE,GAAG,CAChB,KAAK,CAAE,OAAO,AAClB,CAAC,AAED,yBAAU,CAAC,AAAQ,MAAM,AAAE,CAAC,AACxB,aAAa,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CAChC,cAAc,CAAE,GAAG,AACvB,CAAC,AAED,gBAAgB,eAAE,CAAC,AACf,QAAQ,CAAE,QAAQ,CAClB,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,AAEhB,CAAC,AAED,+BAAgB,CAAC,AAAQ,kBAAkB,AAAE,CAAC,AAC7C,QAAQ,CAAE,QAAQ,CACrB,OAAO,CAAE,IAAI,CACV,aAAa,CAAE,IAAI,CAEtB,WAAW,CAAE,IAAI,CAEjB,SAAS,CAAE,MAAM,CACjB,WAAW,CAAE,GAAG,CAEb,UAAU,CAAE,GAAG,AAChB,CAAC,AACD,+BAAgB,CAAC,AAAQ,wBAAwB,AAAE,CAAC,AACnD,YAAY,CAAE,IAAI,AACtB,CAAC,AAEE,+BAAgB,CAAC,AAAQ,cAAc,AAAE,CAAC,AAC5C,QAAQ,CAAE,QAAQ,CAClB,GAAG,CAAE,GAAG,CACF,KAAK,CAAE,IAAI,CAEjB,OAAO,CAAE,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAE1B,SAAS,CAAE,MAAM,CACjB,WAAW,CAAE,GAAG,CAEb,YAAY,CAAE,IAAI,AACnB,CAAC,AACD,+BAAgB,CAAC,AAAQ,oBAAoB,AAAE,CAAC,AAClD,WAAW,CAAE,GAAG,CAChB,UAAU,CAAE,IAAI,AACd,CAAC,AACD,+BAAgB,CAAC,AAAQ,SAAS,AAAE,CAAC,AACvC,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CACzB,YAAY,CAAE,IAAI,CAAE,UAAU,CAAE,IAAI,CACpC,aAAa,CAAE,KAAK,AAClB,CAAC,AAED,cAAc,eAAC,CAAC,AACZ,QAAQ,CAAE,QAAQ,CAClB,cAAc,CAAE,IAAI,CACpB,UAAU,CAAE,IAAI,AACpB,CAAC,AAED,6BAAc,CAAC,AAAQ,eAAe,AAAE,CAAC,AAC3C,QAAQ,CAAE,QAAQ,CACZ,GAAG,CAAE,IAAI,CACT,KAAK,CAAE,GAAG,AACjB,CAAC\"}"
};

const ProfileOverview = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let $viewedUser = get_store_value(viewedUser);
	let $user = get_store_value(user);
	let $showBetaFeatures = get_store_value(showBetaFeatures);

	// $: proxyImage = isCurrentUser ? 'profile_overview_owner' : 'profile_overview';
	// $: proxyOverviewActionsImage = isCurrentUser ? 'profile_overview_owner_actions' : 'profile_overview_actions';
	function userRequestConnection() {
		requestConnection(userId);
	}

	function messageCurrentUser() {
		messageUser(userId);
	}

	function showProfileOptions() {
		if (isCurrentUser) {
			showMenu(menuIds.PROFILE_OWNER_MENU);
		} else {
			showMenu(menuIds.PROFILE_MENU);
		}
	}

	$$result.css.add(css$14);
	let requestedConnection = $viewedUser && $viewedUser.requestedConnection || false;
	let connected = $viewedUser && $viewedUser.connected || false;
	let isCurrentUser = $user && getIsCurrentUser($viewedUser && $viewedUser.id);
	let showConnect = !requestedConnection && !connected;
	let userId = $viewedUser && $viewedUser.id || "";
	let username = $viewedUser && $viewedUser.username && "@" + $viewedUser.username || "";
	let userName = $viewedUser && $viewedUser.name || "";
	let userFirstName = $viewedUser && $viewedUser.firstName || "";
	let userBio = $viewedUser && $viewedUser.bio || "";
	let userLocation = $viewedUser && $viewedUser.location || "";
	let userBioHTML = getDisplayText(userBio);
	let postsCount = $viewedUser && $viewedUser.postsCount || 0;
	let likesCount = $viewedUser && $viewedUser.likesCount || 0;
	let followsCount = $viewedUser && $viewedUser.followsCount || 0;
	let coverImage = getProfileCoverImage($viewedUser);
	let userStyle = $viewedUser && $viewedUser.style || null;

	let coverBgStyling = userStyle && userStyle.coverTop
	? "background-image: linear-gradient(" + userStyle.coverTop + ", " + userStyle.coverBottom + ");"
	: null;

	return `<div class="${"content svelte-1sqmjsb"}"><div class="${"profileOverview svelte-1sqmjsb"}">
        ${coverImage
	? `<div style="${"background-image: url(" + escape(coverImage) + ")"}" class="${"coverImage svelte-1sqmjsb"}" alt="${"cover image"}"></div>`
	: `<div class="${"coverImage svelte-1sqmjsb"}"${add_attribute("style", coverBgStyling, 0)}></div>`}
        <div class="${"profileOverviewHeader svelte-1sqmjsb"}">
            <div class="${"avatarContainer svelte-1sqmjsb"}">${validate_component(AvatarIcon, "AvatarIcon").$$render($$result, { user: viewedUser }, {}, {})}</div>
            ${validate_component(Button, "Button").$$render(
		$$result,
		{
			className: "optionsButton",
			icon: img,
			onClick: showProfileOptions
		},
		{},
		{}
	)}
            ${isCurrentUser
	? `${validate_component(Button, "Button").$$render(
			$$result,
			{
				className: "editButton",
				icon: img$i,
				onClick: editProfile
			},
			{},
			{ default: () => `edit` }
		)}`
	: ``}
            ${$showBetaFeatures
	? `<div class="${"userStats svelte-1sqmjsb"}">${validate_component(Button, "Button").$$render($$result, {}, {}, {
			default: () => `<span class="${"label"}">posts</span><div class="${"count"}">${escape(postsCount)}</div>`
		})}
                    ${validate_component(Button, "Button").$$render($$result, { onClick: showLikes }, {}, {
			default: () => `<span class="${"label"}">likes</span><div class="${"count"}">${escape(likesCount)}</div>`
		})}
                    ${validate_component(Button, "Button").$$render($$result, {}, {}, {
			default: () => `<span class="${"label"}">follows</span><div class="${"count"}">${escape(followsCount)}</div>`
		})}</div>`
	: ``}
            <div class="${"itemContent svelte-1sqmjsb"}"><div class="${"header svelte-1sqmjsb"}">${escape(userName)}</div>
                <div class="${"username svelte-1sqmjsb"}">${escape(username)}</div>

                ${userBio
	? `<div class="${"description svelte-1sqmjsb"}">${userBioHTML}</div>`
	: `${isCurrentUser
		? `${validate_component(Button, "Button").$$render(
				$$result,
				{
					className: "addDetailsButton",
					onClick: editProfile,
					icon: img$L
				},
				{},
				{ default: () => `add bio` }
			)}`
		: ``}`}</div>

            

            ${!isCurrentUser
	? `<div class="${"overviewActions svelte-1sqmjsb"}">${validate_component(Button, "Button").$$render(
			$$result,
			{
				className: "sendMessageButton",
				onClick: messageCurrentUser,
				icon: img$A
			},
			{},
			{ default: () => `message` }
		)}
                        ${$showBetaFeatures
		? `${validate_component(Button, "Button").$$render(
				$$result,
				{
					className: "connectButton " + (showConnect ? "isButton" : ""),
					onClick: showConnect ? userRequestConnection : null,
					icon: img$P
				},
				{},
				{
					default: () => `${escape(showConnect
					? "connect"
					: requestedConnection ? "request sent" : "connected")}`
				}
			)}`
		: ``}</div>`
	: ``}

            ${userLocation
	? `
                    <div class="${"footerActions svelte-1sqmjsb"}">${validate_component(Location, "Location").$$render(
			$$result,
			{
				location: userLocation,
				hideWithVisibility: isCurrentUser
			},
			{},
			{}
		)}
                        ${isCurrentUser && $showBetaFeatures
		? `${validate_component(Audience, "Audience").$$render($$result, {}, {}, {})}`
		: ``}</div>
                `
	: ``}</div></div>
</div>`;
});

/* src\routes\profile\[profile]\index.svelte generated by Svelte v3.23.0 */

const css$15 = {
	code: ".content.svelte-1pi8z0p .contentItem{width:100%;margin-bottom:10px}.content.svelte-1pi8z0p .proxyOverlay{position:absolute;opacity:0.5}",
	map: "{\"version\":3,\"file\":\"index.svelte\",\"sources\":[\"index.svelte\"],\"sourcesContent\":[\"<script>\\r\\n\\timport locale from '../../../locale';\\r\\n\\timport { writable } from 'svelte/store';\\r\\n\\r\\n\\timport { getSplitItems } from '../../../utils';\\r\\n\\r\\n\\timport ScrollView from '../../../components/ScrollView.svelte';\\r\\n\\r\\n\\timport Proxy from '../../../components/Proxy.svelte';\\r\\n    import Hotspot from '../../../components/Hotspot.svelte';\\r\\n\\r\\n\\timport ContentLoader from '../../_components/ContentLoader.svelte';\\r\\n\\timport ProfileOverview from './../../_components/ProfileOverview.svelte';\\r\\n\\r\\n\\timport ContentPanel from './../../_components/ContentPanel.svelte';\\r\\n\\timport TagSet from './../../_components/TagSet.svelte';\\r\\n\\r\\n\\timport ProjectList from './../../_components/ProjectList.svelte';\\r\\n\\r\\n\\timport { getUserProjectsFromId } from '../../../models/projectsModel';\\r\\n\\r\\n\\timport {\\r\\n\\t\\tviewedUser,\\r\\n\\t\\tprofileId,\\r\\n\\t\\tprofileDisplayingAllProjects,\\r\\n\\t\\tshowBetaFeatures,\\r\\n\\t\\tuser,\\r\\n\\t\\tuserId,\\r\\n\\t\\tisUserLoaded,\\r\\n\\t\\tloggingIn,\\r\\n\\t} from '../../../models/appModel';\\r\\n\\r\\n\\timport { loadConversation, messageUser, showShareProfileDialog } from '../../../actions/appActions';\\r\\n\\r\\n\\timport { requestConnection } from '../../../actions/userActions';\\r\\n\\r\\n\\timport { loadingUsers } from '../../../models/usersModel';\\r\\n\\r\\n    import {\\r\\n        getIsCurrentUser,\\r\\n\\t} from '../../../models/appModel';\\r\\n\\r\\n\\t// $: userLoading = (!($user && $user.loaded) && $userId);\\r\\n\\r\\n\\t$: viewedUserLoaded = ($viewedUser && $viewedUser.name) || false;\\r\\n\\t$: viewedUserId = ($viewedUser && $viewedUser.id) || null;\\r\\n\\r\\n\\t$: requestedConnection = ($viewedUser && $viewedUser.requestedConnection) || false;\\r\\n    $: isCurrentUser = $user && getIsCurrentUser($viewedUser && $viewedUser.id);\\r\\n\\t// $: isCurrentUser = ($viewedUser && $viewedUser.isCurrentUser) || false;\\r\\n\\r\\n\\t$: skills = ($viewedUser && $viewedUser.skills && getSplitItems($viewedUser.skills)) || null;\\r\\n\\t$: projectIds = ($viewedUser && $viewedUser.projects) || null;\\r\\n\\r\\n\\tconst PROJECTS_DISPLAY_LIMIT = 3;\\r\\n\\r\\n\\tlet userProjects = writable({});\\r\\n\\t$: { getUserProjectsFromId(userProjects, projectIds, null, {filterArchived: false, filterPrivate: false}) }\\r\\n\\r\\n\\t$: proxyActionsImage = isCurrentUser ? 'profile_actions_owner' : 'profile_actions';\\r\\n\\t$: proxySkillsImage = isCurrentUser ? 'profile_skills_owner' : 'profile_skills';\\r\\n\\r\\n\\tfunction displayAllProjects() {\\r\\n\\t\\t$profileDisplayingAllProjects = true;\\r\\n\\t}\\r\\n\\r\\n    function messageCurrentUser() {\\r\\n        messageUser(viewedUserId);\\r\\n\\t}\\r\\n\\r\\n\\tfunction shareCurrentProfile() {\\r\\n\\t\\tshowShareProfileDialog(viewedUserId);\\r\\n\\t}\\r\\n</script>\\r\\n\\r\\n<svelte:head>\\r\\n\\t<title>Flock</title>\\r\\n</svelte:head>\\r\\n\\r\\n{#if ($loadingUsers && (!viewedUserLoaded || $viewedUser.id !== $profileId )) || !isUserLoaded($user, $userId, $loggingIn) }\\r\\n\\t<ContentLoader label=\\\"{locale.LOADING.PROFILE}\\\" />\\r\\n{:else if !viewedUserLoaded || !$viewedUser.id}\\r\\n\\t<ContentLoader label=\\\"{locale.PROFILE.NOT_FOUND}\\\" />\\r\\n{:else}\\r\\n\\t<ScrollView id=\\\"profile\\\" headerStartHidden=\\\"{true}\\\">\\r\\n\\t\\t<div class=\\\"content\\\">\\r\\n\\t\\t\\t<div class=\\\"contentItem\\\">\\r\\n\\t\\t\\t\\t<ProfileOverview />\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<!-- <Proxy image=\\\"{proxySkillsImage}\\\" className=\\\"proxyOverlay\\\" /> -->\\r\\n            <!-- {#if $showBetaFeatures} -->\\r\\n\\t\\t\\t\\t{#if skills && skills.length}\\r\\n\\t\\t\\t\\t\\t<ContentPanel title=\\\"Skills\\\" showEdit=\\\"{false && isCurrentUser}\\\">\\r\\n\\t\\t\\t\\t\\t\\t<TagSet tags=\\\"{skills}\\\" />\\r\\n\\t\\t\\t\\t\\t</ContentPanel>\\r\\n\\t\\t\\t\\t{/if}\\r\\n\\t\\t\\t\\t{#if $userProjects && $userProjects.length}\\r\\n\\t\\t\\t\\t\\t<ProjectList projects=\\\"{userProjects}\\\" showIfNoProjects=\\\"{true}\\\" displayLimit=\\\"{$profileDisplayingAllProjects ? 0 : PROJECTS_DISPLAY_LIMIT}\\\" showMoreAction=\\\"{displayAllProjects}\\\" />\\r\\n\\t\\t\\t\\t{/if}\\r\\n\\t\\t\\t<!-- {/if} -->\\r\\n\\t\\t</div>\\r\\n\\t</ScrollView>\\r\\n{/if}\\r\\n\\r\\n<style>\\r\\n\\t.content :global(.contentItem) {\\r\\n\\t\\twidth: 100%;\\r\\n\\r\\n\\t\\tmargin-bottom: 10px;\\r\\n\\t}\\r\\n\\r\\n\\t.content :global(.proxyOverlay) {\\r\\n\\t\\tposition: absolute;\\r\\n\\t\\topacity: 0.5;\\r\\n\\t}\\r\\n</style>\"],\"names\":[],\"mappings\":\"AAyGC,uBAAQ,CAAC,AAAQ,YAAY,AAAE,CAAC,AAC/B,KAAK,CAAE,IAAI,CAEX,aAAa,CAAE,IAAI,AACpB,CAAC,AAED,uBAAQ,CAAC,AAAQ,aAAa,AAAE,CAAC,AAChC,QAAQ,CAAE,QAAQ,CAClB,OAAO,CAAE,GAAG,AACb,CAAC\"}"
};

const PROJECTS_DISPLAY_LIMIT = 3;

const U5Bprofileu5D = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let $viewedUser = get_store_value(viewedUser);
	let $user = get_store_value(user);
	let $profileDisplayingAllProjects = get_store_value(profileDisplayingAllProjects);
	let $loadingUsers = get_store_value(loadingUsers);
	let $profileId = get_store_value(profileId);
	let $userId = get_store_value(userId);
	let $loggingIn = get_store_value(loggingIn);
	let $userProjects;
	let userProjects = writable$1({});
	$userProjects = get_store_value(userProjects);

	function displayAllProjects() {
		$profileDisplayingAllProjects = true;
	}

	$$result.css.add(css$15);
	$userProjects = get_store_value(userProjects);
	let viewedUserLoaded = $viewedUser && $viewedUser.name || false;
	let viewedUserId = $viewedUser && $viewedUser.id || null;
	let requestedConnection = $viewedUser && $viewedUser.requestedConnection || false;
	let isCurrentUser = $user && getIsCurrentUser($viewedUser && $viewedUser.id);
	let skills = $viewedUser && $viewedUser.skills && getSplitItems($viewedUser.skills) || null;
	let projectIds = $viewedUser && $viewedUser.projects || null;

	 {
		{
			getUserProjectsFromId(userProjects, projectIds, null, {
				filterArchived: false,
				filterPrivate: false
			});
		}
	}

	return `${($$result.head += `${($$result.title = `<title>Flock</title>`, "")}`, "")}

${$loadingUsers && (!viewedUserLoaded || $viewedUser.id !== $profileId) || !isUserLoaded($user, $userId, $loggingIn)
	? `${validate_component(ContentLoader, "ContentLoader").$$render($$result, { label: locale$1.LOADING.PROFILE }, {}, {})}`
	: `${!viewedUserLoaded || !$viewedUser.id
		? `${validate_component(ContentLoader, "ContentLoader").$$render($$result, { label: locale$1.PROFILE.NOT_FOUND }, {}, {})}`
		: `${validate_component(ScrollView, "ScrollView").$$render($$result, { id: "profile", headerStartHidden: true }, {}, {
				default: () => `<div class="${"content svelte-1pi8z0p"}"><div class="${"contentItem"}">${validate_component(ProfileOverview, "ProfileOverview").$$render($$result, {}, {}, {})}</div>
			
            
				${skills && skills.length
				? `${validate_component(ContentPanel, "ContentPanel").$$render(
						$$result,
						{
							title: "Skills",
							showEdit: false 
						},
						{},
						{
							default: () => `${validate_component(TagSet, "TagSet").$$render($$result, { tags: skills }, {}, {})}`
						}
					)}`
				: ``}
				${$userProjects && $userProjects.length
				? `${validate_component(ProjectList, "ProjectList").$$render(
						$$result,
						{
							projects: userProjects,
							showIfNoProjects: true,
							displayLimit: $profileDisplayingAllProjects
							? 0
							: PROJECTS_DISPLAY_LIMIT,
							showMoreAction: displayAllProjects
						},
						{},
						{}
					)}`
				: ``}
			</div>`
			})}`}`}`;
});

var index$6 = /*#__PURE__*/Object.freeze({
    __proto__: null,
    'default': U5Bprofileu5D
});

/* src\routes\profile\[profile]\likes.svelte generated by Svelte v3.23.0 */

const Likes = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	return `${($$result.head += `${($$result.title = `<title>Flock</title>`, "")}`, "")}

${validate_component(ScrollView, "ScrollView").$$render($$result, { id: "likes" }, {}, {
		default: () => `${validate_component(Proxy, "Proxy").$$render($$result, { image: "likes" }, {}, {
			default: () => `
        ${validate_component(Hotspot, "Hotspot").$$render(
				$$result,
				{
					onClick: e => loadProject("s7djj2s2"),
					style: "\r\n\t\t\tleft: 0px;\r\n\t\t\ttop: 47px;\r\n\t\t\twidth: 100%;\r\n\t\t\theight: 869px;"
				},
				{},
				{}
			)}`
		})}
`
	})}`;
});

var likes = /*#__PURE__*/Object.freeze({
    __proto__: null,
    'default': Likes
});

/* src\routes\profile\[profile]\edit.svelte generated by Svelte v3.23.0 */

const css$16 = {
	code: ".panelContent.svelte-12rfx78.svelte-12rfx78{padding-top:4px}.content.svelte-12rfx78.svelte-12rfx78 .avatarIcon{width:108px;height:108px;margin-top:20px;margin-left:20px}.field.svelte-12rfx78.svelte-12rfx78{padding:0 16px;padding-top:18px}.label.svelte-12rfx78.svelte-12rfx78{font-size:1.3rem;padding-left:7px;padding-bottom:4px;color:#555555}.labelDetails.svelte-12rfx78.svelte-12rfx78{font-weight:700}.tip.svelte-12rfx78.svelte-12rfx78{padding-left:13px;font-weight:initial;color:#999999}input.svelte-12rfx78.svelte-12rfx78{border:none;outline:none;background:none;border-bottom:1px solid #cccccc;width:100%;box-sizing:border-box;font-size:1.5rem;color:#555555;padding:6px 7px}.content.svelte-12rfx78.svelte-12rfx78 textarea{border:1px solid #cccccc;outline:none;background:none;width:100%;height:90px;box-sizing:border-box;font-size:1.5rem;line-height:2rem;color:#555555;padding:4px 6px;margin-top:4px;resize:none}.headerImageField.svelte-12rfx78.svelte-12rfx78{padding:0;padding-top:10px}.headerImageLabel.svelte-12rfx78.svelte-12rfx78{padding-left:23px;padding-right:23px}.headerImageField.svelte-12rfx78.svelte-12rfx78 .imageSelectionBox{padding-top:48.7%;margin-top:10px}.headerImageField.svelte-12rfx78.svelte-12rfx78 .imageSelectionBox.opened{height:245px;padding-top:0}.mainProfileDetails.svelte-12rfx78.svelte-12rfx78{padding-bottom:20px}.bioField.svelte-12rfx78 textarea.svelte-12rfx78{height:200px}.actions.svelte-12rfx78.svelte-12rfx78{position:relative;height:60px;margin-top:10px}.topActions.svelte-12rfx78.svelte-12rfx78{height:0;margin-top:0}.content.svelte-12rfx78.svelte-12rfx78 .saveButton{position:absolute;top:3px;right:8px;padding:10px;padding-right:46px;font-size:1.5rem;font-weight:700}.content.svelte-12rfx78.svelte-12rfx78 .saveButton .icon{padding-left:20px;margin-top:-1px}.content.svelte-12rfx78.svelte-12rfx78 .cancelButton{position:absolute;top:3px;left:13px;padding:10px;padding-right:39px;font-size:1.5rem;font-weight:700}.content.svelte-12rfx78.svelte-12rfx78 .cancelButton .icon{padding-left:12px;margin-top:-1px}.content.svelte-12rfx78.svelte-12rfx78 .uploadAvatarButton{position:absolute;top:105px;left:120px;padding:10px 10px;font-size:1.3rem;font-weight:700}.content.svelte-12rfx78.svelte-12rfx78 .uploadAvatarButton .buttonContent{position:relative;padding-left:32px;color:#333333}.content.svelte-12rfx78.svelte-12rfx78 .uploadAvatarButton .iconContainer{position:absolute;left:0;top:10px}.content.svelte-12rfx78.svelte-12rfx78 .uploadAvatarButton .icon{transform:scale(0.32, 0.32)}",
	map: "{\"version\":3,\"file\":\"edit.svelte\",\"sources\":[\"edit.svelte\"],\"sourcesContent\":[\"<script>\\r\\n\\timport { tick } from 'svelte';\\r\\n\\timport { writable } from 'svelte/store';\\r\\n\\timport { goto } from '@sapper/app';\\r\\n\\r\\n\\timport config from '../../../config';\\r\\n\\timport locale from '../../../locale';\\r\\n\\r\\n\\timport { trim, testInputDefocus, getFormattedText } from '../../../utils';\\r\\n\\r\\n    import UploadUtil from '../../../utils/UploadUtil';\\r\\n\\r\\n\\timport ScrollView from '../../../components/ScrollView.svelte';\\r\\n\\timport Proxy from '../../../components/Proxy.svelte';\\r\\n\\timport Hotspot from '../../../components/Hotspot.svelte';\\r\\n\\r\\n\\timport LimitedTextfield from '../../../components/LimitedTextfield.svelte';\\r\\n\\timport Button from '../../../components/Button.svelte';\\r\\n\\timport ImageSelectionBox from '../../_components/ImageSelectionBox.svelte';\\r\\n\\r\\n    import AvatarIcon from '../../_components/AvatarIcon.svelte';\\r\\n\\r\\n\\timport AddImageIcon from \\\"../../../assets/icons/add_small.png\\\";\\r\\n    import CancelIcon from \\\"../../../assets/icons/cancel.png\\\";\\r\\n\\timport SaveIcon from \\\"../../../assets/icons/save.png\\\";\\r\\n\\timport UploadImageIcon from \\\"../../../assets/icons/upload_image.png\\\";\\r\\n\\r\\n    import EmptyImage from \\\"../../../assets/images/empty.png\\\";\\r\\n\\r\\n\\timport { user, userId, showBetaFeatures } from '../../../models/appModel';\\r\\n\\timport { saveProfile } from '../../../actions/userActions';\\r\\n\\r\\n\\timport { getUserClone, randomiseUserProfileImageColor } from '../../../models/usersModel';\\r\\n\\r\\n\\tlet curUserProps = writable(null);\\r\\n    $: { curUserProps = getUserClone(user) };\\r\\n\\r\\n\\tlet name = ($user && $user.name) || '';\\r\\n\\tlet bio = ($user && $user.bio && getFormattedText($user.bio)) || '';\\r\\n\\tlet image = ($user && $user.coverImage) || '';\\r\\n\\tlet skills = ($user && $user.skills) || '';\\r\\n\\tlet location = ($user && $user.location) || '';\\r\\n\\r\\n\\tlet profileImageIsUploading;\\r\\n\\tlet headerImageIsUploading;\\r\\n\\r\\n\\tlet remainingChars;\\r\\n\\t$: charCountLow = (remainingChars !== '') && remainingChars < config.PROFILE_DESCRIPTION_CHARS_LOW;\\r\\n\\r\\n\\t$: saveEnabled = !!(trim(name) && !profileImageIsUploading && !headerImageIsUploading);\\r\\n\\r\\n\\tlet bioInput;\\r\\n\\tlet skillsInput;\\r\\n\\tlet locationInput;\\r\\n\\r\\n\\tfunction save() {\\r\\n\\t\\tif (saveEnabled) {\\r\\n\\t\\t\\tconst profileDetails = {\\r\\n\\t\\t\\t\\tname: trim(name),\\r\\n\\t\\t\\t\\tbio: trim(bio),\\r\\n\\t\\t\\t\\tavatarImage: $curUserProps.avatarImage || null,\\r\\n\\t\\t\\t\\tcoverImage: image,\\r\\n\\t\\t\\t\\tskills,\\r\\n\\t\\t\\t\\tlocation,\\r\\n\\t\\t\\t\\tstyle: $curUserProps.style,\\r\\n\\t\\t\\t};\\r\\n\\r\\n\\t\\t\\tsaveProfile(profileDetails);\\r\\n\\t\\t}\\r\\n\\t}\\r\\n\\r\\n\\tfunction avatarIconClick() {\\r\\n\\t\\tif ($curUserProps.avatarImage) {\\r\\n\\t\\t\\tuploadProfileImage();\\r\\n\\t\\t} else {\\r\\n\\t\\t\\trandomiseProfileColor();\\r\\n\\t\\t}\\r\\n\\t}\\r\\n\\r\\n    function randomiseProfileColor() {\\r\\n        randomiseUserProfileImageColor(curUserProps);\\r\\n    }\\r\\n\\r\\n\\tfunction cancel() {\\r\\n\\t\\tgoto('profile/' + $userId);\\r\\n\\t}\\r\\n\\r\\n\\tfunction uploadProfileImage() {\\r\\n        UploadUtil.uploadImage({\\r\\n            uploadType: 'userProfile',\\r\\n            itemId: $userId,\\r\\n\\r\\n            imageSettings: {\\r\\n                maxWidth: config.PROFILE_UPLOAD_MAX_WIDTH,\\r\\n                maxHeight: config.PROFILE_UPLOAD_MAX_HEIGHT,\\r\\n            },\\r\\n            thumbSettings: {\\r\\n                maxWidth: config.PROFILE_UPLOAD_THUMB_MAX_WIDTH,\\r\\n                maxHeight: config.PROFILE_UPLOAD_THUMB_MAX_HEIGHT,\\r\\n            },\\r\\n\\r\\n            onUploading: () => {\\r\\n\\t\\t\\t\\t$curUserProps.avatarImageRawSrc = EmptyImage;\\r\\n\\t\\t\\t\\t$curUserProps = $curUserProps;\\r\\n                profileImageIsUploading = true;\\r\\n            },\\r\\n            onImageLoaded: (imageFile) => {\\r\\n\\t\\t\\t\\t$curUserProps.avatarImageRawSrc = URL.createObjectURL(imageFile);\\r\\n\\t\\t\\t\\t$curUserProps = $curUserProps;\\r\\n            },\\r\\n            onComplete: (imageUrl) => {\\r\\n\\t\\t\\t\\t$curUserProps.avatarImageRawSrc = null;\\r\\n\\t\\t\\t\\t$curUserProps.avatarImage = imageUrl;\\r\\n                profileImageIsUploading = false;\\r\\n            },\\r\\n            onError: (error) => {\\r\\n\\t\\t\\t\\t$curUserProps.avatarImageRawSrc = null;\\r\\n\\t\\t\\t\\t$curUserProps.avatarImage = null;\\r\\n\\t\\t\\t\\t$curUserProps = $curUserProps;\\r\\n\\r\\n                profileImageIsUploading = false;\\r\\n                console.error('Could not request profile image upload');\\r\\n            },\\r\\n        });\\r\\n\\t}\\r\\n</script>\\r\\n\\r\\n<svelte:head>\\r\\n\\t<title>Flock</title>\\r\\n\\t<style>\\r\\n\\t\\tbody {\\r\\n\\t\\t\\toverscroll-behavior-y: contain; /* Disables pull-to-refresh but allows overscroll effects. */\\r\\n\\t\\t}\\r\\n\\t</style>\\r\\n</svelte:head>\\r\\n\\r\\n<ScrollView>\\r\\n\\t<div class=\\\"content\\\">\\r\\n\\t\\t<div class=\\\"panelContent\\\">\\r\\n\\t\\t\\t<div class=\\\"mainProfileDetails\\\">\\r\\n\\t\\t\\t\\t<div class=\\\"actions topActions\\\">\\r\\n\\t\\t\\t\\t\\t<Button className=\\\"saveButton\\\" onClick=\\\"{save}\\\" icon=\\\"{SaveIcon}\\\" disabled=\\\"{!saveEnabled}\\\">{locale.EDIT_PROFILE.CONFIRM}</Button>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\r\\n    \\t\\t\\t<AvatarIcon user=\\\"{curUserProps}\\\" onClick=\\\"{avatarIconClick}\\\"/>\\r\\n\\t\\t\\t\\t<Button className=\\\"uploadAvatarButton\\\" onClick=\\\"{uploadProfileImage}\\\" icon=\\\"{UploadImageIcon}\\\">{locale.EDIT_PROFILE.UPLOAD_PROFILE_IMAGE}</Button>\\r\\n\\t\\t\\t\\t<div class=\\\"field\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"label\\\">{locale.EDIT_PROFILE.NAME}</div>\\r\\n\\t\\t\\t\\t\\t<input type=\\\"text\\\" bind:value=\\\"{name}\\\" on:keypress=\\\"{(e) => testInputDefocus(e, {target: bioInput})}\\\" />\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<div class=\\\"field bioField\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"label\\\">{locale.EDIT_PROFILE.BIO}<span class=\\\"tip\\\">{@html locale.EDIT_PROFILE.BIO_TIP}</span></div>\\r\\n\\t\\t\\t\\t\\t<!-- <div class=\\\"fieldCharCount\\\" class:charCountLow=\\\"{charCountLow}\\\">{remainingChars}{charCountLow ? ' characters remaining' : ''}</div> -->\\r\\n\\t\\t\\t\\t\\t<textarea bind:value=\\\"{bio}\\\" bind:this=\\\"{bioInput}\\\" on:keypress=\\\"{testInputDefocus}\\\" />\\r\\n\\t\\t\\t\\t\\t<!-- <LimitedTextfield bind:value=\\\"{bio}\\\" bind:field=\\\"{bioInput}\\\" bind:remainingChars=\\\"{remainingChars}\\\" maxlength=\\\"{config.MAX_PROFILE_DESCRIPTION_CHARS}\\\" on:keypress=\\\"{testInputDefocus}\\\" /> -->\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<div class=\\\"field headerImageField\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"label headerImageLabel\\\">{locale.EDIT_PROFILE.COVER_IMAGE}</div>\\r\\n\\t\\t\\t\\t\\t<ImageSelectionBox bind:image bind:fileIsUploading=\\\"{headerImageIsUploading}\\\" uploadType=\\\"userCover\\\" itemId=\\\"{$userId}\\\" />\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<div class=\\\"field skillsField\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"label labelDetails\\\">{locale.EDIT_PROFILE.SKILLS}<span class=\\\"tip\\\">{@html locale.EDIT_PROFILE.SKILLS_TIP}</span></div>\\r\\n\\t\\t\\t\\t\\t<textarea bind:value=\\\"{skills}\\\" bind:this=\\\"{skillsInput}\\\" />\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<div class=\\\"field\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"label labelDetails\\\">{locale.EDIT_PROFILE.LOCATION}<span class=\\\"tip\\\">{@html locale.EDIT_PROFILE.LOCATION_TIP}</span></div>\\r\\n\\t\\t\\t\\t\\t<input type=\\\"text\\\" bind:value=\\\"{location}\\\" bind:this=\\\"{locationInput}\\\" on:keypress=\\\"{testInputDefocus}\\\" />\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t<div class=\\\"actions\\\">\\r\\n\\t\\t\\t\\t<Button className=\\\"cancelButton\\\" onClick=\\\"{cancel}\\\" icon=\\\"{CancelIcon}\\\">{locale.EDIT_PROFILE.CANCEL}</Button>\\r\\n\\t\\t\\t\\t<Button className=\\\"saveButton\\\" onClick=\\\"{save}\\\" icon=\\\"{SaveIcon}\\\" disabled=\\\"{!saveEnabled}\\\">{locale.EDIT_PROFILE.CONFIRM}</Button>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n</ScrollView>\\r\\n\\r\\n<style>\\r\\n\\t.panelContent {\\r\\n    \\tpadding-top: 4px;\\r\\n\\t}\\r\\n\\r\\n\\t.content :global(.avatarIcon) {\\r\\n\\t\\twidth: 108px;\\r\\n\\t\\theight: 108px;\\r\\n\\r\\n\\t\\tmargin-top: 20px;\\r\\n\\t\\tmargin-left: 20px;\\r\\n\\t}\\r\\n\\r\\n\\t.field {\\r\\n    \\tpadding: 0 16px;\\r\\n    \\tpadding-top: 18px;\\r\\n\\t}\\r\\n\\r\\n\\t.label {\\r\\n\\t\\tfont-size: 1.3rem;\\r\\n    \\tpadding-left: 7px;\\r\\n    \\tpadding-bottom: 4px;\\r\\n\\t\\tcolor: #555555;\\r\\n\\t}\\r\\n\\r\\n\\t.labelDetails {\\r\\n\\t\\tfont-weight: 700;\\r\\n\\t}\\r\\n\\r\\n\\t/* .fieldCharCount {\\r\\n\\t\\tposition: absolute;\\r\\n\\t\\tright: 20px;\\r\\n\\t\\tmargin-top: -22px;\\r\\n\\t\\tfont-size: 1.2rem;\\r\\n\\t\\tcolor: #888888;\\r\\n\\t}\\r\\n\\t.charCountLow {\\r\\n\\t\\tcolor: #DF3C3C;\\r\\n\\t} */\\r\\n\\r\\n\\t.tip {\\r\\n    \\tpadding-left: 13px;\\r\\n\\r\\n\\t\\tfont-weight: initial;\\r\\n\\r\\n\\t\\tcolor: #999999;\\r\\n\\t}\\r\\n\\r\\n\\r\\n\\tinput {\\r\\n        border: none;\\r\\n        outline: none;\\r\\n        background: none;\\r\\n\\r\\n\\t\\tborder-bottom: 1px solid #cccccc;\\r\\n\\r\\n        width: 100%;\\r\\n        box-sizing: border-box;\\r\\n\\r\\n        font-size: 1.5rem;\\r\\n\\t\\tcolor: #555555;\\r\\n\\r\\n        padding: 6px 7px;\\r\\n\\t\\t/* padding-left: 0; */\\r\\n\\t}\\r\\n\\r\\n\\t.content :global(textarea) {\\r\\n        border: 1px solid #cccccc;\\r\\n\\r\\n        outline: none;\\r\\n        background: none;\\r\\n\\r\\n        width: 100%;\\r\\n\\t\\theight: 90px;\\r\\n\\r\\n        box-sizing: border-box;\\r\\n\\r\\n        font-size: 1.5rem;\\r\\n\\t\\tline-height: 2rem;\\r\\n    \\tcolor: #555555;\\r\\n\\r\\n        padding: 4px 6px;\\r\\n\\r\\n    \\tmargin-top: 4px;\\r\\n\\r\\n\\t\\tresize: none;\\r\\n\\t}\\r\\n\\r\\n\\t.headerImageField {\\r\\n    \\tpadding: 0;\\r\\n    \\tpadding-top: 10px;\\r\\n\\t}\\r\\n\\r\\n\\t.headerImageLabel {\\r\\n\\t\\tpadding-left: 23px;\\r\\n\\t\\tpadding-right: 23px;\\r\\n\\t}\\r\\n\\r\\n\\r\\n\\t.headerImageField :global(.imageSelectionBox) {\\r\\n\\t\\tpadding-top: 48.7%;\\r\\n\\r\\n\\t\\t/* height: 200px;\\r\\n\\t\\tpadding-top: initial; */\\r\\n\\r\\n    \\tmargin-top: 10px;\\r\\n\\t}\\r\\n\\t.headerImageField :global(.imageSelectionBox.opened) {\\r\\n\\t\\theight: 245px;\\r\\n\\t\\tpadding-top: 0;\\r\\n\\t}\\r\\n\\r\\n\\r\\n\\t.mainProfileDetails {\\r\\n\\t\\tpadding-bottom: 20px;\\r\\n\\t}\\r\\n\\r\\n\\r\\n\\t.bioField textarea {\\r\\n    \\theight: 200px;\\r\\n\\t}\\r\\n\\r\\n\\t.actions {\\r\\n\\t\\tposition: relative;\\r\\n\\t\\theight: 60px;\\r\\n\\t\\tmargin-top: 10px;\\r\\n\\t}\\r\\n\\t.topActions {\\r\\n\\t\\theight: 0;\\r\\n\\t\\tmargin-top: 0;\\r\\n\\t}\\r\\n\\r\\n\\t.content :global(.saveButton) {\\r\\n        position: absolute;\\r\\n\\t\\ttop: 3px;\\r\\n\\t\\tright: 8px;\\r\\n\\r\\n\\t\\tpadding: 10px;\\r\\n\\t\\tpadding-right: 46px;\\r\\n\\r\\n        font-size: 1.5rem;\\r\\n        font-weight: 700;\\r\\n    }\\r\\n    .content :global(.saveButton .icon) {\\r\\n    \\tpadding-left: 20px;\\r\\n    \\tmargin-top: -1px;\\r\\n    }\\r\\n\\r\\n\\r\\n\\t.content :global(.cancelButton) {\\r\\n        position: absolute;\\r\\n\\t\\ttop: 3px;\\r\\n    \\tleft: 13px;\\r\\n\\r\\n\\t\\tpadding: 10px;\\r\\n\\t\\tpadding-right: 39px;\\r\\n\\r\\n        font-size: 1.5rem;\\r\\n        font-weight: 700;\\r\\n    }\\r\\n    .content :global(.cancelButton .icon) {\\r\\n    \\tpadding-left: 12px;\\r\\n    \\tmargin-top: -1px;\\r\\n    }\\r\\n\\r\\n    .content :global(.uploadAvatarButton) {\\r\\n        position: absolute;\\r\\n\\r\\n\\t\\ttop: 105px;\\r\\n\\t\\tleft: 120px;\\r\\n\\r\\n\\t\\tpadding: 10px 10px;\\r\\n\\r\\n    \\tfont-size: 1.3rem;\\r\\n\\t\\tfont-weight: 700;\\r\\n    }\\r\\n    .content :global(.uploadAvatarButton .buttonContent) {\\r\\n\\t\\tposition: relative;\\r\\n\\t\\tpadding-left: 32px;\\r\\n\\t\\tcolor: #333333;\\r\\n    }\\r\\n    .content :global(.uploadAvatarButton .iconContainer) {\\r\\n\\t\\tposition: absolute;\\r\\n\\t\\tleft: 0;\\r\\n    \\ttop: 10px;\\r\\n    }\\r\\n    .content :global(.uploadAvatarButton .icon) {\\r\\n    \\ttransform: scale(0.32, 0.32);\\r\\n    }\\r\\n</style>\"],\"names\":[],\"mappings\":\"AAmLC,aAAa,8BAAC,CAAC,AACX,WAAW,CAAE,GAAG,AACpB,CAAC,AAED,sCAAQ,CAAC,AAAQ,WAAW,AAAE,CAAC,AAC9B,KAAK,CAAE,KAAK,CACZ,MAAM,CAAE,KAAK,CAEb,UAAU,CAAE,IAAI,CAChB,WAAW,CAAE,IAAI,AAClB,CAAC,AAED,MAAM,8BAAC,CAAC,AACJ,OAAO,CAAE,CAAC,CAAC,IAAI,CACf,WAAW,CAAE,IAAI,AACrB,CAAC,AAED,MAAM,8BAAC,CAAC,AACP,SAAS,CAAE,MAAM,CACd,YAAY,CAAE,GAAG,CACjB,cAAc,CAAE,GAAG,CACtB,KAAK,CAAE,OAAO,AACf,CAAC,AAED,aAAa,8BAAC,CAAC,AACd,WAAW,CAAE,GAAG,AACjB,CAAC,AAaD,IAAI,8BAAC,CAAC,AACF,YAAY,CAAE,IAAI,CAErB,WAAW,CAAE,OAAO,CAEpB,KAAK,CAAE,OAAO,AACf,CAAC,AAGD,KAAK,8BAAC,CAAC,AACA,MAAM,CAAE,IAAI,CACZ,OAAO,CAAE,IAAI,CACb,UAAU,CAAE,IAAI,CAEtB,aAAa,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CAE1B,KAAK,CAAE,IAAI,CACX,UAAU,CAAE,UAAU,CAEtB,SAAS,CAAE,MAAM,CACvB,KAAK,CAAE,OAAO,CAER,OAAO,CAAE,GAAG,CAAC,GAAG,AAEvB,CAAC,AAED,sCAAQ,CAAC,AAAQ,QAAQ,AAAE,CAAC,AACrB,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CAEzB,OAAO,CAAE,IAAI,CACb,UAAU,CAAE,IAAI,CAEhB,KAAK,CAAE,IAAI,CACjB,MAAM,CAAE,IAAI,CAEN,UAAU,CAAE,UAAU,CAEtB,SAAS,CAAE,MAAM,CACvB,WAAW,CAAE,IAAI,CACd,KAAK,CAAE,OAAO,CAEX,OAAO,CAAE,GAAG,CAAC,GAAG,CAEnB,UAAU,CAAE,GAAG,CAElB,MAAM,CAAE,IAAI,AACb,CAAC,AAED,iBAAiB,8BAAC,CAAC,AACf,OAAO,CAAE,CAAC,CACV,WAAW,CAAE,IAAI,AACrB,CAAC,AAED,iBAAiB,8BAAC,CAAC,AAClB,YAAY,CAAE,IAAI,CAClB,aAAa,CAAE,IAAI,AACpB,CAAC,AAGD,+CAAiB,CAAC,AAAQ,kBAAkB,AAAE,CAAC,AAC9C,WAAW,CAAE,KAAK,CAKf,UAAU,CAAE,IAAI,AACpB,CAAC,AACD,+CAAiB,CAAC,AAAQ,yBAAyB,AAAE,CAAC,AACrD,MAAM,CAAE,KAAK,CACb,WAAW,CAAE,CAAC,AACf,CAAC,AAGD,mBAAmB,8BAAC,CAAC,AACpB,cAAc,CAAE,IAAI,AACrB,CAAC,AAGD,wBAAS,CAAC,QAAQ,eAAC,CAAC,AAChB,MAAM,CAAE,KAAK,AACjB,CAAC,AAED,QAAQ,8BAAC,CAAC,AACT,QAAQ,CAAE,QAAQ,CAClB,MAAM,CAAE,IAAI,CACZ,UAAU,CAAE,IAAI,AACjB,CAAC,AACD,WAAW,8BAAC,CAAC,AACZ,MAAM,CAAE,CAAC,CACT,UAAU,CAAE,CAAC,AACd,CAAC,AAED,sCAAQ,CAAC,AAAQ,WAAW,AAAE,CAAC,AACxB,QAAQ,CAAE,QAAQ,CACxB,GAAG,CAAE,GAAG,CACR,KAAK,CAAE,GAAG,CAEV,OAAO,CAAE,IAAI,CACb,aAAa,CAAE,IAAI,CAEb,SAAS,CAAE,MAAM,CACjB,WAAW,CAAE,GAAG,AACpB,CAAC,AACD,sCAAQ,CAAC,AAAQ,iBAAiB,AAAE,CAAC,AACpC,YAAY,CAAE,IAAI,CAClB,UAAU,CAAE,IAAI,AACjB,CAAC,AAGJ,sCAAQ,CAAC,AAAQ,aAAa,AAAE,CAAC,AAC1B,QAAQ,CAAE,QAAQ,CACxB,GAAG,CAAE,GAAG,CACL,IAAI,CAAE,IAAI,CAEb,OAAO,CAAE,IAAI,CACb,aAAa,CAAE,IAAI,CAEb,SAAS,CAAE,MAAM,CACjB,WAAW,CAAE,GAAG,AACpB,CAAC,AACD,sCAAQ,CAAC,AAAQ,mBAAmB,AAAE,CAAC,AACtC,YAAY,CAAE,IAAI,CAClB,UAAU,CAAE,IAAI,AACjB,CAAC,AAED,sCAAQ,CAAC,AAAQ,mBAAmB,AAAE,CAAC,AACnC,QAAQ,CAAE,QAAQ,CAExB,GAAG,CAAE,KAAK,CACV,IAAI,CAAE,KAAK,CAEX,OAAO,CAAE,IAAI,CAAC,IAAI,CAEf,SAAS,CAAE,MAAM,CACpB,WAAW,CAAE,GAAG,AACd,CAAC,AACD,sCAAQ,CAAC,AAAQ,kCAAkC,AAAE,CAAC,AACxD,QAAQ,CAAE,QAAQ,CAClB,YAAY,CAAE,IAAI,CAClB,KAAK,CAAE,OAAO,AACZ,CAAC,AACD,sCAAQ,CAAC,AAAQ,kCAAkC,AAAE,CAAC,AACxD,QAAQ,CAAE,QAAQ,CAClB,IAAI,CAAE,CAAC,CACJ,GAAG,CAAE,IAAI,AACV,CAAC,AACD,sCAAQ,CAAC,AAAQ,yBAAyB,AAAE,CAAC,AAC5C,SAAS,CAAE,MAAM,IAAI,CAAC,CAAC,IAAI,CAAC,AAC7B,CAAC\"}"
};

const Edit = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let $user = get_store_value(user);
	let $curUserProps;
	let $userId = get_store_value(userId);
	let curUserProps = writable$1(null);
	$curUserProps = get_store_value(curUserProps);
	
	let name = $user && $user.name || "";
	let bio = $user && $user.bio && getFormattedText($user.bio) || "";
	let image = $user && $user.coverImage || "";
	let skills = $user && $user.skills || "";
	let location = $user && $user.location || "";
	let profileImageIsUploading;
	let headerImageIsUploading;
	let bioInput;
	let skillsInput;
	let locationInput;

	function save() {
		if (saveEnabled) {
			const profileDetails = {
				name: trim(name),
				bio: trim(bio),
				avatarImage: $curUserProps.avatarImage || null,
				coverImage: image,
				skills,
				location,
				style: $curUserProps.style
			};

			saveProfile(profileDetails);
		}
	}

	function avatarIconClick() {
		if ($curUserProps.avatarImage) {
			uploadProfileImage();
		} else {
			randomiseProfileColor();
		}
	}

	function randomiseProfileColor() {
		randomiseUserProfileImageColor(curUserProps);
	}

	function cancel() {
		goto("profile/" + $userId);
	}

	function uploadProfileImage() {
		UploadUtil.uploadImage({
			uploadType: "userProfile",
			itemId: $userId,
			imageSettings: {
				maxWidth: config$1.PROFILE_UPLOAD_MAX_WIDTH,
				maxHeight: config$1.PROFILE_UPLOAD_MAX_HEIGHT
			},
			thumbSettings: {
				maxWidth: config$1.PROFILE_UPLOAD_THUMB_MAX_WIDTH,
				maxHeight: config$1.PROFILE_UPLOAD_THUMB_MAX_HEIGHT
			},
			onUploading: () => {
				$curUserProps.avatarImageRawSrc = img$F;
				$curUserProps = $curUserProps;
				profileImageIsUploading = true;
			},
			onImageLoaded: imageFile => {
				$curUserProps.avatarImageRawSrc = URL.createObjectURL(imageFile);
				$curUserProps = $curUserProps;
			},
			onComplete: imageUrl => {
				$curUserProps.avatarImageRawSrc = null;
				$curUserProps.avatarImage = imageUrl;
				profileImageIsUploading = false;
			},
			onError: error => {
				$curUserProps.avatarImageRawSrc = null;
				$curUserProps.avatarImage = null;
				$curUserProps = $curUserProps;
				profileImageIsUploading = false;
				console.error("Could not request profile image upload");
			}
		});
	}

	$$result.css.add(css$16);
	let $$settled;
	let $$rendered;

	do {
		$$settled = true;
		$curUserProps = get_store_value(curUserProps);

		 {
			{
				curUserProps = getUserClone(user);
			}
		}
		let saveEnabled = !!(trim(name) && !profileImageIsUploading && !headerImageIsUploading);

		$$rendered = `${($$result.head += `${($$result.title = `<title>Flock</title>`, "")}<style>body {
			overscroll-behavior-y: contain; /* Disables pull-to-refresh but allows overscroll effects. */
		}
	</style>`, "")}

${validate_component(ScrollView, "ScrollView").$$render($$result, {}, {}, {
			default: () => `<div class="${"content svelte-12rfx78"}"><div class="${"panelContent svelte-12rfx78"}"><div class="${"mainProfileDetails svelte-12rfx78"}"><div class="${"actions topActions svelte-12rfx78"}">${validate_component(Button, "Button").$$render(
				$$result,
				{
					className: "saveButton",
					onClick: save,
					icon: img$O,
					disabled: !saveEnabled
				},
				{},
				{
					default: () => `${escape(locale$1.EDIT_PROFILE.CONFIRM)}`
				}
			)}</div>

    			${validate_component(AvatarIcon, "AvatarIcon").$$render(
				$$result,
				{
					user: curUserProps,
					onClick: avatarIconClick
				},
				{},
				{}
			)}
				${validate_component(Button, "Button").$$render(
				$$result,
				{
					className: "uploadAvatarButton",
					onClick: uploadProfileImage,
					icon: img$G
				},
				{},
				{
					default: () => `${escape(locale$1.EDIT_PROFILE.UPLOAD_PROFILE_IMAGE)}`
				}
			)}
				<div class="${"field svelte-12rfx78"}"><div class="${"label svelte-12rfx78"}">${escape(locale$1.EDIT_PROFILE.NAME)}</div>
					<input type="${"text"}" class="${"svelte-12rfx78"}"${add_attribute("value", name, 1)}></div>
				<div class="${"field bioField svelte-12rfx78"}"><div class="${"label svelte-12rfx78"}">${escape(locale$1.EDIT_PROFILE.BIO)}<span class="${"tip svelte-12rfx78"}">${locale$1.EDIT_PROFILE.BIO_TIP}</span></div>
					
					<textarea class="${"svelte-12rfx78"}"${add_attribute("this", bioInput, 1)}>${bio || ""}</textarea>
					</div>
				<div class="${"field headerImageField svelte-12rfx78"}"><div class="${"label headerImageLabel svelte-12rfx78"}">${escape(locale$1.EDIT_PROFILE.COVER_IMAGE)}</div>
					${validate_component(ImageSelectionBox, "ImageSelectionBox").$$render(
				$$result,
				{
					uploadType: "userCover",
					itemId: $userId,
					image,
					fileIsUploading: headerImageIsUploading
				},
				{
					image: $$value => {
						image = $$value;
						$$settled = false;
					},
					fileIsUploading: $$value => {
						headerImageIsUploading = $$value;
						$$settled = false;
					}
				},
				{}
			)}</div>
				<div class="${"field skillsField svelte-12rfx78"}"><div class="${"label labelDetails svelte-12rfx78"}">${escape(locale$1.EDIT_PROFILE.SKILLS)}<span class="${"tip svelte-12rfx78"}">${locale$1.EDIT_PROFILE.SKILLS_TIP}</span></div>
					<textarea${add_attribute("this", skillsInput, 1)}>${skills || ""}</textarea></div>
				<div class="${"field svelte-12rfx78"}"><div class="${"label labelDetails svelte-12rfx78"}">${escape(locale$1.EDIT_PROFILE.LOCATION)}<span class="${"tip svelte-12rfx78"}">${locale$1.EDIT_PROFILE.LOCATION_TIP}</span></div>
					<input type="${"text"}" class="${"svelte-12rfx78"}"${add_attribute("value", location, 1)}${add_attribute("this", locationInput, 1)}></div></div>

			<div class="${"actions svelte-12rfx78"}">${validate_component(Button, "Button").$$render(
				$$result,
				{
					className: "cancelButton",
					onClick: cancel,
					icon: img$N
				},
				{},
				{
					default: () => `${escape(locale$1.EDIT_PROFILE.CANCEL)}`
				}
			)}
				${validate_component(Button, "Button").$$render(
				$$result,
				{
					className: "saveButton",
					onClick: save,
					icon: img$O,
					disabled: !saveEnabled
				},
				{},
				{
					default: () => `${escape(locale$1.EDIT_PROFILE.CONFIRM)}`
				}
			)}</div></div></div>
`
		})}`;
	} while (!$$settled);

	return $$rendered;
});

var edit = /*#__PURE__*/Object.freeze({
    __proto__: null,
    'default': Edit
});

/* src\routes\posts\index.svelte generated by Svelte v3.23.0 */

const Posts = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	if (typeof window !== "undefined") {
		goto("./");
	}

	return ``;
});

var index$7 = /*#__PURE__*/Object.freeze({
    __proto__: null,
    'default': Posts
});

const img$Q = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADYAAAA2CAYAAACMRWrdAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkNERjRBRTA5OEVBQTExRUFBQkU4QzE5ODQ3NjQwQjQxIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkNERjRBRTBBOEVBQTExRUFBQkU4QzE5ODQ3NjQwQjQxIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6Q0RGNEFFMDc4RUFBMTFFQUFCRThDMTk4NDc2NDBCNDEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6Q0RGNEFFMDg4RUFBMTFFQUFCRThDMTk4NDc2NDBCNDEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz64QYgYAAABhUlEQVR42uzY7VHDMAwG4NjJAFkgIRvQEWADNmhXYIJ2hI4AIzABGQE2yGWCDJAP5F7K8aMUKZbKUV796eWSi/q0tmzZTdOUXGP45EoDMMAAAwwwwAADDDDAAAMMsN+JjPugc+7wWVGM47ij64q679p7v2+aptP8UpRiNefIQ462bXfHe9yO37EfJNic8JUu8y+J3tM0vdPCncpB8Uy4jQTmIxMG8O0wDDXdz41QIdZlWT6ZzDH6pbYnEqrhzqA+cUVRbCxgDz8M1cU4BuqYo7KA1Yx5KMZxUXN06jAqEI+cF0twElQoUlRA9uowqnpvVNrvtXBSVKi8Zgu0Fm4JSrqciHcesbhLoMQLtMJQqmJRJjuP2CFF77iJ/acuAltQrpPY4ae+pdKYc5ZzyqRt0cBpb6bV+rEYnDZKvdFcgrNAmXTQEpwVyuxogIOzRJmeeZzDWaPMD3O+wb1Yo1QWaGbPlfd9v8qyrAvYyLVOF/bXAgemgAEGGGCAAQYYYID9O9iHAAMA43prfgVstXUAAAAASUVORK5CYII=";

/* src\routes\posts\_components\EditPost.svelte generated by Svelte v3.23.0 */

const css$17 = {
	code: ".panelContent.svelte-36jf1o.svelte-36jf1o{padding:28px 0}.pageTitle.svelte-36jf1o.svelte-36jf1o{font-size:1.5rem;font-weight:700;color:#444444;padding-left:23px;margin-top:-2px;padding-bottom:15px}.field.svelte-36jf1o.svelte-36jf1o{padding:0 16px;padding-bottom:5px}.messageField.svelte-36jf1o.svelte-36jf1o{padding-bottom:0}.label.svelte-36jf1o.svelte-36jf1o{font-size:1.3rem;padding-left:7px;padding-bottom:4px;color:#555555}.tip.svelte-36jf1o.svelte-36jf1o{padding-left:10px;font-size:1.1rem;font-weight:initial;color:#aaaaaa}textarea.svelte-36jf1o.svelte-36jf1o{border:1px solid #cccccc;outline:none;background:none;width:100%;height:150px;box-sizing:border-box;font-size:1.5rem;line-height:2rem;color:#555555;padding:4px 6px;margin-top:4px;resize:none}.titleField.svelte-36jf1o.svelte-36jf1o{height:32px}.actions.svelte-36jf1o.svelte-36jf1o{pointer-events:none;position:relative;height:60px}.actions.svelte-36jf1o.svelte-36jf1o .button{pointer-events:initial}.editPostContent.svelte-36jf1o.svelte-36jf1o .nextButton{position:absolute;top:3px;right:12px;padding:10px;padding-right:39px;font-size:1.5rem;font-weight:700}.editPostContent.svelte-36jf1o.svelte-36jf1o .nextButton .icon{padding-left:20px;margin-top:-1px}.fieldNote.svelte-36jf1o.svelte-36jf1o{position:absolute;font-size:1.1rem;color:#aaaaaa;padding-top:5px;padding-left:27px}.imageField.svelte-36jf1o.svelte-36jf1o{position:relative;height:40px}.editPostContent.svelte-36jf1o.svelte-36jf1o .detailImageSelector{margin-top:20px}.headerImageField.svelte-36jf1o.svelte-36jf1o{padding:0;padding-bottom:10px;margin-top:-15px}.headerImageField.svelte-36jf1o.svelte-36jf1o .imageSelectionBox{margin-top:10px}.editPostContent.svelte-36jf1o.svelte-36jf1o .addImage{position:absolute;top:-4px;right:5px;padding:10px;padding-right:45px;padding-left:13px;font-size:1.2rem;font-weight:700}.editPostContent.svelte-36jf1o.svelte-36jf1o .addImage .icon{padding-left:14px;margin-top:-1px}.editPostContent.svelte-36jf1o.svelte-36jf1o .addImage.removeImage .icon{transform:scale(0.4, 0.4);opacity:0.6;padding-left:24px}.inlineComponent.svelte-36jf1o.svelte-36jf1o{position:absolute;left:0;right:0;bottom:0;background-color:#ffffff;box-shadow:0 -2px 5px 0 rgba(0,0,0,0.15)}.inlineComponent.svelte-36jf1o.svelte-36jf1o .panelContent{padding-top:12px;padding-bottom:0}.inlineComponent.svelte-36jf1o.svelte-36jf1o .pageTitle{padding-bottom:4px;font-size:1.3rem}.inlineComponent.svelte-36jf1o.svelte-36jf1o .messageField{padding-bottom:2px}.inlineComponent.svelte-36jf1o.svelte-36jf1o .messageField .label{display:none}.inlineComponent.svelte-36jf1o.svelte-36jf1o textarea{height:90px}.inlineComponent.svelte-36jf1o.svelte-36jf1o .addImage{right:initial;padding-left:16px}.inlineComponent.svelte-36jf1o.svelte-36jf1o .imageField{height:0}.inlineComponent.svelte-36jf1o.svelte-36jf1o .removeImage{top:-5px;padding-right:24px}.inlineComponent.svelte-36jf1o.svelte-36jf1o .removeImage .buttonContent{padding-left:28px}.inlineComponent.svelte-36jf1o.svelte-36jf1o .removeImage .iconContainer{position:absolute;left:13px;top:20px}.inlineComponent.svelte-36jf1o.svelte-36jf1o .fieldNote{line-height:1.3rem;padding-left:62px;padding-top:1px;pointer-events:none}.inlineComponent.svelte-36jf1o .showImage.svelte-36jf1o .fieldNote{display:none}.inlineComponent.svelte-36jf1o.svelte-36jf1o .actions{height:44px}.inlineComponent.svelte-36jf1o.svelte-36jf1o .addImage .icon{padding-left:0;transform:scale(0.375, 0.375)}.inlineComponent.svelte-36jf1o.svelte-36jf1o .nextButton{top:-5px;font-size:1.2rem}.inlineComponent.svelte-36jf1o.svelte-36jf1o .nextButton .icon{padding-left:18px;margin-top:-2px}.inlineComponent.svelte-36jf1o.svelte-36jf1o .headerImageField{margin-top:-6px}.inlineComponent.svelte-36jf1o.svelte-36jf1o .imageSelectionBox{padding-top:35%}.inlineComponent.svelte-36jf1o.svelte-36jf1o .collapsePanel{position:absolute;top:0;right:0;width:50px;height:35px}.inlineComponent.svelte-36jf1o.svelte-36jf1o .collapsePanel .icon{margin-top:5px;margin-left:10px}",
	map: "{\"version\":3,\"file\":\"EditPost.svelte\",\"sources\":[\"EditPost.svelte\"],\"sourcesContent\":[\"<script>\\r\\n\\timport locale from '../../../locale';\\r\\n\\r\\n\\timport { onMount, tick, createEventDispatcher } from 'svelte';\\r\\n    const dispatch = createEventDispatcher();\\r\\n\\r\\n\\timport {\\r\\n\\t\\ttestInputDefocus,\\r\\n\\t\\t// getUnformattedText,\\r\\n\\t\\tgetFormattedText,\\r\\n\\t\\tstrCompare,\\r\\n\\t\\ttrim,\\r\\n\\t} from '../../../utils';\\r\\n\\r\\n\\timport Proxy from '../../../components/Proxy.svelte';\\r\\n\\r\\n\\timport Button from '../../../components/Button.svelte';\\r\\n\\r\\n\\timport ImageSelectionBox from '../../_components/ImageSelectionBox.svelte';\\r\\n\\r\\n    import NextArrowIcon from \\\"../../../assets/icons/next_arrow.png\\\";\\r\\n\\timport SaveIcon from \\\"../../../assets/icons/save.png\\\";\\r\\n\\timport AddImageIcon from \\\"../../../assets/icons/add_small.png\\\";\\r\\n\\timport RemoveImageIcon from \\\"../../../assets/icons/clear.png\\\";\\r\\n    import SendMessageIcon from \\\"../../../assets/icons/send.png\\\";\\r\\n\\timport UploadImageIcon from \\\"../../../assets/icons/upload_image.png\\\";\\r\\n\\timport CollapseIcon from \\\"../../../assets/icons/collapse_down.png\\\";\\r\\n\\r\\n\\timport {\\r\\n\\t\\tchannel,\\r\\n\\t\\tchannelId,\\r\\n\\t\\tprojectId,\\r\\n\\t\\tpostType,\\r\\n        postId,\\r\\n        post,\\r\\n        project,\\r\\n\\t\\tcurPath,\\r\\n\\t\\tsaveDraftPost,\\r\\n\\t\\tgetDraftPost,\\r\\n\\t\\tclearDraftPost,\\r\\n\\t\\tsavingPost,\\r\\n\\t} from '../../../models/appModel';\\r\\n\\r\\n\\timport {\\r\\n\\t\\tloadCurrentChannel,\\r\\n\\t} from '../../../actions/appActions';\\r\\n\\r\\n\\timport {\\r\\n        createPost,\\r\\n        savePost,\\r\\n\\t} from '../../../actions/postActions';\\r\\n\\r\\n\\timport {\\r\\n        getNewPostId,\\r\\n\\t} from '../../../models/postsModel';\\r\\n\\r\\n\\timport { loadChannels } from '../../../models/channelsModel';\\r\\n\\r\\n\\texport let inlineComponent = false;\\r\\n\\r\\n\\texport let element = null;\\r\\n\\r\\n\\tlet title = '';\\r\\n\\tlet message = '';\\r\\n\\tlet image = null;\\r\\n\\r\\n\\tlet titleField;\\r\\n\\tlet messageField;\\r\\n\\r\\n\\tlet origTitle = '';\\r\\n\\tlet origMessage = '';\\r\\n\\tlet origImage = null;\\r\\n\\r\\n\\tlet addingImage = false;\\r\\n\\tlet imageIsUploading = false;\\r\\n\\r\\n\\tlet newPostId = getNewPostId();\\r\\n\\r\\n\\tloadCurrentChannel();\\r\\n\\r\\n\\tlet mounted = false;\\r\\n\\r\\n\\tlet editPost = false;\\r\\n\\tlet editPostInitialized = false;\\r\\n\\r\\n\\tfunction updateEditPostState() {\\r\\n\\t\\tif (!editPostInitialized) {\\r\\n\\t\\t\\teditPostInitialized = true;\\r\\n\\r\\n\\t\\t\\teditPost = ($curPath && !!$curPath.match(/posts\\\\/.+\\\\/edit/)) || false;\\r\\n\\t\\t\\tpostContentInitialized = false;\\r\\n\\t\\t}\\r\\n\\t}\\r\\n\\r\\n\\t$: curPostId = editPost ? $postId : newPostId;\\r\\n\\r\\n    $: nextEnabled = (trim(title) || trim(message) || (image && curPostType !== 'thread')) && !imageIsUploading;\\r\\n\\r\\n\\t$: curPostType = (editPost && $post) ? $post.type : $postType;\\r\\n\\r\\n\\t$: draftId = (editPost ? ($post && $post.id) : ((curPostType === 'thread') ? $channelId : $postId)) || null;\\r\\n\\r\\n\\t$: showTitleField = (curPostType === 'thread');\\r\\n\\r\\n\\t$: imageType = (curPostType === 'thread') ? 'image/jpeg' : null;\\r\\n\\t$: useLibrary = (curPostType === 'thread') ? true : false;\\r\\n\\r\\n\\t$: showImageOption = true; // (curPostType === 'thread');\\r\\n\\r\\n\\t$: pageTitle = (curPostType === 'thread') ? (\\r\\n        editPost ? locale.EDIT_THREAD.PAGE_TITLE : locale.NEW_THREAD.PAGE_TITLE\\r\\n    ) : (\\r\\n\\t\\t(inlineComponent) ? (\\r\\n\\t\\t\\tlocale.REPLY_THREAD.PAGE_TITLE\\r\\n\\t\\t) : (\\r\\n\\t\\t\\teditPost ? locale.EDIT_THREAD_POST.PAGE_TITLE : locale.NEW_THREAD_POST.PAGE_TITLE\\r\\n\\t\\t)\\r\\n\\t);\\r\\n\\r\\n\\t$: imageShown = showImageOption && (image || addingImage);\\r\\n\\r\\n\\t$: {\\r\\n\\t\\timageShown;\\r\\n\\t\\tresize();\\r\\n\\t}\\r\\n\\r\\n    let postContentInitialized = false;\\r\\n\\r\\n    $: {\\r\\n\\t\\tif (!postContentInitialized && editPostInitialized && mounted) {\\r\\n\\t\\t\\tif (editPost) {\\r\\n\\t\\t\\t\\tif ($post) {\\r\\n\\t\\t\\t\\t\\ttitle = ($post && $post.title) || '';\\r\\n\\t\\t\\t\\t\\tmessage = ($post && $post.message) || '';\\r\\n\\t\\t\\t\\t\\timage = ($post && $post.image) || '';\\r\\n\\r\\n\\t\\t\\t\\t\\tmessage = getFormattedText(message);\\r\\n\\r\\n\\t\\t\\t\\t\\torigTitle = title;\\r\\n\\t\\t\\t\\t\\torigMessage = message;\\r\\n\\t\\t\\t\\t\\torigImage = image;\\r\\n\\r\\n\\t\\t\\t\\t\\tgetPostDraftContent();\\r\\n\\t\\t\\t\\t\\tpostContentInitialized = true;\\r\\n\\t\\t\\t\\t}\\r\\n\\t\\t\\t} else {\\r\\n\\t\\t\\t\\tif (draftId) {\\r\\n\\t\\t\\t\\t\\tgetPostDraftContent();\\r\\n\\t\\t\\t\\t\\tpostContentInitialized = true;\\r\\n\\t\\t\\t\\t}\\r\\n\\t\\t\\t}\\r\\n\\t\\t}\\r\\n\\t}\\r\\n\\r\\n\\t$: {\\r\\n\\t\\t// if (title || message) {\\r\\n\\t\\tif (draftId && editPostInitialized && mounted) {\\r\\n\\t\\t\\tconst draftPost = {\\r\\n\\t\\t\\t\\ttitle,\\r\\n\\t\\t\\t\\tmessage,\\r\\n\\t\\t\\t\\timage,\\r\\n\\t\\t\\t};\\r\\n\\t\\t\\tif (!editPost) {\\r\\n\\t\\t\\t\\tdraftPost.itemId = newPostId;\\r\\n\\t\\t\\t}\\r\\n\\t\\t\\tconst curDraftPost = getDraftPost(curPostType, draftId, editPost);\\r\\n\\t\\t\\tif (editPost) {\\r\\n\\t\\t\\t\\tif ($post) {\\r\\n\\t\\t\\t\\t\\tif (curDraftPost || (\\r\\n\\t\\t\\t\\t\\t\\t!strCompare(title, origTitle) ||\\r\\n\\t\\t\\t\\t\\t\\t!strCompare(message, origMessage) ||\\r\\n\\t\\t\\t\\t\\t\\timage !== origImage\\r\\n\\t\\t\\t\\t\\t)) {\\r\\n\\t\\t\\t\\t\\t\\tif (\\r\\n\\t\\t\\t\\t\\t\\t\\tstrCompare(title, origTitle) &&\\r\\n\\t\\t\\t\\t\\t\\t\\tstrCompare(message, origMessage) &&\\r\\n\\t\\t\\t\\t\\t\\t\\timage === origImage\\r\\n\\t\\t\\t\\t\\t\\t) {\\r\\n\\t\\t\\t\\t\\t\\t\\tclearDraftPost(curPostType, draftId, editPost);\\r\\n\\t\\t\\t\\t\\t\\t} else {\\r\\n\\t\\t\\t\\t\\t\\t\\tsaveDraftPost(curPostType, draftId, editPost, draftPost);\\r\\n\\t\\t\\t\\t\\t\\t}\\r\\n\\t\\t\\t\\t\\t}\\r\\n\\t\\t\\t\\t}\\r\\n\\t\\t\\t} else {\\r\\n\\t\\t\\t\\tif (curDraftPost || title || message || image) {\\r\\n\\t\\t\\t\\t\\tif (!(title || message || image)) {\\r\\n\\t\\t\\t\\t\\t\\tclearDraftPost(curPostType, draftId, editPost);\\r\\n\\t\\t\\t\\t\\t} else {\\r\\n\\t\\t\\t\\t\\t\\tsaveDraftPost(curPostType, draftId, editPost, draftPost);\\r\\n\\t\\t\\t\\t\\t}\\r\\n\\t\\t\\t\\t}\\r\\n\\t\\t\\t}\\r\\n\\t\\t}\\r\\n\\t}\\r\\n\\r\\n\\tasync function getPostDraftContent() {\\r\\n\\t\\t// console.log('savingPost', $savingPost, getDraftPost(curPostType, draftId, editPost));\\r\\n\\t\\tif (draftId && !$savingPost) {\\r\\n\\t\\t\\tconst draftPost = getDraftPost(curPostType, draftId, editPost);\\r\\n\\t\\t\\tif (draftPost) {\\r\\n\\t\\t\\t\\tawait tick();\\r\\n\\r\\n\\t\\t\\t\\ttitle = draftPost.title || '';\\r\\n\\t\\t\\t\\tmessage = draftPost.message || '';\\r\\n\\t\\t\\t\\timage = draftPost.image || null;\\r\\n\\r\\n\\t\\t\\t\\tif (draftPost.itemId) {\\r\\n\\t\\t\\t\\t\\tnewPostId = draftPost.itemId;\\r\\n\\t\\t\\t\\t}\\r\\n\\t\\t\\t}\\r\\n\\t\\t}\\r\\n\\t\\treturn null;\\r\\n\\t}\\r\\n\\r\\n    onMount(async () => {\\r\\n\\t\\tmounted = true;\\r\\n\\t\\tawait tick();\\r\\n\\t\\tif (showTitleField) {\\r\\n\\t\\t\\ttitleField && titleField.focus();\\r\\n\\t\\t} else {\\r\\n\\t\\t\\tmessageField && messageField.focus();\\r\\n\\t\\t}\\r\\n\\t\\tcurPath.subscribe(updateEditPostState);\\r\\n    });\\r\\n\\r\\n\\tfunction createNewPost() {\\r\\n\\t\\tif (!editPost && $postType) {\\r\\n\\t\\t\\tconst postDetails = {\\r\\n\\t\\t\\t\\tid: newPostId,\\r\\n\\t\\t\\t\\tmessage: trim(message),\\r\\n\\t\\t\\t\\timage,\\r\\n\\t\\t\\t\\ttype: $postType,\\r\\n\\t\\t\\t\\tchannelId: $channel && $channel.id,\\r\\n\\t\\t\\t\\tprojectId: $channel && $channel.projectId,\\r\\n\\t\\t\\t};\\r\\n\\t\\t\\tswitch ($postType) {\\r\\n\\t\\t\\t\\tcase 'thread':\\r\\n\\t\\t\\t\\t\\tpostDetails.title = trim(title);\\r\\n\\t\\t\\t\\t\\tbreak;\\r\\n\\t\\t\\t\\tcase 'threadPost':\\r\\n\\t\\t\\t\\t\\tpostDetails.threadId = $postId;\\r\\n\\t\\t\\t\\t\\tbreak;\\r\\n\\t\\t\\t}\\r\\n\\t\\t\\tcreatePost(postDetails).then((result) => {\\r\\n\\t\\t\\t\\t// console.log('create post result', result);\\r\\n\\t\\t\\t\\tif (result && (result.success || result.addedPost || result.duplicateKey)) {\\r\\n\\t\\t\\t\\t\\tclearDraftPost(curPostType, draftId, editPost);\\r\\n\\t\\t\\t\\t}\\r\\n\\t\\t\\t});\\r\\n\\t\\t\\thide();\\r\\n\\t\\t}\\r\\n    }\\r\\n\\r\\n    function saveCurrentPost() {\\r\\n\\t\\tif (editPost) {\\r\\n            const postDetails = {\\r\\n                message: trim(message),\\r\\n            };\\r\\n\\t\\t\\tswitch ($post.type) {\\r\\n\\t\\t\\t\\tcase 'thread':\\r\\n\\t\\t\\t\\t\\tpostDetails.title = trim(title);\\r\\n\\t\\t\\t\\t\\tbreak;\\r\\n\\t\\t\\t}\\r\\n\\t\\t\\tif (image !== origImage) {\\r\\n\\t\\t\\t\\tpostDetails.image = image;\\r\\n\\t\\t\\t}\\r\\n\\r\\n\\t\\t\\tconst result = savePost(postDetails);\\r\\n\\t\\t\\tif (result) {\\r\\n\\t\\t\\t\\tresult.then((result) => {\\r\\n\\t\\t\\t\\t\\t// console.log('save post result', result);\\r\\n\\t\\t\\t\\t\\tif (result && (result.success || result.addedPost || result.duplicateKey)) {\\r\\n\\t\\t\\t\\t\\t\\tclearDraftPost(curPostType, draftId, editPost);\\r\\n\\t\\t\\t\\t\\t}\\r\\n\\t\\t\\t\\t});\\r\\n\\t\\t\\t}\\r\\n\\t\\t\\thide();\\r\\n        }\\r\\n\\t}\\r\\n\\r\\n\\tlet changesSaved = false;\\r\\n\\t$: {\\r\\n\\t\\tif (editPost && draftId && editPostInitialized && mounted) {\\r\\n\\t\\t\\tconst draftPost = getDraftPost(curPostType, draftId, editPost);\\r\\n\\t\\t\\tif (draftPost && $post) {\\r\\n\\t\\t\\t\\tchangesSaved = (\\r\\n\\t\\t\\t\\t\\t!strCompare(title, origTitle) ||\\r\\n\\t\\t\\t\\t\\t!strCompare(message, origMessage) ||\\r\\n\\t\\t\\t\\t\\timage !== origImage\\r\\n\\t\\t\\t\\t);\\r\\n\\t\\t\\t} else {\\r\\n\\t\\t\\t\\tchangesSaved = false;\\r\\n\\t\\t\\t}\\r\\n\\t\\t\\t// console.log('changesSaved', changesSaved);\\r\\n\\t\\t}\\r\\n\\t}\\r\\n\\r\\n\\tfunction resetChanges() {\\r\\n\\t\\tif (editPost && changesSaved && draftId) {\\r\\n\\t\\t\\ttitle = origTitle;\\r\\n\\t\\t\\tmessage = origMessage;\\r\\n\\t\\t\\timage = origImage;\\r\\n\\r\\n\\t\\t\\tclearDraftPost(curPostType, draftId, editPost);\\r\\n\\t\\t}\\r\\n\\t}\\r\\n\\r\\n\\tfunction testSubmit() {\\r\\n\\t\\tif (nextEnabled) {\\r\\n            if (editPost) {\\r\\n                saveCurrentPost();\\r\\n            } else {\\r\\n                createNewPost();\\r\\n            }\\r\\n\\t\\t}\\r\\n\\t}\\r\\n\\r\\n\\tfunction addImage() {\\r\\n\\t\\taddingImage = true;\\r\\n\\t}\\r\\n\\r\\n\\tfunction removeImage() {\\r\\n\\t\\taddingImage = false;\\r\\n\\t\\timage = null;\\r\\n\\t}\\r\\n\\r\\n\\tfunction hide() {\\r\\n\\t\\tif (inlineComponent) {\\r\\n\\t\\t\\tdispatch('hide');\\r\\n\\t\\t}\\r\\n\\t}\\r\\n\\r\\n\\tfunction resize() {\\r\\n\\t\\tif (inlineComponent) {\\r\\n\\t\\t\\tdispatch('resize');\\r\\n\\t\\t}\\r\\n\\t}\\r\\n</script>\\r\\n\\r\\n{#if !editPost || $post }\\r\\n    <div class=\\\"editPostContent\\\" bind:this=\\\"{element}\\\" class:inlineComponent=\\\"{inlineComponent}\\\">\\r\\n        <!-- <Proxy image=\\\"create_project\\\" className=\\\"proxyOverlay\\\" /> -->\\r\\n        <div class=\\\"panelContent\\\" class:showImage=\\\"{imageShown}\\\">\\r\\n\\t\\t\\t{#if inlineComponent}\\r\\n\\t\\t\\t\\t<Button className=\\\"collapsePanel\\\" icon=\\\"{CollapseIcon}\\\" onClick=\\\"{hide}\\\" />\\r\\n\\t\\t\\t{/if}\\r\\n            <div class=\\\"pageTitle\\\">{pageTitle}</div>\\r\\n            {#if showTitleField}\\r\\n                <div class=\\\"field\\\">\\r\\n                    <div class=\\\"label\\\">{locale.NEW_THREAD.TITLE}{#if !editPost}<span class=\\\"tip\\\">{@html locale.NEW_THREAD.TITLE_TIP}</span>{/if}</div>\\r\\n                    <!-- <input type=\\\"text\\\" bind:value=\\\"{title}\\\" bind:this=\\\"{titleField}\\\" on:keypress=\\\"{e => testInputDefocus(e, {target: messageField})}\\\" /> -->\\r\\n                    <textarea class=\\\"titleField\\\" bind:value=\\\"{title}\\\" bind:this=\\\"{titleField}\\\" on:keypress=\\\"{e => testInputDefocus(e, {target: messageField, action: testSubmit, actionOnCtrl: true})}\\\" />\\r\\n                </div>\\r\\n            {/if}\\r\\n            <div class=\\\"field messageField\\\">\\r\\n                <div class=\\\"label\\\">{locale.NEW_THREAD.MESSAGE}</div>\\r\\n                <textarea bind:value=\\\"{message}\\\" bind:this=\\\"{messageField}\\\" on:keypress=\\\"{e => testInputDefocus(e, {action: testSubmit, actionOnCtrl: true})}\\\" />\\r\\n                <!-- on:keypress=\\\"{e => testInputDefocus(e, {action: testSubmit})}\\\" -->\\r\\n            </div>\\r\\n\\r\\n\\t\\t\\t{#if showImageOption}\\r\\n\\t\\t\\t\\t{#if inlineComponent}\\r\\n\\t\\t\\t\\t\\t{#if image || addingImage}\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"field headerImageField\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<ImageSelectionBox bind:image bind:fileIsUploading=\\\"{imageIsUploading}\\\" containMode=\\\"{true}\\\" {imageType} {useLibrary} uploadType=\\\"post\\\" itemId=\\\"{curPostId}\\\" />\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"imageField removeImageField\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<Button className=\\\"addImage removeImage\\\" icon=\\\"{RemoveImageIcon}\\\" onClick=\\\"{removeImage}\\\">{locale.NEW_THREAD.REMOVE_IMAGE}</Button>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t{:else}\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"imageField\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<Button className=\\\"addImage\\\" icon=\\\"{UploadImageIcon}\\\" onClick=\\\"{addImage}\\\"></Button>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t{/if}\\r\\n\\t\\t\\t\\t\\t<!-- <ImageSelectionBox bind:image bind:fileIsUploading=\\\"{imageIsUploading}\\\" containMode=\\\"{true}\\\" {imageType} {useLibrary} uploadType=\\\"post\\\" itemId=\\\"{curPostId}\\\" /> -->\\r\\n\\t\\t\\t\\t{:else}\\r\\n\\t\\t\\t\\t\\t{#if image || addingImage}\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"imageField\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<Button className=\\\"addImage removeImage\\\" icon=\\\"{RemoveImageIcon}\\\" onClick=\\\"{removeImage}\\\">{locale.NEW_THREAD.REMOVE_IMAGE}</Button>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"field headerImageField\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<ImageSelectionBox bind:image bind:fileIsUploading=\\\"{imageIsUploading}\\\" containMode=\\\"{true}\\\" {imageType} {useLibrary} uploadType=\\\"post\\\" itemId=\\\"{curPostId}\\\" />\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t{:else}\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"imageField\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<Button className=\\\"addImage\\\" icon=\\\"{AddImageIcon}\\\" onClick=\\\"{addImage}\\\">{locale.NEW_THREAD.ADD_IMAGE}</Button>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t{/if}\\r\\n\\t\\t\\t\\t{/if}\\r\\n\\t\\t\\t{/if}\\r\\n\\r\\n\\t\\t\\t{#if !editPost}\\r\\n\\t\\t\\t\\t<div class=\\\"fieldNote\\\">{@html locale.NEW_THREAD.EDIT_NOTE}</div>\\r\\n\\t\\t\\t{:else}\\r\\n\\t\\t\\t\\t<div class=\\\"fieldNote\\\">{@html locale.NEW_THREAD.EDITING_NOTE}\\r\\n\\t\\t\\t\\t\\t{#if changesSaved}\\r\\n\\t\\t\\t\\t\\t\\t<div><a href=\\\"javascript:void(0)\\\" on:click=\\\"{resetChanges}\\\">{locale.NEW_THREAD.REST_ACTION}</a>{locale.NEW_THREAD.REST_NOTE}</div>\\r\\n\\t\\t\\t\\t\\t{/if}\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t{/if}\\r\\n            <div class=\\\"actions\\\">\\r\\n                {#if !editPost}\\r\\n\\t\\t\\t\\t\\t{#if inlineComponent}\\r\\n                    \\t<Button className=\\\"nextButton\\\" disabled=\\\"{!nextEnabled}\\\" onClick=\\\"{createNewPost}\\\" icon=\\\"{SendMessageIcon}\\\">{locale.REPLY_THREAD.CONFIRM}</Button>\\r\\n\\t\\t\\t\\t\\t{:else}\\r\\n                    \\t<Button className=\\\"nextButton\\\" disabled=\\\"{!nextEnabled}\\\" onClick=\\\"{createNewPost}\\\" icon=\\\"{NextArrowIcon}\\\">{locale.NEW_THREAD.CONFIRM}</Button>\\r\\n\\t\\t\\t\\t\\t{/if}\\r\\n\\t\\t\\t\\t{:else}\\r\\n                    <Button className=\\\"nextButton\\\" disabled=\\\"{!nextEnabled}\\\" onClick=\\\"{saveCurrentPost}\\\" icon=\\\"{SaveIcon}\\\">{locale.EDIT_THREAD.CONFIRM}</Button>\\r\\n                {/if}\\r\\n            </div>\\r\\n        </div>\\r\\n    </div>\\r\\n{/if}\\r\\n\\r\\n<style>\\r\\n\\t.panelContent {\\r\\n    \\tpadding: 28px 0;\\r\\n\\t}\\r\\n\\r\\n\\t.pageTitle {\\r\\n        font-size: 1.5rem;\\r\\n        font-weight: 700;\\r\\n        color: #444444;\\r\\n\\r\\n\\t\\tpadding-left: 23px;\\r\\n        margin-top: -2px;\\r\\n        padding-bottom: 15px;\\r\\n\\t}\\r\\n\\r\\n\\t.field {\\r\\n    \\tpadding: 0 16px;\\r\\n\\t\\tpadding-bottom: 5px;\\r\\n\\t}\\r\\n\\r\\n\\t.messageField {\\r\\n\\t\\tpadding-bottom: 0;\\r\\n    \\t/* padding-bottom: 10px; */\\r\\n    \\t/* padding-bottom: 18px; */\\r\\n\\t}\\r\\n\\r\\n\\t.label {\\r\\n\\t\\tfont-size: 1.3rem;\\r\\n    \\tpadding-left: 7px;\\r\\n    \\tpadding-bottom: 4px;\\r\\n\\t\\tcolor: #555555;\\r\\n\\t}\\r\\n\\r\\n\\t.tip {\\r\\n    \\tpadding-left: 10px;\\r\\n\\r\\n    \\tfont-size: 1.1rem;\\r\\n\\t\\tfont-weight: initial;\\r\\n\\r\\n\\t\\tcolor: #aaaaaa;\\r\\n\\t}\\r\\n\\r\\n\\ttextarea {\\r\\n        border: 1px solid #cccccc;\\r\\n\\r\\n        outline: none;\\r\\n        background: none;\\r\\n\\r\\n        width: 100%;\\r\\n\\t\\theight: 150px;\\r\\n\\r\\n        box-sizing: border-box;\\r\\n\\r\\n\\t\\tfont-size: 1.5rem;\\r\\n\\t\\tline-height: 2rem;\\r\\n    \\tcolor: #555555;\\r\\n\\r\\n        padding: 4px 6px;\\r\\n\\r\\n    \\tmargin-top: 4px;\\r\\n\\r\\n\\t\\tresize: none;\\r\\n\\t}\\r\\n\\r\\n\\t.titleField {\\r\\n\\t\\theight: 32px;\\r\\n\\t\\t/* height: 52px; */\\r\\n\\t}\\r\\n\\r\\n\\t.actions {\\r\\n\\t\\tpointer-events: none;\\r\\n\\t\\tposition: relative;\\r\\n\\t\\theight: 60px;\\r\\n\\t\\t/* margin-top: 10px; */\\r\\n\\t}\\r\\n\\t.actions :global(.button) {\\r\\n\\t\\tpointer-events: initial;\\r\\n    }\\r\\n\\r\\n\\t.editPostContent :global(.nextButton) {\\r\\n        position: absolute;\\r\\n\\t\\ttop: 3px;\\r\\n\\t\\tright: 12px;\\r\\n\\r\\n\\t\\tpadding: 10px;\\r\\n\\t\\tpadding-right: 39px;\\r\\n\\r\\n        font-size: 1.5rem;\\r\\n        font-weight: 700;\\r\\n    }\\r\\n    /* .content :global(.nextButton.disabled) {\\r\\n\\t\\topacity: 0.15;\\r\\n    } */\\r\\n    .editPostContent :global(.nextButton .icon) {\\r\\n    \\tpadding-left: 20px;\\r\\n    \\tmargin-top: -1px;\\r\\n    }\\r\\n\\r\\n\\t.fieldNote {\\r\\n\\t\\tposition: absolute;\\r\\n    \\tfont-size: 1.1rem;\\r\\n    \\tcolor: #aaaaaa;\\r\\n\\r\\n\\t\\t/* margin-top: -5px; */\\r\\n\\t\\tpadding-top: 5px;\\r\\n\\t\\tpadding-left: 27px;\\r\\n\\t\\t/* margin-bottom: -10px; */\\r\\n\\t}\\r\\n\\r\\n\\t.imageField {\\r\\n\\t\\tposition: relative;\\r\\n\\t\\theight: 40px;\\r\\n\\t}\\r\\n\\t.editPostContent :global(.detailImageSelector) {\\r\\n\\t\\tmargin-top: 20px;\\r\\n\\t}\\r\\n\\r\\n\\t.headerImageField {\\r\\n    \\tpadding: 0;\\r\\n\\t\\tpadding-bottom: 10px;\\r\\n    \\tmargin-top: -15px;\\r\\n\\t}\\r\\n\\r\\n\\t.headerImageField :global(.imageSelectionBox) {\\r\\n    \\tmargin-top: 10px;\\r\\n\\t}\\r\\n\\r\\n\\t.editPostContent :global(.addImage) {\\r\\n\\t\\tposition: absolute;\\r\\n    \\ttop: -4px;\\r\\n\\t\\tright: 5px;\\r\\n\\r\\n\\t\\tpadding: 10px;\\r\\n\\t\\tpadding-right: 45px;\\r\\n\\t\\tpadding-left: 13px;\\r\\n\\r\\n\\t\\tfont-size: 1.2rem;\\r\\n\\t\\tfont-weight: 700;\\r\\n    }\\r\\n    .editPostContent :global(.addImage .icon) {\\r\\n    \\tpadding-left: 14px;\\r\\n\\t\\tmargin-top: -1px;\\r\\n    }\\r\\n    .editPostContent :global(.addImage.removeImage .icon) {\\r\\n\\t\\ttransform: scale(0.4, 0.4);\\r\\n\\t\\topacity: 0.6;\\r\\n    \\tpadding-left: 24px;\\r\\n    }\\r\\n\\r\\n\\r\\n    .inlineComponent {\\r\\n        position: absolute;\\r\\n        left: 0;\\r\\n        right: 0;\\r\\n        bottom: 0;\\r\\n        background-color: #ffffff;\\r\\n\\t\\tbox-shadow: 0 -2px 5px 0 rgba(0,0,0,0.15);\\r\\n    }\\r\\n    .inlineComponent :global(.panelContent) {\\r\\n    \\tpadding-top: 12px;\\r\\n    \\tpadding-bottom: 0;\\r\\n    }\\r\\n    .inlineComponent :global(.pageTitle) {\\r\\n\\t\\tpadding-bottom: 4px;\\r\\n\\t\\tfont-size: 1.3rem;\\r\\n    }\\r\\n    .inlineComponent :global(.messageField) {\\r\\n\\t\\tpadding-bottom: 2px;\\r\\n    }\\r\\n    .inlineComponent :global(.messageField .label) {\\r\\n\\t\\tdisplay: none;\\r\\n    }\\r\\n    .inlineComponent :global(textarea) {\\r\\n    \\theight: 90px;\\r\\n    }\\r\\n    .inlineComponent :global(.addImage) {\\r\\n\\t\\tright: initial;\\r\\n\\t\\tpadding-left: 16px;\\r\\n    }\\r\\n    .inlineComponent :global(.imageField) {\\r\\n\\t\\theight: 0;\\r\\n    }\\r\\n    .inlineComponent :global(.removeImage) {\\r\\n    \\ttop: -5px;\\r\\n    \\tpadding-right: 24px;\\r\\n    }\\r\\n    .inlineComponent :global(.removeImage .buttonContent) {\\r\\n    \\tpadding-left: 28px;\\r\\n    }\\r\\n    .inlineComponent :global(.removeImage .iconContainer) {\\r\\n\\t\\tposition: absolute;\\r\\n    \\tleft: 13px;\\r\\n\\t\\ttop: 20px;\\r\\n    }\\r\\n    /* .inlineComponent :global(.removeImageField) {\\r\\n    \\theight: 30px;\\r\\n    }\\r\\n    .inlineComponent :global(.removeImageField .addImage) {\\r\\n    \\tright: -5px;\\r\\n    \\ttop: -9px;\\r\\n    } */\\r\\n    .inlineComponent :global(.fieldNote) {\\r\\n\\t\\tline-height: 1.3rem;\\r\\n\\t\\tpadding-left: 62px;\\r\\n    \\tpadding-top: 1px;\\r\\n\\t\\tpointer-events: none;\\r\\n    }\\r\\n    .inlineComponent .showImage :global(.fieldNote) {\\r\\n\\t\\tdisplay: none;\\r\\n    }\\r\\n    .inlineComponent :global(.actions) {\\r\\n\\t\\theight: 44px;\\r\\n\\t}\\r\\n    .inlineComponent :global(.addImage .icon) {\\r\\n\\t\\tpadding-left: 0;\\r\\n\\t\\ttransform: scale(0.375, 0.375);\\r\\n    }\\r\\n    .inlineComponent :global(.nextButton) {\\r\\n    \\ttop: -5px;\\r\\n    \\tfont-size: 1.2rem;\\r\\n\\t}\\r\\n    .inlineComponent :global(.nextButton .icon) {\\r\\n\\t\\tpadding-left: 18px;\\r\\n\\t\\tmargin-top: -2px;\\r\\n\\t}\\r\\n\\t.inlineComponent :global(.headerImageField) {\\r\\n\\t\\tmargin-top: -6px;\\r\\n\\t}\\r\\n    .inlineComponent :global(.imageSelectionBox) {\\r\\n    \\tpadding-top: 35%;\\r\\n\\t}\\r\\n    .inlineComponent :global(.collapsePanel) {\\r\\n\\t\\tposition: absolute;\\r\\n\\t\\ttop: 0;\\r\\n\\t\\tright: 0;\\r\\n\\t\\twidth: 50px;\\r\\n\\t\\theight: 35px;\\r\\n\\t}\\r\\n    .inlineComponent :global(.collapsePanel .icon) {\\r\\n\\t\\tmargin-top: 5px;\\r\\n\\t\\tmargin-left: 10px;\\r\\n\\t}\\r\\n    /* .inlineComponent :global(.headerImageField) {\\r\\n    \\tposition: absolute;\\r\\n\\t\\twidth: 40px;\\r\\n\\t\\theight: 40px;\\r\\n\\t\\tpadding: 0;\\r\\n\\r\\n    \\tmargin-left: 16px;\\r\\n\\r\\n\\t\\tborder: 1px solid #cccccc;\\r\\n\\t}\\r\\n    .inlineComponent :global(.imageSelectionBox) {\\r\\n\\t\\tmargin-top: 0;\\r\\n\\t\\tpadding: 0;\\r\\n\\t\\theight: 100%;\\r\\n\\t}\\r\\n    .inlineComponent :global(.carouselContainer) {\\r\\n\\t\\tdisplay: none;\\r\\n\\t} */\\r\\n</style>\"],\"names\":[],\"mappings\":\"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\"}"
};

const EditPost = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let $curPath = get_store_value(curPath);
	let $postId = get_store_value(postId);
	let $post = get_store_value(post$q);
	let $postType = get_store_value(postType);
	let $channelId = get_store_value(channelId);
	let $savingPost = get_store_value(savingPost);
	let $channel = get_store_value(channel);
	const dispatch = createEventDispatcher();
	let { inlineComponent = false } = $$props;
	let { element = null } = $$props;
	let title = "";
	let message = "";
	let image = null;
	let titleField;
	let messageField;
	let origTitle = "";
	let origMessage = "";
	let origImage = null;
	let addingImage = false;
	let imageIsUploading = false;
	let newPostId = getNewPostId();
	loadCurrentChannel();
	let mounted = false;
	let editPost = false;
	let editPostInitialized = false;

	function updateEditPostState() {
		if (!editPostInitialized) {
			editPostInitialized = true;
			editPost = $curPath && !!$curPath.match(/posts\/.+\/edit/) || false;
			postContentInitialized = false;
		}
	}

	let postContentInitialized = false;

	async function getPostDraftContent() {
		// console.log('savingPost', $savingPost, getDraftPost(curPostType, draftId, editPost));
		if (draftId && !$savingPost) {
			const draftPost = getDraftPost(curPostType, draftId, editPost);

			if (draftPost) {
				await tick();
				title = draftPost.title || "";
				message = draftPost.message || "";
				image = draftPost.image || null;

				if (draftPost.itemId) {
					newPostId = draftPost.itemId;
				}
			}
		}

		return null;
	}

	onMount(async () => {
		mounted = true;
		await tick();

		if (showTitleField) ;

		curPath.subscribe(updateEditPostState);
	});

	function createNewPost() {
		if (!editPost && $postType) {
			const postDetails = {
				id: newPostId,
				message: trim(message),
				image,
				type: $postType,
				channelId: $channel && $channel.id,
				projectId: $channel && $channel.projectId
			};

			switch ($postType) {
				case "thread":
					postDetails.title = trim(title);
					break;
				case "threadPost":
					postDetails.threadId = $postId;
					break;
			}

			createPost(postDetails).then(result => {
				// console.log('create post result', result);
				if (result && (result.success || result.addedPost || result.duplicateKey)) {
					clearDraftPost(curPostType, draftId, editPost);
				}
			});

			hide();
		}
	}

	function saveCurrentPost() {
		if (editPost) {
			const postDetails = { message: trim(message) };

			switch ($post.type) {
				case "thread":
					postDetails.title = trim(title);
					break;
			}

			if (image !== origImage) {
				postDetails.image = image;
			}

			const result = savePost(postDetails);

			if (result) {
				result.then(result => {
					// console.log('save post result', result);
					if (result && (result.success || result.addedPost || result.duplicateKey)) {
						clearDraftPost(curPostType, draftId, editPost);
					}
				});
			}

			hide();
		}
	}

	let changesSaved = false;

	function addImage() {
		addingImage = true;
	}

	function removeImage() {
		addingImage = false;
		image = null;
	}

	function hide() {
		if (inlineComponent) {
			dispatch("hide");
		}
	}

	function resize() {
		if (inlineComponent) {
			dispatch("resize");
		}
	}

	if ($$props.inlineComponent === void 0 && $$bindings.inlineComponent && inlineComponent !== void 0) $$bindings.inlineComponent(inlineComponent);
	if ($$props.element === void 0 && $$bindings.element && element !== void 0) $$bindings.element(element);
	$$result.css.add(css$17);
	let $$settled;
	let $$rendered;

	do {
		$$settled = true;
		let curPostId = editPost ? $postId : newPostId;
		let curPostType = editPost && $post ? $post.type : $postType;

		let draftId = (editPost
		? $post && $post.id
		: curPostType === "thread" ? $channelId : $postId) || null;

		 {
			{
				if (!postContentInitialized && editPostInitialized && mounted) {
					if (editPost) {
						if ($post) {
							title = $post && $post.title || "";
							message = $post && $post.message || "";
							image = $post && $post.image || "";
							message = getFormattedText(message);
							origTitle = title;
							origMessage = message;
							origImage = image;
							getPostDraftContent();
							postContentInitialized = true;
						}
					} else {
						if (draftId) {
							getPostDraftContent();
							postContentInitialized = true;
						}
					}
				}
			}
		}

		let nextEnabled = (trim(title) || trim(message) || image && curPostType !== "thread") && !imageIsUploading;
		let showTitleField = curPostType === "thread";
		let imageType = curPostType === "thread" ? "image/jpeg" : null;
		let useLibrary = curPostType === "thread" ? true : false;

		let pageTitle = curPostType === "thread"
		? editPost
			? locale$1.EDIT_THREAD.PAGE_TITLE
			: locale$1.NEW_THREAD.PAGE_TITLE
		: inlineComponent
			? locale$1.REPLY_THREAD.PAGE_TITLE
			: editPost
				? locale$1.EDIT_THREAD_POST.PAGE_TITLE
				: locale$1.NEW_THREAD_POST.PAGE_TITLE;

		let imageShown =  (image || addingImage);

		 {
			{
				resize();
			}
		}

		 {
			{
				// if (title || message) {
				if (draftId && editPostInitialized && mounted) {
					const draftPost = { title, message, image };

					if (!editPost) {
						draftPost.itemId = newPostId;
					}

					const curDraftPost = getDraftPost(curPostType, draftId, editPost);

					if (editPost) {
						if ($post) {
							if (curDraftPost || (!strCompare(title, origTitle) || !strCompare(message, origMessage) || image !== origImage)) {
								if (strCompare(title, origTitle) && strCompare(message, origMessage) && image === origImage) {
									clearDraftPost(curPostType, draftId, editPost);
								} else {
									saveDraftPost(curPostType, draftId, editPost, draftPost);
								}
							}
						}
					} else {
						if (curDraftPost || title || message || image) {
							if (!(title || message || image)) {
								clearDraftPost(curPostType, draftId, editPost);
							} else {
								saveDraftPost(curPostType, draftId, editPost, draftPost);
							}
						}
					}
				}
			}
		}

		 {
			{
				if (editPost && draftId && editPostInitialized && mounted) {
					const draftPost = getDraftPost(curPostType, draftId, editPost);

					if (draftPost && $post) {
						changesSaved = !strCompare(title, origTitle) || !strCompare(message, origMessage) || image !== origImage;
					} else {
						changesSaved = false;
					}
				} // console.log('changesSaved', changesSaved);
			}
		}

		$$rendered = `${!editPost || $post
		? `<div class="${["editPostContent svelte-36jf1o", inlineComponent ? "inlineComponent" : ""].join(" ").trim()}"${add_attribute("this", element, 1)}>
        <div class="${["panelContent svelte-36jf1o", imageShown ? "showImage" : ""].join(" ").trim()}">${inlineComponent
			? `${validate_component(Button, "Button").$$render(
					$$result,
					{
						className: "collapsePanel",
						icon: img$Q,
						onClick: hide
					},
					{},
					{}
				)}`
			: ``}
            <div class="${"pageTitle svelte-36jf1o"}">${escape(pageTitle)}</div>
            ${showTitleField
			? `<div class="${"field svelte-36jf1o"}"><div class="${"label svelte-36jf1o"}">${escape(locale$1.NEW_THREAD.TITLE)}${!editPost
				? `<span class="${"tip svelte-36jf1o"}">${locale$1.NEW_THREAD.TITLE_TIP}</span>`
				: ``}</div>
                    
                    <textarea class="${"titleField svelte-36jf1o"}"${add_attribute("this", titleField, 1)}>${title || ""}</textarea></div>`
			: ``}
            <div class="${"field messageField svelte-36jf1o"}"><div class="${"label svelte-36jf1o"}">${escape(locale$1.NEW_THREAD.MESSAGE)}</div>
                <textarea class="${"svelte-36jf1o"}"${add_attribute("this", messageField, 1)}>${message || ""}</textarea>
                </div>

			${ `${inlineComponent
				? `${image || addingImage
					? `<div class="${"field headerImageField svelte-36jf1o"}">${validate_component(ImageSelectionBox, "ImageSelectionBox").$$render(
							$$result,
							{
								containMode: true,
								imageType,
								useLibrary,
								uploadType: "post",
								itemId: curPostId,
								image,
								fileIsUploading: imageIsUploading
							},
							{
								image: $$value => {
									image = $$value;
									$$settled = false;
								},
								fileIsUploading: $$value => {
									imageIsUploading = $$value;
									$$settled = false;
								}
							},
							{}
						)}</div>
						<div class="${"imageField removeImageField svelte-36jf1o"}">${validate_component(Button, "Button").$$render(
							$$result,
							{
								className: "addImage removeImage",
								icon: img$d,
								onClick: removeImage
							},
							{},
							{
								default: () => `${escape(locale$1.NEW_THREAD.REMOVE_IMAGE)}`
							}
						)}</div>`
					: `<div class="${"imageField svelte-36jf1o"}">${validate_component(Button, "Button").$$render(
							$$result,
							{
								className: "addImage",
								icon: img$G,
								onClick: addImage
							},
							{},
							{}
						)}</div>`}
					`
				: `${image || addingImage
					? `<div class="${"imageField svelte-36jf1o"}">${validate_component(Button, "Button").$$render(
							$$result,
							{
								className: "addImage removeImage",
								icon: img$d,
								onClick: removeImage
							},
							{},
							{
								default: () => `${escape(locale$1.NEW_THREAD.REMOVE_IMAGE)}`
							}
						)}</div>
						<div class="${"field headerImageField svelte-36jf1o"}">${validate_component(ImageSelectionBox, "ImageSelectionBox").$$render(
							$$result,
							{
								containMode: true,
								imageType,
								useLibrary,
								uploadType: "post",
								itemId: curPostId,
								image,
								fileIsUploading: imageIsUploading
							},
							{
								image: $$value => {
									image = $$value;
									$$settled = false;
								},
								fileIsUploading: $$value => {
									imageIsUploading = $$value;
									$$settled = false;
								}
							},
							{}
						)}</div>`
					: `<div class="${"imageField svelte-36jf1o"}">${validate_component(Button, "Button").$$render(
							$$result,
							{
								className: "addImage",
								icon: img$M,
								onClick: addImage
							},
							{},
							{
								default: () => `${escape(locale$1.NEW_THREAD.ADD_IMAGE)}`
							}
						)}</div>`}`}`
			}

			${!editPost
			? `<div class="${"fieldNote svelte-36jf1o"}">${locale$1.NEW_THREAD.EDIT_NOTE}</div>`
			: `<div class="${"fieldNote svelte-36jf1o"}">${locale$1.NEW_THREAD.EDITING_NOTE}
					${changesSaved
				? `<div><a href="${"javascript:void(0)"}">${escape(locale$1.NEW_THREAD.REST_ACTION)}</a>${escape(locale$1.NEW_THREAD.REST_NOTE)}</div>`
				: ``}</div>`}
            <div class="${"actions svelte-36jf1o"}">${!editPost
			? `${inlineComponent
				? `${validate_component(Button, "Button").$$render(
						$$result,
						{
							className: "nextButton",
							disabled: !nextEnabled,
							onClick: createNewPost,
							icon: img$A
						},
						{},
						{
							default: () => `${escape(locale$1.REPLY_THREAD.CONFIRM)}`
						}
					)}`
				: `${validate_component(Button, "Button").$$render(
						$$result,
						{
							className: "nextButton",
							disabled: !nextEnabled,
							onClick: createNewPost,
							icon: img$q
						},
						{},
						{
							default: () => `${escape(locale$1.NEW_THREAD.CONFIRM)}`
						}
					)}`}`
			: `${validate_component(Button, "Button").$$render(
					$$result,
					{
						className: "nextButton",
						disabled: !nextEnabled,
						onClick: saveCurrentPost,
						icon: img$O
					},
					{},
					{
						default: () => `${escape(locale$1.EDIT_THREAD.CONFIRM)}`
					}
				)}`}</div></div></div>`
		: ``}`;
	} while (!$$settled);

	return $$rendered;
});

/* src\routes\posts\new.svelte generated by Svelte v3.23.0 */

const New$1 = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let $project = get_store_value(project);
	let projectTitleString = $project && $project.title && $project.title + " - " || "";

	return `${($$result.head += `${($$result.title = `<title>${escape(projectTitleString)}Flock</title>`, "")}<style>body {
			overscroll-behavior-y: contain; /* Disables pull-to-refresh but allows overscroll effects. */
		}
	</style>`, "")}

${validate_component(ScrollView, "ScrollView").$$render($$result, {}, {}, {
		default: () => `<div class="${"content"}">${validate_component(EditPost, "EditPost").$$render($$result, {}, {}, {})}</div>
`
	})}`;
});

var _new$1 = /*#__PURE__*/Object.freeze({
    __proto__: null,
    'default': New$1
});

const img$R = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA2CAYAAACbZ/oUAAADaklEQVRoQ+2Zi43UMBCG/6uA6wCoAKgAqACoAKgAqADoACoAOoAKgA6ggrsODioAfVIGzXrt2PHjiLIZabUrbWzP53naOdOJydmJ8WoH3rrFdwvvFt7YDuwu3WDQc0kvJD2Q9FnS+4a5hg3tZeG7kr5KAtoE6CfDNK+cuAdwDNbUuSfpR6VuQ4a1AoewvyX9knRz0vahpG9DNK+ctAU4Bkv8vpN0f9LnraQ3lboNGVYLnILFfbHopoDnYLHKpoBzsJsCLoENgS0OSWS4++X0wQu+DwnSzKSlMVwKy3IfJT0thKFWA/9pyu6Fw+ofKwFeAosmPA+IlaZS7RjDZn0pHVDzXA54KWxKB+ahC+Ob0sV3akNwe0oZVu8uc8C9YFNK35L0WNIzSXciDxHzr3o3Ling0bAhH+u9TMQ+bg44ia9ZYsC43oU7CNAu4obX0ROzNuCvAzLc/HkPa8eAiR9b8DphPSPuTov6KABnM5qOnTFgrMuCCK7Ewv9LiG/Wv+EUwMWxdpXEgP+4mW5PjULV5J0GsfmULJ/YqqFzwGs5zxLbWNo3NFXQMWDf/BMvxM1aJOziFkPHgImbD46QeGHitUgIvejMnarD3sqArh2auzPiPCspYGIGaJ8o1gZNX2D60ZSQYLPNyVxrORKaubPKZczFHDQkVrIwEHdos5I7PNRC0ypyzUNJ4bcdHlLKYC07L6P4z8INoQPketgk64U5YCZaCh0mvdymp/63szLHRSyZEp/EeI5SmvSeEuCl0CgatoS10DbO3mTErnxD157N2qXAS6B9hucah97crnhi4Lg9H9zTvlNnZdweoDAj+/5/NoEtAS6F7nFraRcFqbMyaxCv3tX5bRuVjOWlwCXQPYC9J2B5wGP3ZFgWiyPeysBTpo6kBjgH3RvYlMbdgQrBcXMrR1eOMHoOqAWeg8Ya9uZhxPHSXuf4poi4BdrfmnAnhi4H0gKcgvYLjHyZ5l3Y1qSEWYWIunUr8Bw0tyW4YWtHNVfS7OW7vyDwzx+5dQ9ggw7Pq9mup7U4T+PJ6DQfsZvPo5DqBewTC1a1VyqdmLLTxLpBBh3FcW/grGYDH4hBk8Fx63+yJWCgcG/Koo/pA8atAQMdnqA2Dww09ZcPPffBNfMWLTybJnbggVl0FVPvFl6FGQYqcXIW/gs1ftA35nDwRwAAAABJRU5ErkJggg==";

/* src\routes\_components\ThreadPost.svelte generated by Svelte v3.23.0 */

const css$18 = {
	code: ".threadPost.svelte-gkb4jk{margin-top:5px;background-color:#ffffff}.threadPost.svelte-gkb4jk .optionsButton{position:absolute;top:25px;right:2px;width:32px;height:26px;padding:8px 3px}.threadPost.svelte-gkb4jk .optionsButton .icon{margin-left:11px;transform:scale(0.45, 0.45)}.threadPost.svelte-gkb4jk .followButton{position:absolute;top:30px;right:33px;width:24px;height:26px;padding:3px 3px}.threadPost.svelte-gkb4jk .followButton .icon{margin-left:2px;transform:scale(0.36, 0.36)}.button.svelte-gkb4jk{cursor:pointer}.threadPost.svelte-gkb4jk .avatarIcon{position:absolute;left:23px;top:23px;height:65px;width:65px}.info.svelte-gkb4jk{position:absolute;padding-top:29px;padding-right:100px;padding-left:104px}.userName.svelte-gkb4jk{font-size:1.7rem;color:#222222;font-weight:700;user-select:text}.username.svelte-gkb4jk{font-size:1.4rem;color:#666666;margin-top:-2px;user-select:text}.postContent.svelte-gkb4jk{padding-top:95px;padding-left:23px;padding-right:23px;padding-bottom:22px}.date.svelte-gkb4jk{font-size:1.3rem;color:#999999;padding-bottom:2px;user-select:text}.edited.svelte-gkb4jk{display:inline-block;margin-left:4px;font-size:1.1rem;color:#b9b9b9;background-color:#f7f5f5;padding:1px 4px;border-radius:3px;user-select:none}.title.svelte-gkb4jk{font-size:1.9rem;line-height:2rem;color:#000000;font-weight:700;padding-bottom:2px;padding-top:8px;user-select:text}.title.svelte-gkb4jk a{user-select:text}.message.svelte-gkb4jk{font-size:1.5rem;line-height:1.7rem;color:#333333;padding-top:8px;user-select:text}.message.svelte-gkb4jk a{user-select:text}.postImage.svelte-gkb4jk{width:100%;background-color:#dedede;margin-bottom:8px}.threadPost.svelte-gkb4jk .actionBar {position:relative}.threadPost.svelte-gkb4jk .actionContainerButton{position:absolute;width:94px;top:0;bottom:0;left:106px}.threadPost.svelte-gkb4jk .button .button{justify-content:initial}.threadPost.svelte-gkb4jk .actionContainerButton.actionButtonLeft{position:absolute;left:0;width:initial;top:0;bottom:0}.threadPost.svelte-gkb4jk .actionContainerButton.actionButtonLeft .buttonContent{padding-right:0;margin-left:26px;margin-right:67px}.threadPost.svelte-gkb4jk .actionContainerButton.actionButtonMiddle{position:absolute;left:112px;width:initial;top:0;bottom:0}.threadPost.svelte-gkb4jk .actionContainerButton.actionButtonMiddle .buttonContent{padding-right:0;margin-left:9px;margin-right:14px}.threadPost.svelte-gkb4jk .actionContainerButton.actionButtonRight{position:absolute;left:initial;right:0;width:initial;top:0;bottom:0}.threadPost.svelte-gkb4jk .actionContainerButton.actionButtonRight .buttonContent{padding-right:0;margin-left:32px;margin-right:20px;font-size:1.6rem;font-weight:700}.threadPost.svelte-gkb4jk .actionContainerButton.actionButtonRight .buttonContent{padding-right:0;margin-left:32px;margin-right:57px;font-size:1.6rem;font-weight:700}.threadPost.svelte-gkb4jk .actionContainerButton.actionButtonRight .icon{padding-left:16px}",
	map: "{\"version\":3,\"file\":\"ThreadPost.svelte\",\"sources\":[\"ThreadPost.svelte\"],\"sourcesContent\":[\"<script>\\n    import { get, writable } from 'svelte/store';\\n    import { tick } from 'svelte';\\n\\n    import { menuIds } from '../../config/menus';\\n\\n    import config from '../../config';\\n    import locale from '../../locale';\\n\\n    import Button from '../../components/Button.svelte';\\n\\n    import Proxy from '../../components/Proxy.svelte';\\n    import Hotspot from '../../components/Hotspot.svelte';\\n\\n\\timport ActionBar from './ActionBar.svelte';\\n\\timport ActionButton from './ActionButton.svelte';\\n\\n    import AvatarIcon from '../_components/AvatarIcon.svelte';\\n\\n    import ShareIcon from \\\"../../assets/icons/share.png\\\";\\n    import LikeIcon from \\\"../../assets/icons/like.png\\\";\\n    import LikeSelectedIcon from \\\"../../assets/icons/like_selected.png\\\";\\n    import ReplyIcon from \\\"../../assets/icons/reply.png\\\";\\n\\timport OptionsMenuIcon from \\\"../../assets/icons/menu.png\\\";\\n    import FollowIcon from \\\"../../assets/icons/follow.png\\\";\\n    import FollowSelectedIcon from \\\"../../assets/icons/follow_selected.png\\\";\\n\\n    import PlaceholderImage from \\\"../../assets/images/postPlaceholder.png\\\";\\n\\n\\n\\t// import NewPostButton from '../_components/NewPostButton.svelte';\\n\\n    import { getDisplayText, getDateString, getDateAgeString, secondsDiff } from '../../utils';\\n\\n    import {\\n        project,\\n        userId,\\n        user,\\n        targetPost,\\n\\t\\tgetHeaderImage,\\n        postType,\\n        getIsProjectTeamMember,\\n    } from '../../models/appModel';\\n\\n    import {\\n        loadProfile,\\n        checkLoggedIn,\\n        newThreadPost,\\n        showSharePostDialog,\\n        showMenu,\\n    } from '../../actions/appActions';\\n\\n\\timport {\\n        postToggleLiked,\\n        followPost,\\n    } from '../../actions/postActions';\\n\\n    import {\\n        getPost,\\n    } from '../../models/postsModel';\\n\\n\\n    import { getUser } from '../../models/usersModel';\\n\\n    export let post;\\n\\n    let postUser = writable([]);\\n\\n\\t$: isArchived = ($project && $project.archived) || false;\\n    $: isTeamMember = $user && $project && getIsProjectTeamMember($project);\\n\\n    $: following = ($post && $post.following) || false;\\n\\n    $: postUserId = ($post && $post.userId) || null;\\n    $: postId = ($post && $post.id) || null;\\n    $: { postUser = getUser(postUserId) };\\n    $: userLoaded = ($postUser && $postUser.name) || false;\\n    $: userName = ($postUser && $postUser.name) || '&nbsp;';\\n    $: username = ($postUser && $postUser.username && '@' + $postUser.username) || '';\\n\\n    $: canEdit = ($post && $post.userId && $post.userId === $userId) || false;\\n\\n    $: showFollowOption = !canEdit && !isTeamMember;\\n\\n    $: showEdited = ($post && $post.edited && secondsDiff($post.createdAt, $post.editedAt) > config.SHOW_EDITED_MIN_TIME) || false;\\n    $: editedDate = (showEdited && $post.editedAt && getDateString($post.editedAt)) || '';\\n\\n    // $: console.log('thread diff', secondsDiff($post.createdAt, $post.editedAt));\\n\\n    $: title = ($post && $post.title) || '';\\n    $: message = ($post && $post.message) || '';\\n    $: image = ($post && $post.image) || '';\\n    $: createdAt = ($post && $post.createdAt) || '';\\n\\n    $: dateString = (createdAt && getDateString(createdAt, 'ddd d MMM') + ' at ' + getDateString(createdAt, 'h:mmtt')) || '&nbsp;';\\n\\n    $: titleHTML = getDisplayText(title);\\n    $: messageHTML = getDisplayText(message);\\n\\n    let currentImageSrc = PlaceholderImage;\\n    $: { // load placeholder to set image size\\n        image;\\n\\n        (async () => {\\n            await tick();\\n            currentImageSrc = PlaceholderImage;\\n\\n            await tick();\\n            setTimeout(() => { // ensure allowing placeholder to resize - tick doesn't seem to be enough\\n                currentImageSrc = getHeaderImage(image);\\n            }, 0);\\n        })();\\n    }\\n\\n    const date = ''; //'5 Jan at 4:23pm';\\n\\n    function viewUserProfile() {\\n        if (userLoaded) {\\n            loadProfile(postUserId);\\n        }\\n    }\\n\\n    function reply() {\\n        if (!checkLoggedIn()) { return; }\\n        newThreadPost();\\n    }\\n\\n\\tfunction shareItem() {\\n\\t\\tshowSharePostDialog(postId);\\n    }\\n\\n    function showPostOptions() {\\n        const postModel = getPost(postId);\\n        if (postModel) {\\n            const post = get(postModel);\\n            $targetPost = post;\\n\\n            showMenu(menuIds.THREAD_POST_OPTIONS);\\n        }\\n    }\\n\\n    function toggleFollowPost() {\\n        followPost(postId, following);\\n    }\\n</script>\\n\\n<div class=\\\"threadPost\\\">\\n    <!-- <div class=\\\"proxyOverlay\\\">\\n        <Proxy image=\\\"thread_post\\\" className=\\\"proxyTheadPost\\\">\\n            <Hotspot onClick=\\\"{e => loadProfile('bl20a8lm')}\\\" style=\\\"\\n                left: 12px;\\n                top: 9px;\\n                width: 67px;\\n                height: 65px;\\\" />\\n        </Proxy>\\n        <Proxy image=\\\"thread_actions\\\" className=\\\"proxyThreadActions\\\" />\\n    </div> -->\\n\\n    {#if canEdit || showFollowOption}\\n        <Button className=\\\"optionsButton\\\" icon=\\\"{OptionsMenuIcon}\\\" onClick=\\\"{showPostOptions}\\\"></Button>\\n    {/if}\\n    {#if showFollowOption}\\n        <Button className=\\\"followButton\\\" onClick=\\\"{toggleFollowPost}\\\" icon=\\\"{following ? FollowSelectedIcon : FollowIcon}\\\" />\\n    {/if}\\n\\n    <div class=\\\"info\\\" on:click=\\\"{userLoaded ? viewUserProfile : null}\\\">\\n        <div class=\\\"userName\\\" class:button=\\\"{userLoaded}\\\">{@html userName}</div>\\n        <div class=\\\"username\\\" class:button=\\\"{userLoaded}\\\">{username}</div>\\n    </div>\\n    <AvatarIcon user=\\\"{postUser}\\\" onClick=\\\"{userLoaded ? viewUserProfile : null}\\\" useThumb=\\\"{true}\\\" />\\n    <div class=\\\"postContent\\\">\\n        <div class=\\\"date\\\">{@html dateString}{#if showEdited}<span class=\\\"edited\\\" title=\\\"{editedDate}\\\">{locale.POST.EDITED}</span>{/if}</div>\\n        {#if title}\\n            <div class=\\\"title\\\">{@html titleHTML}</div>\\n        {/if}\\n        {#if message}\\n            <div class=\\\"message\\\">{@html messageHTML}</div>\\n        {/if}\\n    </div>\\n    {#if image}\\n        <img class=\\\"postImage\\\" src=\\\"{currentImageSrc}\\\" alt=\\\"post\\\" />\\n    {/if}\\n\\n    <!-- <Proxy image=\\\"thread_actions\\\" className=\\\"proxyThreadActions proxyOverlay\\\" /> -->\\n\\n    {#if !isArchived}\\n        <ActionBar targetItemId=\\\"{postId}\\\" targetItem=\\\"{$post}\\\">\\n            <div slot=\\\"buttonLeft\\\">\\n                <ActionButton\\n                    label = \\\"like\\\"\\n                    icon = \\\"{LikeIcon}\\\"\\n                    selectedIcon = \\\"{LikeSelectedIcon}\\\"\\n\\n                    targetItem = \\\"{$post}\\\"\\n                    targetItemId = \\\"{postId}\\\"\\n                    action = \\\"{postToggleLiked}\\\"\\n                    targetItemProperty = \\\"liked\\\"\\n                    countProperty = \\\"likeCount\\\"\\n                />\\n            </div>\\n            <div slot=\\\"buttonMiddle\\\">\\n                <ActionButton\\n                    label = \\\"share\\\"\\n\\n                    icon = \\\"{ShareIcon}\\\"\\n\\n                    action = \\\"{shareItem}\\\"\\n                />\\n            </div>\\n            <div slot=\\\"buttonRight\\\">\\n                <ActionButton\\n                    label = \\\"reply\\\"\\n\\n                    icon = \\\"{ReplyIcon}\\\"\\n\\n                    action = \\\"{reply}\\\"\\n                />\\n            </div>\\n        </ActionBar>\\n    {/if}\\n\\t<!-- <NewPostButton onClick=\\\"{reply}\\\" className=\\\"replyButton\\\" type=\\\"reply\\\">\\n        <ActionButton\\n            label = \\\"like\\\"\\n            icon = \\\"{LikeIcon}\\\"\\n            selectedIcon = \\\"{LikeSelectedIcon}\\\"\\n\\n            targetItem = \\\"{$post}\\\"\\n            targetItemId = \\\"{postId}\\\"\\n            action = \\\"{postToggleLiked}\\\"\\n            targetItemProperty = \\\"liked\\\"\\n            countProperty = \\\"likeCount\\\"\\n        />\\n    </NewPostButton> -->\\n</div>\\n\\n<style>\\n\\t/* .threadPost :global(.proxyOverlay) {\\n\\t\\tposition: absolute;\\n\\t\\topacity: 0.5;\\n\\t} */\\n\\n    .threadPost {\\n\\t\\tmargin-top: 5px;\\n        background-color: #ffffff;\\n    }\\n\\n    .threadPost :global(.optionsButton) {\\n\\t\\tposition: absolute;\\n\\n    \\ttop: 25px;\\n        right: 2px;\\n\\n        width: 32px;\\n\\t\\theight: 26px;\\n        padding: 8px 3px;\\n\\t}\\n    .threadPost :global(.optionsButton .icon) {\\n        margin-left: 11px;\\n        transform: scale(0.45, 0.45);\\n\\t}\\n\\n    .threadPost :global(.followButton) {\\n        position: absolute;\\n        top: 30px;\\n        right: 33px;\\n        width: 24px;\\n        height: 26px;\\n        padding: 3px 3px;\\n\\t}\\n    .threadPost :global(.followButton .icon) {\\n        margin-left: 2px;\\n        transform: scale(0.36, 0.36);\\n\\t}\\n\\n    .button {\\n        cursor: pointer;\\n    }\\n\\n    .threadPost :global(.avatarIcon) {\\n        position: absolute;\\n        left: 23px;\\n        top: 23px;\\n        height: 65px;\\n        width: 65px;\\n    }\\n\\n    .info {\\n        position: absolute;\\n        padding-top: 29px;\\n        padding-right: 100px;\\n        padding-left: 104px;\\n    }\\n\\n    .userName {\\n        font-size: 1.7rem;\\n        color: #222222;\\n        font-weight: 700;\\n\\n        user-select: text;\\n    }\\n\\n    .username {\\n        font-size: 1.4rem;\\n        color: #666666;\\n        margin-top: -2px;\\n\\n        user-select: text;\\n    }\\n\\n    .postContent {\\n        padding-top: 95px;\\n        padding-left: 23px;\\n        padding-right: 23px;\\n        /* padding-left: 26px;\\n        padding-right: 40px; */\\n        padding-bottom: 22px;\\n    }\\n\\n    .date {\\n        font-size: 1.3rem;\\n        color: #999999;\\n        padding-bottom: 2px;\\n\\n        user-select: text;\\n    }\\n\\n    .edited {\\n        display: inline-block;\\n        margin-left: 4px;\\n        font-size: 1.1rem;\\n        color: #b9b9b9;\\n        background-color: #f7f5f5;\\n        padding: 1px 4px;\\n        border-radius: 3px;\\n        user-select: none;\\n    }\\n\\n    .title {\\n        font-size: 1.9rem;\\n        line-height: 2rem;\\n        color: #000000;\\n        font-weight: 700;\\n        padding-bottom: 2px;\\n        padding-top: 8px;\\n\\n        user-select: text;\\n\\n        /* white-space: nowrap;\\n        overflow: hidden;\\n        text-overflow: ellipsis; */\\n    }\\n    .title :global(a) {\\n        user-select: text;\\n    }\\n\\n    .message {\\n        font-size: 1.5rem;\\n        line-height: 1.7rem;\\n        color: #333333;\\n        padding-top: 8px;\\n\\n        user-select: text;\\n    }\\n    .message :global(a) {\\n        user-select: text;\\n    }\\n\\n\\t.postImage {\\n\\t\\twidth: 100%;\\n        background-color: #dedede;\\n        margin-bottom: 8px;\\n\\t}\\n\\n    .threadPost :global(.actionBar ) {\\n        position: relative;\\n    }\\n\\n    .threadPost :global(.actionContainerButton) {\\n        position: absolute;\\n        width: 94px;\\n        top: 0;\\n        bottom: 0;\\n        left: 106px;\\n    }\\n\\n    .threadPost :global(.button .button) {\\n        justify-content: initial;\\n    }\\n\\n    .threadPost :global(.actionContainerButton.actionButtonLeft) {\\n        position: absolute;\\n        left: 0;\\n        width: initial;\\n        top: 0;\\n        bottom: 0;\\n    }\\n    .threadPost :global(.actionContainerButton.actionButtonLeft .buttonContent) {\\n        padding-right: 0;\\n        margin-left: 26px;\\n        margin-right: 67px;\\n    }\\n\\n    .threadPost :global(.actionContainerButton.actionButtonMiddle) {\\n        position: absolute;\\n        left: 112px;\\n        width: initial;\\n        top: 0;\\n        bottom: 0;\\n    }\\n    .threadPost :global(.actionContainerButton.actionButtonMiddle .buttonContent) {\\n        padding-right: 0;\\n        margin-left: 9px;\\n        margin-right: 14px;\\n    }\\n\\n    .threadPost :global(.actionContainerButton.actionButtonRight) {\\n        position: absolute;\\n        left: initial;\\n        right: 0;\\n        width: initial;\\n        top: 0;\\n        bottom: 0;\\n    }\\n    .threadPost :global(.actionContainerButton.actionButtonRight .buttonContent) {\\n        padding-right: 0;\\n        margin-left: 32px;\\n        margin-right: 20px;\\n\\n        font-size: 1.6rem;\\n        font-weight: 700;\\n    }\\n    .threadPost :global(.actionContainerButton.actionButtonRight .buttonContent) {\\n        padding-right: 0;\\n        margin-left: 32px;\\n        margin-right: 57px;\\n\\n        font-size: 1.6rem;\\n        font-weight: 700;\\n    }\\n    .threadPost :global(.actionContainerButton.actionButtonRight .icon) {\\n        padding-left: 16px;\\n    }\\n</style>\"],\"names\":[],\"mappings\":\"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\"}"
};

const ThreadPost = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let $project = get_store_value(project);
	let $user = get_store_value(user);
	let $post;
	let $postUser;
	let $userId = get_store_value(userId);
	let $targetPost = get_store_value(targetPost);
	let { post } = $$props;
	$post = get_store_value(post);
	let postUser = writable$1([]);
	$postUser = get_store_value(postUser);
	
	let currentImageSrc = img$o;

	function viewUserProfile() {
		if (userLoaded) {
			loadProfile(postUserId);
		}
	}

	function reply() {
		if (!checkLoggedIn()) {
			return;
		}

		newThreadPost();
	}

	function shareItem() {
		showSharePostDialog(postId);
	}

	function showPostOptions() {
		const postModel = getPost(postId);

		if (postModel) {
			const post = get_store_value(postModel);
			$targetPost = post;
			showMenu(menuIds.THREAD_POST_OPTIONS);
		}
	}

	function toggleFollowPost() {
		followPost$1(postId, following);
	}

	if ($$props.post === void 0 && $$bindings.post && post !== void 0) $$bindings.post(post);
	$$result.css.add(css$18);
	$post = get_store_value(post);
	$postUser = get_store_value(postUser);
	let isArchived = $project && $project.archived || false;
	let isTeamMember = $user && $project && getIsProjectTeamMember($project);
	let following = $post && $post.following || false;
	let postUserId = $post && $post.userId || null;
	let postId = $post && $post.id || null;

	 {
		{
			postUser = getUser(postUserId);
		}
	}

	let userLoaded = $postUser && $postUser.name || false;
	let userName = $postUser && $postUser.name || "&nbsp;";
	let username = $postUser && $postUser.username && "@" + $postUser.username || "";
	let canEdit = $post && $post.userId && $post.userId === $userId || false;
	let showFollowOption = !canEdit && !isTeamMember;
	let showEdited = $post && $post.edited && secondsDiff($post.createdAt, $post.editedAt) > config$1.SHOW_EDITED_MIN_TIME || false;
	let editedDate = showEdited && $post.editedAt && getDateString($post.editedAt) || "";
	let title = $post && $post.title || "";
	let message = $post && $post.message || "";
	let image = $post && $post.image || "";
	let createdAt = $post && $post.createdAt || "";
	let dateString = createdAt && getDateString(createdAt, "ddd d MMM") + " at " + getDateString(createdAt, "h:mmtt") || "&nbsp;";
	let titleHTML = getDisplayText(title);
	let messageHTML = getDisplayText(message);

	 {
		{

			(async () => {
				await tick();
				currentImageSrc = img$o;
				await tick();

				setTimeout(
					() => {
						// ensure allowing placeholder to resize - tick doesn't seem to be enough
						currentImageSrc = getHeaderImage(image);
					},
					0
				);
			})();
		}
	}

	return `<div class="${"threadPost svelte-gkb4jk"}">

    ${canEdit || showFollowOption
	? `${validate_component(Button, "Button").$$render(
			$$result,
			{
				className: "optionsButton",
				icon: img,
				onClick: showPostOptions
			},
			{},
			{}
		)}`
	: ``}
    ${showFollowOption
	? `${validate_component(Button, "Button").$$render(
			$$result,
			{
				className: "followButton",
				onClick: toggleFollowPost,
				icon: following ? img$v : img$u
			},
			{},
			{}
		)}`
	: ``}

    <div class="${"info svelte-gkb4jk"}"><div class="${["userName svelte-gkb4jk", userLoaded ? "button" : ""].join(" ").trim()}">${userName}</div>
        <div class="${["username svelte-gkb4jk", userLoaded ? "button" : ""].join(" ").trim()}">${escape(username)}</div></div>
    ${validate_component(AvatarIcon, "AvatarIcon").$$render(
		$$result,
		{
			user: postUser,
			onClick: userLoaded ? viewUserProfile : null,
			useThumb: true
		},
		{},
		{}
	)}
    <div class="${"postContent svelte-gkb4jk"}"><div class="${"date svelte-gkb4jk"}">${dateString}${showEdited
	? `<span class="${"edited svelte-gkb4jk"}"${add_attribute("title", editedDate, 0)}>${escape(locale$1.POST.EDITED)}</span>`
	: ``}</div>
        ${title
	? `<div class="${"title svelte-gkb4jk"}">${titleHTML}</div>`
	: ``}
        ${message
	? `<div class="${"message svelte-gkb4jk"}">${messageHTML}</div>`
	: ``}</div>
    ${image
	? `<img class="${"postImage svelte-gkb4jk"}"${add_attribute("src", currentImageSrc, 0)} alt="${"post"}">`
	: ``}

    

    ${!isArchived
	? `${validate_component(ActionBar, "ActionBar").$$render($$result, { targetItemId: postId, targetItem: $post }, {}, {
			buttonLeft: () => `<div slot="${"buttonLeft"}">${validate_component(ActionButton, "ActionButton").$$render(
				$$result,
				{
					label: "like",
					icon: img$s,
					selectedIcon: img$t,
					targetItem: $post,
					targetItemId: postId,
					action: postToggleLiked,
					targetItemProperty: "liked",
					countProperty: "likeCount"
				},
				{},
				{}
			)}</div>`,
			buttonMiddle: () => `<div slot="${"buttonMiddle"}">${validate_component(ActionButton, "ActionButton").$$render(
				$$result,
				{
					label: "share",
					icon: img$w,
					action: shareItem
				},
				{},
				{}
			)}</div>`,
			buttonRight: () => `<div slot="${"buttonRight"}">${validate_component(ActionButton, "ActionButton").$$render(
				$$result,
				{
					label: "reply",
					icon: img$R,
					action: reply
				},
				{},
				{}
			)}</div>`,
			default: () => `
            
            `
		})}`
	: ``}
	
</div>`;
});

/* src\routes\posts\[post]\index.svelte generated by Svelte v3.23.0 */

const css$19 = {
	code: ".content.svelte-1gwl1di.svelte-1gwl1di .proxyOverlay{position:absolute;opacity:0.5}.content.svelte-1gwl1di.svelte-1gwl1di{margin-bottom:40px}.postsContainer.svelte-1gwl1di.svelte-1gwl1di .contentLoader{background-color:#f2f2f2;font-size:1.3rem;line-height:2.2rem}.contentContainer.svelte-1gwl1di.svelte-1gwl1di{margin-bottom:100px}.showAddPost.svelte-1gwl1di .contentContainer.svelte-1gwl1di{margin-bottom:10px}.postsContainer.svelte-1gwl1di.svelte-1gwl1di{margin-top:10px}.content.svelte-1gwl1di .postsContainer.svelte-1gwl1di .postItem{margin-bottom:0;border-bottom:2px solid #EEEEEE}",
	map: "{\"version\":3,\"file\":\"index.svelte\",\"sources\":[\"index.svelte\"],\"sourcesContent\":[\"<script>\\r\\n\\timport locale from '../../../locale';\\r\\n\\timport config from '../../../config';\\r\\n\\r\\n\\timport { tick, onMount, onDestroy } from 'svelte';\\r\\n\\timport { writable } from 'svelte/store';\\r\\n\\r\\n\\timport ScrollView from '../../../components/ScrollView.svelte';\\r\\n\\timport Proxy from '../../../components/Proxy.svelte';\\r\\n    import Hotspot from '../../../components/Hotspot.svelte';\\r\\n\\r\\n\\timport ThreadPost from '../../_components/ThreadPost.svelte';\\r\\n\\r\\n\\timport NewPostButton from '../../_components/NewPostButton.svelte';\\r\\n\\r\\n\\timport ContentLoader from '../../_components/ContentLoader.svelte';\\r\\n\\timport PostItem from '../../_components/PostItem.svelte';\\r\\n\\r\\n    import ReplyIcon from \\\"../../../assets/icons/reply.png\\\";\\r\\n\\r\\n\\timport EditPost from '../../posts/_components/EditPost.svelte';\\r\\n\\r\\n\\timport { loadProfile } from '../../../actions/appActions';\\r\\n\\r\\n\\timport { setNotificationSeenTimeout, clearNotificationSeenTimeout } from '../../../models/notificationsModel';\\r\\n\\r\\n\\timport AppModel, {\\r\\n\\t\\tpostId,\\r\\n\\t\\tpost,\\r\\n\\t\\tpostsAnchorToBottom,\\r\\n\\t\\tuser,\\r\\n\\t\\tuserId,\\r\\n\\t\\tproject,\\r\\n\\t\\tisUserLoaded,\\r\\n\\t\\tloggingIn,\\r\\n\\t} from '../../../models/appModel';\\r\\n\\r\\n\\timport {\\r\\n\\t\\tloadCurrentChannel,\\r\\n\\t\\tloadCurrentPost,\\r\\n\\t\\tcheckLoggedIn,\\r\\n\\t\\tnewThreadPost,\\r\\n\\t} from '../../../actions/appActions';\\r\\n\\r\\n\\timport {\\r\\n\\t\\tloadUsersOfItem,\\r\\n\\t\\tloadUsersOfItemModels,\\r\\n\\t} from '../../../models/usersModel';\\r\\n\\r\\n\\timport {\\r\\n\\t\\tgetPost,\\r\\n\\t\\tgetPosts,\\r\\n\\t\\tloadingPosts,\\r\\n\\t} from '../../../models/postsModel';\\r\\n\\r\\n\\timport {\\r\\n\\t\\tloadingProjects,\\r\\n\\t} from '../../../models/projectsModel';\\r\\n\\r\\n\\t// $: userLoading = (!($user && $user.loaded) && $userId);\\r\\n\\r\\n\\tlet showAddPost = false;\\r\\n\\r\\n\\tconst DISPLAY_BOTTOM_LINK_POST_COUNT = 3;\\r\\n\\r\\n\\t$: projectTitleString = ($project && $project.title && $project.title + ' - ') || '';\\r\\n\\t$: isArchived = ($project && $project.archived) || false;\\r\\n\\r\\n\\t$: threadLoading = ($loadingPosts && (!$post || $post.id !== $postId)) || !isUserLoaded($user, $userId, $loggingIn) || (!$project && $loadingProjects);\\r\\n\\r\\n\\t$: isLoadingPosts = ($loadingPosts && (!$posts || !$posts.length));\\r\\n\\r\\n\\t$: {\\r\\n\\t\\tif ($postsAnchorToBottom && scrollRegion && !isLoadingPosts && $posts) {\\r\\n\\t\\t\\t(async () => {\\r\\n\\t\\t\\t\\tawait tick();\\r\\n\\t\\t\\t\\tscrollToBottom();\\r\\n\\r\\n\\t\\t\\t\\t// window.setTimeout(()=> {\\r\\n\\t\\t\\t\\t// \\tconsole.log('$postsAnchorToBottom', $postsAnchorToBottom);\\r\\n\\t\\t\\t\\t// \\tscrollToBottom();\\r\\n\\t\\t\\t\\t// }, 100);\\r\\n\\t\\t\\t})();\\r\\n\\t\\t}\\r\\n\\t}\\r\\n\\r\\n\\tAppModel.on('newThreadPost', onNewThreadPost);\\r\\n\\r\\n\\tloadCurrentChannel();\\r\\n\\tloadCurrentPost();\\r\\n\\r\\n    // let post = writable([]);\\r\\n\\t// $: { post = getPost( { postId: $postId, type: 'thread' } ) };\\r\\n\\r\\n    let posts = writable([]);\\r\\n\\t$: { posts = getPosts( { threadId: $postId, type: 'threadPost' } ) };\\r\\n\\r\\n    $: {\\r\\n        loadUsersOfItem($post);\\r\\n\\t}\\r\\n    $: {\\r\\n        loadUsersOfItemModels($posts);\\r\\n\\t}\\r\\n\\r\\n    function reply() {\\r\\n\\t\\tif (!checkLoggedIn()) { return; }\\r\\n\\t\\tnewThreadPost();\\r\\n\\t}\\r\\n\\r\\n\\tfunction onNewThreadPost() {\\r\\n\\t\\tshowAddPost = true;\\r\\n\\t}\\r\\n\\r\\n\\tfunction hideReplyPanel() {\\r\\n\\t\\tshowAddPost = false;\\r\\n\\t}\\r\\n\\r\\n\\t$: {\\r\\n\\t\\tshowAddPost;\\r\\n\\t\\tonReplyPanelResized();\\r\\n\\t}\\r\\n\\r\\n\\tlet scrollRegion = null;\\r\\n\\r\\n\\tlet replyRegionHeight = 0;\\r\\n\\tlet replyRegion = null;\\r\\n\\r\\n\\tasync function onReplyPanelResized() {\\r\\n\\t\\tawait tick();\\r\\n\\r\\n\\t\\tif (showAddPost) {\\r\\n\\t\\t\\treplyRegionHeight = (replyRegion && replyRegion.offsetHeight) || 0;\\r\\n\\t\\t} else {\\r\\n\\t\\t\\treplyRegionHeight = 0;\\r\\n\\t\\t}\\r\\n\\t\\t// console.log('replyRegionHeight', replyRegionHeight);\\r\\n\\r\\n\\t\\tif (replyRegionHeight !== 0) {\\r\\n\\t\\t\\tscrollToBottom();\\r\\n\\t\\t}\\r\\n\\t}\\r\\n\\r\\n\\tasync function scrollToBottom() {\\r\\n\\t\\tif (scrollRegion) {\\r\\n\\t\\t\\tawait tick();\\r\\n\\r\\n\\t\\t\\tif (typeof window !== 'undefined') { // ensure keyboard has appeared\\r\\n\\t\\t\\t\\twindow.setTimeout(() => {\\r\\n\\t\\t\\t\\t\\tif (scrollRegion) {\\r\\n\\t\\t\\t\\t\\t\\tscrollRegion.scrollTo(0, scrollRegion.scrollHeight);\\r\\n\\t\\t\\t\\t\\t}\\r\\n\\t\\t\\t\\t}, 250);\\r\\n\\t\\t\\t\\twindow.setTimeout(() => {\\r\\n\\t\\t\\t\\t\\tif (scrollRegion) {\\r\\n\\t\\t\\t\\t\\t\\tscrollRegion.scrollTo(0, scrollRegion.scrollHeight);\\r\\n\\t\\t\\t\\t\\t}\\r\\n\\t\\t\\t\\t}, 500);\\r\\n\\t\\t\\t}\\r\\n\\r\\n\\t\\t\\tif (scrollRegion) {\\r\\n\\t\\t\\t\\tscrollRegion.scrollTo(0, scrollRegion.scrollHeight);\\r\\n\\t\\t\\t}\\r\\n\\t\\t}\\r\\n\\t}\\r\\n\\r\\n\\tlet postSeenTimeout;\\r\\n\\tlet threadSeenTimeout;\\r\\n\\tonMount(() => {\\r\\n\\t\\tpostSeenTimeout = setNotificationSeenTimeout({postId: $postId});\\r\\n\\t\\tthreadSeenTimeout = setNotificationSeenTimeout({threadId: $postId}, config.REPLY_VIEWED_DELAY);\\r\\n\\t});\\r\\n\\tonDestroy(() => {\\r\\n\\t\\tclearNotificationSeenTimeout(postSeenTimeout);\\r\\n\\t\\tclearNotificationSeenTimeout(threadSeenTimeout);\\r\\n\\t});\\r\\n</script>\\r\\n\\r\\n<svelte:head>\\r\\n\\t<title>{projectTitleString}Flock</title>\\r\\n</svelte:head>\\r\\n\\r\\n<div class=\\\"content\\\" class:showAddPost=\\\"{showAddPost}\\\">\\r\\n\\t<ScrollView id=\\\"thread\\\" bind:scrollRegion=\\\"{scrollRegion}\\\" anchorToBottom=\\\"{$postsAnchorToBottom}\\\" bottomOffset=\\\"{replyRegionHeight}\\\" disabledMinHeight=\\\"{showAddPost}\\\">\\r\\n\\t\\t{#if threadLoading }\\r\\n\\t\\t\\t<ContentLoader label=\\\"{locale.LOADING.THREAD}\\\" />\\r\\n\\t\\t{:else if !$post || !$post.id}\\r\\n\\t\\t\\t<ContentLoader label=\\\"{locale.THREAD.NOT_FOUND}\\\" />\\r\\n\\t\\t{:else}\\r\\n\\t\\t\\t<!-- <div slot=\\\"scrollHeader\\\">\\r\\n\\t\\t\\t\\t<ThreadPost {post} />\\r\\n\\t\\t\\t</div> -->\\r\\n\\r\\n\\t\\t\\t<div class=\\\"scrollContent\\\">\\r\\n\\t\\t\\t\\t<ThreadPost {post} />\\r\\n\\t\\t\\t\\t<!-- <Proxy image=\\\"thread_posts\\\" className=\\\"proxyOverlay\\\">\\r\\n\\t\\t\\t\\t\\t<Hotspot onClick=\\\"{e => loadProfile('bl20a8lm')}\\\" style=\\\"\\r\\n\\t\\t\\t\\t\\t\\tleft: 7px;\\r\\n\\t\\t\\t\\t\\t\\ttop: 8px;\\r\\n\\t\\t\\t\\t\\t\\twidth: 49px;\\r\\n\\t\\t\\t\\t\\t\\theight: 1013px;\\\" />\\r\\n\\t\\t\\t\\t</Proxy> -->\\r\\n\\t\\t\\t\\t<!-- <NewPostButton type=\\\"thread_reply\\\" /> -->\\r\\n\\r\\n\\t\\t\\t\\t<div class=\\\"contentContainer\\\">\\r\\n\\t\\t\\t\\t\\t<!-- <Proxy image=\\\"channel_posts\\\" className=\\\"channelPosts proxyOverlay\\\" onClick=\\\"{e => loadPost('sm2ld9p2')}\\\" /> -->\\r\\n\\t\\t\\t\\t\\t<div class=\\\"postsContainer\\\">\\r\\n\\t\\t\\t\\t\\t\\t{#each $posts as post}\\r\\n\\t\\t\\t\\t\\t\\t\\t<PostItem {post} type=\\\"threadPost\\\" />\\r\\n\\t\\t\\t\\t\\t\\t{:else}\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t\\t{#if isLoadingPosts }\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<ContentLoader label=\\\"{locale.LOADING.THREAD_ITEMS}\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t{:else if !showAddPost}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<ContentLoader>{locale.THREAD.NO_POSTS}<br/>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t{#if !isArchived}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tbe the first to <a href=\\\"javascript:void(0)\\\" on:click=\\\"{reply}\\\">Leave a Reply</a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t{/if}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</ContentLoader>\\r\\n\\t\\t\\t\\t\\t\\t\\t{/if}\\r\\n\\t\\t\\t\\t\\t\\t{/each}\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t{#if !showAddPost && $posts && $posts.length >= DISPLAY_BOTTOM_LINK_POST_COUNT}\\r\\n\\t\\t\\t\\t\\t\\t<NewPostButton onClick=\\\"{reply}\\\" icon=\\\"{ReplyIcon}\\\" label=\\\"{locale.THREAD.REPLY}\\\" />\\r\\n\\t\\t\\t\\t\\t\\t<!-- type=\\\"reply\\\" -->\\r\\n\\t\\t\\t\\t\\t{/if}\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t{/if}\\r\\n\\t</ScrollView>\\r\\n\\r\\n\\t{#if showAddPost}\\r\\n\\t\\t<EditPost inlineComponent=\\\"{true}\\\" bind:element=\\\"{replyRegion}\\\" on:hide=\\\"{hideReplyPanel}\\\" on:resize=\\\"{onReplyPanelResized}\\\" />\\r\\n\\t{/if}\\r\\n</div>\\r\\n\\r\\n<style>\\r\\n\\t.content :global(.proxyOverlay) {\\r\\n\\t\\tposition: absolute;\\r\\n\\t\\topacity: 0.5;\\r\\n\\t}\\r\\n\\r\\n\\t.content {\\r\\n\\t\\tmargin-bottom: 40px;\\r\\n\\t}\\r\\n\\r\\n\\t/* .content :global(.proxyThreadPost) {\\r\\n\\t\\tmargin-top: 5px;\\r\\n\\t} */\\r\\n\\r\\n\\t/* .content :global(.proxyThreadPosts) {\\r\\n\\t\\tmargin-top: 10px;\\r\\n\\t} */\\r\\n\\r\\n\\t.postsContainer :global(.contentLoader) {\\r\\n    \\tbackground-color: #f2f2f2;\\r\\n        font-size: 1.3rem;\\r\\n        line-height: 2.2rem;\\r\\n\\t}\\r\\n\\r\\n\\t.contentContainer {\\r\\n    \\tmargin-bottom: 100px;\\r\\n\\t}\\r\\n\\t.showAddPost .contentContainer {\\r\\n    \\tmargin-bottom: 10px;\\r\\n\\t}\\r\\n\\t/* .showAddPost .scrollContent {\\r\\n    \\tmin-height: initial !important;\\r\\n\\t} */\\r\\n\\r\\n\\t.postsContainer {\\r\\n\\t\\tmargin-top: 10px;\\r\\n\\t}\\r\\n\\r\\n\\t.content .postsContainer :global(.postItem) {\\r\\n    \\tmargin-bottom: 0;\\r\\n\\t\\tborder-bottom: 2px solid #EEEEEE;\\r\\n\\t}\\r\\n\\r\\n    /* .content :global(.showAddPost) {\\r\\n    \\tbottom: 40px;\\r\\n\\t} */\\r\\n</style>\"],\"names\":[],\"mappings\":\"AA4OC,sCAAQ,CAAC,AAAQ,aAAa,AAAE,CAAC,AAChC,QAAQ,CAAE,QAAQ,CAClB,OAAO,CAAE,GAAG,AACb,CAAC,AAED,QAAQ,8BAAC,CAAC,AACT,aAAa,CAAE,IAAI,AACpB,CAAC,AAUD,6CAAe,CAAC,AAAQ,cAAc,AAAE,CAAC,AACrC,gBAAgB,CAAE,OAAO,CACtB,SAAS,CAAE,MAAM,CACjB,WAAW,CAAE,MAAM,AAC1B,CAAC,AAED,iBAAiB,8BAAC,CAAC,AACf,aAAa,CAAE,KAAK,AACxB,CAAC,AACD,2BAAY,CAAC,iBAAiB,eAAC,CAAC,AAC5B,aAAa,CAAE,IAAI,AACvB,CAAC,AAKD,eAAe,8BAAC,CAAC,AAChB,UAAU,CAAE,IAAI,AACjB,CAAC,AAED,uBAAQ,CAAC,8BAAe,CAAC,AAAQ,SAAS,AAAE,CAAC,AACzC,aAAa,CAAE,CAAC,CACnB,aAAa,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,AACjC,CAAC\"}"
};

const DISPLAY_BOTTOM_LINK_POST_COUNT$1 = 3;

const U5Bpostu5D = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let $project = get_store_value(project);
	let $loadingPosts = get_store_value(loadingPosts);
	let $post = get_store_value(post$q);
	let $postId = get_store_value(postId);
	let $user = get_store_value(user);
	let $userId = get_store_value(userId);
	let $loggingIn = get_store_value(loggingIn);
	let $loadingProjects = get_store_value(loadingProjects);
	let $posts;
	let $postsAnchorToBottom = get_store_value(postsAnchorToBottom);

	// $: userLoading = (!($user && $user.loaded) && $userId);
	let showAddPost = false;

	appModel.on("newThreadPost", onNewThreadPost);
	loadCurrentChannel();
	loadCurrentPost();

	// let post = writable([]);
	// $: { post = getPost( { postId: $postId, type: 'thread' } ) };
	let posts = writable$1([]);

	$posts = get_store_value(posts);
	

	function reply() {
		if (!checkLoggedIn()) {
			return;
		}

		newThreadPost();
	}

	function onNewThreadPost() {
		showAddPost = true;
	}

	let scrollRegion = null;
	let replyRegionHeight = 0;
	let replyRegion = null;

	async function onReplyPanelResized() {
		await tick();

		if (showAddPost) {
			replyRegionHeight = replyRegion && replyRegion.offsetHeight || 0;
		} else {
			replyRegionHeight = 0;
		}

		// console.log('replyRegionHeight', replyRegionHeight);
		if (replyRegionHeight !== 0) {
			scrollToBottom();
		}
	}

	async function scrollToBottom() {
		if (scrollRegion) {
			await tick();

			if (typeof window !== "undefined") {
				// ensure keyboard has appeared
				window.setTimeout(
					() => {
						if (scrollRegion) {
							scrollRegion.scrollTo(0, scrollRegion.scrollHeight);
						}
					},
					250
				);

				window.setTimeout(
					() => {
						if (scrollRegion) {
							scrollRegion.scrollTo(0, scrollRegion.scrollHeight);
						}
					},
					500
				);
			}

			if (scrollRegion) {
				scrollRegion.scrollTo(0, scrollRegion.scrollHeight);
			}
		}
	}

	let postSeenTimeout;
	let threadSeenTimeout;

	onMount(() => {
		postSeenTimeout = setNotificationSeenTimeout({ postId: $postId });
		threadSeenTimeout = setNotificationSeenTimeout({ threadId: $postId }, config$1.REPLY_VIEWED_DELAY);
	});

	onDestroy(() => {
		clearNotificationSeenTimeout(postSeenTimeout);
		clearNotificationSeenTimeout(threadSeenTimeout);
	});

	$$result.css.add(css$19);
	let $$settled;
	let $$rendered;

	do {
		$$settled = true;
		$posts = get_store_value(posts);
		let projectTitleString = $project && $project.title && $project.title + " - " || "";
		let isArchived = $project && $project.archived || false;
		let threadLoading = $loadingPosts && (!$post || $post.id !== $postId) || !isUserLoaded($user, $userId, $loggingIn) || !$project && $loadingProjects;
		let isLoadingPosts = $loadingPosts && (!$posts || !$posts.length);

		 {
			{
				if ($postsAnchorToBottom && scrollRegion && !isLoadingPosts && $posts) {
					(async () => {
						await tick();
						scrollToBottom();
					})(); // window.setTimeout(()=> {
					// 	console.log('$postsAnchorToBottom', $postsAnchorToBottom);
					// 	scrollToBottom();
					// }, 100);
				}
			}
		}

		 {
			{
				posts = getPosts$1({ threadId: $postId, type: "threadPost" });
			}
		}

		 {
			{
				loadUsersOfItem($post);
			}
		}

		 {
			{
				loadUsersOfItemModels($posts);
			}
		}

		 {
			{
				onReplyPanelResized();
			}
		}

		$$rendered = `${($$result.head += `${($$result.title = `<title>${escape(projectTitleString)}Flock</title>`, "")}`, "")}

<div class="${["content svelte-1gwl1di", showAddPost ? "showAddPost" : ""].join(" ").trim()}">${validate_component(ScrollView, "ScrollView").$$render(
			$$result,
			{
				id: "thread",
				anchorToBottom: $postsAnchorToBottom,
				bottomOffset: replyRegionHeight,
				disabledMinHeight: showAddPost,
				scrollRegion
			},
			{
				scrollRegion: $$value => {
					scrollRegion = $$value;
					$$settled = false;
				}
			},
			{
				default: () => `${threadLoading
				? `${validate_component(ContentLoader, "ContentLoader").$$render($$result, { label: locale$1.LOADING.THREAD }, {}, {})}`
				: `${!$post || !$post.id
					? `${validate_component(ContentLoader, "ContentLoader").$$render($$result, { label: locale$1.THREAD.NOT_FOUND }, {}, {})}`
					: `

			<div class="${"scrollContent"}">${validate_component(ThreadPost, "ThreadPost").$$render($$result, { post: post$q }, {}, {})}
				
				

				<div class="${"contentContainer svelte-1gwl1di"}">
					<div class="${"postsContainer svelte-1gwl1di"}">${$posts.length
						? each($posts, post => `${validate_component(PostItem, "PostItem").$$render($$result, { post, type: "threadPost" }, {}, {})}`)
						: `${isLoadingPosts
							? `${validate_component(ContentLoader, "ContentLoader").$$render($$result, { label: locale$1.LOADING.THREAD_ITEMS }, {}, {})}`
							: `${!showAddPost
								? `${validate_component(ContentLoader, "ContentLoader").$$render($$result, {}, {}, {
										default: () => `${escape(locale$1.THREAD.NO_POSTS)}<br>
									${!isArchived
										? `be the first to <a href="${"javascript:void(0)"}">Leave a Reply</a>`
										: ``}
								`
									})}`
								: ``}`}`}</div>
					${!showAddPost && $posts && $posts.length >= DISPLAY_BOTTOM_LINK_POST_COUNT$1
						? `${validate_component(NewPostButton, "NewPostButton").$$render(
								$$result,
								{
									onClick: reply,
									icon: img$R,
									label: locale$1.THREAD.REPLY
								},
								{},
								{}
							)}
						`
						: ``}</div></div>`}`}`
			}
		)}

	${showAddPost
		? `${validate_component(EditPost, "EditPost").$$render(
				$$result,
				{
					inlineComponent: true,
					element: replyRegion
				},
				{
					element: $$value => {
						replyRegion = $$value;
						$$settled = false;
					}
				},
				{}
			)}`
		: ``}
</div>`;
	} while (!$$settled);

	return $$rendered;
});

var index$8 = /*#__PURE__*/Object.freeze({
    __proto__: null,
    'default': U5Bpostu5D
});

/* src\routes\posts\[post]\edit.svelte generated by Svelte v3.23.0 */

const Edit$1 = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let $project = get_store_value(project);
	let projectTitleString = $project && $project.title && $project.title + " - " || "";

	return `${($$result.head += `${($$result.title = `<title>${escape(projectTitleString)}Flock</title>`, "")}<style>body {
			overscroll-behavior-y: contain; /* Disables pull-to-refresh but allows overscroll effects. */
		}
	</style>`, "")}

${validate_component(ScrollView, "ScrollView").$$render($$result, {}, {}, {
		default: () => `<div class="${"content"}">${validate_component(EditPost, "EditPost").$$render($$result, {}, {}, {})}</div>
`
	})}`;
});

var edit$1 = /*#__PURE__*/Object.freeze({
    __proto__: null,
    'default': Edit$1
});

// This file is generated by Sapper — do not edit it!

const d = decodeURIComponent;

const manifest = {
	server_routes: [
		{
			// api/updateNotifications.js
			pattern: /^\/api\/updateNotifications\/?$/,
			handlers: route_0,
			params: () => ({})
		},

		{
			// api/updateConversation.js
			pattern: /^\/api\/updateConversation\/?$/,
			handlers: route_1,
			params: () => ({})
		},

		{
			// api/sendPasswordReset.js
			pattern: /^\/api\/sendPasswordReset\/?$/,
			handlers: route_2,
			params: () => ({})
		},

		{
			// api/getConversations.js
			pattern: /^\/api\/getConversations\/?$/,
			handlers: route_3,
			params: () => ({})
		},

		{
			// api/getNotifications.js
			pattern: /^\/api\/getNotifications\/?$/,
			handlers: route_4,
			params: () => ({})
		},

		{
			// api/unfollowProject.js
			pattern: /^\/api\/unfollowProject\/?$/,
			handlers: route_5,
			params: () => ({})
		},

		{
			// api/followProject.js
			pattern: /^\/api\/followProject\/?$/,
			handlers: route_6,
			params: () => ({})
		},

		{
			// api/requestUpload.js
			pattern: /^\/api\/requestUpload\/?$/,
			handlers: route_7,
			params: () => ({})
		},

		{
			// api/unlikeProject.js
			pattern: /^\/api\/unlikeProject\/?$/,
			handlers: route_8,
			params: () => ({})
		},

		{
			// api/updateProject.js
			pattern: /^\/api\/updateProject\/?$/,
			handlers: route_9,
			params: () => ({})
		},

		{
			// api/getChannels.js
			pattern: /^\/api\/getChannels\/?$/,
			handlers: route_10,
			params: () => ({})
		},

		{
			// api/getMessages.js
			pattern: /^\/api\/getMessages\/?$/,
			handlers: route_11,
			params: () => ({})
		},

		{
			// api/getProjects.js
			pattern: /^\/api\/getProjects\/?$/,
			handlers: route_12,
			params: () => ({})
		},

		{
			// api/likeProject.js
			pattern: /^\/api\/likeProject\/?$/,
			handlers: route_13,
			params: () => ({})
		},

		{
			// api/addMessage.js
			pattern: /^\/api\/addMessage\/?$/,
			handlers: route_14,
			params: () => ({})
		},

		{
			// api/addProject.js
			pattern: /^\/api\/addProject\/?$/,
			handlers: route_15,
			params: () => ({})
		},

		{
			// api/followPost.js
			pattern: /^\/api\/followPost\/?$/,
			handlers: route_16,
			params: () => ({})
		},

		{
			// api/unlikePost.js
			pattern: /^\/api\/unlikePost\/?$/,
			handlers: route_17,
			params: () => ({})
		},

		{
			// api/updatePost.js
			pattern: /^\/api\/updatePost\/?$/,
			handlers: route_18,
			params: () => ({})
		},

		{
			// api/updateUser.js
			pattern: /^\/api\/updateUser\/?$/,
			handlers: route_19,
			params: () => ({})
		},

		{
			// api/getPosts.js
			pattern: /^\/api\/getPosts\/?$/,
			handlers: route_20,
			params: () => ({})
		},

		{
			// api/getUsers.js
			pattern: /^\/api\/getUsers\/?$/,
			handlers: route_21,
			params: () => ({})
		},

		{
			// api/likePost.js
			pattern: /^\/api\/likePost\/?$/,
			handlers: route_22,
			params: () => ({})
		},

		{
			// api/addPost.js
			pattern: /^\/api\/addPost\/?$/,
			handlers: route_23,
			params: () => ({})
		},

		{
			// api/addUser.js
			pattern: /^\/api\/addUser\/?$/,
			handlers: route_24,
			params: () => ({})
		},

		{
			// api/login.js
			pattern: /^\/api\/login\/?$/,
			handlers: route_25,
			params: () => ({})
		}
	],

	pages: [
		{
			// index.svelte
			pattern: /^\/$/,
			parts: [
				{ name: "index", file: "index.svelte", component: Routes }
			]
		},

		{
			// activity.svelte
			pattern: /^\/activity\/?$/,
			parts: [
				{ name: "activity", file: "activity.svelte", component: Activity }
			]
		},

		{
			// channels/[channel].svelte
			pattern: /^\/channels\/([^\/]+?)\/?$/,
			parts: [
				null,
				{ name: "channels_$channel", file: "channels/[channel].svelte", component: U5Bchannelu5D, params: match => ({ channel: d(match[1]) }) }
			]
		},

		{
			// contacts.svelte
			pattern: /^\/contacts\/?$/,
			parts: [
				{ name: "contacts", file: "contacts.svelte", component: Contacts }
			]
		},

		{
			// discover/index.svelte
			pattern: /^\/discover\/?$/,
			parts: [
				{ name: "discover", file: "discover/index.svelte", component: Discover_1 }
			]
		},

		{
			// messages/index.svelte
			pattern: /^\/messages\/?$/,
			parts: [
				{ name: "messages", file: "messages/index.svelte", component: Messages }
			]
		},

		{
			// messages/[conversation].svelte
			pattern: /^\/messages\/([^\/]+?)\/?$/,
			parts: [
				null,
				{ name: "messages_$conversation", file: "messages/[conversation].svelte", component: U5Bconversationu5D, params: match => ({ conversation: d(match[1]) }) }
			]
		},

		{
			// projects/index.svelte
			pattern: /^\/projects\/?$/,
			parts: [
				{ name: "projects", file: "projects/index.svelte", component: Projects }
			]
		},

		{
			// projects/archive.svelte
			pattern: /^\/projects\/archive\/?$/,
			parts: [
				null,
				{ name: "projects_archive", file: "projects/archive.svelte", component: Archive }
			]
		},

		{
			// projects/new.svelte
			pattern: /^\/projects\/new\/?$/,
			parts: [
				null,
				{ name: "projects_new", file: "projects/new.svelte", component: New }
			]
		},

		{
			// projects/[project]/index.svelte
			pattern: /^\/projects\/([^\/]+?)\/?$/,
			parts: [
				null,
				{ name: "projects_$project", file: "projects/[project]/index.svelte", component: U5Bprojectu5D, params: match => ({ project: d(match[1]) }) }
			]
		},

		{
			// projects/[project]/followers.svelte
			pattern: /^\/projects\/([^\/]+?)\/followers\/?$/,
			parts: [
				null,
				null,
				{ name: "projects_$project_followers", file: "projects/[project]/followers.svelte", component: Followers, params: match => ({ project: d(match[1]) }) }
			]
		},

		{
			// projects/[project]/messages.svelte
			pattern: /^\/projects\/([^\/]+?)\/messages\/?$/,
			parts: [
				null,
				null,
				{ name: "projects_$project_messages", file: "projects/[project]/messages.svelte", component: Messages$1, params: match => ({ project: d(match[1]) }) }
			]
		},

		{
			// projects/[project]/details.svelte
			pattern: /^\/projects\/([^\/]+?)\/details\/?$/,
			parts: [
				null,
				null,
				{ name: "projects_$project_details", file: "projects/[project]/details.svelte", component: Details, params: match => ({ project: d(match[1]) }) }
			]
		},

		{
			// profile/index.svelte
			pattern: /^\/profile\/?$/,
			parts: [
				{ name: "profile", file: "profile/index.svelte", component: Profile }
			]
		},

		{
			// profile/[profile]/index.svelte
			pattern: /^\/profile\/([^\/]+?)\/?$/,
			parts: [
				null,
				{ name: "profile_$profile", file: "profile/[profile]/index.svelte", component: U5Bprofileu5D, params: match => ({ profile: d(match[1]) }) }
			]
		},

		{
			// profile/[profile]/likes.svelte
			pattern: /^\/profile\/([^\/]+?)\/likes\/?$/,
			parts: [
				null,
				null,
				{ name: "profile_$profile_likes", file: "profile/[profile]/likes.svelte", component: Likes, params: match => ({ profile: d(match[1]) }) }
			]
		},

		{
			// profile/[profile]/edit.svelte
			pattern: /^\/profile\/([^\/]+?)\/edit\/?$/,
			parts: [
				null,
				null,
				{ name: "profile_$profile_edit", file: "profile/[profile]/edit.svelte", component: Edit, params: match => ({ profile: d(match[1]) }) }
			]
		},

		{
			// posts/index.svelte
			pattern: /^\/posts\/?$/,
			parts: [
				{ name: "posts", file: "posts/index.svelte", component: Posts }
			]
		},

		{
			// posts/new.svelte
			pattern: /^\/posts\/new\/?$/,
			parts: [
				null,
				{ name: "posts_new", file: "posts/new.svelte", component: New$1 }
			]
		},

		{
			// posts/[post]/index.svelte
			pattern: /^\/posts\/([^\/]+?)\/?$/,
			parts: [
				null,
				{ name: "posts_$post", file: "posts/[post]/index.svelte", component: U5Bpostu5D, params: match => ({ post: d(match[1]) }) }
			]
		},

		{
			// posts/[post]/edit.svelte
			pattern: /^\/posts\/([^\/]+?)\/edit\/?$/,
			parts: [
				null,
				null,
				{ name: "posts_$post_edit", file: "posts/[post]/edit.svelte", component: Edit$1, params: match => ({ post: d(match[1]) }) }
			]
		}
	],

	root: Layout,
	root_preload: () => {},
	error: Error$1
};

const build_dir = "__sapper__/build";

/**
 * @param typeMap [Object] Map of MIME type -> Array[extensions]
 * @param ...
 */
function Mime() {
  this._types = Object.create(null);
  this._extensions = Object.create(null);

  for (var i = 0; i < arguments.length; i++) {
    this.define(arguments[i]);
  }

  this.define = this.define.bind(this);
  this.getType = this.getType.bind(this);
  this.getExtension = this.getExtension.bind(this);
}

/**
 * Define mimetype -> extension mappings.  Each key is a mime-type that maps
 * to an array of extensions associated with the type.  The first extension is
 * used as the default extension for the type.
 *
 * e.g. mime.define({'audio/ogg', ['oga', 'ogg', 'spx']});
 *
 * If a type declares an extension that has already been defined, an error will
 * be thrown.  To suppress this error and force the extension to be associated
 * with the new type, pass `force`=true.  Alternatively, you may prefix the
 * extension with "*" to map the type to extension, without mapping the
 * extension to the type.
 *
 * e.g. mime.define({'audio/wav', ['wav']}, {'audio/x-wav', ['*wav']});
 *
 *
 * @param map (Object) type definitions
 * @param force (Boolean) if true, force overriding of existing definitions
 */
Mime.prototype.define = function(typeMap, force) {
  for (var type in typeMap) {
    var extensions = typeMap[type].map(function(t) {return t.toLowerCase()});
    type = type.toLowerCase();

    for (var i = 0; i < extensions.length; i++) {
      var ext = extensions[i];

      // '*' prefix = not the preferred type for this extension.  So fixup the
      // extension, and skip it.
      if (ext[0] == '*') {
        continue;
      }

      if (!force && (ext in this._types)) {
        throw new Error(
          'Attempt to change mapping for "' + ext +
          '" extension from "' + this._types[ext] + '" to "' + type +
          '". Pass `force=true` to allow this, otherwise remove "' + ext +
          '" from the list of extensions for "' + type + '".'
        );
      }

      this._types[ext] = type;
    }

    // Use first extension as default
    if (force || !this._extensions[type]) {
      var ext = extensions[0];
      this._extensions[type] = (ext[0] != '*') ? ext : ext.substr(1);
    }
  }
};

/**
 * Lookup a mime type based on extension
 */
Mime.prototype.getType = function(path) {
  path = String(path);
  var last = path.replace(/^.*[/\\]/, '').toLowerCase();
  var ext = last.replace(/^.*\./, '').toLowerCase();

  var hasPath = last.length < path.length;
  var hasDot = ext.length < last.length - 1;

  return (hasDot || !hasPath) && this._types[ext] || null;
};

/**
 * Return file extension associated with a mime type
 */
Mime.prototype.getExtension = function(type) {
  type = /^\s*([^;\s]*)/.test(type) && RegExp.$1;
  return type && this._extensions[type.toLowerCase()] || null;
};

var Mime_1 = Mime;

var standard = {"application/andrew-inset":["ez"],"application/applixware":["aw"],"application/atom+xml":["atom"],"application/atomcat+xml":["atomcat"],"application/atomsvc+xml":["atomsvc"],"application/bdoc":["bdoc"],"application/ccxml+xml":["ccxml"],"application/cdmi-capability":["cdmia"],"application/cdmi-container":["cdmic"],"application/cdmi-domain":["cdmid"],"application/cdmi-object":["cdmio"],"application/cdmi-queue":["cdmiq"],"application/cu-seeme":["cu"],"application/dash+xml":["mpd"],"application/davmount+xml":["davmount"],"application/docbook+xml":["dbk"],"application/dssc+der":["dssc"],"application/dssc+xml":["xdssc"],"application/ecmascript":["ecma","es"],"application/emma+xml":["emma"],"application/epub+zip":["epub"],"application/exi":["exi"],"application/font-tdpfr":["pfr"],"application/geo+json":["geojson"],"application/gml+xml":["gml"],"application/gpx+xml":["gpx"],"application/gxf":["gxf"],"application/gzip":["gz"],"application/hjson":["hjson"],"application/hyperstudio":["stk"],"application/inkml+xml":["ink","inkml"],"application/ipfix":["ipfix"],"application/java-archive":["jar","war","ear"],"application/java-serialized-object":["ser"],"application/java-vm":["class"],"application/javascript":["js","mjs"],"application/json":["json","map"],"application/json5":["json5"],"application/jsonml+json":["jsonml"],"application/ld+json":["jsonld"],"application/lost+xml":["lostxml"],"application/mac-binhex40":["hqx"],"application/mac-compactpro":["cpt"],"application/mads+xml":["mads"],"application/manifest+json":["webmanifest"],"application/marc":["mrc"],"application/marcxml+xml":["mrcx"],"application/mathematica":["ma","nb","mb"],"application/mathml+xml":["mathml"],"application/mbox":["mbox"],"application/mediaservercontrol+xml":["mscml"],"application/metalink+xml":["metalink"],"application/metalink4+xml":["meta4"],"application/mets+xml":["mets"],"application/mods+xml":["mods"],"application/mp21":["m21","mp21"],"application/mp4":["mp4s","m4p"],"application/msword":["doc","dot"],"application/mxf":["mxf"],"application/n-quads":["nq"],"application/n-triples":["nt"],"application/octet-stream":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"],"application/oda":["oda"],"application/oebps-package+xml":["opf"],"application/ogg":["ogx"],"application/omdoc+xml":["omdoc"],"application/onenote":["onetoc","onetoc2","onetmp","onepkg"],"application/oxps":["oxps"],"application/patch-ops-error+xml":["xer"],"application/pdf":["pdf"],"application/pgp-encrypted":["pgp"],"application/pgp-signature":["asc","sig"],"application/pics-rules":["prf"],"application/pkcs10":["p10"],"application/pkcs7-mime":["p7m","p7c"],"application/pkcs7-signature":["p7s"],"application/pkcs8":["p8"],"application/pkix-attr-cert":["ac"],"application/pkix-cert":["cer"],"application/pkix-crl":["crl"],"application/pkix-pkipath":["pkipath"],"application/pkixcmp":["pki"],"application/pls+xml":["pls"],"application/postscript":["ai","eps","ps"],"application/pskc+xml":["pskcxml"],"application/raml+yaml":["raml"],"application/rdf+xml":["rdf","owl"],"application/reginfo+xml":["rif"],"application/relax-ng-compact-syntax":["rnc"],"application/resource-lists+xml":["rl"],"application/resource-lists-diff+xml":["rld"],"application/rls-services+xml":["rs"],"application/rpki-ghostbusters":["gbr"],"application/rpki-manifest":["mft"],"application/rpki-roa":["roa"],"application/rsd+xml":["rsd"],"application/rss+xml":["rss"],"application/rtf":["rtf"],"application/sbml+xml":["sbml"],"application/scvp-cv-request":["scq"],"application/scvp-cv-response":["scs"],"application/scvp-vp-request":["spq"],"application/scvp-vp-response":["spp"],"application/sdp":["sdp"],"application/set-payment-initiation":["setpay"],"application/set-registration-initiation":["setreg"],"application/shf+xml":["shf"],"application/sieve":["siv","sieve"],"application/smil+xml":["smi","smil"],"application/sparql-query":["rq"],"application/sparql-results+xml":["srx"],"application/srgs":["gram"],"application/srgs+xml":["grxml"],"application/sru+xml":["sru"],"application/ssdl+xml":["ssdl"],"application/ssml+xml":["ssml"],"application/tei+xml":["tei","teicorpus"],"application/thraud+xml":["tfi"],"application/timestamped-data":["tsd"],"application/voicexml+xml":["vxml"],"application/wasm":["wasm"],"application/widget":["wgt"],"application/winhlp":["hlp"],"application/wsdl+xml":["wsdl"],"application/wspolicy+xml":["wspolicy"],"application/xaml+xml":["xaml"],"application/xcap-diff+xml":["xdf"],"application/xenc+xml":["xenc"],"application/xhtml+xml":["xhtml","xht"],"application/xml":["xml","xsl","xsd","rng"],"application/xml-dtd":["dtd"],"application/xop+xml":["xop"],"application/xproc+xml":["xpl"],"application/xslt+xml":["xslt"],"application/xspf+xml":["xspf"],"application/xv+xml":["mxml","xhvml","xvml","xvm"],"application/yang":["yang"],"application/yin+xml":["yin"],"application/zip":["zip"],"audio/3gpp":["*3gpp"],"audio/adpcm":["adp"],"audio/basic":["au","snd"],"audio/midi":["mid","midi","kar","rmi"],"audio/mp3":["*mp3"],"audio/mp4":["m4a","mp4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx"],"audio/s3m":["s3m"],"audio/silk":["sil"],"audio/wav":["wav"],"audio/wave":["*wav"],"audio/webm":["weba"],"audio/xm":["xm"],"font/collection":["ttc"],"font/otf":["otf"],"font/ttf":["ttf"],"font/woff":["woff"],"font/woff2":["woff2"],"image/aces":["exr"],"image/apng":["apng"],"image/bmp":["bmp"],"image/cgm":["cgm"],"image/dicom-rle":["drle"],"image/emf":["emf"],"image/fits":["fits"],"image/g3fax":["g3"],"image/gif":["gif"],"image/heic":["heic"],"image/heic-sequence":["heics"],"image/heif":["heif"],"image/heif-sequence":["heifs"],"image/ief":["ief"],"image/jls":["jls"],"image/jp2":["jp2","jpg2"],"image/jpeg":["jpeg","jpg","jpe"],"image/jpm":["jpm"],"image/jpx":["jpx","jpf"],"image/jxr":["jxr"],"image/ktx":["ktx"],"image/png":["png"],"image/sgi":["sgi"],"image/svg+xml":["svg","svgz"],"image/t38":["t38"],"image/tiff":["tif","tiff"],"image/tiff-fx":["tfx"],"image/webp":["webp"],"image/wmf":["wmf"],"message/disposition-notification":["disposition-notification"],"message/global":["u8msg"],"message/global-delivery-status":["u8dsn"],"message/global-disposition-notification":["u8mdn"],"message/global-headers":["u8hdr"],"message/rfc822":["eml","mime"],"model/3mf":["3mf"],"model/gltf+json":["gltf"],"model/gltf-binary":["glb"],"model/iges":["igs","iges"],"model/mesh":["msh","mesh","silo"],"model/stl":["stl"],"model/vrml":["wrl","vrml"],"model/x3d+binary":["*x3db","x3dbz"],"model/x3d+fastinfoset":["x3db"],"model/x3d+vrml":["*x3dv","x3dvz"],"model/x3d+xml":["x3d","x3dz"],"model/x3d-vrml":["x3dv"],"text/cache-manifest":["appcache","manifest"],"text/calendar":["ics","ifb"],"text/coffeescript":["coffee","litcoffee"],"text/css":["css"],"text/csv":["csv"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/jsx":["jsx"],"text/less":["less"],"text/markdown":["markdown","md"],"text/mathml":["mml"],"text/mdx":["mdx"],"text/n3":["n3"],"text/plain":["txt","text","conf","def","list","log","in","ini"],"text/richtext":["rtx"],"text/rtf":["*rtf"],"text/sgml":["sgml","sgm"],"text/shex":["shex"],"text/slim":["slim","slm"],"text/stylus":["stylus","styl"],"text/tab-separated-values":["tsv"],"text/troff":["t","tr","roff","man","me","ms"],"text/turtle":["ttl"],"text/uri-list":["uri","uris","urls"],"text/vcard":["vcard"],"text/vtt":["vtt"],"text/xml":["*xml"],"text/yaml":["yaml","yml"],"video/3gpp":["3gp","3gpp"],"video/3gpp2":["3g2"],"video/h261":["h261"],"video/h263":["h263"],"video/h264":["h264"],"video/jpeg":["jpgv"],"video/jpm":["*jpm","jpgm"],"video/mj2":["mj2","mjp2"],"video/mp2t":["ts"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/webm":["webm"]};

var lite = new Mime_1(standard);

function get_server_route_handler(routes) {
	async function handle_route(route, req, res, next) {
		req.params = route.params(route.pattern.exec(req.path));

		const method = req.method.toLowerCase();
		// 'delete' cannot be exported from a module because it is a keyword,
		// so check for 'del' instead
		const method_export = method === 'delete' ? 'del' : method;
		const handle_method = route.handlers[method_export];
		if (handle_method) {
			if (process.env.SAPPER_EXPORT) {
				const { write, end, setHeader } = res;
				const chunks = [];
				const headers = {};

				// intercept data so that it can be exported
				res.write = function(chunk) {
					chunks.push(Buffer.from(chunk));
					write.apply(res, arguments);
				};

				res.setHeader = function(name, value) {
					headers[name.toLowerCase()] = value;
					setHeader.apply(res, arguments);
				};

				res.end = function(chunk) {
					if (chunk) chunks.push(Buffer.from(chunk));
					end.apply(res, arguments);

					process.send({
						__sapper__: true,
						event: 'file',
						url: req.url,
						method: req.method,
						status: res.statusCode,
						type: headers['content-type'],
						body: Buffer.concat(chunks).toString()
					});
				};
			}

			const handle_next = (err) => {
				if (err) {
					res.statusCode = 500;
					res.end(err.message);
				} else {
					process.nextTick(next);
				}
			};

			try {
				await handle_method(req, res, handle_next);
			} catch (err) {
				console.error(err);
				handle_next(err);
			}
		} else {
			// no matching handler for method
			process.nextTick(next);
		}
	}

	return function find_route(req, res, next) {
		for (const route of routes) {
			if (route.pattern.test(req.path)) {
				handle_route(route, req, res, next);
				return;
			}
		}

		next();
	};
}

/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */

/**
 * Module exports.
 * @public
 */

var parse_1 = parse;
var serialize_1 = serialize;

/**
 * Module variables.
 * @private
 */

var decode = decodeURIComponent;
var encode = encodeURIComponent;
var pairSplitRegExp = /; */;

/**
 * RegExp to match field-content in RFC 7230 sec 3.2
 *
 * field-content = field-vchar [ 1*( SP / HTAB ) field-vchar ]
 * field-vchar   = VCHAR / obs-text
 * obs-text      = %x80-FF
 */

var fieldContentRegExp = /^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;

/**
 * Parse a cookie header.
 *
 * Parse the given cookie header string into an object
 * The object has the various cookies as keys(names) => values
 *
 * @param {string} str
 * @param {object} [options]
 * @return {object}
 * @public
 */

function parse(str, options) {
  if (typeof str !== 'string') {
    throw new TypeError('argument str must be a string');
  }

  var obj = {};
  var opt = options || {};
  var pairs = str.split(pairSplitRegExp);
  var dec = opt.decode || decode;

  for (var i = 0; i < pairs.length; i++) {
    var pair = pairs[i];
    var eq_idx = pair.indexOf('=');

    // skip things that don't look like key=value
    if (eq_idx < 0) {
      continue;
    }

    var key = pair.substr(0, eq_idx).trim();
    var val = pair.substr(++eq_idx, pair.length).trim();

    // quoted values
    if ('"' == val[0]) {
      val = val.slice(1, -1);
    }

    // only assign once
    if (undefined == obj[key]) {
      obj[key] = tryDecode(val, dec);
    }
  }

  return obj;
}

/**
 * Serialize data into a cookie header.
 *
 * Serialize the a name value pair into a cookie string suitable for
 * http headers. An optional options object specified cookie parameters.
 *
 * serialize('foo', 'bar', { httpOnly: true })
 *   => "foo=bar; httpOnly"
 *
 * @param {string} name
 * @param {string} val
 * @param {object} [options]
 * @return {string}
 * @public
 */

function serialize(name, val, options) {
  var opt = options || {};
  var enc = opt.encode || encode;

  if (typeof enc !== 'function') {
    throw new TypeError('option encode is invalid');
  }

  if (!fieldContentRegExp.test(name)) {
    throw new TypeError('argument name is invalid');
  }

  var value = enc(val);

  if (value && !fieldContentRegExp.test(value)) {
    throw new TypeError('argument val is invalid');
  }

  var str = name + '=' + value;

  if (null != opt.maxAge) {
    var maxAge = opt.maxAge - 0;
    if (isNaN(maxAge)) throw new Error('maxAge should be a Number');
    str += '; Max-Age=' + Math.floor(maxAge);
  }

  if (opt.domain) {
    if (!fieldContentRegExp.test(opt.domain)) {
      throw new TypeError('option domain is invalid');
    }

    str += '; Domain=' + opt.domain;
  }

  if (opt.path) {
    if (!fieldContentRegExp.test(opt.path)) {
      throw new TypeError('option path is invalid');
    }

    str += '; Path=' + opt.path;
  }

  if (opt.expires) {
    if (typeof opt.expires.toUTCString !== 'function') {
      throw new TypeError('option expires is invalid');
    }

    str += '; Expires=' + opt.expires.toUTCString();
  }

  if (opt.httpOnly) {
    str += '; HttpOnly';
  }

  if (opt.secure) {
    str += '; Secure';
  }

  if (opt.sameSite) {
    var sameSite = typeof opt.sameSite === 'string'
      ? opt.sameSite.toLowerCase() : opt.sameSite;

    switch (sameSite) {
      case true:
        str += '; SameSite=Strict';
        break;
      case 'lax':
        str += '; SameSite=Lax';
        break;
      case 'strict':
        str += '; SameSite=Strict';
        break;
      case 'none':
        str += '; SameSite=None';
        break;
      default:
        throw new TypeError('option sameSite is invalid');
    }
  }

  return str;
}

/**
 * Try decoding a string using a decoding function.
 *
 * @param {string} str
 * @param {function} decode
 * @private
 */

function tryDecode(str, decode) {
  try {
    return decode(str);
  } catch (e) {
    return str;
  }
}

var cookie = {
	parse: parse_1,
	serialize: serialize_1
};

var chars = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_$';
var unsafeChars = /[<>\b\f\n\r\t\0\u2028\u2029]/g;
var reserved = /^(?:do|if|in|for|int|let|new|try|var|byte|case|char|else|enum|goto|long|this|void|with|await|break|catch|class|const|final|float|short|super|throw|while|yield|delete|double|export|import|native|return|switch|throws|typeof|boolean|default|extends|finally|package|private|abstract|continue|debugger|function|volatile|interface|protected|transient|implements|instanceof|synchronized)$/;
var escaped$1 = {
    '<': '\\u003C',
    '>': '\\u003E',
    '/': '\\u002F',
    '\\': '\\\\',
    '\b': '\\b',
    '\f': '\\f',
    '\n': '\\n',
    '\r': '\\r',
    '\t': '\\t',
    '\0': '\\0',
    '\u2028': '\\u2028',
    '\u2029': '\\u2029'
};
var objectProtoOwnPropertyNames = Object.getOwnPropertyNames(Object.prototype).sort().join('\0');
function devalue(value) {
    var counts = new Map();
    function walk(thing) {
        if (typeof thing === 'function') {
            throw new Error("Cannot stringify a function");
        }
        if (counts.has(thing)) {
            counts.set(thing, counts.get(thing) + 1);
            return;
        }
        counts.set(thing, 1);
        if (!isPrimitive(thing)) {
            var type = getType(thing);
            switch (type) {
                case 'Number':
                case 'String':
                case 'Boolean':
                case 'Date':
                case 'RegExp':
                    return;
                case 'Array':
                    thing.forEach(walk);
                    break;
                case 'Set':
                case 'Map':
                    Array.from(thing).forEach(walk);
                    break;
                default:
                    var proto = Object.getPrototypeOf(thing);
                    if (proto !== Object.prototype &&
                        proto !== null &&
                        Object.getOwnPropertyNames(proto).sort().join('\0') !== objectProtoOwnPropertyNames) {
                        throw new Error("Cannot stringify arbitrary non-POJOs");
                    }
                    if (Object.getOwnPropertySymbols(thing).length > 0) {
                        throw new Error("Cannot stringify POJOs with symbolic keys");
                    }
                    Object.keys(thing).forEach(function (key) { return walk(thing[key]); });
            }
        }
    }
    walk(value);
    var names = new Map();
    Array.from(counts)
        .filter(function (entry) { return entry[1] > 1; })
        .sort(function (a, b) { return b[1] - a[1]; })
        .forEach(function (entry, i) {
        names.set(entry[0], getName(i));
    });
    function stringify(thing) {
        if (names.has(thing)) {
            return names.get(thing);
        }
        if (isPrimitive(thing)) {
            return stringifyPrimitive(thing);
        }
        var type = getType(thing);
        switch (type) {
            case 'Number':
            case 'String':
            case 'Boolean':
                return "Object(" + stringify(thing.valueOf()) + ")";
            case 'RegExp':
                return thing.toString();
            case 'Date':
                return "new Date(" + thing.getTime() + ")";
            case 'Array':
                var members = thing.map(function (v, i) { return i in thing ? stringify(v) : ''; });
                var tail = thing.length === 0 || (thing.length - 1 in thing) ? '' : ',';
                return "[" + members.join(',') + tail + "]";
            case 'Set':
            case 'Map':
                return "new " + type + "([" + Array.from(thing).map(stringify).join(',') + "])";
            default:
                var obj = "{" + Object.keys(thing).map(function (key) { return safeKey(key) + ":" + stringify(thing[key]); }).join(',') + "}";
                var proto = Object.getPrototypeOf(thing);
                if (proto === null) {
                    return Object.keys(thing).length > 0
                        ? "Object.assign(Object.create(null)," + obj + ")"
                        : "Object.create(null)";
                }
                return obj;
        }
    }
    var str = stringify(value);
    if (names.size) {
        var params_1 = [];
        var statements_1 = [];
        var values_1 = [];
        names.forEach(function (name, thing) {
            params_1.push(name);
            if (isPrimitive(thing)) {
                values_1.push(stringifyPrimitive(thing));
                return;
            }
            var type = getType(thing);
            switch (type) {
                case 'Number':
                case 'String':
                case 'Boolean':
                    values_1.push("Object(" + stringify(thing.valueOf()) + ")");
                    break;
                case 'RegExp':
                    values_1.push(thing.toString());
                    break;
                case 'Date':
                    values_1.push("new Date(" + thing.getTime() + ")");
                    break;
                case 'Array':
                    values_1.push("Array(" + thing.length + ")");
                    thing.forEach(function (v, i) {
                        statements_1.push(name + "[" + i + "]=" + stringify(v));
                    });
                    break;
                case 'Set':
                    values_1.push("new Set");
                    statements_1.push(name + "." + Array.from(thing).map(function (v) { return "add(" + stringify(v) + ")"; }).join('.'));
                    break;
                case 'Map':
                    values_1.push("new Map");
                    statements_1.push(name + "." + Array.from(thing).map(function (_a) {
                        var k = _a[0], v = _a[1];
                        return "set(" + stringify(k) + ", " + stringify(v) + ")";
                    }).join('.'));
                    break;
                default:
                    values_1.push(Object.getPrototypeOf(thing) === null ? 'Object.create(null)' : '{}');
                    Object.keys(thing).forEach(function (key) {
                        statements_1.push("" + name + safeProp(key) + "=" + stringify(thing[key]));
                    });
            }
        });
        statements_1.push("return " + str);
        return "(function(" + params_1.join(',') + "){" + statements_1.join(';') + "}(" + values_1.join(',') + "))";
    }
    else {
        return str;
    }
}
function getName(num) {
    var name = '';
    do {
        name = chars[num % chars.length] + name;
        num = ~~(num / chars.length) - 1;
    } while (num >= 0);
    return reserved.test(name) ? name + "_" : name;
}
function isPrimitive(thing) {
    return Object(thing) !== thing;
}
function stringifyPrimitive(thing) {
    if (typeof thing === 'string')
        return stringifyString(thing);
    if (thing === void 0)
        return 'void 0';
    if (thing === 0 && 1 / thing < 0)
        return '-0';
    var str = String(thing);
    if (typeof thing === 'number')
        return str.replace(/^(-)?0\./, '$1.');
    return str;
}
function getType(thing) {
    return Object.prototype.toString.call(thing).slice(8, -1);
}
function escapeUnsafeChar(c) {
    return escaped$1[c] || c;
}
function escapeUnsafeChars(str) {
    return str.replace(unsafeChars, escapeUnsafeChar);
}
function safeKey(key) {
    return /^[_$a-zA-Z][_$a-zA-Z0-9]*$/.test(key) ? key : escapeUnsafeChars(JSON.stringify(key));
}
function safeProp(key) {
    return /^[_$a-zA-Z][_$a-zA-Z0-9]*$/.test(key) ? "." + key : "[" + escapeUnsafeChars(JSON.stringify(key)) + "]";
}
function stringifyString(str) {
    var result = '"';
    for (var i = 0; i < str.length; i += 1) {
        var char = str.charAt(i);
        var code = char.charCodeAt(0);
        if (char === '"') {
            result += '\\"';
        }
        else if (char in escaped$1) {
            result += escaped$1[char];
        }
        else if (code >= 0xd800 && code <= 0xdfff) {
            var next = str.charCodeAt(i + 1);
            // If this is the beginning of a [high, low] surrogate pair,
            // add the next two characters, otherwise escape
            if (code <= 0xdbff && (next >= 0xdc00 && next <= 0xdfff)) {
                result += char + str[++i];
            }
            else {
                result += "\\u" + code.toString(16).toUpperCase();
            }
        }
        else {
            result += char;
        }
    }
    result += '"';
    return result;
}

// Based on https://github.com/tmpvar/jsdom/blob/aa85b2abf07766ff7bf5c1f6daafb3726f2f2db5/lib/jsdom/living/blob.js

// fix for "Readable" isn't a named export issue
const Readable = Stream.Readable;

const BUFFER = Symbol('buffer');
const TYPE = Symbol('type');

class Blob$1 {
	constructor() {
		this[TYPE] = '';

		const blobParts = arguments[0];
		const options = arguments[1];

		const buffers = [];
		let size = 0;

		if (blobParts) {
			const a = blobParts;
			const length = Number(a.length);
			for (let i = 0; i < length; i++) {
				const element = a[i];
				let buffer;
				if (element instanceof Buffer) {
					buffer = element;
				} else if (ArrayBuffer.isView(element)) {
					buffer = Buffer.from(element.buffer, element.byteOffset, element.byteLength);
				} else if (element instanceof ArrayBuffer) {
					buffer = Buffer.from(element);
				} else if (element instanceof Blob$1) {
					buffer = element[BUFFER];
				} else {
					buffer = Buffer.from(typeof element === 'string' ? element : String(element));
				}
				size += buffer.length;
				buffers.push(buffer);
			}
		}

		this[BUFFER] = Buffer.concat(buffers);

		let type = options && options.type !== undefined && String(options.type).toLowerCase();
		if (type && !/[^\u0020-\u007E]/.test(type)) {
			this[TYPE] = type;
		}
	}
	get size() {
		return this[BUFFER].length;
	}
	get type() {
		return this[TYPE];
	}
	text() {
		return Promise.resolve(this[BUFFER].toString());
	}
	arrayBuffer() {
		const buf = this[BUFFER];
		const ab = buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);
		return Promise.resolve(ab);
	}
	stream() {
		const readable = new Readable();
		readable._read = function () {};
		readable.push(this[BUFFER]);
		readable.push(null);
		return readable;
	}
	toString() {
		return '[object Blob]';
	}
	slice() {
		const size = this.size;

		const start = arguments[0];
		const end = arguments[1];
		let relativeStart, relativeEnd;
		if (start === undefined) {
			relativeStart = 0;
		} else if (start < 0) {
			relativeStart = Math.max(size + start, 0);
		} else {
			relativeStart = Math.min(start, size);
		}
		if (end === undefined) {
			relativeEnd = size;
		} else if (end < 0) {
			relativeEnd = Math.max(size + end, 0);
		} else {
			relativeEnd = Math.min(end, size);
		}
		const span = Math.max(relativeEnd - relativeStart, 0);

		const buffer = this[BUFFER];
		const slicedBuffer = buffer.slice(relativeStart, relativeStart + span);
		const blob = new Blob$1([], { type: arguments[2] });
		blob[BUFFER] = slicedBuffer;
		return blob;
	}
}

Object.defineProperties(Blob$1.prototype, {
	size: { enumerable: true },
	type: { enumerable: true },
	slice: { enumerable: true }
});

Object.defineProperty(Blob$1.prototype, Symbol.toStringTag, {
	value: 'Blob',
	writable: false,
	enumerable: false,
	configurable: true
});

/**
 * fetch-error.js
 *
 * FetchError interface for operational errors
 */

/**
 * Create FetchError instance
 *
 * @param   String      message      Error message for human
 * @param   String      type         Error type for machine
 * @param   String      systemError  For Node.js system error
 * @return  FetchError
 */
function FetchError(message, type, systemError) {
  Error.call(this, message);

  this.message = message;
  this.type = type;

  // when err.type is `system`, err.code contains system error code
  if (systemError) {
    this.code = this.errno = systemError.code;
  }

  // hide custom error implementation details from end-users
  Error.captureStackTrace(this, this.constructor);
}

FetchError.prototype = Object.create(Error.prototype);
FetchError.prototype.constructor = FetchError;
FetchError.prototype.name = 'FetchError';

let convert;
try {
	convert = require('encoding').convert;
} catch (e) {}

const INTERNALS = Symbol('Body internals');

// fix an issue where "PassThrough" isn't a named export for node <10
const PassThrough = Stream.PassThrough;

/**
 * Body mixin
 *
 * Ref: https://fetch.spec.whatwg.org/#body
 *
 * @param   Stream  body  Readable stream
 * @param   Object  opts  Response options
 * @return  Void
 */
function Body(body) {
	var _this = this;

	var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
	    _ref$size = _ref.size;

	let size = _ref$size === undefined ? 0 : _ref$size;
	var _ref$timeout = _ref.timeout;
	let timeout = _ref$timeout === undefined ? 0 : _ref$timeout;

	if (body == null) {
		// body is undefined or null
		body = null;
	} else if (isURLSearchParams(body)) {
		// body is a URLSearchParams
		body = Buffer.from(body.toString());
	} else if (isBlob(body)) ; else if (Buffer.isBuffer(body)) ; else if (Object.prototype.toString.call(body) === '[object ArrayBuffer]') {
		// body is ArrayBuffer
		body = Buffer.from(body);
	} else if (ArrayBuffer.isView(body)) {
		// body is ArrayBufferView
		body = Buffer.from(body.buffer, body.byteOffset, body.byteLength);
	} else if (body instanceof Stream) ; else {
		// none of the above
		// coerce to string then buffer
		body = Buffer.from(String(body));
	}
	this[INTERNALS] = {
		body,
		disturbed: false,
		error: null
	};
	this.size = size;
	this.timeout = timeout;

	if (body instanceof Stream) {
		body.on('error', function (err) {
			const error = err.name === 'AbortError' ? err : new FetchError(`Invalid response body while trying to fetch ${_this.url}: ${err.message}`, 'system', err);
			_this[INTERNALS].error = error;
		});
	}
}

Body.prototype = {
	get body() {
		return this[INTERNALS].body;
	},

	get bodyUsed() {
		return this[INTERNALS].disturbed;
	},

	/**
  * Decode response as ArrayBuffer
  *
  * @return  Promise
  */
	arrayBuffer() {
		return consumeBody.call(this).then(function (buf) {
			return buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);
		});
	},

	/**
  * Return raw response as Blob
  *
  * @return Promise
  */
	blob() {
		let ct = this.headers && this.headers.get('content-type') || '';
		return consumeBody.call(this).then(function (buf) {
			return Object.assign(
			// Prevent copying
			new Blob$1([], {
				type: ct.toLowerCase()
			}), {
				[BUFFER]: buf
			});
		});
	},

	/**
  * Decode response as json
  *
  * @return  Promise
  */
	json() {
		var _this2 = this;

		return consumeBody.call(this).then(function (buffer) {
			try {
				return JSON.parse(buffer.toString());
			} catch (err) {
				return Body.Promise.reject(new FetchError(`invalid json response body at ${_this2.url} reason: ${err.message}`, 'invalid-json'));
			}
		});
	},

	/**
  * Decode response as text
  *
  * @return  Promise
  */
	text() {
		return consumeBody.call(this).then(function (buffer) {
			return buffer.toString();
		});
	},

	/**
  * Decode response as buffer (non-spec api)
  *
  * @return  Promise
  */
	buffer() {
		return consumeBody.call(this);
	},

	/**
  * Decode response as text, while automatically detecting the encoding and
  * trying to decode to UTF-8 (non-spec api)
  *
  * @return  Promise
  */
	textConverted() {
		var _this3 = this;

		return consumeBody.call(this).then(function (buffer) {
			return convertBody(buffer, _this3.headers);
		});
	}
};

// In browsers, all properties are enumerable.
Object.defineProperties(Body.prototype, {
	body: { enumerable: true },
	bodyUsed: { enumerable: true },
	arrayBuffer: { enumerable: true },
	blob: { enumerable: true },
	json: { enumerable: true },
	text: { enumerable: true }
});

Body.mixIn = function (proto) {
	for (const name of Object.getOwnPropertyNames(Body.prototype)) {
		// istanbul ignore else: future proof
		if (!(name in proto)) {
			const desc = Object.getOwnPropertyDescriptor(Body.prototype, name);
			Object.defineProperty(proto, name, desc);
		}
	}
};

/**
 * Consume and convert an entire Body to a Buffer.
 *
 * Ref: https://fetch.spec.whatwg.org/#concept-body-consume-body
 *
 * @return  Promise
 */
function consumeBody() {
	var _this4 = this;

	if (this[INTERNALS].disturbed) {
		return Body.Promise.reject(new TypeError(`body used already for: ${this.url}`));
	}

	this[INTERNALS].disturbed = true;

	if (this[INTERNALS].error) {
		return Body.Promise.reject(this[INTERNALS].error);
	}

	let body = this.body;

	// body is null
	if (body === null) {
		return Body.Promise.resolve(Buffer.alloc(0));
	}

	// body is blob
	if (isBlob(body)) {
		body = body.stream();
	}

	// body is buffer
	if (Buffer.isBuffer(body)) {
		return Body.Promise.resolve(body);
	}

	// istanbul ignore if: should never happen
	if (!(body instanceof Stream)) {
		return Body.Promise.resolve(Buffer.alloc(0));
	}

	// body is stream
	// get ready to actually consume the body
	let accum = [];
	let accumBytes = 0;
	let abort = false;

	return new Body.Promise(function (resolve, reject) {
		let resTimeout;

		// allow timeout on slow response body
		if (_this4.timeout) {
			resTimeout = setTimeout(function () {
				abort = true;
				reject(new FetchError(`Response timeout while trying to fetch ${_this4.url} (over ${_this4.timeout}ms)`, 'body-timeout'));
			}, _this4.timeout);
		}

		// handle stream errors
		body.on('error', function (err) {
			if (err.name === 'AbortError') {
				// if the request was aborted, reject with this Error
				abort = true;
				reject(err);
			} else {
				// other errors, such as incorrect content-encoding
				reject(new FetchError(`Invalid response body while trying to fetch ${_this4.url}: ${err.message}`, 'system', err));
			}
		});

		body.on('data', function (chunk) {
			if (abort || chunk === null) {
				return;
			}

			if (_this4.size && accumBytes + chunk.length > _this4.size) {
				abort = true;
				reject(new FetchError(`content size at ${_this4.url} over limit: ${_this4.size}`, 'max-size'));
				return;
			}

			accumBytes += chunk.length;
			accum.push(chunk);
		});

		body.on('end', function () {
			if (abort) {
				return;
			}

			clearTimeout(resTimeout);

			try {
				resolve(Buffer.concat(accum, accumBytes));
			} catch (err) {
				// handle streams that have accumulated too much data (issue #414)
				reject(new FetchError(`Could not create Buffer from response body for ${_this4.url}: ${err.message}`, 'system', err));
			}
		});
	});
}

/**
 * Detect buffer encoding and convert to target encoding
 * ref: http://www.w3.org/TR/2011/WD-html5-20110113/parsing.html#determining-the-character-encoding
 *
 * @param   Buffer  buffer    Incoming buffer
 * @param   String  encoding  Target encoding
 * @return  String
 */
function convertBody(buffer, headers) {
	if (typeof convert !== 'function') {
		throw new Error('The package `encoding` must be installed to use the textConverted() function');
	}

	const ct = headers.get('content-type');
	let charset = 'utf-8';
	let res, str;

	// header
	if (ct) {
		res = /charset=([^;]*)/i.exec(ct);
	}

	// no charset in content type, peek at response body for at most 1024 bytes
	str = buffer.slice(0, 1024).toString();

	// html5
	if (!res && str) {
		res = /<meta.+?charset=(['"])(.+?)\1/i.exec(str);
	}

	// html4
	if (!res && str) {
		res = /<meta[\s]+?http-equiv=(['"])content-type\1[\s]+?content=(['"])(.+?)\2/i.exec(str);

		if (res) {
			res = /charset=(.*)/i.exec(res.pop());
		}
	}

	// xml
	if (!res && str) {
		res = /<\?xml.+?encoding=(['"])(.+?)\1/i.exec(str);
	}

	// found charset
	if (res) {
		charset = res.pop();

		// prevent decode issues when sites use incorrect encoding
		// ref: https://hsivonen.fi/encoding-menu/
		if (charset === 'gb2312' || charset === 'gbk') {
			charset = 'gb18030';
		}
	}

	// turn raw buffers into a single utf-8 buffer
	return convert(buffer, 'UTF-8', charset).toString();
}

/**
 * Detect a URLSearchParams object
 * ref: https://github.com/bitinn/node-fetch/issues/296#issuecomment-307598143
 *
 * @param   Object  obj     Object to detect by type or brand
 * @return  String
 */
function isURLSearchParams(obj) {
	// Duck-typing as a necessary condition.
	if (typeof obj !== 'object' || typeof obj.append !== 'function' || typeof obj.delete !== 'function' || typeof obj.get !== 'function' || typeof obj.getAll !== 'function' || typeof obj.has !== 'function' || typeof obj.set !== 'function') {
		return false;
	}

	// Brand-checking and more duck-typing as optional condition.
	return obj.constructor.name === 'URLSearchParams' || Object.prototype.toString.call(obj) === '[object URLSearchParams]' || typeof obj.sort === 'function';
}

/**
 * Check if `obj` is a W3C `Blob` object (which `File` inherits from)
 * @param  {*} obj
 * @return {boolean}
 */
function isBlob(obj) {
	return typeof obj === 'object' && typeof obj.arrayBuffer === 'function' && typeof obj.type === 'string' && typeof obj.stream === 'function' && typeof obj.constructor === 'function' && typeof obj.constructor.name === 'string' && /^(Blob|File)$/.test(obj.constructor.name) && /^(Blob|File)$/.test(obj[Symbol.toStringTag]);
}

/**
 * Clone body given Res/Req instance
 *
 * @param   Mixed  instance  Response or Request instance
 * @return  Mixed
 */
function clone(instance) {
	let p1, p2;
	let body = instance.body;

	// don't allow cloning a used body
	if (instance.bodyUsed) {
		throw new Error('cannot clone body after it is used');
	}

	// check that body is a stream and not form-data object
	// note: we can't clone the form-data object without having it as a dependency
	if (body instanceof Stream && typeof body.getBoundary !== 'function') {
		// tee instance body
		p1 = new PassThrough();
		p2 = new PassThrough();
		body.pipe(p1);
		body.pipe(p2);
		// set instance body to teed body and return the other teed body
		instance[INTERNALS].body = p1;
		body = p2;
	}

	return body;
}

/**
 * Performs the operation "extract a `Content-Type` value from |object|" as
 * specified in the specification:
 * https://fetch.spec.whatwg.org/#concept-bodyinit-extract
 *
 * This function assumes that instance.body is present.
 *
 * @param   Mixed  instance  Any options.body input
 */
function extractContentType(body) {
	if (body === null) {
		// body is null
		return null;
	} else if (typeof body === 'string') {
		// body is string
		return 'text/plain;charset=UTF-8';
	} else if (isURLSearchParams(body)) {
		// body is a URLSearchParams
		return 'application/x-www-form-urlencoded;charset=UTF-8';
	} else if (isBlob(body)) {
		// body is blob
		return body.type || null;
	} else if (Buffer.isBuffer(body)) {
		// body is buffer
		return null;
	} else if (Object.prototype.toString.call(body) === '[object ArrayBuffer]') {
		// body is ArrayBuffer
		return null;
	} else if (ArrayBuffer.isView(body)) {
		// body is ArrayBufferView
		return null;
	} else if (typeof body.getBoundary === 'function') {
		// detect form data input from form-data module
		return `multipart/form-data;boundary=${body.getBoundary()}`;
	} else if (body instanceof Stream) {
		// body is stream
		// can't really do much about this
		return null;
	} else {
		// Body constructor defaults other things to string
		return 'text/plain;charset=UTF-8';
	}
}

/**
 * The Fetch Standard treats this as if "total bytes" is a property on the body.
 * For us, we have to explicitly get it with a function.
 *
 * ref: https://fetch.spec.whatwg.org/#concept-body-total-bytes
 *
 * @param   Body    instance   Instance of Body
 * @return  Number?            Number of bytes, or null if not possible
 */
function getTotalBytes(instance) {
	const body = instance.body;


	if (body === null) {
		// body is null
		return 0;
	} else if (isBlob(body)) {
		return body.size;
	} else if (Buffer.isBuffer(body)) {
		// body is buffer
		return body.length;
	} else if (body && typeof body.getLengthSync === 'function') {
		// detect form data input from form-data module
		if (body._lengthRetrievers && body._lengthRetrievers.length == 0 || // 1.x
		body.hasKnownLength && body.hasKnownLength()) {
			// 2.x
			return body.getLengthSync();
		}
		return null;
	} else {
		// body is stream
		return null;
	}
}

/**
 * Write a Body to a Node.js WritableStream (e.g. http.Request) object.
 *
 * @param   Body    instance   Instance of Body
 * @return  Void
 */
function writeToStream(dest, instance) {
	const body = instance.body;


	if (body === null) {
		// body is null
		dest.end();
	} else if (isBlob(body)) {
		body.stream().pipe(dest);
	} else if (Buffer.isBuffer(body)) {
		// body is buffer
		dest.write(body);
		dest.end();
	} else {
		// body is stream
		body.pipe(dest);
	}
}

// expose Promise
Body.Promise = global.Promise;

/**
 * headers.js
 *
 * Headers class offers convenient helpers
 */

const invalidTokenRegex = /[^\^_`a-zA-Z\-0-9!#$%&'*+.|~]/;
const invalidHeaderCharRegex = /[^\t\x20-\x7e\x80-\xff]/;

function validateName(name) {
	name = `${name}`;
	if (invalidTokenRegex.test(name) || name === '') {
		throw new TypeError(`${name} is not a legal HTTP header name`);
	}
}

function validateValue(value) {
	value = `${value}`;
	if (invalidHeaderCharRegex.test(value)) {
		throw new TypeError(`${value} is not a legal HTTP header value`);
	}
}

/**
 * Find the key in the map object given a header name.
 *
 * Returns undefined if not found.
 *
 * @param   String  name  Header name
 * @return  String|Undefined
 */
function find(map, name) {
	name = name.toLowerCase();
	for (const key in map) {
		if (key.toLowerCase() === name) {
			return key;
		}
	}
	return undefined;
}

const MAP = Symbol('map');
class Headers {
	/**
  * Headers class
  *
  * @param   Object  headers  Response headers
  * @return  Void
  */
	constructor() {
		let init = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : undefined;

		this[MAP] = Object.create(null);

		if (init instanceof Headers) {
			const rawHeaders = init.raw();
			const headerNames = Object.keys(rawHeaders);

			for (const headerName of headerNames) {
				for (const value of rawHeaders[headerName]) {
					this.append(headerName, value);
				}
			}

			return;
		}

		// We don't worry about converting prop to ByteString here as append()
		// will handle it.
		if (init == null) ; else if (typeof init === 'object') {
			const method = init[Symbol.iterator];
			if (method != null) {
				if (typeof method !== 'function') {
					throw new TypeError('Header pairs must be iterable');
				}

				// sequence<sequence<ByteString>>
				// Note: per spec we have to first exhaust the lists then process them
				const pairs = [];
				for (const pair of init) {
					if (typeof pair !== 'object' || typeof pair[Symbol.iterator] !== 'function') {
						throw new TypeError('Each header pair must be iterable');
					}
					pairs.push(Array.from(pair));
				}

				for (const pair of pairs) {
					if (pair.length !== 2) {
						throw new TypeError('Each header pair must be a name/value tuple');
					}
					this.append(pair[0], pair[1]);
				}
			} else {
				// record<ByteString, ByteString>
				for (const key of Object.keys(init)) {
					const value = init[key];
					this.append(key, value);
				}
			}
		} else {
			throw new TypeError('Provided initializer must be an object');
		}
	}

	/**
  * Return combined header value given name
  *
  * @param   String  name  Header name
  * @return  Mixed
  */
	get(name) {
		name = `${name}`;
		validateName(name);
		const key = find(this[MAP], name);
		if (key === undefined) {
			return null;
		}

		return this[MAP][key].join(', ');
	}

	/**
  * Iterate over all headers
  *
  * @param   Function  callback  Executed for each item with parameters (value, name, thisArg)
  * @param   Boolean   thisArg   `this` context for callback function
  * @return  Void
  */
	forEach(callback) {
		let thisArg = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;

		let pairs = getHeaders(this);
		let i = 0;
		while (i < pairs.length) {
			var _pairs$i = pairs[i];
			const name = _pairs$i[0],
			      value = _pairs$i[1];

			callback.call(thisArg, value, name, this);
			pairs = getHeaders(this);
			i++;
		}
	}

	/**
  * Overwrite header values given name
  *
  * @param   String  name   Header name
  * @param   String  value  Header value
  * @return  Void
  */
	set(name, value) {
		name = `${name}`;
		value = `${value}`;
		validateName(name);
		validateValue(value);
		const key = find(this[MAP], name);
		this[MAP][key !== undefined ? key : name] = [value];
	}

	/**
  * Append a value onto existing header
  *
  * @param   String  name   Header name
  * @param   String  value  Header value
  * @return  Void
  */
	append(name, value) {
		name = `${name}`;
		value = `${value}`;
		validateName(name);
		validateValue(value);
		const key = find(this[MAP], name);
		if (key !== undefined) {
			this[MAP][key].push(value);
		} else {
			this[MAP][name] = [value];
		}
	}

	/**
  * Check for header name existence
  *
  * @param   String   name  Header name
  * @return  Boolean
  */
	has(name) {
		name = `${name}`;
		validateName(name);
		return find(this[MAP], name) !== undefined;
	}

	/**
  * Delete all header values given name
  *
  * @param   String  name  Header name
  * @return  Void
  */
	delete(name) {
		name = `${name}`;
		validateName(name);
		const key = find(this[MAP], name);
		if (key !== undefined) {
			delete this[MAP][key];
		}
	}

	/**
  * Return raw headers (non-spec api)
  *
  * @return  Object
  */
	raw() {
		return this[MAP];
	}

	/**
  * Get an iterator on keys.
  *
  * @return  Iterator
  */
	keys() {
		return createHeadersIterator(this, 'key');
	}

	/**
  * Get an iterator on values.
  *
  * @return  Iterator
  */
	values() {
		return createHeadersIterator(this, 'value');
	}

	/**
  * Get an iterator on entries.
  *
  * This is the default iterator of the Headers object.
  *
  * @return  Iterator
  */
	[Symbol.iterator]() {
		return createHeadersIterator(this, 'key+value');
	}
}
Headers.prototype.entries = Headers.prototype[Symbol.iterator];

Object.defineProperty(Headers.prototype, Symbol.toStringTag, {
	value: 'Headers',
	writable: false,
	enumerable: false,
	configurable: true
});

Object.defineProperties(Headers.prototype, {
	get: { enumerable: true },
	forEach: { enumerable: true },
	set: { enumerable: true },
	append: { enumerable: true },
	has: { enumerable: true },
	delete: { enumerable: true },
	keys: { enumerable: true },
	values: { enumerable: true },
	entries: { enumerable: true }
});

function getHeaders(headers) {
	let kind = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'key+value';

	const keys = Object.keys(headers[MAP]).sort();
	return keys.map(kind === 'key' ? function (k) {
		return k.toLowerCase();
	} : kind === 'value' ? function (k) {
		return headers[MAP][k].join(', ');
	} : function (k) {
		return [k.toLowerCase(), headers[MAP][k].join(', ')];
	});
}

const INTERNAL = Symbol('internal');

function createHeadersIterator(target, kind) {
	const iterator = Object.create(HeadersIteratorPrototype);
	iterator[INTERNAL] = {
		target,
		kind,
		index: 0
	};
	return iterator;
}

const HeadersIteratorPrototype = Object.setPrototypeOf({
	next() {
		// istanbul ignore if
		if (!this || Object.getPrototypeOf(this) !== HeadersIteratorPrototype) {
			throw new TypeError('Value of `this` is not a HeadersIterator');
		}

		var _INTERNAL = this[INTERNAL];
		const target = _INTERNAL.target,
		      kind = _INTERNAL.kind,
		      index = _INTERNAL.index;

		const values = getHeaders(target, kind);
		const len = values.length;
		if (index >= len) {
			return {
				value: undefined,
				done: true
			};
		}

		this[INTERNAL].index = index + 1;

		return {
			value: values[index],
			done: false
		};
	}
}, Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));

Object.defineProperty(HeadersIteratorPrototype, Symbol.toStringTag, {
	value: 'HeadersIterator',
	writable: false,
	enumerable: false,
	configurable: true
});

/**
 * Export the Headers object in a form that Node.js can consume.
 *
 * @param   Headers  headers
 * @return  Object
 */
function exportNodeCompatibleHeaders(headers) {
	const obj = Object.assign({ __proto__: null }, headers[MAP]);

	// http.request() only supports string as Host header. This hack makes
	// specifying custom Host header possible.
	const hostHeaderKey = find(headers[MAP], 'Host');
	if (hostHeaderKey !== undefined) {
		obj[hostHeaderKey] = obj[hostHeaderKey][0];
	}

	return obj;
}

/**
 * Create a Headers object from an object of headers, ignoring those that do
 * not conform to HTTP grammar productions.
 *
 * @param   Object  obj  Object of headers
 * @return  Headers
 */
function createHeadersLenient(obj) {
	const headers = new Headers();
	for (const name of Object.keys(obj)) {
		if (invalidTokenRegex.test(name)) {
			continue;
		}
		if (Array.isArray(obj[name])) {
			for (const val of obj[name]) {
				if (invalidHeaderCharRegex.test(val)) {
					continue;
				}
				if (headers[MAP][name] === undefined) {
					headers[MAP][name] = [val];
				} else {
					headers[MAP][name].push(val);
				}
			}
		} else if (!invalidHeaderCharRegex.test(obj[name])) {
			headers[MAP][name] = [obj[name]];
		}
	}
	return headers;
}

const INTERNALS$1 = Symbol('Response internals');

// fix an issue where "STATUS_CODES" aren't a named export for node <10
const STATUS_CODES = http.STATUS_CODES;

/**
 * Response class
 *
 * @param   Stream  body  Readable stream
 * @param   Object  opts  Response options
 * @return  Void
 */
class Response {
	constructor() {
		let body = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;
		let opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

		Body.call(this, body, opts);

		const status = opts.status || 200;
		const headers = new Headers(opts.headers);

		if (body != null && !headers.has('Content-Type')) {
			const contentType = extractContentType(body);
			if (contentType) {
				headers.append('Content-Type', contentType);
			}
		}

		this[INTERNALS$1] = {
			url: opts.url,
			status,
			statusText: opts.statusText || STATUS_CODES[status],
			headers,
			counter: opts.counter
		};
	}

	get url() {
		return this[INTERNALS$1].url || '';
	}

	get status() {
		return this[INTERNALS$1].status;
	}

	/**
  * Convenience property representing if the request ended normally
  */
	get ok() {
		return this[INTERNALS$1].status >= 200 && this[INTERNALS$1].status < 300;
	}

	get redirected() {
		return this[INTERNALS$1].counter > 0;
	}

	get statusText() {
		return this[INTERNALS$1].statusText;
	}

	get headers() {
		return this[INTERNALS$1].headers;
	}

	/**
  * Clone this response
  *
  * @return  Response
  */
	clone() {
		return new Response(clone(this), {
			url: this.url,
			status: this.status,
			statusText: this.statusText,
			headers: this.headers,
			ok: this.ok,
			redirected: this.redirected
		});
	}
}

Body.mixIn(Response.prototype);

Object.defineProperties(Response.prototype, {
	url: { enumerable: true },
	status: { enumerable: true },
	ok: { enumerable: true },
	redirected: { enumerable: true },
	statusText: { enumerable: true },
	headers: { enumerable: true },
	clone: { enumerable: true }
});

Object.defineProperty(Response.prototype, Symbol.toStringTag, {
	value: 'Response',
	writable: false,
	enumerable: false,
	configurable: true
});

const INTERNALS$2 = Symbol('Request internals');

// fix an issue where "format", "parse" aren't a named export for node <10
const parse_url = Url.parse;
const format_url = Url.format;

const streamDestructionSupported = 'destroy' in Stream.Readable.prototype;

/**
 * Check if a value is an instance of Request.
 *
 * @param   Mixed   input
 * @return  Boolean
 */
function isRequest(input) {
	return typeof input === 'object' && typeof input[INTERNALS$2] === 'object';
}

function isAbortSignal(signal) {
	const proto = signal && typeof signal === 'object' && Object.getPrototypeOf(signal);
	return !!(proto && proto.constructor.name === 'AbortSignal');
}

/**
 * Request class
 *
 * @param   Mixed   input  Url or Request instance
 * @param   Object  init   Custom options
 * @return  Void
 */
class Request {
	constructor(input) {
		let init = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

		let parsedURL;

		// normalize input
		if (!isRequest(input)) {
			if (input && input.href) {
				// in order to support Node.js' Url objects; though WHATWG's URL objects
				// will fall into this branch also (since their `toString()` will return
				// `href` property anyway)
				parsedURL = parse_url(input.href);
			} else {
				// coerce input to a string before attempting to parse
				parsedURL = parse_url(`${input}`);
			}
			input = {};
		} else {
			parsedURL = parse_url(input.url);
		}

		let method = init.method || input.method || 'GET';
		method = method.toUpperCase();

		if ((init.body != null || isRequest(input) && input.body !== null) && (method === 'GET' || method === 'HEAD')) {
			throw new TypeError('Request with GET/HEAD method cannot have body');
		}

		let inputBody = init.body != null ? init.body : isRequest(input) && input.body !== null ? clone(input) : null;

		Body.call(this, inputBody, {
			timeout: init.timeout || input.timeout || 0,
			size: init.size || input.size || 0
		});

		const headers = new Headers(init.headers || input.headers || {});

		if (inputBody != null && !headers.has('Content-Type')) {
			const contentType = extractContentType(inputBody);
			if (contentType) {
				headers.append('Content-Type', contentType);
			}
		}

		let signal = isRequest(input) ? input.signal : null;
		if ('signal' in init) signal = init.signal;

		if (signal != null && !isAbortSignal(signal)) {
			throw new TypeError('Expected signal to be an instanceof AbortSignal');
		}

		this[INTERNALS$2] = {
			method,
			redirect: init.redirect || input.redirect || 'follow',
			headers,
			parsedURL,
			signal
		};

		// node-fetch-only options
		this.follow = init.follow !== undefined ? init.follow : input.follow !== undefined ? input.follow : 20;
		this.compress = init.compress !== undefined ? init.compress : input.compress !== undefined ? input.compress : true;
		this.counter = init.counter || input.counter || 0;
		this.agent = init.agent || input.agent;
	}

	get method() {
		return this[INTERNALS$2].method;
	}

	get url() {
		return format_url(this[INTERNALS$2].parsedURL);
	}

	get headers() {
		return this[INTERNALS$2].headers;
	}

	get redirect() {
		return this[INTERNALS$2].redirect;
	}

	get signal() {
		return this[INTERNALS$2].signal;
	}

	/**
  * Clone this request
  *
  * @return  Request
  */
	clone() {
		return new Request(this);
	}
}

Body.mixIn(Request.prototype);

Object.defineProperty(Request.prototype, Symbol.toStringTag, {
	value: 'Request',
	writable: false,
	enumerable: false,
	configurable: true
});

Object.defineProperties(Request.prototype, {
	method: { enumerable: true },
	url: { enumerable: true },
	headers: { enumerable: true },
	redirect: { enumerable: true },
	clone: { enumerable: true },
	signal: { enumerable: true }
});

/**
 * Convert a Request to Node.js http request options.
 *
 * @param   Request  A Request instance
 * @return  Object   The options object to be passed to http.request
 */
function getNodeRequestOptions(request) {
	const parsedURL = request[INTERNALS$2].parsedURL;
	const headers = new Headers(request[INTERNALS$2].headers);

	// fetch step 1.3
	if (!headers.has('Accept')) {
		headers.set('Accept', '*/*');
	}

	// Basic fetch
	if (!parsedURL.protocol || !parsedURL.hostname) {
		throw new TypeError('Only absolute URLs are supported');
	}

	if (!/^https?:$/.test(parsedURL.protocol)) {
		throw new TypeError('Only HTTP(S) protocols are supported');
	}

	if (request.signal && request.body instanceof Stream.Readable && !streamDestructionSupported) {
		throw new Error('Cancellation of streamed requests with AbortSignal is not supported in node < 8');
	}

	// HTTP-network-or-cache fetch steps 2.4-2.7
	let contentLengthValue = null;
	if (request.body == null && /^(POST|PUT)$/i.test(request.method)) {
		contentLengthValue = '0';
	}
	if (request.body != null) {
		const totalBytes = getTotalBytes(request);
		if (typeof totalBytes === 'number') {
			contentLengthValue = String(totalBytes);
		}
	}
	if (contentLengthValue) {
		headers.set('Content-Length', contentLengthValue);
	}

	// HTTP-network-or-cache fetch step 2.11
	if (!headers.has('User-Agent')) {
		headers.set('User-Agent', 'node-fetch/1.0 (+https://github.com/bitinn/node-fetch)');
	}

	// HTTP-network-or-cache fetch step 2.15
	if (request.compress && !headers.has('Accept-Encoding')) {
		headers.set('Accept-Encoding', 'gzip,deflate');
	}

	let agent = request.agent;
	if (typeof agent === 'function') {
		agent = agent(parsedURL);
	}

	if (!headers.has('Connection') && !agent) {
		headers.set('Connection', 'close');
	}

	// HTTP-network fetch step 4.2
	// chunked encoding is handled by Node.js

	return Object.assign({}, parsedURL, {
		method: request.method,
		headers: exportNodeCompatibleHeaders(headers),
		agent
	});
}

/**
 * abort-error.js
 *
 * AbortError interface for cancelled requests
 */

/**
 * Create AbortError instance
 *
 * @param   String      message      Error message for human
 * @return  AbortError
 */
function AbortError(message) {
  Error.call(this, message);

  this.type = 'aborted';
  this.message = message;

  // hide custom error implementation details from end-users
  Error.captureStackTrace(this, this.constructor);
}

AbortError.prototype = Object.create(Error.prototype);
AbortError.prototype.constructor = AbortError;
AbortError.prototype.name = 'AbortError';

// fix an issue where "PassThrough", "resolve" aren't a named export for node <10
const PassThrough$1 = Stream.PassThrough;
const resolve_url = Url.resolve;

/**
 * Fetch function
 *
 * @param   Mixed    url   Absolute url or Request instance
 * @param   Object   opts  Fetch options
 * @return  Promise
 */
function fetch$1(url, opts) {

	// allow custom promise
	if (!fetch$1.Promise) {
		throw new Error('native promise missing, set fetch.Promise to your favorite alternative');
	}

	Body.Promise = fetch$1.Promise;

	// wrap http.request into fetch
	return new fetch$1.Promise(function (resolve, reject) {
		// build request object
		const request = new Request(url, opts);
		const options = getNodeRequestOptions(request);

		const send = (options.protocol === 'https:' ? https : http).request;
		const signal = request.signal;

		let response = null;

		const abort = function abort() {
			let error = new AbortError('The user aborted a request.');
			reject(error);
			if (request.body && request.body instanceof Stream.Readable) {
				request.body.destroy(error);
			}
			if (!response || !response.body) return;
			response.body.emit('error', error);
		};

		if (signal && signal.aborted) {
			abort();
			return;
		}

		const abortAndFinalize = function abortAndFinalize() {
			abort();
			finalize();
		};

		// send request
		const req = send(options);
		let reqTimeout;

		if (signal) {
			signal.addEventListener('abort', abortAndFinalize);
		}

		function finalize() {
			req.abort();
			if (signal) signal.removeEventListener('abort', abortAndFinalize);
			clearTimeout(reqTimeout);
		}

		if (request.timeout) {
			req.once('socket', function (socket) {
				reqTimeout = setTimeout(function () {
					reject(new FetchError(`network timeout at: ${request.url}`, 'request-timeout'));
					finalize();
				}, request.timeout);
			});
		}

		req.on('error', function (err) {
			reject(new FetchError(`request to ${request.url} failed, reason: ${err.message}`, 'system', err));
			finalize();
		});

		req.on('response', function (res) {
			clearTimeout(reqTimeout);

			const headers = createHeadersLenient(res.headers);

			// HTTP fetch step 5
			if (fetch$1.isRedirect(res.statusCode)) {
				// HTTP fetch step 5.2
				const location = headers.get('Location');

				// HTTP fetch step 5.3
				const locationURL = location === null ? null : resolve_url(request.url, location);

				// HTTP fetch step 5.5
				switch (request.redirect) {
					case 'error':
						reject(new FetchError(`redirect mode is set to error: ${request.url}`, 'no-redirect'));
						finalize();
						return;
					case 'manual':
						// node-fetch-specific step: make manual redirect a bit easier to use by setting the Location header value to the resolved URL.
						if (locationURL !== null) {
							// handle corrupted header
							try {
								headers.set('Location', locationURL);
							} catch (err) {
								// istanbul ignore next: nodejs server prevent invalid response headers, we can't test this through normal request
								reject(err);
							}
						}
						break;
					case 'follow':
						// HTTP-redirect fetch step 2
						if (locationURL === null) {
							break;
						}

						// HTTP-redirect fetch step 5
						if (request.counter >= request.follow) {
							reject(new FetchError(`maximum redirect reached at: ${request.url}`, 'max-redirect'));
							finalize();
							return;
						}

						// HTTP-redirect fetch step 6 (counter increment)
						// Create a new Request object.
						const requestOpts = {
							headers: new Headers(request.headers),
							follow: request.follow,
							counter: request.counter + 1,
							agent: request.agent,
							compress: request.compress,
							method: request.method,
							body: request.body,
							signal: request.signal,
							timeout: request.timeout
						};

						// HTTP-redirect fetch step 9
						if (res.statusCode !== 303 && request.body && getTotalBytes(request) === null) {
							reject(new FetchError('Cannot follow redirect with body being a readable stream', 'unsupported-redirect'));
							finalize();
							return;
						}

						// HTTP-redirect fetch step 11
						if (res.statusCode === 303 || (res.statusCode === 301 || res.statusCode === 302) && request.method === 'POST') {
							requestOpts.method = 'GET';
							requestOpts.body = undefined;
							requestOpts.headers.delete('content-length');
						}

						// HTTP-redirect fetch step 15
						resolve(fetch$1(new Request(locationURL, requestOpts)));
						finalize();
						return;
				}
			}

			// prepare response
			res.once('end', function () {
				if (signal) signal.removeEventListener('abort', abortAndFinalize);
			});
			let body = res.pipe(new PassThrough$1());

			const response_options = {
				url: request.url,
				status: res.statusCode,
				statusText: res.statusMessage,
				headers: headers,
				size: request.size,
				timeout: request.timeout,
				counter: request.counter
			};

			// HTTP-network fetch step 12.1.1.3
			const codings = headers.get('Content-Encoding');

			// HTTP-network fetch step 12.1.1.4: handle content codings

			// in following scenarios we ignore compression support
			// 1. compression support is disabled
			// 2. HEAD request
			// 3. no Content-Encoding header
			// 4. no content response (204)
			// 5. content not modified response (304)
			if (!request.compress || request.method === 'HEAD' || codings === null || res.statusCode === 204 || res.statusCode === 304) {
				response = new Response(body, response_options);
				resolve(response);
				return;
			}

			// For Node v6+
			// Be less strict when decoding compressed responses, since sometimes
			// servers send slightly invalid responses that are still accepted
			// by common browsers.
			// Always using Z_SYNC_FLUSH is what cURL does.
			const zlibOptions = {
				flush: zlib.Z_SYNC_FLUSH,
				finishFlush: zlib.Z_SYNC_FLUSH
			};

			// for gzip
			if (codings == 'gzip' || codings == 'x-gzip') {
				body = body.pipe(zlib.createGunzip(zlibOptions));
				response = new Response(body, response_options);
				resolve(response);
				return;
			}

			// for deflate
			if (codings == 'deflate' || codings == 'x-deflate') {
				// handle the infamous raw deflate response from old servers
				// a hack for old IIS and Apache servers
				const raw = res.pipe(new PassThrough$1());
				raw.once('data', function (chunk) {
					// see http://stackoverflow.com/questions/37519828
					if ((chunk[0] & 0x0F) === 0x08) {
						body = body.pipe(zlib.createInflate());
					} else {
						body = body.pipe(zlib.createInflateRaw());
					}
					response = new Response(body, response_options);
					resolve(response);
				});
				return;
			}

			// for br
			if (codings == 'br' && typeof zlib.createBrotliDecompress === 'function') {
				body = body.pipe(zlib.createBrotliDecompress());
				response = new Response(body, response_options);
				resolve(response);
				return;
			}

			// otherwise, use response as-is
			response = new Response(body, response_options);
			resolve(response);
		});

		writeToStream(req, request);
	});
}
/**
 * Redirect code matching
 *
 * @param   Number   code  Status code
 * @return  Boolean
 */
fetch$1.isRedirect = function (code) {
	return code === 301 || code === 302 || code === 303 || code === 307 || code === 308;
};

// expose Promise
fetch$1.Promise = global.Promise;

function get_page_handler(
	manifest,
	session_getter
) {
	const get_build_info =  (assets => () => assets)(JSON.parse(fs.readFileSync(path$1.join(build_dir, 'build.json'), 'utf-8')));

	const template =  (str => () => str)(read_template(build_dir));

	const has_service_worker = fs.existsSync(path$1.join(build_dir, 'service-worker.js'));

	const { server_routes, pages } = manifest;
	const error_route = manifest.error;

	function bail(req, res, err) {
		console.error(err);

		const message =  'Internal server error';

		res.statusCode = 500;
		res.end(`<pre>${message}</pre>`);
	}

	function handle_error(req, res, statusCode, error) {
		handle_page({
			pattern: null,
			parts: [
				{ name: null, component: error_route }
			]
		}, req, res, statusCode, error || new Error('Unknown error in preload function'));
	}

	async function handle_page(page, req, res, status = 200, error = null) {
		const is_service_worker_index = req.path === '/service-worker-index.html';
		const build_info




 = get_build_info();

		res.setHeader('Content-Type', 'text/html');
		res.setHeader('Cache-Control',  'max-age=600');

		// preload main.js and current route
		// TODO detect other stuff we can preload? images, CSS, fonts?
		let preloaded_chunks = Array.isArray(build_info.assets.main) ? build_info.assets.main : [build_info.assets.main];
		if (!error && !is_service_worker_index) {
			page.parts.forEach(part => {
				if (!part) return;

				// using concat because it could be a string or an array. thanks webpack!
				preloaded_chunks = preloaded_chunks.concat(build_info.assets[part.name]);
			});
		}

		if (build_info.bundler === 'rollup') {
			// TODO add dependencies and CSS
			const link = preloaded_chunks
				.filter(file => file && !file.match(/\.map$/))
				.map(file => `<${req.baseUrl}/client/${file}>;rel="modulepreload"`)
				.join(', ');

			res.setHeader('Link', link);
		} else {
			const link = preloaded_chunks
				.filter(file => file && !file.match(/\.map$/))
				.map((file) => {
					const as = /\.css$/.test(file) ? 'style' : 'script';
					return `<${req.baseUrl}/client/${file}>;rel="preload";as="${as}"`;
				})
				.join(', ');

			res.setHeader('Link', link);
		}

		const session = session_getter(req, res);

		let redirect;
		let preload_error;

		const preload_context = {
			redirect: (statusCode, location) => {
				if (redirect && (redirect.statusCode !== statusCode || redirect.location !== location)) {
					throw new Error(`Conflicting redirects`);
				}
				location = location.replace(/^\//g, ''); // leading slash (only)
				redirect = { statusCode, location };
			},
			error: (statusCode, message) => {
				preload_error = { statusCode, message };
			},
			fetch: (url, opts) => {
				const parsed = new Url.URL(url, `http://127.0.0.1:${process.env.PORT}${req.baseUrl ? req.baseUrl + '/' :''}`);

				if (opts) {
					opts = Object.assign({}, opts);

					const include_cookies = (
						opts.credentials === 'include' ||
						opts.credentials === 'same-origin' && parsed.origin === `http://127.0.0.1:${process.env.PORT}`
					);

					if (include_cookies) {
						opts.headers = Object.assign({}, opts.headers);

						const cookies = Object.assign(
							{},
							cookie.parse(req.headers.cookie || ''),
							cookie.parse(opts.headers.cookie || '')
						);

						const set_cookie = res.getHeader('Set-Cookie');
						(Array.isArray(set_cookie) ? set_cookie : [set_cookie]).forEach(str => {
							const match = /([^=]+)=([^;]+)/.exec(str);
							if (match) cookies[match[1]] = match[2];
						});

						const str = Object.keys(cookies)
							.map(key => `${key}=${cookies[key]}`)
							.join('; ');

						opts.headers.cookie = str;
					}
				}

				return fetch$1(parsed.href, opts);
			}
		};

		let preloaded;
		let match;
		let params;

		try {
			const root_preloaded = manifest.root_preload
				? manifest.root_preload.call(preload_context, {
					host: req.headers.host,
					path: req.path,
					query: req.query,
					params: {}
				}, session)
				: {};

			match = error ? null : page.pattern.exec(req.path);


			let toPreload = [root_preloaded];
			if (!is_service_worker_index) {
				toPreload = toPreload.concat(page.parts.map(part => {
					if (!part) return null;

					// the deepest level is used below, to initialise the store
					params = part.params ? part.params(match) : {};

					return part.preload
						? part.preload.call(preload_context, {
							host: req.headers.host,
							path: req.path,
							query: req.query,
							params
						}, session)
						: {};
				}));
			}

			preloaded = await Promise.all(toPreload);
		} catch (err) {
			if (error) {
				return bail(req, res, err)
			}

			preload_error = { statusCode: 500, message: err };
			preloaded = []; // appease TypeScript
		}

		try {
			if (redirect) {
				const location = Url.resolve((req.baseUrl || '') + '/', redirect.location);

				res.statusCode = redirect.statusCode;
				res.setHeader('Location', location);
				res.end();

				return;
			}

			if (preload_error) {
				handle_error(req, res, preload_error.statusCode, preload_error.message);
				return;
			}

			const segments = req.path.split('/').filter(Boolean);

			// TODO make this less confusing
			const layout_segments = [segments[0]];
			let l = 1;

			page.parts.forEach((part, i) => {
				layout_segments[l] = segments[i + 1];
				if (!part) return null;
				l++;
			});

			const props = {
				stores: {
					page: {
						subscribe: writable$1({
							host: req.headers.host,
							path: req.path,
							query: req.query,
							params
						}).subscribe
					},
					preloading: {
						subscribe: writable$1(null).subscribe
					},
					session: writable$1(session)
				},
				segments: layout_segments,
				status: error ? status : 200,
				error: error ? error instanceof Error ? error : { message: error } : null,
				level0: {
					props: preloaded[0]
				},
				level1: {
					segment: segments[0],
					props: {}
				}
			};

			if (!is_service_worker_index) {
				let l = 1;
				for (let i = 0; i < page.parts.length; i += 1) {
					const part = page.parts[i];
					if (!part) continue;

					props[`level${l++}`] = {
						component: part.component,
						props: preloaded[i + 1] || {},
						segment: segments[i]
					};
				}
			}

			const { html, head, css } = App.render(props);

			const serialized = {
				preloaded: `[${preloaded.map(data => try_serialize(data)).join(',')}]`,
				session: session && try_serialize(session, err => {
					throw new Error(`Failed to serialize session data: ${err.message}`);
				}),
				error: error && try_serialize(props.error)
			};

			let script = `__SAPPER__={${[
				error && `error:${serialized.error},status:${status}`,
				`baseUrl:"${req.baseUrl}"`,
				serialized.preloaded && `preloaded:${serialized.preloaded}`,
				serialized.session && `session:${serialized.session}`
			].filter(Boolean).join(',')}};`;

			if (has_service_worker) {
				script += `if('serviceWorker' in navigator)navigator.serviceWorker.register('${req.baseUrl}/service-worker.js');`;
			}

			const file = [].concat(build_info.assets.main).filter(file => file && /\.js$/.test(file))[0];
			const main = `${req.baseUrl}/client/${file}`;

			if (build_info.bundler === 'rollup') {
				if (build_info.legacy_assets) {
					const legacy_main = `${req.baseUrl}/client/legacy/${build_info.legacy_assets.main}`;
					script += `(function(){try{eval("async function x(){}");var main="${main}"}catch(e){main="${legacy_main}"};var s=document.createElement("script");try{new Function("if(0)import('')")();s.src=main;s.type="module";s.crossOrigin="use-credentials";}catch(e){s.src="${req.baseUrl}/client/shimport@${build_info.shimport}.js";s.setAttribute("data-main",main);}document.head.appendChild(s);}());`;
				} else {
					script += `var s=document.createElement("script");try{new Function("if(0)import('')")();s.src="${main}";s.type="module";s.crossOrigin="use-credentials";}catch(e){s.src="${req.baseUrl}/client/shimport@${build_info.shimport}.js";s.setAttribute("data-main","${main}")}document.head.appendChild(s)`;
				}
			} else {
				script += `</script><script src="${main}">`;
			}

			let styles;

			// TODO make this consistent across apps
			// TODO embed build_info in placeholder.ts
			if (build_info.css && build_info.css.main) {
				const css_chunks = new Set();
				if (build_info.css.main) css_chunks.add(build_info.css.main);
				page.parts.forEach(part => {
					if (!part) return;
					const css_chunks_for_part = build_info.css.chunks[part.file];

					if (css_chunks_for_part) {
						css_chunks_for_part.forEach(file => {
							css_chunks.add(file);
						});
					}
				});

				styles = Array.from(css_chunks)
					.map(href => `<link rel="stylesheet" href="client/${href}">`)
					.join('');
			} else {
				styles = (css && css.code ? `<style>${css.code}</style>` : '');
			}

			// users can set a CSP nonce using res.locals.nonce
			const nonce_attr = (res.locals && res.locals.nonce) ? ` nonce="${res.locals.nonce}"` : '';

			const body = template()
				.replace('%sapper.base%', () => `<base href="${req.baseUrl}/">`)
				.replace('%sapper.scripts%', () => `<script${nonce_attr}>${script}</script>`)
				.replace('%sapper.html%', () => html)
				.replace('%sapper.head%', () => `<noscript id='sapper-head-start'></noscript>${head}<noscript id='sapper-head-end'></noscript>`)
				.replace('%sapper.styles%', () => styles);

			res.statusCode = status;
			res.end(body);
		} catch(err) {
			if (error) {
				bail(req, res, err);
			} else {
				handle_error(req, res, 500, err);
			}
		}
	}

	return function find_route(req, res, next) {
		if (req.path === '/service-worker-index.html') {
			const homePage = pages.find(page => page.pattern.test('/'));
			handle_page(homePage, req, res);
			return;
		}

		for (const page of pages) {
			if (page.pattern.test(req.path)) {
				handle_page(page, req, res);
				return;
			}
		}

		handle_error(req, res, 404, 'Not found');
	};
}

function read_template(dir = build_dir) {
	return fs.readFileSync(`${dir}/template.html`, 'utf-8');
}

function try_serialize(data, fail) {
	try {
		return devalue(data);
	} catch (err) {
		if (fail) fail(err);
		return null;
	}
}

function middleware(opts


 = {}) {
	const { session, ignore } = opts;

	let emitted_basepath = false;

	return compose_handlers(ignore, [
		(req, res, next) => {
			if (req.baseUrl === undefined) {
				let { originalUrl } = req;
				if (req.url === '/' && originalUrl[originalUrl.length - 1] !== '/') {
					originalUrl += '/';
				}

				req.baseUrl = originalUrl
					? originalUrl.slice(0, -req.url.length)
					: '';
			}

			if (!emitted_basepath && process.send) {
				process.send({
					__sapper__: true,
					event: 'basepath',
					basepath: req.baseUrl
				});

				emitted_basepath = true;
			}

			if (req.path === undefined) {
				req.path = req.url.replace(/\?.*/, '');
			}

			next();
		},

		fs.existsSync(path$1.join(build_dir, 'service-worker.js')) && serve({
			pathname: '/service-worker.js',
			cache_control: 'no-cache, no-store, must-revalidate'
		}),

		fs.existsSync(path$1.join(build_dir, 'service-worker.js.map')) && serve({
			pathname: '/service-worker.js.map',
			cache_control: 'no-cache, no-store, must-revalidate'
		}),

		serve({
			prefix: '/client/',
			cache_control:  'max-age=31536000, immutable'
		}),

		get_server_route_handler(manifest.server_routes),

		get_page_handler(manifest, session || noop$1)
	].filter(Boolean));
}

function compose_handlers(ignore, handlers) {
	const total = handlers.length;

	function nth_handler(n, req, res, next) {
		if (n >= total) {
			return next();
		}

		handlers[n](req, res, () => nth_handler(n+1, req, res, next));
	}

	return !ignore
		? (req, res, next) => nth_handler(0, req, res, next)
		: (req, res, next) => {
			if (should_ignore(req.path, ignore)) {
				next();
			} else {
				nth_handler(0, req, res, next);
			}
		};
}

function should_ignore(uri, val) {
	if (Array.isArray(val)) return val.some(x => should_ignore(uri, x));
	if (val instanceof RegExp) return val.test(uri);
	if (typeof val === 'function') return val(uri);
	return uri.startsWith(val.charCodeAt(0) === 47 ? val : `/${val}`);
}

function serve({ prefix, pathname, cache_control }



) {
	const filter = pathname
		? (req) => req.path === pathname
		: (req) => req.path.startsWith(prefix);

	const cache = new Map();

	const read =  (file) => (cache.has(file) ? cache : cache.set(file, fs.readFileSync(path$1.join(build_dir, file)))).get(file);

	return (req, res, next) => {
		if (filter(req)) {
			const type = lite.getType(req.path);

			try {
				const file = path$1.posix.normalize(decodeURIComponent(req.path));
				const data = read(file);

				res.setHeader('Content-Type', type);
				res.setHeader('Cache-Control', cache_control);
				res.end(data);
			} catch (err) {
				res.statusCode = 404;
				res.end('not found');
			}
		} else {
			next();
		}
	};
}

function noop$1(){}

const { PORT, NODE_ENV } = process.env;
const dev = NODE_ENV.match(/development/);

polka() // You can also use Express
	.use(
		compression({ threshold: 0 }),
		sirv('static', { dev }),
		bodyParser.json(),
		middleware()
	)
	.listen(PORT, err => {
		if (err) console.log('error', err);
	});
