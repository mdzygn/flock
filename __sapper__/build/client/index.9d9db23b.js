import{S as t,i as e,s as n,C as s,D as a,E as l,K as o,t as r,c,F as i,a1 as $,q as d,R as u,r as m,u as f,T as g,d as p,v as h,b as A,x as v,z as b,e as y,A as w,B as I,l as D,G as E,L as k,I as P,U as C,J as H,ad as T,a4 as L,a3 as N,ae as j,Y as M,aG as S,af as V,ah as R,ai as B,aj as O,ak as W,m as x,ag as F,W as z,am as Y,V as K,ap as G,b6 as Q,$ as U,an as Z,aE as q,cs as J,ct as _,aq as X,aa as tt,ar as et,as as nt,at as st,cu as at,H as lt,aW as ot,aw as rt,cv as ct,o as it,g as $t,a7 as dt,ax as ut,cw as mt,ay as ft,n as gt,aM as pt,aN as ht,aD as At,ci as vt,ch as bt,a5 as yt,aC as wt,cx as It,cy as Dt,cz as Et,a9 as kt,ab as Pt}from"./client.bfcc6923.js";import{S as Ct}from"./Proxy.ed17349e.js";import"./Hotspot.3e24c739.js";import{C as Ht}from"./ContentLoader.7e990154.js";import{N as Tt}from"./NewPostButton.c52cb4c8.js";import"./Counter.4471f26b.js";import{a as Lt,P as Nt}from"./PostItem.e1681da4.js";import"./post_like_selected.c79724df.js";import"./SearchBar.3a3bc3e0.js";import"./next_arrow.b1598f96.js";import{F as jt,c as Mt,A as St,a as Vt,b as Rt,L as Bt,S as Ot}from"./ActionBar.b16b46b7.js";import"./send.53c7ac4a.js";import"./ImageSelectionBox.b9011413.js";import"./save.71e29683.js";import{E as Wt}from"./EditPost.509c6b22.js";const xt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA2CAYAAACbZ/oUAAADaklEQVRoQ+2Zi43UMBCG/6uA6wCoAKgAqACoAKgAqADoACoAOoAKgA6ggrsODioAfVIGzXrt2PHjiLIZabUrbWzP53naOdOJydmJ8WoH3rrFdwvvFt7YDuwu3WDQc0kvJD2Q9FnS+4a5hg3tZeG7kr5KAtoE6CfDNK+cuAdwDNbUuSfpR6VuQ4a1AoewvyX9knRz0vahpG9DNK+ctAU4Bkv8vpN0f9LnraQ3lboNGVYLnILFfbHopoDnYLHKpoBzsJsCLoENgS0OSWS4++X0wQu+DwnSzKSlMVwKy3IfJT0thKFWA/9pyu6Fw+ofKwFeAosmPA+IlaZS7RjDZn0pHVDzXA54KWxKB+ahC+Ob0sV3akNwe0oZVu8uc8C9YFNK35L0WNIzSXciDxHzr3o3Ling0bAhH+u9TMQ+bg44ia9ZYsC43oU7CNAu4obX0ROzNuCvAzLc/HkPa8eAiR9b8DphPSPuTov6KABnM5qOnTFgrMuCCK7Ewv9LiG/Wv+EUwMWxdpXEgP+4mW5PjULV5J0GsfmULJ/YqqFzwGs5zxLbWNo3NFXQMWDf/BMvxM1aJOziFkPHgImbD46QeGHitUgIvejMnarD3sqArh2auzPiPCspYGIGaJ8o1gZNX2D60ZSQYLPNyVxrORKaubPKZczFHDQkVrIwEHdos5I7PNRC0ypyzUNJ4bcdHlLKYC07L6P4z8INoQPketgk64U5YCZaCh0mvdymp/63szLHRSyZEp/EeI5SmvSeEuCl0CgatoS10DbO3mTErnxD157N2qXAS6B9hucah97crnhi4Lg9H9zTvlNnZdweoDAj+/5/NoEtAS6F7nFraRcFqbMyaxCv3tX5bRuVjOWlwCXQPYC9J2B5wGP3ZFgWiyPeysBTpo6kBjgH3RvYlMbdgQrBcXMrR1eOMHoOqAWeg8Ya9uZhxPHSXuf4poi4BdrfmnAnhi4H0gKcgvYLjHyZ5l3Y1qSEWYWIunUr8Bw0tyW4YWtHNVfS7OW7vyDwzx+5dQ9ggw7Pq9mup7U4T+PJ6DQfsZvPo5DqBewTC1a1VyqdmLLTxLpBBh3FcW/grGYDH4hBk8Fx63+yJWCgcG/Koo/pA8atAQMdnqA2Dww09ZcPPffBNfMWLTybJnbggVl0FVPvFl6FGQYqcXIW/gs1ftA35nDwRwAAAABJRU5ErkJggg==";function Ft(t){let e;const n=new z({props:{className:"optionsButton",icon:Y,onClick:t[23]}});return{c(){s(n.$$.fragment)},l(t){a(n.$$.fragment,t)},m(t,s){l(n,t,s),e=!0},p:o,i(t){e||(r(n.$$.fragment,t),e=!0)},o(t){c(n.$$.fragment,t),e=!1},d(t){i(n,t)}}}function zt(t){let e;const n=new z({props:{className:"followButton",onClick:t[24],icon:t[4]?jt:Mt}});return{c(){s(n.$$.fragment)},l(t){a(n.$$.fragment,t)},m(t,s){l(n,t,s),e=!0},p(t,e){const s={};16&e[0]&&(s.icon=t[4]?jt:Mt),n.$set(s)},i(t){e||(r(n.$$.fragment,t),e=!0)},o(t){c(n.$$.fragment,t),e=!1},d(t){i(n,t)}}}function Yt(t){let e,n,s=K.POST.EDITED+"";return{c(){e=d("span"),n=u(s),this.h()},l(t){e=m(t,"SPAN",{class:!0,title:!0});var a=f(e);n=g(a,s),a.forEach(p),this.h()},h(){h(e,"class","edited svelte-gkb4jk"),h(e,"title",t[13])},m(t,s){A(t,e,s),v(e,n)},p(t,n){8192&n[0]&&h(e,"title",t[13])},d(t){t&&p(e)}}}function Kt(t){let e;return{c(){e=d("div"),this.h()},l(t){e=m(t,"DIV",{class:!0}),f(e).forEach(p),this.h()},h(){h(e,"class","title svelte-gkb4jk")},m(n,s){A(n,e,s),e.innerHTML=t[18]},p(t,n){262144&n[0]&&(e.innerHTML=t[18])},d(t){t&&p(e)}}}function Gt(t){let e;return{c(){e=d("div"),this.h()},l(t){e=m(t,"DIV",{class:!0}),f(e).forEach(p),this.h()},h(){h(e,"class","message svelte-gkb4jk")},m(n,s){A(n,e,s),e.innerHTML=t[19]},p(t,n){524288&n[0]&&(e.innerHTML=t[19])},d(t){t&&p(e)}}}function Qt(t){let e,n;return{c(){e=d("img"),this.h()},l(t){e=m(t,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){h(e,"class","postImage svelte-gkb4jk"),e.src!==(n=t[2])&&h(e,"src",n),h(e,"alt","post")},m(t,n){A(t,e,n)},p(t,s){4&s[0]&&e.src!==(n=t[2])&&h(e,"src",n)},d(t){t&&p(e)}}}function Ut(t){let e;const n=new St({props:{targetItemId:t[6],targetItem:t[5],$$slots:{default:[_t],buttonRight:[Jt],buttonMiddle:[qt],buttonLeft:[Zt]},$$scope:{ctx:t}}});return{c(){s(n.$$.fragment)},l(t){a(n.$$.fragment,t)},m(t,s){l(n,t,s),e=!0},p(t,e){const s={};64&e[0]&&(s.targetItemId=t[6]),32&e[0]&&(s.targetItem=t[5]),96&e[0]|4&e[1]&&(s.$$scope={dirty:e,ctx:t}),n.$set(s)},i(t){e||(r(n.$$.fragment,t),e=!0)},o(t){c(n.$$.fragment,t),e=!1},d(t){i(n,t)}}}function Zt(t){let e,n;const o=new Vt({props:{label:"like",icon:Rt,selectedIcon:Bt,targetItem:t[5],targetItemId:t[6],action:G,targetItemProperty:"liked",countProperty:"likeCount"}});return{c(){e=d("div"),s(o.$$.fragment),this.h()},l(t){e=m(t,"DIV",{slot:!0});var n=f(e);a(o.$$.fragment,n),n.forEach(p),this.h()},h(){h(e,"slot","buttonLeft")},m(t,s){A(t,e,s),l(o,e,null),n=!0},p(t,e){const n={};32&e[0]&&(n.targetItem=t[5]),64&e[0]&&(n.targetItemId=t[6]),o.$set(n)},i(t){n||(r(o.$$.fragment,t),n=!0)},o(t){c(o.$$.fragment,t),n=!1},d(t){t&&p(e),i(o)}}}function qt(t){let e,n;const $=new Vt({props:{label:"share",icon:Ot,action:t[22]}});return{c(){e=d("div"),s($.$$.fragment),this.h()},l(t){e=m(t,"DIV",{slot:!0});var n=f(e);a($.$$.fragment,n),n.forEach(p),this.h()},h(){h(e,"slot","buttonMiddle")},m(t,s){A(t,e,s),l($,e,null),n=!0},p:o,i(t){n||(r($.$$.fragment,t),n=!0)},o(t){c($.$$.fragment,t),n=!1},d(t){t&&p(e),i($)}}}function Jt(t){let e,n;const $=new Vt({props:{label:"reply",icon:xt,action:t[21]}});return{c(){e=d("div"),s($.$$.fragment),this.h()},l(t){e=m(t,"DIV",{slot:!0});var n=f(e);a($.$$.fragment,n),n.forEach(p),this.h()},h(){h(e,"slot","buttonRight")},m(t,s){A(t,e,s),l($,e,null),n=!0},p:o,i(t){n||(r($.$$.fragment,t),n=!0)},o(t){c($.$$.fragment,t),n=!1},d(t){t&&p(e),i($)}}}function _t(t){let e,n;return{c(){e=b(),n=b()},l(t){e=w(t),n=w(t)},m(t,s){A(t,e,s),A(t,n,s)},p:o,i:o,o:o,d(t){t&&p(e),t&&p(n)}}}function Xt(t){let e,n,o,H,T,L,N,j,M,S,V,R,B,O,W,x,F,z,Y,K,G,U=(t[10]||t[11])&&Ft(t),Z=t[11]&&zt(t);const q=new $({props:{user:t[1],onClick:t[7]?t[20]:null,useThumb:!0}});let J=t[12]&&Yt(t),_=t[14]&&Kt(t),X=t[15]&&Gt(t),tt=t[16]&&Qt(t),et=!t[3]&&Ut(t);return{c(){e=d("div"),U&&U.c(),n=b(),Z&&Z.c(),o=b(),H=d("div"),T=d("div"),L=b(),N=d("div"),j=u(t[9]),M=b(),s(q.$$.fragment),S=b(),V=d("div"),R=d("div"),O=y(),J&&J.c(),W=b(),_&&_.c(),x=b(),X&&X.c(),F=b(),tt&&tt.c(),z=b(),et&&et.c(),this.h()},l(s){e=m(s,"DIV",{class:!0});var l=f(e);U&&U.l(l),n=w(l),Z&&Z.l(l),o=w(l),H=m(l,"DIV",{class:!0});var r=f(H);T=m(r,"DIV",{class:!0}),f(T).forEach(p),L=w(r),N=m(r,"DIV",{class:!0});var c=f(N);j=g(c,t[9]),c.forEach(p),r.forEach(p),M=w(l),a(q.$$.fragment,l),S=w(l),V=m(l,"DIV",{class:!0});var i=f(V);R=m(i,"DIV",{class:!0});var $=f(R);O=y(),J&&J.l($),$.forEach(p),W=w(i),_&&_.l(i),x=w(i),X&&X.l(i),i.forEach(p),F=w(l),tt&&tt.l(l),z=w(l),et&&et.l(l),l.forEach(p),this.h()},h(){h(T,"class","userName svelte-gkb4jk"),I(T,"button",t[7]),h(N,"class","username svelte-gkb4jk"),I(N,"button",t[7]),h(H,"class","info svelte-gkb4jk"),B=new Q(O),h(R,"class","date svelte-gkb4jk"),h(V,"class","postContent svelte-gkb4jk"),h(e,"class","threadPost svelte-gkb4jk")},m(s,a){A(s,e,a),U&&U.m(e,null),v(e,n),Z&&Z.m(e,null),v(e,o),v(e,H),v(H,T),T.innerHTML=t[8],v(H,L),v(H,N),v(N,j),v(e,M),l(q,e,null),v(e,S),v(e,V),v(V,R),B.m(t[17],R),v(R,O),J&&J.m(R,null),v(V,W),_&&_.m(V,null),v(V,x),X&&X.m(V,null),v(e,F),tt&&tt.m(e,null),v(e,z),et&&et.m(e,null),Y=!0,K||(G=D(H,"click",function(){E(t[7]?t[20]:null)&&(t[7]?t[20]:null).apply(this,arguments)}),K=!0)},p(s,a){(t=s)[10]||t[11]?U?(U.p(t,a),3072&a[0]&&r(U,1)):((U=Ft(t)).c(),r(U,1),U.m(e,n)):U&&(k(),c(U,1,1,()=>{U=null}),P()),t[11]?Z?(Z.p(t,a),2048&a[0]&&r(Z,1)):((Z=zt(t)).c(),r(Z,1),Z.m(e,o)):Z&&(k(),c(Z,1,1,()=>{Z=null}),P()),(!Y||256&a[0])&&(T.innerHTML=t[8]),128&a[0]&&I(T,"button",t[7]),(!Y||512&a[0])&&C(j,t[9]),128&a[0]&&I(N,"button",t[7]);const l={};2&a[0]&&(l.user=t[1]),128&a[0]&&(l.onClick=t[7]?t[20]:null),q.$set(l),(!Y||131072&a[0])&&B.p(t[17]),t[12]?J?J.p(t,a):((J=Yt(t)).c(),J.m(R,null)):J&&(J.d(1),J=null),t[14]?_?_.p(t,a):((_=Kt(t)).c(),_.m(V,x)):_&&(_.d(1),_=null),t[15]?X?X.p(t,a):((X=Gt(t)).c(),X.m(V,null)):X&&(X.d(1),X=null),t[16]?tt?tt.p(t,a):((tt=Qt(t)).c(),tt.m(e,z)):tt&&(tt.d(1),tt=null),t[3]?et&&(k(),c(et,1,1,()=>{et=null}),P()):et?(et.p(t,a),8&a[0]&&r(et,1)):((et=Ut(t)).c(),r(et,1),et.m(e,null))},i(t){Y||(r(U),r(Z),r(q.$$.fragment,t),r(et),Y=!0)},o(t){c(U),c(Z),c(q.$$.fragment,t),c(et),Y=!1},d(t){t&&p(e),U&&U.d(),Z&&Z.d(),i(q),J&&J.d(),_&&_.d(),X&&X.d(),tt&&tt.d(),et&&et.d(),K=!1,G()}}}function te(t,e,n){let s,a,l,r,c,i,$=o,d=()=>($(),$=M(f,t=>n(5,l=t)),f),u=o,m=()=>(u(),u=M(g,t=>n(29,r=t)),g);H(t,T,t=>n(25,s=t)),H(t,L,t=>n(27,a=t)),H(t,N,t=>n(30,c=t)),H(t,j,t=>n(32,i=t)),t.$$.on_destroy.push(()=>$()),t.$$.on_destroy.push(()=>u());let{post:f}=e;d();let g=U([]);m();let p,h,A,v,b,y,w,I,D,E,k,P,C,z,Y,K,G,Q,lt,ot=Lt;return t.$set=(t=>{"post"in t&&d(n(0,f=t.post))}),t.$$.update=(()=>{33554432&t.$$.dirty[0]&&n(3,p=s&&s.archived||!1),167772160&t.$$.dirty[0]&&n(26,h=a&&s&&S(s)),32&t.$$.dirty[0]&&n(4,A=l&&l.following||!1),32&t.$$.dirty[0]&&n(28,v=l&&l.userId||null),32&t.$$.dirty[0]&&n(6,b=l&&l.id||null),268435456&t.$$.dirty[0]&&m(n(1,g=V(v))),536870912&t.$$.dirty[0]&&n(7,y=r&&r.name||!1),536870912&t.$$.dirty[0]&&n(8,w=r&&r.name||"&nbsp;"),536870912&t.$$.dirty[0]&&n(9,I=r&&r.username&&"@"+r.username||""),1073741856&t.$$.dirty[0]&&n(10,D=l&&l.userId&&l.userId===c||!1),67109888&t.$$.dirty[0]&&n(11,E=!D&&!h),32&t.$$.dirty[0]&&n(12,k=l&&l.edited&&R(l.createdAt,l.editedAt)>B.SHOW_EDITED_MIN_TIME||!1),4128&t.$$.dirty[0]&&n(13,P=k&&l.editedAt&&O(l.editedAt)||""),32&t.$$.dirty[0]&&n(14,C=l&&l.title||""),32&t.$$.dirty[0]&&n(15,z=l&&l.message||""),32&t.$$.dirty[0]&&n(16,Y=l&&l.image||""),32&t.$$.dirty[0]&&n(31,K=l&&l.createdAt||""),1&t.$$.dirty[1]&&n(17,G=K&&O(K,"ddd d MMM")+" at "+O(K,"h:mmtt")||"&nbsp;"),16384&t.$$.dirty[0]&&n(18,Q=W(C)),32768&t.$$.dirty[0]&&n(19,lt=W(z)),65536&t.$$.dirty[0]&&(async()=>{await x(),n(2,ot=Lt),await x(),setTimeout(()=>{n(2,ot=F(Y))},0)})()}),[f,g,ot,p,A,l,b,y,w,I,D,E,k,P,C,z,Y,G,Q,lt,function(){y&&Z(v)},function(){q()&&J()},function(){_(b)},function(){const t=X(b);if(t){const e=tt(t);et(j,i=e),nt(st.THREAD_POST_OPTIONS)}},function(){at(b,A)}]}class ee extends t{constructor(t){super(),e(this,t,te,Xt,n,{post:0},[-1,-1])}}function ne(t,e,n){const s=t.slice();return s[29]=e[n],s}function se(t){let e,n,o,$,u,g;const y=new ee({props:{post:vt}});let I=t[10],D=[];for(let e=0;e<I.length;e+=1)D[e]=de(ne(t,I,e));const E=t=>c(D[t],1,1,()=>{D[t]=null});let C=null;I.length||(C=oe(t));let H=!t[0]&&t[10]&&t[10].length>=pe&&ue(t);return{c(){e=d("div"),s(y.$$.fragment),n=b(),o=d("div"),$=d("div");for(let t=0;t<D.length;t+=1)D[t].c();C&&C.c(),u=b(),H&&H.c(),this.h()},l(t){e=m(t,"DIV",{class:!0});var s=f(e);a(y.$$.fragment,s),n=w(s),o=m(s,"DIV",{class:!0});var l=f(o);$=m(l,"DIV",{class:!0});var r=f($);for(let t=0;t<D.length;t+=1)D[t].l(r);C&&C.l(r),r.forEach(p),u=w(l),H&&H.l(l),l.forEach(p),s.forEach(p),this.h()},h(){h($,"class","postsContainer svelte-1gwl1di"),h(o,"class","contentContainer svelte-1gwl1di"),h(e,"class","scrollContent")},m(t,s){A(t,e,s),l(y,e,null),v(e,n),v(e,o),v(o,$);for(let t=0;t<D.length;t+=1)D[t].m($,null);C&&C.m($,null),v(o,u),H&&H.m(o,null),g=!0},p(t,e){if(5697&e[0]){let n;for(I=t[10],n=0;n<I.length;n+=1){const s=ne(t,I,n);D[n]?(D[n].p(s,e),r(D[n],1)):(D[n]=de(s),D[n].c(),r(D[n],1),D[n].m($,null))}for(k(),n=I.length;n<D.length;n+=1)E(n);P(),!I.length&&C?C.p(t,e):I.length?C&&(C.d(1),C=null):((C=oe(t)).c(),C.m($,null))}!t[0]&&t[10]&&t[10].length>=pe?H?(H.p(t,e),1025&e[0]&&r(H,1)):((H=ue(t)).c(),r(H,1),H.m(o,null)):H&&(k(),c(H,1,1,()=>{H=null}),P())},i(t){if(!g){r(y.$$.fragment,t);for(let t=0;t<I.length;t+=1)r(D[t]);r(H),g=!0}},o(t){c(y.$$.fragment,t),D=D.filter(Boolean);for(let t=0;t<D.length;t+=1)c(D[t]);c(H),g=!1},d(t){t&&p(e),i(y),Pt(D,t),C&&C.d(),H&&H.d()}}}function ae(t){let e;const n=new Ht({props:{label:K.THREAD.NOT_FOUND}});return{c(){s(n.$$.fragment)},l(t){a(n.$$.fragment,t)},m(t,s){l(n,t,s),e=!0},p:o,i(t){e||(r(n.$$.fragment,t),e=!0)},o(t){c(n.$$.fragment,t),e=!1},d(t){i(n,t)}}}function le(t){let e;const n=new Ht({props:{label:K.LOADING.THREAD}});return{c(){s(n.$$.fragment)},l(t){a(n.$$.fragment,t)},m(t,s){l(n,t,s),e=!0},p:o,i(t){e||(r(n.$$.fragment,t),e=!0)},o(t){c(n.$$.fragment,t),e=!1},d(t){i(n,t)}}}function oe(t){let e,n,s,a;const l=[ce,re],o=[];function i(t,e){return t[9]?0:t[0]?-1:1}return~(e=i(t))&&(n=o[e]=l[e](t)),{c(){n&&n.c(),s=y()},l(t){n&&n.l(t),s=y()},m(t,n){~e&&o[e].m(t,n),A(t,s,n),a=!0},p(t,a){let $=e;(e=i(t))===$?~e&&o[e].p(t,a):(n&&(k(),c(o[$],1,1,()=>{o[$]=null}),P()),~e?((n=o[e])||(n=o[e]=l[e](t)).c(),r(n,1),n.m(s.parentNode,s)):n=null)},i(t){a||(r(n),a=!0)},o(t){c(n),a=!1},d(t){~e&&o[e].d(t),t&&p(s)}}}function re(t){let e;const n=new Ht({props:{$$slots:{default:[$e]},$$scope:{ctx:t}}});return{c(){s(n.$$.fragment)},l(t){a(n.$$.fragment,t)},m(t,s){l(n,t,s),e=!0},p(t,e){const s={};64&e[0]|2&e[1]&&(s.$$scope={dirty:e,ctx:t}),n.$set(s)},i(t){e||(r(n.$$.fragment,t),e=!0)},o(t){c(n.$$.fragment,t),e=!1},d(t){i(n,t)}}}function ce(t){let e;const n=new Ht({props:{label:K.LOADING.THREAD_ITEMS}});return{c(){s(n.$$.fragment)},l(t){a(n.$$.fragment,t)},m(t,s){l(n,t,s),e=!0},p:o,i(t){e||(r(n.$$.fragment,t),e=!0)},o(t){c(n.$$.fragment,t),e=!1},d(t){i(n,t)}}}function ie(t){let e,n,s,a,l,r;return{c(){e=u("be the first to "),n=d("a"),s=u("Leave a Reply"),this.h()},l(t){e=g(t,"be the first to "),n=m(t,"A",{href:!0});var a=f(n);s=g(a,"Leave a Reply"),a.forEach(p),this.h()},h(){h(n,"href",a=location.href)},m(a,o){A(a,e,o),A(a,n,o),v(n,s),l||(r=D(n,"click",t[26]),l=!0)},p:o,d(t){t&&p(e),t&&p(n),l=!1,r()}}}function $e(t){let e,n,s,a,l=K.THREAD.NO_POSTS+"",o=!t[6]&&ie(t);return{c(){e=u(l),n=d("br"),s=b(),o&&o.c(),a=b()},l(t){e=g(t,l),n=m(t,"BR",{}),s=w(t),o&&o.l(t),a=w(t)},m(t,l){A(t,e,l),A(t,n,l),A(t,s,l),o&&o.m(t,l),A(t,a,l)},p(t,e){t[6]?o&&(o.d(1),o=null):o?o.p(t,e):((o=ie(t)).c(),o.m(a.parentNode,a))},d(t){t&&p(e),t&&p(n),t&&p(s),o&&o.d(t),t&&p(a)}}}function de(t){let e;const n=new Nt({props:{post:t[29],type:"threadPost"}});return{c(){s(n.$$.fragment)},l(t){a(n.$$.fragment,t)},m(t,s){l(n,t,s),e=!0},p(t,e){const s={};1024&e[0]&&(s.post=t[29]),n.$set(s)},i(t){e||(r(n.$$.fragment,t),e=!0)},o(t){c(n.$$.fragment,t),e=!1},d(t){i(n,t)}}}function ue(t){let e;const n=new Tt({props:{onClick:t[12],icon:xt,label:K.THREAD.REPLY}});return{c(){s(n.$$.fragment)},l(t){a(n.$$.fragment,t)},m(t,s){l(n,t,s),e=!0},p:o,i(t){e||(r(n.$$.fragment,t),e=!0)},o(t){c(n.$$.fragment,t),e=!1},d(t){i(n,t)}}}function me(t){let e,n,s,a;const l=[le,ae,se],o=[];function i(t,e){return t[7]?0:t[8]&&t[8].id?2:1}return e=i(t),n=o[e]=l[e](t),{c(){n.c(),s=y()},l(t){n.l(t),s=y()},m(t,n){o[e].m(t,n),A(t,s,n),a=!0},p(t,a){let $=e;(e=i(t))===$?o[e].p(t,a):(k(),c(o[$],1,1,()=>{o[$]=null}),P(),(n=o[e])||(n=o[e]=l[e](t)).c(),r(n,1),n.m(s.parentNode,s))},i(t){a||(r(n),a=!0)},o(t){c(n),a=!1},d(t){o[e].d(t),t&&p(s)}}}function fe(t){let e,n;function o(e){t[28].call(null,e)}let $={inlineComponent:!0};void 0!==t[4]&&($.element=t[4]);const d=new Wt({props:$});return gt.push(()=>pt(d,"element",o)),d.$on("hide",t[13]),d.$on("resize",t[14]),{c(){s(d.$$.fragment)},l(t){a(d.$$.fragment,t)},m(t,e){l(d,t,e),n=!0},p(t,n){const s={};!e&&16&n[0]&&(e=!0,s.element=t[4],ht(()=>e=!1)),d.$set(s)},i(t){n||(r(d.$$.fragment,t),n=!0)},o(t){c(d.$$.fragment,t),n=!1},d(t){i(d,t)}}}function ge(t){let e,n,o,$,u,g;function y(e){t[27].call(null,e)}document.title=e=t[5]+"Flock";let D={id:"thread",anchorToBottom:t[11],bottomOffset:t[3],disabledMinHeight:t[0],$$slots:{default:[me]},$$scope:{ctx:t}};void 0!==t[2]&&(D.scrollRegion=t[2]);const E=new Ct({props:D});gt.push(()=>pt(E,"scrollRegion",y));let C=t[0]&&fe(t);return{c(){n=b(),o=d("div"),s(E.$$.fragment),u=b(),C&&C.c(),this.h()},l(t){lt('[data-svelte="svelte-pjz2s7"]',document.head).forEach(p),n=w(t),o=m(t,"DIV",{class:!0});var e=f(o);a(E.$$.fragment,e),u=w(e),C&&C.l(e),e.forEach(p),this.h()},h(){h(o,"class","content svelte-1gwl1di"),I(o,"showAddPost",t[0])},m(t,e){A(t,n,e),A(t,o,e),l(E,o,null),v(o,u),C&&C.m(o,null),g=!0},p(t,n){(!g||32&n[0])&&e!==(e=t[5]+"Flock")&&(document.title=e);const s={};2048&n[0]&&(s.anchorToBottom=t[11]),8&n[0]&&(s.bottomOffset=t[3]),1&n[0]&&(s.disabledMinHeight=t[0]),1985&n[0]|2&n[1]&&(s.$$scope={dirty:n,ctx:t}),!$&&4&n[0]&&($=!0,s.scrollRegion=t[2],ht(()=>$=!1)),E.$set(s),t[0]?C?(C.p(t,n),1&n[0]&&r(C,1)):((C=fe(t)).c(),r(C,1),C.m(o,null)):C&&(k(),c(C,1,1,()=>{C=null}),P()),1&n[0]&&I(o,"showAddPost",t[0])},i(t){g||(r(E.$$.fragment,t),r(C),g=!0)},o(t){c(E.$$.fragment,t),c(C),g=!1},d(t){t&&p(n),t&&p(o),i(E),C&&C.d()}}}const pe=3;function he(t,e,n){let s,a,l,r,c,i,$,d,u,m,f=o,g=()=>(f(),f=M(h,t=>n(10,u=t)),h);H(t,T,t=>n(17,s=t)),H(t,At,t=>n(18,a=t)),H(t,vt,t=>n(8,l=t)),H(t,bt,t=>n(19,r=t)),H(t,L,t=>n(20,c=t)),H(t,N,t=>n(21,i=t)),H(t,yt,t=>n(22,$=t)),H(t,wt,t=>n(23,d=t)),H(t,It,t=>n(11,m=t)),t.$$.on_destroy.push(()=>f());let p=!1;ot.on("newThreadPost",v),rt(),ct();let h=U([]);function A(){q()&&J()}function v(){n(0,p=!0)}g();let b,y,w=null,I=0,D=null;async function E(){await x(),n(3,I=p&&D&&D.offsetHeight||0),0!==I&&k()}async function k(){w&&(await x(),"undefined"!=typeof window&&(window.setTimeout(()=>{w&&w.scrollTo(0,w.scrollHeight)},250),window.setTimeout(()=>{w&&w.scrollTo(0,w.scrollHeight)},500)),w&&w.scrollTo(0,w.scrollHeight))}it(()=>{b=Dt({postId:r}),y=Dt({threadId:r},B.REPLY_VIEWED_DELAY)}),$t(()=>{Et(b),Et(y)});let P,C,j,S;return t.$$.update=(()=>{131072&t.$$.dirty[0]&&n(5,P=s&&s.title&&s.title+" - "||""),131072&t.$$.dirty[0]&&n(6,C=s&&s.archived||!1),16646400&t.$$.dirty[0]&&n(7,j=a&&(!l||l.id!==r)||!dt(c,i,$)||!s&&d),263168&t.$$.dirty[0]&&n(9,S=a&&(!u||!u.length)),3588&t.$$.dirty[0]&&m&&w&&!S&&u&&(async()=>{await x(),k()})(),524288&t.$$.dirty[0]&&g(n(1,h=ut({threadId:r,type:"threadPost"}))),256&t.$$.dirty[0]&&mt(l),1024&t.$$.dirty[0]&&ft(u),1&t.$$.dirty[0]&&E()}),[p,h,w,I,D,P,C,j,l,S,u,m,A,function(){n(0,p=!1)},E,b,y,s,a,r,c,i,$,d,v,k,t=>(A(),kt(t)),function(t){n(2,w=t)},function(t){n(4,D=t)}]}export default class extends t{constructor(t){super(),e(this,t,he,ge,n,{},[-1,-1])}}
