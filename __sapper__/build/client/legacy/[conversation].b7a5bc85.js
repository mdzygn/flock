import{_ as n,a as t,b as e,c as r,i as c,s as o,d as i,S as s,y as a,P as u,z as f,A as l,Q as d,l as $,B as v,o as m,C as h,R as p,e as g,f as y,m as I,t as w,g as D,h as E,D as b,j as R,n as k,M as S,p as x,E as _,r as V,u as A,bd as T,a4 as C,Y as N,a0 as M,an as H,be as O,bf as j,$ as L,ak as B,al as P,a2 as G,W as q,ar as z,ab as W,aI as F,bg as Q,bh as U,aM as X,aO as K,N as Y,ae as J,bi as Z,bj as nn,bk as tn,bl as en,bm as rn,v as cn,bn as on,G as sn,H as an,aj as un,aQ as fn,aP as ln,bo as dn,bp as $n,q as vn,bq as mn,br as hn,V as pn,bs as gn,bt as yn,bb as In,bu as wn,bv as Dn,w as En,aR as bn,aS as Rn,k as kn}from"./client.d099542d.js";import"./Hotspot.bc8ece65.js";import"./ContentPanel.d4fd0a6d.js";import{C as Sn}from"./ContentLoader.ae8f9f10.js";import{L as xn}from"./post_like_selected.c79724df.js";import{S as _n}from"./send.53c7ac4a.js";import{L as Vn}from"./Location.4ecdffa5.js";function An(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}();return function(){var c,o=t(n);if(r){var i=t(this).constructor;c=Reflect.construct(o,arguments,i)}else c=o.apply(this,arguments);return e(this,c)}}function Tn(n){var t,e;return{c:function(){t=a("div"),e=u(n[3]),this.h()},l:function(r){t=f(r,"DIV",{class:!0});var c=l(t);e=d(c,n[3]),c.forEach($),this.h()},h:function(){v(t,"class","dateHeader svelte-1oxr1ak")},m:function(n,r){m(n,t,r),h(t,e)},p:function(n,t){8&t&&p(e,n[3])},d:function(n){n&&$(t)}}}function Cn(n){var t,e=new G({props:{user:n[4],onClick:n[10]?n[11]:null,useThumb:!0}});return{c:function(){g(e.$$.fragment)},l:function(n){y(e.$$.fragment,n)},m:function(n,r){I(e,n,r),t=!0},p:function(n,t){var r={};16&t&&(r.user=n[4]),1024&t&&(r.onClick=n[10]?n[11]:null),e.$set(r)},i:function(n){t||(w(e.$$.fragment,n),t=!0)},o:function(n){D(e.$$.fragment,n),t=!1},d:function(n){E(e,n)}}}function Nn(n){var t,e=new q({props:{className:"likeButton",icon:xn}});return{c:function(){g(e.$$.fragment)},l:function(n){y(e.$$.fragment,n)},m:function(n,r){I(e,n,r),t=!0},p:b,i:function(n){t||(w(e.$$.fragment,n),t=!0)},o:function(n){D(e.$$.fragment,n),t=!1},d:function(n){E(e,n)}}}function Mn(n){var t,e,r,c,o,i,s,u,d,p=n[8]&&Tn(n),g=!n[5]&&!n[7]&&Cn(n),y=n[9]&&Nn();return{c:function(){t=a("div"),p&&p.c(),e=R(),r=a("div"),g&&g.c(),c=R(),o=a("div"),i=a("div"),s=a("div"),u=R(),y&&y.c(),this.h()},l:function(n){t=f(n,"DIV",{class:!0});var a=l(t);p&&p.l(a),e=k(a),r=f(a,"DIV",{class:!0});var d=l(r);g&&g.l(d),c=k(d),o=f(d,"DIV",{class:!0});var v=l(o);i=f(v,"DIV",{class:!0});var m=l(i);s=f(m,"DIV",{class:!0}),l(s).forEach($),m.forEach($),u=k(v),y&&y.l(v),v.forEach($),d.forEach($),a.forEach($),this.h()},h:function(){v(s,"class","message svelte-1oxr1ak"),v(i,"class","detailInnerContent svelte-1oxr1ak"),v(o,"class","detailContent svelte-1oxr1ak"),v(r,"class","messageContent svelte-1oxr1ak"),S(r,"userBreak",n[6]),S(r,"isSelf",n[5]),v(t,"class","messageListItem svelte-1oxr1ak")},m:function(a,f){m(a,t,f),p&&p.m(t,null),h(t,e),h(t,r),g&&g.m(r,null),h(r,c),h(r,o),h(o,i),h(i,s),s.innerHTML=n[2],h(o,u),y&&y.m(o,null),d=!0},p:function(n,i){var a=x(i,1)[0];n[8]?p?p.p(n,a):((p=Tn(n)).c(),p.m(t,e)):p&&(p.d(1),p=null),n[5]||n[7]?g&&(_(),D(g,1,1,function(){g=null}),V()):g?(g.p(n,a),160&a&&w(g,1)):((g=Cn(n)).c(),w(g,1),g.m(r,c)),(!d||4&a)&&(s.innerHTML=n[2]),n[9]?y?(y.p(n,a),512&a&&w(y,1)):((y=Nn()).c(),w(y,1),y.m(o,null)):y&&(_(),D(y,1,1,function(){y=null}),V()),64&a&&S(r,"userBreak",n[6]),32&a&&S(r,"isSelf",n[5])},i:function(n){d||(w(g),w(y),d=!0)},o:function(n){D(g),D(y),d=!1},d:function(n){n&&$(t),p&&p.d(),g&&g.d(),y&&y.d()}}}function Hn(n,t,e){var r,c,o,i,s,a=b,u=function(){return a(),a=N(R,function(n){return e(12,r=n)}),R},f=b,l=b;A(n,T,function(n){return e(16,c=n)}),A(n,C,function(n){return e(19,i=n)}),n.$$.on_destroy.push(function(){return a()}),n.$$.on_destroy.push(function(){return f()}),n.$$.on_destroy.push(function(){return l()});var d,$,v,m,h,p,g,y,I,w,D,E,R=t.message;return u(),n.$set=function(n){"message"in n&&u(e(0,R=n.message))},n.$$.update=function(){4096&n.$$.dirty&&(e(1,d=r&&r.lastMessage||M(null)),l(),l=N(d,function(n){return e(20,s=n)})),4096&n.$$.dirty&&e(2,$=r&&r.message&&H(r.message)||""),4096&n.$$.dirty&&(r&&r.id||null),4096&n.$$.dirty&&e(14,v=r&&r.createdAt||null),16384&n.$$.dirty&&e(3,m=v&&O(v)||""),69632&n.$$.dirty&&e(15,h=r&&c&&j(c,r.userId)||null),49152&n.$$.dirty&&(e(4,p=h&&v&&L(h,v)||M(null)),f(),f=N(p,function(n){return e(18,o=n)})),294912&n.$$.dirty&&e(17,o&&o.name||h&&h.name||""),557056&n.$$.dirty&&e(5,g=!h||h.id===i),1052672&n.$$.dirty&&e(6,y=s&&r.userId!==s.userId||!1),1052672&n.$$.dirty&&e(7,I=s&&r.userId==s.userId||!1),1052672&n.$$.dirty&&e(8,w=r&&(!s||B(s.createdAt,r.createdAt)>P.DATE_SHOWN_MESSAGE_DATE_DIFF)||!1),4096&n.$$.dirty&&e(9,D=r&&r.likes&&r.likes.length||!1),n.$$.dirty,262144&n.$$.dirty&&e(10,E=o&&o.name||!1)},[R,d,$,m,p,g,y,I,w,D,E,function(){E&&z(o.id)}]}var On=function(t){n(a,s);var e=An(a);function a(n){var t;return r(this,a),t=e.call(this),c(i(t),n,Hn,Mn,o,{message:0}),t}return a}();function jn(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}();return function(){var c,o=t(n);if(r){var i=t(this).constructor;c=Reflect.construct(o,arguments,i)}else c=o.apply(this,arguments);return e(this,c)}}function Ln(n,t,e){var r=n.slice();return r[3]=t[e],r}function Bn(n){var t,e=new On({props:{message:n[3]}});return{c:function(){g(e.$$.fragment)},l:function(n){y(e.$$.fragment,n)},m:function(n,r){I(e,n,r),t=!0},p:function(n,t){var r={};4&t&&(r.message=n[3]),e.$set(r)},i:function(n){t||(w(e.$$.fragment,n),t=!0)},o:function(n){D(e.$$.fragment,n),t=!1},d:function(n){E(e,n)}}}function Pn(n){for(var t,e,r,c=n[2],o=[],i=0;i<c.length;i+=1)o[i]=Bn(Ln(n,c,i));var s=function(n){return D(o[n],1,1,function(){o[n]=null})};return{c:function(){t=a("div");for(var n=0;n<o.length;n+=1)o[n].c();this.h()},l:function(n){t=f(n,"DIV",{class:!0});for(var e=l(t),r=0;r<o.length;r+=1)o[r].l(e);e.forEach($),this.h()},h:function(){v(t,"class",e="messageList "+n[1]+" svelte-szvkl4")},m:function(n,e){m(n,t,e);for(var c=0;c<o.length;c+=1)o[c].m(t,null);r=!0},p:function(n,i){var a=x(i,1)[0];if(4&a){var u;for(c=n[2],u=0;u<c.length;u+=1){var f=Ln(n,c,u);o[u]?(o[u].p(f,a),w(o[u],1)):(o[u]=Bn(f),o[u].c(),w(o[u],1),o[u].m(t,null))}for(_(),u=c.length;u<o.length;u+=1)s(u);V()}(!r||2&a&&e!==(e="messageList "+n[1]+" svelte-szvkl4"))&&v(t,"class",e)},i:function(n){if(!r){for(var t=0;t<c.length;t+=1)w(o[t]);r=!0}},o:function(n){o=o.filter(Boolean);for(var t=0;t<o.length;t+=1)D(o[t]);r=!1},d:function(n){n&&$(t),W(o,n)}}}function Gn(n,t,e){var r,c=b,o=function(){return c(),c=N(i,function(n){return e(2,r=n)}),i};n.$$.on_destroy.push(function(){return c()});var i=t.messages;o();var s=t.className,a=void 0===s?"":s;return n.$set=function(n){"messages"in n&&o(e(0,i=n.messages)),"className"in n&&e(1,a=n.className)},[i,a,r]}var qn=function(t){n(a,s);var e=jn(a);function a(n){var t;return r(this,a),t=e.call(this),c(i(t),n,Gn,Pn,o,{messages:0,className:1}),t}return a}();function zn(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}();return function(){var c,o=t(n);if(r){var i=t(this).constructor;c=Reflect.construct(o,arguments,i)}else c=o.apply(this,arguments);return e(this,c)}}function Wn(n){var t,e,r,c,o,i,s,u,d=new q({props:{className:"sendButton",disabled:!n[2],onClick:n[3],icon:_n}});return{c:function(){t=a("div"),e=a("div"),g(d.$$.fragment),r=R(),c=a("div"),o=a("textarea"),this.h()},l:function(n){t=f(n,"DIV",{class:!0});var i=l(t);e=f(i,"DIV",{class:!0});var s=l(e);y(d.$$.fragment,s),r=k(s),c=f(s,"DIV",{class:!0});var a=l(c);o=f(a,"TEXTAREA",{rows:!0,class:!0}),l(o).forEach($),a.forEach($),s.forEach($),i.forEach($),this.h()},h:function(){v(o,"rows","1"),v(o,"class","svelte-uhjl0u"),v(c,"class","field svelte-uhjl0u"),v(e,"class","fieldRegion svelte-uhjl0u"),v(t,"class","messageInput svelte-uhjl0u")},m:function(a,f){m(a,t,f),h(t,e),I(d,e,null),h(e,r),h(e,c),h(c,o),K(o,n[0]),n[13](o),i=!0,s||(u=[Y(o,"input",n[12]),Y(o,"keypress",n[14])],s=!0)},p:function(n,t){var e=x(t,1)[0],r={};4&e&&(r.disabled=!n[2]),d.$set(r),1&e&&K(o,n[0])},i:function(n){i||(w(d.$$.fragment,n),i=!0)},o:function(n){D(d.$$.fragment,n),i=!1},d:function(e){e&&$(t),E(d),n[13](null),s=!1,J(u)}}}function Fn(n,t,e){var r,c,o;A(n,Z,function(n){return e(6,r=n)}),A(n,nn,function(n){return e(7,c=n)}),A(n,tn,function(n){return e(8,o=n)});var i,s=t.message,a=void 0===s?"":s,u=t.image,f=void 0===u?null:u,l=en(),d=rn();function $(){if(h){var n={id:l,message:on(a)};r&&!c&&(n.conversationId=r),f&&(n.image=f),c&&(n.newConversation=!0,n.targetUserIds=o,n.conversationId=d),e(0,a=""),l=en(),function(n){if(F()){var t=Q(n);return t.then(function(n){n&&!n.error&&n.newConversation&&(n.conversation&&U(n.conversation),n.conversationId&&X(n.conversationId,!0,!0))}),t}}(n).then(function(n){n&&(n.success||n.addedMessage||n.duplicateKey)})}}function v(){h&&($(),i&&i.focus())}function m(){sn(an.mark(function n(){var t;return an.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,un();case 2:i&&i.style&&"undefined"!=typeof window&&window.getComputedStyle&&(e(1,i.style.height="inherit",i),window.getComputedStyle(i)&&(t=i.scrollHeight+4,e(1,i.style.height=t+"px",i)));case 3:case"end":return n.stop()}},n)}))()}cn(function(){i&&i.focus()});var h;return n.$set=function(n){"message"in n&&e(0,a=n.message),"image"in n&&e(4,f=n.image)},n.$$.update=function(){209&n.$$.dirty&&e(2,h=(r||c)&&!(!on(a)&&!f)),1&n.$$.dirty&&m()},[a,i,h,v,f,l,r,c,o,d,$,m,function(){a=this.value,e(0,a)},function(n){fn[n?"unshift":"push"](function(){e(1,i=n)})},function(n){return ln(n,{action:v,actionOnCtrl:!0,preventBlur:!0})}]}var Qn=function(t){n(a,s);var e=zn(a);function a(n){var t;return r(this,a),t=e.call(this),c(i(t),n,Fn,Wn,o,{message:0,image:4}),t}return a}();function Un(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}();return function(){var c,o=t(n);if(r){var i=t(this).constructor;c=Reflect.construct(o,arguments,i)}else c=o.apply(this,arguments);return e(this,c)}}function Xn(n){var t,e=new Vn({props:{location:n[2]}});return{c:function(){g(e.$$.fragment)},l:function(n){y(e.$$.fragment,n)},m:function(n,r){I(e,n,r),t=!0},p:function(n,t){var r={};4&t&&(r.location=n[2]),e.$set(r)},i:function(n){t||(w(e.$$.fragment,n),t=!0)},o:function(n){D(e.$$.fragment,n),t=!1},d:function(n){E(e,n)}}}function Kn(n){var t,e,r,c,o,i,s,b,S,A,T,C,N,M=new G({props:{user:dn,useThumb:!0}}),H=n[2]&&Xn(n);return{c:function(){t=a("div"),e=a("div"),r=a("div"),g(M.$$.fragment),c=R(),o=a("div"),i=u(n[0]),s=R(),b=a("div"),S=u(n[1]),A=R(),H&&H.c(),this.h()},l:function(a){t=f(a,"DIV",{class:!0});var u=l(t);e=f(u,"DIV",{class:!0});var v=l(e);r=f(v,"DIV",{class:!0});var m=l(r);y(M.$$.fragment,m),c=k(m),o=f(m,"DIV",{class:!0});var h=l(o);i=d(h,n[0]),h.forEach($),s=k(m),b=f(m,"DIV",{class:!0});var p=l(b);S=d(p,n[1]),p.forEach($),m.forEach($),A=k(v),H&&H.l(v),v.forEach($),u.forEach($),this.h()},h:function(){v(o,"class","userDisplayName svelte-yn8q53"),v(b,"class","username svelte-yn8q53"),v(r,"class","profileRegion button svelte-yn8q53"),v(e,"class","profileInfo svelte-yn8q53"),v(t,"class","conversationProfile svelte-yn8q53")},m:function(a,u){m(a,t,u),h(t,e),h(e,r),I(M,r,null),h(r,c),h(r,o),h(o,i),h(r,s),h(r,b),h(b,S),h(e,A),H&&H.m(e,null),T=!0,C||(N=Y(r,"click",n[3]),C=!0)},p:function(n,t){var r=x(t,1)[0];(!T||1&r)&&p(i,n[0]),(!T||2&r)&&p(S,n[1]),n[2]?H?(H.p(n,r),4&r&&w(H,1)):((H=Xn(n)).c(),w(H,1),H.m(e,null)):H&&(_(),D(H,1,1,function(){H=null}),V())},i:function(n){T||(w(M.$$.fragment,n),w(H),T=!0)},o:function(n){D(M.$$.fragment,n),D(H),T=!1},d:function(n){n&&$(t),E(M),H&&H.d(),C=!1,N()}}}function Yn(n,t,e){var r,c,o,i;return A(n,dn,function(n){return e(4,r=n)}),n.$$.update=function(){16&n.$$.dirty&&e(0,c=r&&r.name||""),16&n.$$.dirty&&e(1,o=r&&r.username&&"@"+r.username||""),16&n.$$.dirty&&e(2,i=r&&r.location||"")},[c,o,i,function(){r&&r.id&&z(r.id)}]}var Jn=function(t){n(a,s);var e=Un(a);function a(n){var t;return r(this,a),t=e.call(this),c(i(t),n,Yn,Kn,o,{}),t}return a}();function Zn(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}();return function(){var c,o=t(n);if(r){var i=t(this).constructor;c=Reflect.construct(o,arguments,i)}else c=o.apply(this,arguments);return e(this,c)}}function nt(n){var t,e;function r(t){n[27].call(null,t)}var c={onScroll:n[10],anchorToBottom:!0,id:"conversation",$$slots:{default:[ot]},$$scope:{ctx:n}};void 0!==n[2]&&(c.scrollRegion=n[2]);var o=new En({props:c});return fn.push(function(){return bn(o,"scrollRegion",r)}),{c:function(){g(o.$$.fragment)},l:function(n){y(o.$$.fragment,n)},m:function(n,t){I(o,n,t),e=!0},p:function(n,e){var r={};268435617&e&&(r.$$scope={dirty:e,ctx:n}),!t&&4&e&&(t=!0,r.scrollRegion=n[2],Rn(function(){return t=!1})),o.$set(r)},i:function(n){e||(w(o.$$.fragment,n),e=!0)},o:function(n){D(o.$$.fragment,n),e=!1},d:function(n){E(o,n)}}}function tt(n){var t,e=new Sn({props:{label:pn.CONVERSATION.NO_MESSAGES}});return{c:function(){g(e.$$.fragment)},l:function(n){y(e.$$.fragment,n)},m:function(n,r){I(e,n,r),t=!0},p:b,i:function(n){t||(w(e.$$.fragment,n),t=!0)},o:function(n){D(e.$$.fragment,n),t=!1},d:function(n){E(e,n)}}}function et(n){var t,e=new Sn({props:{label:pn.LOADING.MESSAGES}});return{c:function(){g(e.$$.fragment)},l:function(n){y(e.$$.fragment,n)},m:function(n,r){I(e,n,r),t=!0},p:b,i:function(n){t||(w(e.$$.fragment,n),t=!0)},o:function(n){D(e.$$.fragment,n),t=!1},d:function(n){E(e,n)}}}function rt(n){var t,e=new qn({props:{messages:n[0]}});return{c:function(){g(e.$$.fragment)},l:function(n){y(e.$$.fragment,n)},m:function(n,r){I(e,n,r),t=!0},p:function(n,t){var r={};1&t&&(r.messages=n[0]),e.$set(r)},i:function(n){t||(w(e.$$.fragment,n),t=!0)},o:function(n){D(e.$$.fragment,n),t=!1},d:function(n){E(e,n)}}}function ct(n){var t,e=new Jn({});return{c:function(){g(e.$$.fragment)},l:function(n){y(e.$$.fragment,n)},m:function(n,r){I(e,n,r),t=!0},p:b,i:function(n){t||(w(e.$$.fragment,n),t=!0)},o:function(n){D(e.$$.fragment,n),t=!1},d:function(n){E(e,n)}}}function ot(n){var t,e,r,c,o=[ct,rt],i=[];function s(n,t){return n[7]?0:n[5]?1:-1}return~(t=s(n))&&(e=i[t]=o[t](n)),{c:function(){e&&e.c(),r=kn()},l:function(n){e&&e.l(n),r=kn()},m:function(n,e){~t&&i[t].m(n,e),m(n,r,e),c=!0},p:function(n,c){var a=t;(t=s(n))===a?~t&&i[t].p(n,c):(e&&(_(),D(i[a],1,1,function(){i[a]=null}),V()),~t?((e=i[t])||(e=i[t]=o[t](n)).c(),w(e,1),e.m(r.parentNode,r)):e=null)},i:function(n){c||(w(e),c=!0)},o:function(n){D(e),c=!1},d:function(n){~t&&i[t].d(n),n&&$(r)}}}function it(n){var t,e,r,c,o,i=pn.CONVERSATION.MESSAGES_ADDED+"";return{c:function(){t=a("div"),e=a("div"),r=u(i),this.h()},l:function(n){t=f(n,"DIV",{class:!0});var c=l(t);e=f(c,"DIV",{class:!0});var o=l(e);r=d(o,i),o.forEach($),c.forEach($),this.h()},h:function(){v(e,"class","messagesAddedIndicator button svelte-ed6b4u"),v(t,"class","messagesAddedIndicatorContainer svelte-ed6b4u")},m:function(i,s){m(i,t,s),h(t,e),h(e,r),c||(o=Y(e,"click",n[9]),c=!0)},p:b,d:function(n){n&&$(t),c=!1,o()}}}function st(n){var t,e=new Qn({});return{c:function(){g(e.$$.fragment)},l:function(n){y(e.$$.fragment,n)},m:function(n,r){I(e,n,r),t=!0},i:function(n){t||(w(e.$$.fragment,n),t=!0)},o:function(n){D(e.$$.fragment,n),t=!1},d:function(n){E(e,n)}}}function at(n){var t,e,r,c,o,i,s,u,d,p;$n(n[26]);var g=[et,tt,nt],y=[];function I(n,t){return n[6]?0:n[5]&&n[5].length||n[7]?2:1}c=I(n),o=y[c]=g[c](n);var E=n[1]&&it(n),b=n[8]&&st();return{c:function(){t=R(),e=a("div"),r=a("div"),o.c(),i=R(),E&&E.c(),s=R(),b&&b.c(),this.h()},l:function(n){vn('[data-svelte="svelte-1y4v7mn"]',document.head).forEach($),t=k(n),e=f(n,"DIV",{class:!0});var c=l(e);r=f(c,"DIV",{class:!0});var a=l(r);o.l(a),i=k(a),E&&E.l(a),a.forEach($),s=k(c),b&&b.l(c),c.forEach($),this.h()},h:function(){document.title="Flock",v(r,"class","messagesView svelte-ed6b4u"),S(r,"newConversation",n[7]),v(e,"class","content svelte-ed6b4u")},m:function(o,a){m(o,t,a),m(o,e,a),h(e,r),y[c].m(r,null),h(r,i),E&&E.m(r,null),h(e,s),b&&b.m(e,null),u=!0,d||(p=Y(window,"resize",n[26]),d=!0)},p:function(n,t){var s=x(t,1)[0],a=c;(c=I(n))===a?y[c].p(n,s):(_(),D(y[a],1,1,function(){y[a]=null}),V(),(o=y[c])||(o=y[c]=g[c](n)).c(),w(o,1),o.m(r,i)),n[1]?E?E.p(n,s):((E=it(n)).c(),E.m(r,null)):E&&(E.d(1),E=null),128&s&&S(r,"newConversation",n[7]),n[8]?b?256&s&&w(b,1):((b=st()).c(),w(b,1),b.m(e,null)):b&&(_(),D(b,1,1,function(){b=null}),V())},i:function(n){u||(w(o),w(b),u=!0)},o:function(n){D(o),D(b),u=!1},d:function(n){n&&$(t),n&&$(e),y[c].d(),E&&E.d(),b&&b.d(),d=!1,p()}}}function ut(n,t,e){var r,c,o,i,s,a,u,f,l=b,d=function(){return l(),l=N(m,function(n){return e(5,s=n)}),m};A(n,T,function(n){return e(14,r=n)}),A(n,C,function(n){return e(15,c=n)}),A(n,gn,function(n){return e(16,o=n)}),A(n,Z,function(n){return e(17,i=n)}),A(n,yn,function(n){return e(19,a=n)}),A(n,In,function(n){return e(21,u=n)}),A(n,nn,function(n){return e(7,f=n)}),n.$$.on_destroy.push(function(){return l()}),mn();var $=0,v=t.messages,m=void 0===v?M(null):v;function h(){d(e(0,m=r&&wn({conversationId:i},null,r.isNew)||m))}d();var p,g,y,I=!1,w=0;function D(){return E.apply(this,arguments)}function E(){return(E=sn(an.mark(function n(){return an.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!p){n.next=4;break}return n.next=3,un();case 3:p&&p.scrollTo(0,p.scrollHeight);case 4:case"end":return n.stop()}},n)}))).apply(this,arguments)}function R(){return k.apply(this,arguments)}function k(){return(k=sn(an.mark(function n(){return an.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!p){n.next=9;break}if(!(s&&s.length>$)){n.next=9;break}if(!(p.scrollTop+p.offsetHeight>p.scrollHeight-P.MIN_AUTO_SCROLL_BOTTOM_DIST)){n.next=8;break}return n.next=5,un();case 5:p.scrollTo(0,p.scrollHeight),n.next=9;break;case 8:e(1,I=!0);case 9:$=s?s.length:0;case 10:case"end":return n.stop()}},n)}))).apply(this,arguments)}var S,x,_,V,H,O,j=!1;return cn(function(){j=!0,Dn.on("messagedAdded",D)}),hn(function(){j=!1,Dn.off("messagedAdded",D)}),n.$set=function(n){"messages"in n&&d(e(0,m=n.messages))},n.$$.update=function(){16384&n.$$.dirty&&h(),98304&n.$$.dirty&&mn(),32&n.$$.dirty&&R(),524320&n.$$.dirty&&e(18,S=a&&!s),2244608&n.$$.dirty&&e(20,x=u&&(!r||r.id!==i)),1310848&n.$$.dirty&&e(6,_=(S||x)&&!f),49344&n.$$.dirty&&e(8,V=!_&&c&&(r||f)),16384&n.$$.dirty&&e(22,H=r&&r.isGroup||!1),4194304&n.$$.dirty&&(O=H?"messages_group_view":"message_view"),4120&n.$$.dirty&&(g&&y<P.MOBILE_DEVICE_MAX_WIDTH&&g<w&&(D(),sn(an.mark(function n(){return an.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,un();case 2:D();case 3:case"end":return n.stop()}},n)}))()),e(12,w=g))},[m,I,p,g,y,s,_,f,V,D,function(){I&&p.scrollTop+p.offsetHeight>p.scrollHeight-P.MIN_HIDE_MESSAGES_BOTTOM_DIST&&e(1,I=!1)},$,w,j,r,c,o,i,S,a,x,u,H,O,h,R,function(){e(3,g=window.innerHeight),e(4,y=window.innerWidth)},function(n){e(2,p=n)}]}export default(function(t){n(a,s);var e=Zn(a);function a(n){var t;return r(this,a),t=e.call(this),c(i(t),n,ut,at,o,{messages:0}),t}return a}());
