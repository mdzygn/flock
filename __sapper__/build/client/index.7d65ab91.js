import{S as t,i as e,s as n,C as s,D as a,E as l,K as o,t as r,c,F as i,a1 as $,q as d,R as u,r as m,u as f,T as p,d as g,v as h,b as y,x as A,z as v,e as w,A as I,B as D,l as b,G as E,L as P,I as C,U as H,J as T,ad as L,a4 as N,a3 as M,ae as S,Y as V,aG as R,af as B,ah as k,ai as O,aj as x,ak as F,m as W,ag as j,W as z,am as Y,V as K,ap as G,b7 as Q,$ as U,an as Z,aE as q,cv as J,cw as X,aq as _,aa as tt,ar as et,as as nt,at as st,cx as at,H as lt,aX as ot,aw as rt,cy as ct,o as it,g as $t,a7 as dt,ax as ut,cz as mt,ay as ft,n as pt,aM as gt,aN as ht,aD as yt,cl as At,ck as vt,a5 as wt,aC as It,cA as Dt,cB as bt,cC as Et,a9 as Pt,ab as Ct}from"./client.2c27e6e9.js";import{S as Ht}from"./Proxy.f1034817.js";import"./Hotspot.7b84e31e.js";import{C as Tt}from"./ContentLoader.4dd1251b.js";import{N as Lt}from"./NewPostButton.d6c24b16.js";import"./Counter.ab185b78.js";import{a as Nt,P as Mt}from"./PostItem.539b9da5.js";import"./post_like_selected.c79724df.js";import"./SearchBar.c6972521.js";import"./next_arrow.b1598f96.js";import{F as St,c as Vt,A as Rt,a as Bt,b as kt,L as Ot,S as xt}from"./ActionBar.e9ec54f7.js";import"./send.53c7ac4a.js";import"./ImageSelectionBox.330f5f13.js";import"./save.71e29683.js";import{E as Ft}from"./EditPost.accd1522.js";const Wt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA2CAYAAACbZ/oUAAADaklEQVRoQ+2Zi43UMBCG/6uA6wCoAKgAqACoAKgAqADoACoAOoAKgA6ggrsODioAfVIGzXrt2PHjiLIZabUrbWzP53naOdOJydmJ8WoH3rrFdwvvFt7YDuwu3WDQc0kvJD2Q9FnS+4a5hg3tZeG7kr5KAtoE6CfDNK+cuAdwDNbUuSfpR6VuQ4a1AoewvyX9knRz0vahpG9DNK+ctAU4Bkv8vpN0f9LnraQ3lboNGVYLnILFfbHopoDnYLHKpoBzsJsCLoENgS0OSWS4++X0wQu+DwnSzKSlMVwKy3IfJT0thKFWA/9pyu6Fw+ofKwFeAosmPA+IlaZS7RjDZn0pHVDzXA54KWxKB+ahC+Ob0sV3akNwe0oZVu8uc8C9YFNK35L0WNIzSXciDxHzr3o3Ling0bAhH+u9TMQ+bg44ia9ZYsC43oU7CNAu4obX0ROzNuCvAzLc/HkPa8eAiR9b8DphPSPuTov6KABnM5qOnTFgrMuCCK7Ewv9LiG/Wv+EUwMWxdpXEgP+4mW5PjULV5J0GsfmULJ/YqqFzwGs5zxLbWNo3NFXQMWDf/BMvxM1aJOziFkPHgImbD46QeGHitUgIvejMnarD3sqArh2auzPiPCspYGIGaJ8o1gZNX2D60ZSQYLPNyVxrORKaubPKZczFHDQkVrIwEHdos5I7PNRC0ypyzUNJ4bcdHlLKYC07L6P4z8INoQPketgk64U5YCZaCh0mvdymp/63szLHRSyZEp/EeI5SmvSeEuCl0CgatoS10DbO3mTErnxD157N2qXAS6B9hucah97crnhi4Lg9H9zTvlNnZdweoDAj+/5/NoEtAS6F7nFraRcFqbMyaxCv3tX5bRuVjOWlwCXQPYC9J2B5wGP3ZFgWiyPeysBTpo6kBjgH3RvYlMbdgQrBcXMrR1eOMHoOqAWeg8Ya9uZhxPHSXuf4poi4BdrfmnAnhi4H0gKcgvYLjHyZ5l3Y1qSEWYWIunUr8Bw0tyW4YWtHNVfS7OW7vyDwzx+5dQ9ggw7Pq9mup7U4T+PJ6DQfsZvPo5DqBewTC1a1VyqdmLLTxLpBBh3FcW/grGYDH4hBk8Fx63+yJWCgcG/Koo/pA8atAQMdnqA2Dww09ZcPPffBNfMWLTybJnbggVl0FVPvFl6FGQYqcXIW/gs1ftA35nDwRwAAAABJRU5ErkJggg==";function jt(t){let e;const n=new z({props:{className:"optionsButton",icon:Y,onClick:t[23]}});return{c(){s(n.$$.fragment)},l(t){a(n.$$.fragment,t)},m(t,s){l(n,t,s),e=!0},p:o,i(t){e||(r(n.$$.fragment,t),e=!0)},o(t){c(n.$$.fragment,t),e=!1},d(t){i(n,t)}}}function zt(t){let e;const n=new z({props:{className:"followButton",onClick:t[24],icon:t[4]?St:Vt}});return{c(){s(n.$$.fragment)},l(t){a(n.$$.fragment,t)},m(t,s){l(n,t,s),e=!0},p(t,e){const s={};16&e[0]&&(s.icon=t[4]?St:Vt),n.$set(s)},i(t){e||(r(n.$$.fragment,t),e=!0)},o(t){c(n.$$.fragment,t),e=!1},d(t){i(n,t)}}}function Yt(t){let e,n,s=K.POST.EDITED+"";return{c(){e=d("span"),n=u(s),this.h()},l(t){e=m(t,"SPAN",{class:!0,title:!0});var a=f(e);n=p(a,s),a.forEach(g),this.h()},h(){h(e,"class","edited svelte-3tnyse"),h(e,"title",t[13])},m(t,s){y(t,e,s),A(e,n)},p(t,n){8192&n[0]&&h(e,"title",t[13])},d(t){t&&g(e)}}}function Kt(t){let e;return{c(){e=d("div"),this.h()},l(t){e=m(t,"DIV",{class:!0}),f(e).forEach(g),this.h()},h(){h(e,"class","title svelte-3tnyse")},m(n,s){y(n,e,s),e.innerHTML=t[18]},p(t,n){262144&n[0]&&(e.innerHTML=t[18])},d(t){t&&g(e)}}}function Gt(t){let e;return{c(){e=d("div"),this.h()},l(t){e=m(t,"DIV",{class:!0}),f(e).forEach(g),this.h()},h(){h(e,"class","message svelte-3tnyse")},m(n,s){y(n,e,s),e.innerHTML=t[19]},p(t,n){524288&n[0]&&(e.innerHTML=t[19])},d(t){t&&g(e)}}}function Qt(t){let e,n;return{c(){e=d("img"),this.h()},l(t){e=m(t,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){h(e,"class","postImage svelte-3tnyse"),e.src!==(n=t[2])&&h(e,"src",n),h(e,"alt","post")},m(t,n){y(t,e,n)},p(t,s){4&s[0]&&e.src!==(n=t[2])&&h(e,"src",n)},d(t){t&&g(e)}}}function Ut(t){let e;const n=new Rt({props:{targetItemId:t[6],targetItem:t[5],$$slots:{default:[Xt],buttonRight:[Jt],buttonMiddle:[qt],buttonLeft:[Zt]},$$scope:{ctx:t}}});return{c(){s(n.$$.fragment)},l(t){a(n.$$.fragment,t)},m(t,s){l(n,t,s),e=!0},p(t,e){const s={};64&e[0]&&(s.targetItemId=t[6]),32&e[0]&&(s.targetItem=t[5]),96&e[0]|4&e[1]&&(s.$$scope={dirty:e,ctx:t}),n.$set(s)},i(t){e||(r(n.$$.fragment,t),e=!0)},o(t){c(n.$$.fragment,t),e=!1},d(t){i(n,t)}}}function Zt(t){let e,n;const o=new Bt({props:{label:"like",icon:kt,selectedIcon:Ot,targetItem:t[5],targetItemId:t[6],action:G,targetItemProperty:"liked",countProperty:"likeCount"}});return{c(){e=d("div"),s(o.$$.fragment),this.h()},l(t){e=m(t,"DIV",{slot:!0});var n=f(e);a(o.$$.fragment,n),n.forEach(g),this.h()},h(){h(e,"slot","buttonLeft")},m(t,s){y(t,e,s),l(o,e,null),n=!0},p(t,e){const n={};32&e[0]&&(n.targetItem=t[5]),64&e[0]&&(n.targetItemId=t[6]),o.$set(n)},i(t){n||(r(o.$$.fragment,t),n=!0)},o(t){c(o.$$.fragment,t),n=!1},d(t){t&&g(e),i(o)}}}function qt(t){let e,n;const $=new Bt({props:{label:"share",icon:xt,action:t[22]}});return{c(){e=d("div"),s($.$$.fragment),this.h()},l(t){e=m(t,"DIV",{slot:!0});var n=f(e);a($.$$.fragment,n),n.forEach(g),this.h()},h(){h(e,"slot","buttonMiddle")},m(t,s){y(t,e,s),l($,e,null),n=!0},p:o,i(t){n||(r($.$$.fragment,t),n=!0)},o(t){c($.$$.fragment,t),n=!1},d(t){t&&g(e),i($)}}}function Jt(t){let e,n;const $=new Bt({props:{label:"reply",icon:Wt,action:t[21]}});return{c(){e=d("div"),s($.$$.fragment),this.h()},l(t){e=m(t,"DIV",{slot:!0});var n=f(e);a($.$$.fragment,n),n.forEach(g),this.h()},h(){h(e,"slot","buttonRight")},m(t,s){y(t,e,s),l($,e,null),n=!0},p:o,i(t){n||(r($.$$.fragment,t),n=!0)},o(t){c($.$$.fragment,t),n=!1},d(t){t&&g(e),i($)}}}function Xt(t){let e,n;return{c(){e=v(),n=v()},l(t){e=I(t),n=I(t)},m(t,s){y(t,e,s),y(t,n,s)},p:o,i:o,o:o,d(t){t&&g(e),t&&g(n)}}}function _t(t){let e,n,o,T,L,N,M,S,V,R,B,k,O,x,F,W,j,z,Y,K,G,U=(t[10]||t[11])&&jt(t),Z=t[11]&&zt(t);const q=new $({props:{user:t[1],onClick:t[7]?t[20]:null,useThumb:!0}});let J=t[12]&&Yt(t),X=t[14]&&Kt(t),_=t[15]&&Gt(t),tt=t[16]&&Qt(t),et=!t[3]&&Ut(t);return{c(){e=d("div"),U&&U.c(),n=v(),Z&&Z.c(),o=v(),T=d("div"),L=d("div"),N=v(),M=d("div"),S=u(t[9]),V=v(),s(q.$$.fragment),R=v(),B=d("div"),k=d("div"),x=w(),J&&J.c(),F=v(),X&&X.c(),W=v(),_&&_.c(),j=v(),tt&&tt.c(),z=v(),et&&et.c(),this.h()},l(s){e=m(s,"DIV",{class:!0});var l=f(e);U&&U.l(l),n=I(l),Z&&Z.l(l),o=I(l),T=m(l,"DIV",{class:!0});var r=f(T);L=m(r,"DIV",{class:!0}),f(L).forEach(g),N=I(r),M=m(r,"DIV",{class:!0});var c=f(M);S=p(c,t[9]),c.forEach(g),r.forEach(g),V=I(l),a(q.$$.fragment,l),R=I(l),B=m(l,"DIV",{class:!0});var i=f(B);k=m(i,"DIV",{class:!0});var $=f(k);x=w(),J&&J.l($),$.forEach(g),F=I(i),X&&X.l(i),W=I(i),_&&_.l(i),i.forEach(g),j=I(l),tt&&tt.l(l),z=I(l),et&&et.l(l),l.forEach(g),this.h()},h(){h(L,"class","userName svelte-3tnyse"),D(L,"button",t[7]),h(M,"class","username svelte-3tnyse"),D(M,"button",t[7]),h(T,"class","info svelte-3tnyse"),O=new Q(x),h(k,"class","date svelte-3tnyse"),h(B,"class","postContent svelte-3tnyse"),h(e,"class","threadPost svelte-3tnyse")},m(s,a){y(s,e,a),U&&U.m(e,null),A(e,n),Z&&Z.m(e,null),A(e,o),A(e,T),A(T,L),L.innerHTML=t[8],A(T,N),A(T,M),A(M,S),A(e,V),l(q,e,null),A(e,R),A(e,B),A(B,k),O.m(t[17],k),A(k,x),J&&J.m(k,null),A(B,F),X&&X.m(B,null),A(B,W),_&&_.m(B,null),A(e,j),tt&&tt.m(e,null),A(e,z),et&&et.m(e,null),Y=!0,K||(G=b(T,"click",function(){E(t[7]?t[20]:null)&&(t[7]?t[20]:null).apply(this,arguments)}),K=!0)},p(s,a){(t=s)[10]||t[11]?U?(U.p(t,a),3072&a[0]&&r(U,1)):((U=jt(t)).c(),r(U,1),U.m(e,n)):U&&(P(),c(U,1,1,()=>{U=null}),C()),t[11]?Z?(Z.p(t,a),2048&a[0]&&r(Z,1)):((Z=zt(t)).c(),r(Z,1),Z.m(e,o)):Z&&(P(),c(Z,1,1,()=>{Z=null}),C()),(!Y||256&a[0])&&(L.innerHTML=t[8]),128&a[0]&&D(L,"button",t[7]),(!Y||512&a[0])&&H(S,t[9]),128&a[0]&&D(M,"button",t[7]);const l={};2&a[0]&&(l.user=t[1]),128&a[0]&&(l.onClick=t[7]?t[20]:null),q.$set(l),(!Y||131072&a[0])&&O.p(t[17]),t[12]?J?J.p(t,a):((J=Yt(t)).c(),J.m(k,null)):J&&(J.d(1),J=null),t[14]?X?X.p(t,a):((X=Kt(t)).c(),X.m(B,W)):X&&(X.d(1),X=null),t[15]?_?_.p(t,a):((_=Gt(t)).c(),_.m(B,null)):_&&(_.d(1),_=null),t[16]?tt?tt.p(t,a):((tt=Qt(t)).c(),tt.m(e,z)):tt&&(tt.d(1),tt=null),t[3]?et&&(P(),c(et,1,1,()=>{et=null}),C()):et?(et.p(t,a),8&a[0]&&r(et,1)):((et=Ut(t)).c(),r(et,1),et.m(e,null))},i(t){Y||(r(U),r(Z),r(q.$$.fragment,t),r(et),Y=!0)},o(t){c(U),c(Z),c(q.$$.fragment,t),c(et),Y=!1},d(t){t&&g(e),U&&U.d(),Z&&Z.d(),i(q),J&&J.d(),X&&X.d(),_&&_.d(),tt&&tt.d(),et&&et.d(),K=!1,G()}}}function te(t,e,n){let s,a,l,r,c,i,$=o,d=()=>($(),$=V(f,t=>n(5,l=t)),f),u=o,m=()=>(u(),u=V(p,t=>n(29,r=t)),p);T(t,L,t=>n(25,s=t)),T(t,N,t=>n(27,a=t)),T(t,M,t=>n(30,c=t)),T(t,S,t=>n(32,i=t)),t.$$.on_destroy.push(()=>$()),t.$$.on_destroy.push(()=>u());let{post:f}=e;d();let p=U([]);m();let g,h,y,A,v,w,I,D,b,E,P,C,H,z,Y,K,G,Q,lt,ot=Nt;return t.$set=(t=>{"post"in t&&d(n(0,f=t.post))}),t.$$.update=(()=>{33554432&t.$$.dirty[0]&&n(3,g=s&&s.archived||!1),167772160&t.$$.dirty[0]&&n(26,h=a&&s&&R(s)),32&t.$$.dirty[0]&&n(4,y=l&&l.following||!1),32&t.$$.dirty[0]&&n(28,A=l&&l.userId||null),32&t.$$.dirty[0]&&n(6,v=l&&l.id||null),268435456&t.$$.dirty[0]&&m(n(1,p=B(A))),536870912&t.$$.dirty[0]&&n(7,w=r&&r.name||!1),536870912&t.$$.dirty[0]&&n(8,I=r&&r.name||"&nbsp;"),536870912&t.$$.dirty[0]&&n(9,D=r&&r.username&&"@"+r.username||""),1073741856&t.$$.dirty[0]&&n(10,b=l&&l.userId&&l.userId===c||!1),67109888&t.$$.dirty[0]&&n(11,E=!b&&!h),32&t.$$.dirty[0]&&n(12,P=l&&l.edited&&k(l.createdAt,l.editedAt)>O.SHOW_EDITED_MIN_TIME||!1),4128&t.$$.dirty[0]&&n(13,C=P&&l.editedAt&&x(l.editedAt)||""),32&t.$$.dirty[0]&&n(14,H=l&&l.title||""),32&t.$$.dirty[0]&&n(15,z=l&&l.message||""),32&t.$$.dirty[0]&&n(16,Y=l&&l.image||""),32&t.$$.dirty[0]&&n(31,K=l&&l.createdAt||""),1&t.$$.dirty[1]&&n(17,G=K&&x(K,"ddd d MMM")+" at "+x(K,"h:mmtt")||"&nbsp;"),16384&t.$$.dirty[0]&&n(18,Q=F(H)),32768&t.$$.dirty[0]&&n(19,lt=F(z)),65536&t.$$.dirty[0]&&(async()=>{await W(),n(2,ot=Nt),await W(),setTimeout(()=>{n(2,ot=j(Y))},0)})()}),[f,p,ot,g,y,l,v,w,I,D,b,E,P,C,H,z,Y,G,Q,lt,function(){w&&Z(A)},function(){q()&&J()},function(){X(v)},function(){const t=_(v);if(t){const e=tt(t);et(S,i=e),nt(st.THREAD_POST_OPTIONS)}},function(){at(v,y)}]}class ee extends t{constructor(t){super(),e(this,t,te,_t,n,{post:0},[-1,-1])}}function ne(t,e,n){const s=t.slice();return s[29]=e[n],s}function se(t){let e,n,o,$,u,p;const w=new ee({props:{post:At}});let D=t[10],b=[];for(let e=0;e<D.length;e+=1)b[e]=de(ne(t,D,e));const E=t=>c(b[t],1,1,()=>{b[t]=null});let H=null;D.length||(H=oe(t));let T=!t[0]&&t[10]&&t[10].length>=ge&&ue(t);return{c(){e=d("div"),s(w.$$.fragment),n=v(),o=d("div"),$=d("div");for(let t=0;t<b.length;t+=1)b[t].c();H&&H.c(),u=v(),T&&T.c(),this.h()},l(t){e=m(t,"DIV",{class:!0});var s=f(e);a(w.$$.fragment,s),n=I(s),o=m(s,"DIV",{class:!0});var l=f(o);$=m(l,"DIV",{class:!0});var r=f($);for(let t=0;t<b.length;t+=1)b[t].l(r);H&&H.l(r),r.forEach(g),u=I(l),T&&T.l(l),l.forEach(g),s.forEach(g),this.h()},h(){h($,"class","postsContainer svelte-1gwl1di"),h(o,"class","contentContainer svelte-1gwl1di"),h(e,"class","scrollContent")},m(t,s){y(t,e,s),l(w,e,null),A(e,n),A(e,o),A(o,$);for(let t=0;t<b.length;t+=1)b[t].m($,null);H&&H.m($,null),A(o,u),T&&T.m(o,null),p=!0},p(t,e){if(5697&e[0]){let n;for(D=t[10],n=0;n<D.length;n+=1){const s=ne(t,D,n);b[n]?(b[n].p(s,e),r(b[n],1)):(b[n]=de(s),b[n].c(),r(b[n],1),b[n].m($,null))}for(P(),n=D.length;n<b.length;n+=1)E(n);C(),!D.length&&H?H.p(t,e):D.length?H&&(H.d(1),H=null):((H=oe(t)).c(),H.m($,null))}!t[0]&&t[10]&&t[10].length>=ge?T?(T.p(t,e),1025&e[0]&&r(T,1)):((T=ue(t)).c(),r(T,1),T.m(o,null)):T&&(P(),c(T,1,1,()=>{T=null}),C())},i(t){if(!p){r(w.$$.fragment,t);for(let t=0;t<D.length;t+=1)r(b[t]);r(T),p=!0}},o(t){c(w.$$.fragment,t),b=b.filter(Boolean);for(let t=0;t<b.length;t+=1)c(b[t]);c(T),p=!1},d(t){t&&g(e),i(w),Ct(b,t),H&&H.d(),T&&T.d()}}}function ae(t){let e;const n=new Tt({props:{label:K.THREAD.NOT_FOUND}});return{c(){s(n.$$.fragment)},l(t){a(n.$$.fragment,t)},m(t,s){l(n,t,s),e=!0},p:o,i(t){e||(r(n.$$.fragment,t),e=!0)},o(t){c(n.$$.fragment,t),e=!1},d(t){i(n,t)}}}function le(t){let e;const n=new Tt({props:{label:K.LOADING.THREAD}});return{c(){s(n.$$.fragment)},l(t){a(n.$$.fragment,t)},m(t,s){l(n,t,s),e=!0},p:o,i(t){e||(r(n.$$.fragment,t),e=!0)},o(t){c(n.$$.fragment,t),e=!1},d(t){i(n,t)}}}function oe(t){let e,n,s,a;const l=[ce,re],o=[];function i(t,e){return t[9]?0:t[0]?-1:1}return~(e=i(t))&&(n=o[e]=l[e](t)),{c(){n&&n.c(),s=w()},l(t){n&&n.l(t),s=w()},m(t,n){~e&&o[e].m(t,n),y(t,s,n),a=!0},p(t,a){let $=e;(e=i(t))===$?~e&&o[e].p(t,a):(n&&(P(),c(o[$],1,1,()=>{o[$]=null}),C()),~e?((n=o[e])||(n=o[e]=l[e](t)).c(),r(n,1),n.m(s.parentNode,s)):n=null)},i(t){a||(r(n),a=!0)},o(t){c(n),a=!1},d(t){~e&&o[e].d(t),t&&g(s)}}}function re(t){let e;const n=new Tt({props:{$$slots:{default:[$e]},$$scope:{ctx:t}}});return{c(){s(n.$$.fragment)},l(t){a(n.$$.fragment,t)},m(t,s){l(n,t,s),e=!0},p(t,e){const s={};64&e[0]|2&e[1]&&(s.$$scope={dirty:e,ctx:t}),n.$set(s)},i(t){e||(r(n.$$.fragment,t),e=!0)},o(t){c(n.$$.fragment,t),e=!1},d(t){i(n,t)}}}function ce(t){let e;const n=new Tt({props:{label:K.LOADING.THREAD_ITEMS}});return{c(){s(n.$$.fragment)},l(t){a(n.$$.fragment,t)},m(t,s){l(n,t,s),e=!0},p:o,i(t){e||(r(n.$$.fragment,t),e=!0)},o(t){c(n.$$.fragment,t),e=!1},d(t){i(n,t)}}}function ie(t){let e,n,s,a,l,r;return{c(){e=u("be the first to "),n=d("a"),s=u("Leave a Reply"),this.h()},l(t){e=p(t,"be the first to "),n=m(t,"A",{href:!0});var a=f(n);s=p(a,"Leave a Reply"),a.forEach(g),this.h()},h(){h(n,"href",a=location.href)},m(a,o){y(a,e,o),y(a,n,o),A(n,s),l||(r=b(n,"click",t[26]),l=!0)},p:o,d(t){t&&g(e),t&&g(n),l=!1,r()}}}function $e(t){let e,n,s,a,l=K.THREAD.NO_POSTS+"",o=!t[6]&&ie(t);return{c(){e=u(l),n=d("br"),s=v(),o&&o.c(),a=v()},l(t){e=p(t,l),n=m(t,"BR",{}),s=I(t),o&&o.l(t),a=I(t)},m(t,l){y(t,e,l),y(t,n,l),y(t,s,l),o&&o.m(t,l),y(t,a,l)},p(t,e){t[6]?o&&(o.d(1),o=null):o?o.p(t,e):((o=ie(t)).c(),o.m(a.parentNode,a))},d(t){t&&g(e),t&&g(n),t&&g(s),o&&o.d(t),t&&g(a)}}}function de(t){let e;const n=new Mt({props:{post:t[29],type:"threadPost"}});return{c(){s(n.$$.fragment)},l(t){a(n.$$.fragment,t)},m(t,s){l(n,t,s),e=!0},p(t,e){const s={};1024&e[0]&&(s.post=t[29]),n.$set(s)},i(t){e||(r(n.$$.fragment,t),e=!0)},o(t){c(n.$$.fragment,t),e=!1},d(t){i(n,t)}}}function ue(t){let e;const n=new Lt({props:{onClick:t[12],icon:Wt,label:K.THREAD.REPLY}});return{c(){s(n.$$.fragment)},l(t){a(n.$$.fragment,t)},m(t,s){l(n,t,s),e=!0},p:o,i(t){e||(r(n.$$.fragment,t),e=!0)},o(t){c(n.$$.fragment,t),e=!1},d(t){i(n,t)}}}function me(t){let e,n,s,a;const l=[le,ae,se],o=[];function i(t,e){return t[7]?0:t[8]&&t[8].id?2:1}return e=i(t),n=o[e]=l[e](t),{c(){n.c(),s=w()},l(t){n.l(t),s=w()},m(t,n){o[e].m(t,n),y(t,s,n),a=!0},p(t,a){let $=e;(e=i(t))===$?o[e].p(t,a):(P(),c(o[$],1,1,()=>{o[$]=null}),C(),(n=o[e])||(n=o[e]=l[e](t)).c(),r(n,1),n.m(s.parentNode,s))},i(t){a||(r(n),a=!0)},o(t){c(n),a=!1},d(t){o[e].d(t),t&&g(s)}}}function fe(t){let e,n;function o(e){t[28].call(null,e)}let $={inlineComponent:!0};void 0!==t[4]&&($.element=t[4]);const d=new Ft({props:$});return pt.push(()=>gt(d,"element",o)),d.$on("hide",t[13]),d.$on("resize",t[14]),{c(){s(d.$$.fragment)},l(t){a(d.$$.fragment,t)},m(t,e){l(d,t,e),n=!0},p(t,n){const s={};!e&&16&n[0]&&(e=!0,s.element=t[4],ht(()=>e=!1)),d.$set(s)},i(t){n||(r(d.$$.fragment,t),n=!0)},o(t){c(d.$$.fragment,t),n=!1},d(t){i(d,t)}}}function pe(t){let e,n,o,$,u,p;function w(e){t[27].call(null,e)}document.title=e=t[5]+"Flock";let b={id:"thread",anchorToBottom:t[11],bottomOffset:t[3],disabledMinHeight:t[0],$$slots:{default:[me]},$$scope:{ctx:t}};void 0!==t[2]&&(b.scrollRegion=t[2]);const E=new Ht({props:b});pt.push(()=>gt(E,"scrollRegion",w));let H=t[0]&&fe(t);return{c(){n=v(),o=d("div"),s(E.$$.fragment),u=v(),H&&H.c(),this.h()},l(t){lt('[data-svelte="svelte-pjz2s7"]',document.head).forEach(g),n=I(t),o=m(t,"DIV",{class:!0});var e=f(o);a(E.$$.fragment,e),u=I(e),H&&H.l(e),e.forEach(g),this.h()},h(){h(o,"class","content svelte-1gwl1di"),D(o,"showAddPost",t[0])},m(t,e){y(t,n,e),y(t,o,e),l(E,o,null),A(o,u),H&&H.m(o,null),p=!0},p(t,n){(!p||32&n[0])&&e!==(e=t[5]+"Flock")&&(document.title=e);const s={};2048&n[0]&&(s.anchorToBottom=t[11]),8&n[0]&&(s.bottomOffset=t[3]),1&n[0]&&(s.disabledMinHeight=t[0]),1985&n[0]|2&n[1]&&(s.$$scope={dirty:n,ctx:t}),!$&&4&n[0]&&($=!0,s.scrollRegion=t[2],ht(()=>$=!1)),E.$set(s),t[0]?H?(H.p(t,n),1&n[0]&&r(H,1)):((H=fe(t)).c(),r(H,1),H.m(o,null)):H&&(P(),c(H,1,1,()=>{H=null}),C()),1&n[0]&&D(o,"showAddPost",t[0])},i(t){p||(r(E.$$.fragment,t),r(H),p=!0)},o(t){c(E.$$.fragment,t),c(H),p=!1},d(t){t&&g(n),t&&g(o),i(E),H&&H.d()}}}const ge=3;function he(t,e,n){let s,a,l,r,c,i,$,d,u,m,f=o,p=()=>(f(),f=V(h,t=>n(10,u=t)),h);T(t,L,t=>n(17,s=t)),T(t,yt,t=>n(18,a=t)),T(t,At,t=>n(8,l=t)),T(t,vt,t=>n(19,r=t)),T(t,N,t=>n(20,c=t)),T(t,M,t=>n(21,i=t)),T(t,wt,t=>n(22,$=t)),T(t,It,t=>n(23,d=t)),T(t,Dt,t=>n(11,m=t)),t.$$.on_destroy.push(()=>f());let g=!1;ot.on("newThreadPost",A),rt(),ct();let h=U([]);function y(){q()&&J()}function A(){n(0,g=!0)}p();let v,w,I=null,D=0,b=null;async function E(){await W(),n(3,D=g&&b&&b.offsetHeight||0),0!==D&&P()}async function P(){I&&(await W(),"undefined"!=typeof window&&(window.setTimeout(()=>{I&&I.scrollTo(0,I.scrollHeight)},250),window.setTimeout(()=>{I&&I.scrollTo(0,I.scrollHeight)},500)),I&&I.scrollTo(0,I.scrollHeight))}it(()=>{v=bt({postId:r}),w=bt({threadId:r},O.REPLY_VIEWED_DELAY)}),$t(()=>{Et(v),Et(w)});let C,H,S,R;return t.$$.update=(()=>{131072&t.$$.dirty[0]&&n(5,C=s&&s.title&&s.title+" - "||""),131072&t.$$.dirty[0]&&n(6,H=s&&s.archived||!1),16646400&t.$$.dirty[0]&&n(7,S=a&&(!l||l.id!==r)||!dt(c,i,$)||!s&&d),263168&t.$$.dirty[0]&&n(9,R=a&&(!u||!u.length)),3588&t.$$.dirty[0]&&m&&I&&!R&&u&&(async()=>{await W(),P()})(),524288&t.$$.dirty[0]&&p(n(1,h=ut({threadId:r,type:"threadPost"}))),256&t.$$.dirty[0]&&mt(l),1024&t.$$.dirty[0]&&ft(u),1&t.$$.dirty[0]&&E()}),[g,h,I,D,b,C,H,S,l,R,u,m,y,function(){n(0,g=!1)},E,v,w,s,a,r,c,i,$,d,A,P,t=>(y(),Pt(t)),function(t){n(2,I=t)},function(t){n(4,b=t)}]}export default class extends t{constructor(t){super(),e(this,t,he,pe,n,{},[-1,-1])}}
