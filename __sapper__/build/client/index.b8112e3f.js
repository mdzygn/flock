import{S as t,i as s,s as e,a1 as a,q as n,r,u as l,d as o,v as c,b as i,C as $,z as f,R as d,D as u,A as h,T as m,E as v,x as p,l as g,U as y,t as I,c as E,F as j,J as N,a3 as b,Y as V,ak as w,bt as D,Z as S,bu as A,_ as C,$ as O,b0 as x,K as R,ba as L,ai as T,L as _,I as k,bv as P,a4 as B,a5 as H,bw as M,a7 as F,a8 as G,a9 as q,e as z,ab as J,V as K,H as U}from"./client.b937c12a.js";import{S as W}from"./Proxy.9d528d01.js";import"./Hotspot.02fef027.js";import"./ContentPanel.40fdf81b.js";import{C as X}from"./ContentLoader.83142d4b.js";function Y(t){let s;return{c(){s=n("div"),this.h()},l(t){s=r(t,"DIV",{class:!0}),l(s).forEach(o),this.h()},h(){c(s,"class","unseenIcon svelte-7jfayp")},m(t,e){i(t,s,e)},d(t){t&&o(s)}}}function Z(t){let s,e,N,b,V,w,D,S,A,C,O,R,L,T,_,k;const P=new a({props:{user:t[4],useThumb:!0}});let B=!t[2]&&Y();return{c(){s=n("div"),$(P.$$.fragment),e=f(),N=n("div"),b=n("div"),V=n("div"),w=d(t[5]),D=f(),S=n("div"),C=n("span"),O=d(t[3]),R=f(),L=n("div"),B&&B.c(),this.h()},l(a){s=r(a,"DIV",{class:!0});var n=l(s);u(P.$$.fragment,n),e=h(n),N=r(n,"DIV",{class:!0});var c=l(N);b=r(c,"DIV",{class:!0});var i=l(b);V=r(i,"DIV",{class:!0});var $=l(V);w=m($,t[5]),$.forEach(o),D=h(i),S=r(i,"DIV",{class:!0});var f=l(S);C=r(f,"SPAN",{class:!0});var d=l(C);O=m(d,t[3]),d.forEach(o),f.forEach(o),i.forEach(o),c.forEach(o),R=h(n),L=r(n,"DIV",{class:!0});var v=l(L);B&&B.l(v),v.forEach(o),n.forEach(o),this.h()},h(){c(V,"class","title svelte-7jfayp"),A=new x(C),c(C,"class","dateString svelte-7jfayp"),c(S,"class","message svelte-7jfayp"),c(b,"class","detailInnerContent svelte-7jfayp"),c(N,"class","detailContent svelte-7jfayp"),c(L,"class","info svelte-7jfayp"),c(s,"class","conversationListItem svelte-7jfayp")},m(a,n){i(a,s,n),v(P,s,null),p(s,e),p(s,N),p(N,b),p(b,V),p(V,w),p(b,D),p(b,S),A.m(t[1],S),p(S,C),p(C,O),p(s,R),p(s,L),B&&B.m(L,null),T=!0,_||(k=g(s,"click",t[6]),_=!0)},p(t,[s]){const e={};16&s&&(e.user=t[4]),P.$set(e),(!T||32&s)&&y(w,t[5]),(!T||2&s)&&A.p(t[1]),(!T||8&s)&&y(O,t[3]),t[2]?B&&(B.d(1),B=null):B||((B=Y()).c(),B.m(L,null))},i(t){T||(I(P.$$.fragment,t),T=!0)},o(t){E(P.$$.fragment,t),T=!1},d(t){t&&o(s),j(P),B&&B.d(),_=!1,k()}}}function Q(t,s,e){let a,n,r,l=R,o=()=>(l(),l=V(k,t=>e(8,a=t)),k),c=R;N(t,b,t=>e(13,n=t)),t.$$.on_destroy.push(()=>l()),t.$$.on_destroy.push(()=>c());let i,$,f,d,u,h,m,v,p,g,y,I,E,j,x,_,{conversation:k}=s;return o(),t.$set=(t=>{"conversation"in t&&o(e(0,k=t.conversation))}),t.$$.update=(()=>{256&t.$$.dirty&&e(7,i=a&&a.title||""),256&t.$$.dirty&&e(9,$=a&&a.lastSenderId||null),256&t.$$.dirty&&e(10,f=a&&a.lastMessageText||""),1024&t.$$.dirty&&e(11,d=f&&w(f,{disallowLinks:!0,collapseBreaks:!0})),10752&t.$$.dirty&&e(12,u=d&&($===n?"you: "+d:d)),4096&t.$$.dirty&&e(14,h=u&&D(u,T.CONVERSATION_MAX_PREVIEW_LENGTH)),16384&t.$$.dirty&&e(1,m=h||"(image)"),256&t.$$.dirty&&(v=a&&a.id||null),256&t.$$.dirty&&(p=a&&a.projectId||null),256&t.$$.dirty&&e(2,g=!a||a.viewed),256&t.$$.dirty&&e(17,y=a&&a.lastMessageAt||null),131072&t.$$.dirty&&e(3,I=y&&" - "+S(y)||""),256&t.$$.dirty&&e(18,E=a&&A(a)||null),393216&t.$$.dirty&&(()=>(c(),c=V(j,t=>e(20,r=t)),j))(e(4,j=E&&y&&C(E,y)||O(null))),1310720&t.$$.dirty&&e(19,x=r&&r.name||E&&E.name||""),524416&t.$$.dirty&&e(5,_=i||x||"")}),[k,m,g,I,j,_,function(){v&&L(v)}]}class tt extends t{constructor(t){super(),s(this,t,Q,Z,e,{conversation:0})}}function st(t,s,e){const a=t.slice();return a[9]=s[e],a}function et(t){let s,e,a,$,u,v,y,I,E,j,N,b,V,w,D=K.CONVERSATIONS.NO_CONVERSATIONS+"";return{c(){s=n("div"),e=d(D),a=n("br"),$=n("br"),u=f(),v=n("a"),y=d("Discover"),I=d(" inspiring projects to get involved with"),E=n("br"),j=d("or create a "),N=n("a"),b=d("New Project"),this.h()},l(t){s=r(t,"DIV",{class:!0});var n=l(s);e=m(n,D),a=r(n,"BR",{}),$=r(n,"BR",{}),u=h(n),v=r(n,"A",{href:!0});var c=l(v);y=m(c,"Discover"),c.forEach(o),I=m(n," inspiring projects to get involved with"),E=r(n,"BR",{}),j=m(n,"or create a "),N=r(n,"A",{href:!0});var i=l(N);b=m(i,"New Project"),i.forEach(o),n.forEach(o),this.h()},h(){c(v,"href","discover"),c(N,"href","/projects/new"),c(s,"class","noConversations svelte-pui8gu")},m(n,r){i(n,s,r),p(s,e),p(s,a),p(s,$),p(s,u),p(s,v),p(v,y),p(s,I),p(s,E),p(s,j),p(s,N),p(N,b),V||(w=g(N,"click",t[8]),V=!0)},p:R,i:R,o:R,d(t){t&&o(s),V=!1,w()}}}function at(t){let s,e,a=t[3],n=[];for(let s=0;s<a.length;s+=1)n[s]=rt(st(t,a,s));const r=t=>E(n[t],1,1,()=>{n[t]=null});return{c(){for(let t=0;t<n.length;t+=1)n[t].c();s=z()},l(t){for(let s=0;s<n.length;s+=1)n[s].l(t);s=z()},m(t,a){for(let s=0;s<n.length;s+=1)n[s].m(t,a);i(t,s,a),e=!0},p(t,e){if(8&e){let l;for(a=t[3],l=0;l<a.length;l+=1){const r=st(t,a,l);n[l]?(n[l].p(r,e),I(n[l],1)):(n[l]=rt(r),n[l].c(),I(n[l],1),n[l].m(s.parentNode,s))}for(_(),l=a.length;l<n.length;l+=1)r(l);k()}},i(t){if(!e){for(let t=0;t<a.length;t+=1)I(n[t]);e=!0}},o(t){n=n.filter(Boolean);for(let t=0;t<n.length;t+=1)E(n[t]);e=!1},d(t){J(n,t),t&&o(s)}}}function nt(t){let s;const e=new X({props:{label:K.LOADING.CONVERSATIONS}});return{c(){$(e.$$.fragment)},l(t){u(e.$$.fragment,t)},m(t,a){v(e,t,a),s=!0},p:R,i(t){s||(I(e.$$.fragment,t),s=!0)},o(t){E(e.$$.fragment,t),s=!1},d(t){j(e,t)}}}function rt(t){let s;const e=new tt({props:{conversation:t[9]}});return{c(){$(e.$$.fragment)},l(t){u(e.$$.fragment,t)},m(t,a){v(e,t,a),s=!0},p(t,s){const a={};8&s&&(a.conversation=t[9]),e.$set(a)},i(t){s||(I(e.$$.fragment,t),s=!0)},o(t){E(e.$$.fragment,t),s=!1},d(t){j(e,t)}}}function lt(t){let s,e,a,$,f,d;const u=[nt,at,et],h=[];function m(t,s){return 116&s&&(e=!(!t[2]&&F(t[5],t[4],t[6]))),e?0:t[3]&&t[3].length?1:2}return a=m(t,-1),$=h[a]=u[a](t),{c(){s=n("div"),$.c(),this.h()},l(t){s=r(t,"DIV",{class:!0});var e=l(s);$.l(e),e.forEach(o),this.h()},h(){c(s,"class",f="conversationList "+t[0]+" svelte-pui8gu")},m(t,e){i(t,s,e),h[a].m(s,null),d=!0},p(t,[e]){let n=a;(a=m(t,e))===n?h[a].p(t,e):(_(),E(h[n],1,1,()=>{h[n]=null}),k(),($=h[a])||($=h[a]=u[a](t)).c(),I($,1),$.m(s,null)),(!d||1&e&&f!==(f="conversationList "+t[0]+" svelte-pui8gu"))&&c(s,"class",f)},i(t){d||(I($),d=!0)},o(t){E($),d=!1},d(t){t&&o(s),h[a].d()}}}function ot(t,s,e){let a,n,r,l,o,c=R,i=()=>(c(),c=V($,t=>e(3,n=t)),$);N(t,P,t=>e(7,a=t)),N(t,b,t=>e(4,r=t)),N(t,B,t=>e(5,l=t)),N(t,H,t=>e(6,o=t)),t.$$.on_destroy.push(()=>c());let $=O(null);i();let{className:f=""}=s;let d;return t.$set=(t=>{"className"in t&&e(0,f=t.className)}),t.$$.update=(()=>{136&t.$$.dirty&&e(2,d=a&&!n),16&t.$$.dirty&&i(e(1,$=M({userId:r})))}),[f,$,d,n,r,l,o,a,t=>(G(),q(t))]}class ct extends t{constructor(t){super(),s(this,t,ot,lt,e,{className:0})}}function it(t){let s;const e=new ct({});return{c(){$(e.$$.fragment)},l(t){u(e.$$.fragment,t)},m(t,a){v(e,t,a),s=!0},i(t){s||(I(e.$$.fragment,t),s=!0)},o(t){E(e.$$.fragment,t),s=!1},d(t){j(e,t)}}}function $t(t){let s,e,a;const d=new W({props:{id:"messages",$$slots:{default:[it]},$$scope:{ctx:t}}});return{c(){s=f(),e=n("div"),$(d.$$.fragment),this.h()},l(t){U('[data-svelte="svelte-1y4v7mn"]',document.head).forEach(o),s=h(t),e=r(t,"DIV",{class:!0});var a=l(e);u(d.$$.fragment,a),a.forEach(o),this.h()},h(){document.title="Flock",c(e,"class","content")},m(t,n){i(t,s,n),i(t,e,n),v(d,e,null),a=!0},p(t,[s]){const e={};1&s&&(e.$$scope={dirty:s,ctx:t}),d.$set(e)},i(t){a||(I(d.$$.fragment,t),a=!0)},o(t){E(d.$$.fragment,t),a=!1},d(t){t&&o(s),t&&o(e),j(d)}}}export default class extends t{constructor(t){super(),s(this,t,null,$t,e,{})}}
